var _b=Object.defineProperty;var $b=(e,t,r)=>t in e?_b(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var xr=(e,t,r)=>$b(e,typeof t!="symbol"?t+"":t,r);import{r as k,a as Cb,g as Oe,R as P,u as Ut,b as ga,L as qt,c as Mb,d as es,e as Db,N as Bl,f as Ib,h as ct,B as Rb}from"./vendor-BAIUuekc.js";import{i as Lb,g as Bb,a as Fb,b as Ub,s as Nn,d as pe,c as be,T as Ke,e as Zt,u as Qe,q as ye,f as le,w as me,h as ge,o as Xe,j as Do,k as Io,l as Tt,m as Ro,n as Lo,r as ly,p as Vb,t as Hb,x as zb,y as qb,E as Wb,A as Kb,B as Yb,C as Nc,D as Pf,F as Gb,G as Xb,H as Qb,I as Zb,J as kc,K as Ef,L as Jb,M as Tf}from"./firebase-CDiKP6om.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(i){if(i.ep)return;i.ep=!0;const s=r(i);fetch(i.href,s)}})();var cy={exports:{}},Bo={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ew=k,tw=Symbol.for("react.element"),rw=Symbol.for("react.fragment"),nw=Object.prototype.hasOwnProperty,aw=ew.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,iw={key:!0,ref:!0,__self:!0,__source:!0};function uy(e,t,r){var n,i={},s=null,o=null;r!==void 0&&(s=""+r),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)nw.call(t,n)&&!iw.hasOwnProperty(n)&&(i[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)i[n]===void 0&&(i[n]=t[n]);return{$$typeof:tw,type:e,key:s,ref:o,props:i,_owner:aw.current}}Bo.Fragment=rw;Bo.jsx=uy;Bo.jsxs=uy;cy.exports=Bo;var a=cy.exports,dy,_f=Cb;dy=_f.createRoot,_f.hydrateRoot;var sw=typeof Element<"u",ow=typeof Map=="function",lw=typeof Set=="function",cw=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function xs(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,n,i;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(!xs(e[n],t[n]))return!1;return!0}var s;if(ow&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!t.has(n.value[0]))return!1;for(s=e.entries();!(n=s.next()).done;)if(!xs(n.value[1],t.get(n.value[0])))return!1;return!0}if(lw&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(s=e.entries();!(n=s.next()).done;)if(!t.has(n.value[0]))return!1;return!0}if(cw&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(n=r;n--!==0;)if(e[n]!==t[n])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[n]))return!1;if(sw&&e instanceof Element)return!1;for(n=r;n--!==0;)if(!((i[n]==="_owner"||i[n]==="__v"||i[n]==="__o")&&e.$$typeof)&&!xs(e[i[n]],t[i[n]]))return!1;return!0}return e!==e&&t!==t}var uw=function(t,r){try{return xs(t,r)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}};const dw=Oe(uw);var fw=function(e,t,r,n,i,s,o,l){if(!e){var c;if(t===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[r,n,i,s,o,l],d=0;c=new Error(t.replace(/%s/g,function(){return u[d++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},mw=fw;const $f=Oe(mw);var hw=function(t,r,n,i){var s=n?n.call(i,t,r):void 0;if(s!==void 0)return!!s;if(t===r)return!0;if(typeof t!="object"||!t||typeof r!="object"||!r)return!1;var o=Object.keys(t),l=Object.keys(r);if(o.length!==l.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(r),u=0;u<o.length;u++){var d=o[u];if(!c(d))return!1;var f=t[d],m=r[d];if(s=n?n.call(i,f,m,d):void 0,s===!1||s===void 0&&f!==m)return!1}return!0};const pw=Oe(hw);var fy=(e=>(e.BASE="base",e.BODY="body",e.HEAD="head",e.HTML="html",e.LINK="link",e.META="meta",e.NOSCRIPT="noscript",e.SCRIPT="script",e.STYLE="style",e.TITLE="title",e.FRAGMENT="Symbol(react.fragment)",e))(fy||{}),Fl={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},Cf=Object.values(fy),dd={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},vw=Object.entries(dd).reduce((e,[t,r])=>(e[r]=t,e),{}),Qt="data-rh",Fn={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Un=(e,t)=>{for(let r=e.length-1;r>=0;r-=1){const n=e[r];if(Object.prototype.hasOwnProperty.call(n,t))return n[t]}return null},yw=e=>{let t=Un(e,"title");const r=Un(e,Fn.TITLE_TEMPLATE);if(Array.isArray(t)&&(t=t.join("")),r&&t)return r.replace(/%s/g,()=>t);const n=Un(e,Fn.DEFAULT_TITLE);return t||n||void 0},xw=e=>Un(e,Fn.ON_CHANGE_CLIENT_STATE)||(()=>{}),Ul=(e,t)=>t.filter(r=>typeof r[e]<"u").map(r=>r[e]).reduce((r,n)=>({...r,...n}),{}),gw=(e,t)=>t.filter(r=>typeof r.base<"u").map(r=>r.base).reverse().reduce((r,n)=>{if(!r.length){const i=Object.keys(n);for(let s=0;s<i.length;s+=1){const l=i[s].toLowerCase();if(e.indexOf(l)!==-1&&n[l])return r.concat(n)}}return r},[]),bw=e=>console&&typeof console.warn=="function"&&console.warn(e),Da=(e,t,r)=>{const n={};return r.filter(i=>Array.isArray(i[e])?!0:(typeof i[e]<"u"&&bw(`Helmet: ${e} should be of type "Array". Instead found type "${typeof i[e]}"`),!1)).map(i=>i[e]).reverse().reduce((i,s)=>{const o={};s.filter(c=>{let u;const d=Object.keys(c);for(let m=0;m<d.length;m+=1){const v=d[m],y=v.toLowerCase();t.indexOf(y)!==-1&&!(u==="rel"&&c[u].toLowerCase()==="canonical")&&!(y==="rel"&&c[y].toLowerCase()==="stylesheet")&&(u=y),t.indexOf(v)!==-1&&(v==="innerHTML"||v==="cssText"||v==="itemprop")&&(u=v)}if(!u||!c[u])return!1;const f=c[u].toLowerCase();return n[u]||(n[u]={}),o[u]||(o[u]={}),n[u][f]?!1:(o[u][f]=!0,!0)}).reverse().forEach(c=>i.push(c));const l=Object.keys(o);for(let c=0;c<l.length;c+=1){const u=l[c],d={...n[u],...o[u]};n[u]=d}return i},[]).reverse()},ww=(e,t)=>{if(Array.isArray(e)&&e.length){for(let r=0;r<e.length;r+=1)if(e[r][t])return!0}return!1},jw=e=>({baseTag:gw(["href"],e),bodyAttributes:Ul("bodyAttributes",e),defer:Un(e,Fn.DEFER),encode:Un(e,Fn.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Ul("htmlAttributes",e),linkTags:Da("link",["rel","href"],e),metaTags:Da("meta",["name","charset","http-equiv","property","itemprop"],e),noscriptTags:Da("noscript",["innerHTML"],e),onChangeClientState:xw(e),scriptTags:Da("script",["src","innerHTML"],e),styleTags:Da("style",["cssText"],e),title:yw(e),titleAttributes:Ul("titleAttributes",e),prioritizeSeoTags:ww(e,Fn.PRIORITIZE_SEO_TAGS)}),my=e=>Array.isArray(e)?e.join(""):e,Nw=(e,t)=>{const r=Object.keys(e);for(let n=0;n<r.length;n+=1)if(t[r[n]]&&t[r[n]].includes(e[r[n]]))return!0;return!1},Vl=(e,t)=>Array.isArray(e)?e.reduce((r,n)=>(Nw(n,t)?r.priority.push(n):r.default.push(n),r),{priority:[],default:[]}):{default:e,priority:[]},Mf=(e,t)=>({...e,[t]:void 0}),kw=["noscript","script","style"],Sc=(e,t=!0)=>t===!1?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),hy=e=>Object.keys(e).reduce((t,r)=>{const n=typeof e[r]<"u"?`${r}="${e[r]}"`:`${r}`;return t?`${t} ${n}`:n},""),Sw=(e,t,r,n)=>{const i=hy(r),s=my(t);return i?`<${e} ${Qt}="true" ${i}>${Sc(s,n)}</${e}>`:`<${e} ${Qt}="true">${Sc(s,n)}</${e}>`},Ow=(e,t,r=!0)=>t.reduce((n,i)=>{const s=i,o=Object.keys(s).filter(u=>!(u==="innerHTML"||u==="cssText")).reduce((u,d)=>{const f=typeof s[d]>"u"?d:`${d}="${Sc(s[d],r)}"`;return u?`${u} ${f}`:f},""),l=s.innerHTML||s.cssText||"",c=kw.indexOf(e)===-1;return`${n}<${e} ${Qt}="true" ${o}${c?"/>":`>${l}</${e}>`}`},""),py=(e,t={})=>Object.keys(e).reduce((r,n)=>{const i=dd[n];return r[i||n]=e[n],r},t),Aw=(e,t,r)=>{const n={key:t,[Qt]:!0},i=py(r,n);return[P.createElement("title",i,t)]},gs=(e,t)=>t.map((r,n)=>{const i={key:n,[Qt]:!0};return Object.keys(r).forEach(s=>{const l=dd[s]||s;if(l==="innerHTML"||l==="cssText"){const c=r.innerHTML||r.cssText;i.dangerouslySetInnerHTML={__html:c}}else i[l]=r[s]}),P.createElement(e,i)}),Rt=(e,t,r=!0)=>{switch(e){case"title":return{toComponent:()=>Aw(e,t.title,t.titleAttributes),toString:()=>Sw(e,t.title,t.titleAttributes,r)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>py(t),toString:()=>hy(t)};default:return{toComponent:()=>gs(e,t),toString:()=>Ow(e,t,r)}}},Pw=({metaTags:e,linkTags:t,scriptTags:r,encode:n})=>{const i=Vl(e,Fl.meta),s=Vl(t,Fl.link),o=Vl(r,Fl.script);return{priorityMethods:{toComponent:()=>[...gs("meta",i.priority),...gs("link",s.priority),...gs("script",o.priority)],toString:()=>`${Rt("meta",i.priority,n)} ${Rt("link",s.priority,n)} ${Rt("script",o.priority,n)}`},metaTags:i.default,linkTags:s.default,scriptTags:o.default}},Ew=e=>{const{baseTag:t,bodyAttributes:r,encode:n=!0,htmlAttributes:i,noscriptTags:s,styleTags:o,title:l="",titleAttributes:c,prioritizeSeoTags:u}=e;let{linkTags:d,metaTags:f,scriptTags:m}=e,v={toComponent:()=>{},toString:()=>""};return u&&({priorityMethods:v,linkTags:d,metaTags:f,scriptTags:m}=Pw(e)),{priority:v,base:Rt("base",t,n),bodyAttributes:Rt("bodyAttributes",r,n),htmlAttributes:Rt("htmlAttributes",i,n),link:Rt("link",d,n),meta:Rt("meta",f,n),noscript:Rt("noscript",s,n),script:Rt("script",m,n),style:Rt("style",o,n),title:Rt("title",{title:l,titleAttributes:c},n)}},Oc=Ew,ts=[],vy=!!(typeof window<"u"&&window.document&&window.document.createElement),Ac=class{constructor(e,t){xr(this,"instances",[]);xr(this,"canUseDOM",vy);xr(this,"context");xr(this,"value",{setHelmet:e=>{this.context.helmet=e},helmetInstances:{get:()=>this.canUseDOM?ts:this.instances,add:e=>{(this.canUseDOM?ts:this.instances).push(e)},remove:e=>{const t=(this.canUseDOM?ts:this.instances).indexOf(e);(this.canUseDOM?ts:this.instances).splice(t,1)}}});this.context=e,this.canUseDOM=t||!1,t||(e.helmet=Oc({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Tw={},yy=P.createContext(Tw),un,xy=(un=class extends k.Component{constructor(r){super(r);xr(this,"helmetData");this.helmetData=new Ac(this.props.context||{},un.canUseDOM)}render(){return P.createElement(yy.Provider,{value:this.helmetData.value},this.props.children)}},xr(un,"canUseDOM",vy),un),Pn=(e,t)=>{const r=document.head||document.querySelector("head"),n=r.querySelectorAll(`${e}[${Qt}]`),i=[].slice.call(n),s=[];let o;return t&&t.length&&t.forEach(l=>{const c=document.createElement(e);for(const u in l)if(Object.prototype.hasOwnProperty.call(l,u))if(u==="innerHTML")c.innerHTML=l.innerHTML;else if(u==="cssText")c.styleSheet?c.styleSheet.cssText=l.cssText:c.appendChild(document.createTextNode(l.cssText));else{const d=u,f=typeof l[d]>"u"?"":l[d];c.setAttribute(u,f)}c.setAttribute(Qt,"true"),i.some((u,d)=>(o=d,c.isEqualNode(u)))?i.splice(o,1):s.push(c)}),i.forEach(l=>{var c;return(c=l.parentNode)==null?void 0:c.removeChild(l)}),s.forEach(l=>r.appendChild(l)),{oldTags:i,newTags:s}},Pc=(e,t)=>{const r=document.getElementsByTagName(e)[0];if(!r)return;const n=r.getAttribute(Qt),i=n?n.split(","):[],s=[...i],o=Object.keys(t);for(const l of o){const c=t[l]||"";r.getAttribute(l)!==c&&r.setAttribute(l,c),i.indexOf(l)===-1&&i.push(l);const u=s.indexOf(l);u!==-1&&s.splice(u,1)}for(let l=s.length-1;l>=0;l-=1)r.removeAttribute(s[l]);i.length===s.length?r.removeAttribute(Qt):r.getAttribute(Qt)!==o.join(",")&&r.setAttribute(Qt,o.join(","))},_w=(e,t)=>{typeof e<"u"&&document.title!==e&&(document.title=my(e)),Pc("title",t)},Df=(e,t)=>{const{baseTag:r,bodyAttributes:n,htmlAttributes:i,linkTags:s,metaTags:o,noscriptTags:l,onChangeClientState:c,scriptTags:u,styleTags:d,title:f,titleAttributes:m}=e;Pc("body",n),Pc("html",i),_w(f,m);const v={baseTag:Pn("base",r),linkTags:Pn("link",s),metaTags:Pn("meta",o),noscriptTags:Pn("noscript",l),scriptTags:Pn("script",u),styleTags:Pn("style",d)},y={},p={};Object.keys(v).forEach(x=>{const{newTags:j,oldTags:N}=v[x];j.length&&(y[x]=j),N.length&&(p[x]=v[x].oldTags)}),t&&t(),c(e,y,p)},Ia=null,$w=e=>{Ia&&cancelAnimationFrame(Ia),e.defer?Ia=requestAnimationFrame(()=>{Df(e,()=>{Ia=null})}):(Df(e),Ia=null)},Cw=$w,If=class extends k.Component{constructor(){super(...arguments);xr(this,"rendered",!1)}shouldComponentUpdate(t){return!pw(t,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:t}=this.props.context;t.remove(this),this.emitChange()}emitChange(){const{helmetInstances:t,setHelmet:r}=this.props.context;let n=null;const i=jw(t.get().map(s=>{const o={...s.props};return delete o.context,o}));xy.canUseDOM?Cw(i):Oc&&(n=Oc(i)),r(n)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:t}=this.props.context;t.add(this),this.emitChange()}render(){return this.init(),null}},jc,Mw=(jc=class extends k.Component{shouldComponentUpdate(e){return!dw(Mf(this.props,"helmetData"),Mf(e,"helmetData"))}mapNestedChildrenToProps(e,t){if(!t)return null;switch(e.type){case"script":case"noscript":return{innerHTML:t};case"style":return{cssText:t};default:throw new Error(`<${e.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(e,t,r,n){return{...t,[e.type]:[...t[e.type]||[],{...r,...this.mapNestedChildrenToProps(e,n)}]}}mapObjectTypeChildren(e,t,r,n){switch(e.type){case"title":return{...t,[e.type]:n,titleAttributes:{...r}};case"body":return{...t,bodyAttributes:{...r}};case"html":return{...t,htmlAttributes:{...r}};default:return{...t,[e.type]:{...r}}}}mapArrayTypeChildrenToProps(e,t){let r={...t};return Object.keys(e).forEach(n=>{r={...r,[n]:e[n]}}),r}warnOnInvalidChildren(e,t){return $f(Cf.some(r=>e.type===r),typeof e.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Cf.join(", ")} are allowed. Helmet does not support rendering <${e.type}> elements. Refer to our API for more information.`),$f(!t||typeof t=="string"||Array.isArray(t)&&!t.some(r=>typeof r!="string"),`Helmet expects a string as a child of <${e.type}>. Did you forget to wrap your children in braces? ( <${e.type}>{\`\`}</${e.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(e,t){let r={};return P.Children.forEach(e,n=>{if(!n||!n.props)return;const{children:i,...s}=n.props,o=Object.keys(s).reduce((c,u)=>(c[vw[u]||u]=s[u],c),{});let{type:l}=n;switch(typeof l=="symbol"?l=l.toString():this.warnOnInvalidChildren(n,i),l){case"Symbol(react.fragment)":t=this.mapChildrenToProps(i,t);break;case"link":case"meta":case"noscript":case"script":case"style":r=this.flattenArrayTypeChildren(n,r,o,i);break;default:t=this.mapObjectTypeChildren(n,t,o,i);break}}),this.mapArrayTypeChildrenToProps(r,t)}render(){const{children:e,...t}=this.props;let r={...t},{helmetData:n}=t;if(e&&(r=this.mapChildrenToProps(e,r)),n&&!(n instanceof Ac)){const i=n;n=new Ac(i.context,!0),delete r.helmetData}return n?P.createElement(If,{...r,context:n.value}):P.createElement(yy.Consumer,null,i=>P.createElement(If,{...r,context:i}))}},xr(jc,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),jc);const gy={apiKey:"AIzaSyBcAsupGNfgh1JUg2VPJ31DUVK8KNDOVjo",authDomain:"bilo.fi",projectId:"b2c-car-4c084",storageBucket:"b2c-car-4c084.firebasestorage.app",messagingSenderId:"702189199418",appId:"1:702189199418:web:3d3773bf1d033b602cd503"};gy.authDomain="bilo.fi";const fd=Lb(gy),Gt=Bb(fd),W=Fb(fd);Gt.languageCode="fi";const Rf=Ub(fd),ae={USERS:"users",SERVICES:"services",SERVICE_CATEGORIES:"service_categories",APPOINTMENTS:"appointments",VENDORS:"vendors",FEEDBACK:"feedback",OFFERS:"offers",SUPPORT_TICKETS:"support_tickets",AUTH_TOKENS:"auth_tokens",AUDIT_LOGS:"audit_logs"},Xr=async e=>{try{return await W.collection("audit_logs").add({...e,timestamp:new Date,ipAddress:window.location.hostname,userAgent:navigator.userAgent}),!0}catch(t){return console.error("Error creating audit log:",t),!1}};function Dw(e,t,r){const n={"@context":"https://schema.org","@type":["LocalBusiness","CarWash"],"@id":`https://bilo.fi/vendor/${e.id}`,name:e.businessName,description:e.description||void 0,url:`https://bilo.fi/vendor/${e.id}`,telephone:e.phone||void 0,email:e.email||void 0,priceRange:"€€",image:e.logoImage||e.coverImage||void 0,address:{"@type":"PostalAddress",streetAddress:e.address||void 0,addressLocality:e.city||void 0,postalCode:e.postalCode||void 0,addressCountry:"FI"}};e.location&&(n.geo={"@type":"GeoCoordinates",latitude:e.location.lat,longitude:e.location.lng});const i={monday:"Monday",tuesday:"Tuesday",wednesday:"Wednesday",thursday:"Thursday",friday:"Friday",saturday:"Saturday",sunday:"Sunday"},s=Object.entries(e.operatingHours).map(([o,l])=>l.open==="closed"&&l.close==="closed"?null:l.open==="00:00"&&l.close==="23:59"?{"@type":"OpeningHoursSpecification",dayOfWeek:i[o],opens:"00:00",closes:"24:00"}:{"@type":"OpeningHoursSpecification",dayOfWeek:i[o],opens:l.open,closes:l.close}).filter(Boolean);if(s.length>0&&(n.openingHoursSpecification=s),e.rating&&e.ratingCount&&(n.aggregateRating={"@type":"AggregateRating",ratingValue:e.rating,ratingCount:e.ratingCount,bestRating:5,worstRating:1}),t!=null&&t.length&&(n.hasOfferCatalog={"@type":"OfferCatalog",name:"Autopesupalvelut",itemListElement:t.map(o=>{var l;return{"@type":"Service",name:o.name,description:o.description,offers:{"@type":"Offer",price:o.price,priceCurrency:"EUR",availability:o.available?"https://schema.org/InStock":"https://schema.org/OutOfStock",validFrom:(l=o.createdAt)==null?void 0:l.toISOString()}}})}),r!=null&&r.length){const o=r.filter(l=>l.feedback);o.length>0&&(n.review=o.map(l=>({"@type":"Review",reviewRating:{"@type":"Rating",ratingValue:l.feedback.rating,bestRating:5,worstRating:1},author:{"@type":"Person",name:`${l.customerDetails.firstName} ${l.customerDetails.lastName.charAt(0)}.`},datePublished:l.feedback.createdAt.toISOString(),reviewBody:l.feedback.comment})))}return n}function qe(e){const t=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&t==="[object Date]"?new e.constructor(+e):typeof e=="number"||t==="[object Number]"||typeof e=="string"||t==="[object String]"?new Date(e):new Date(NaN)}function Jt(e,t){return e instanceof Date?new e.constructor(t):new Date(t)}function Iw(e,t){const r=qe(e);return isNaN(t)?Jt(e,NaN):(t&&r.setDate(r.getDate()+t),r)}function by(e,t){const r=qe(e);if(isNaN(t))return Jt(e,NaN);if(!t)return r;const n=r.getDate(),i=Jt(e,r.getTime());i.setMonth(r.getMonth()+t+1,0);const s=i.getDate();return n>=s?i:(r.setFullYear(i.getFullYear(),i.getMonth(),n),r)}const wy=6048e5,Rw=864e5;let Lw={};function Fi(){return Lw}function hn(e,t){var l,c,u,d;const r=Fi(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=qe(e),s=i.getDay(),o=(s<n?7:0)+s-n;return i.setDate(i.getDate()-o),i.setHours(0,0,0,0),i}function ks(e){return hn(e,{weekStartsOn:1})}function jy(e){const t=qe(e),r=t.getFullYear(),n=Jt(e,0);n.setFullYear(r+1,0,4),n.setHours(0,0,0,0);const i=ks(n),s=Jt(e,0);s.setFullYear(r,0,4),s.setHours(0,0,0,0);const o=ks(s);return t.getTime()>=i.getTime()?r+1:t.getTime()>=o.getTime()?r:r-1}function ti(e){const t=qe(e);return t.setHours(0,0,0,0),t}function Lf(e){const t=qe(e),r=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return r.setUTCFullYear(t.getFullYear()),+e-+r}function Bw(e,t){const r=ti(e),n=ti(t),i=+r-Lf(r),s=+n-Lf(n);return Math.round((i-s)/Rw)}function Fw(e){const t=jy(e),r=Jt(e,0);return r.setFullYear(t,0,4),r.setHours(0,0,0,0),ks(r)}function Ny(e,t){const r=t*7;return Iw(e,r)}function Uw(e){return Jt(e,Date.now())}function md(e,t){const r=ti(e),n=ti(t);return+r==+n}function Vw(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Hw(e){if(!Vw(e)&&typeof e!="number")return!1;const t=qe(e);return!isNaN(Number(t))}function ky(e){const t=qe(e),r=t.getMonth();return t.setFullYear(t.getFullYear(),r+1,0),t.setHours(23,59,59,999),t}function Sy(e,t){const r=qe(e.start),n=qe(e.end);let i=+r>+n;const s=i?+r:+n,o=i?n:r;o.setHours(0,0,0,0);let l=1;const c=[];for(;+o<=s;)c.push(qe(o)),o.setDate(o.getDate()+l),o.setHours(0,0,0,0);return i?c.reverse():c}function Oy(e){const t=qe(e);return t.setDate(1),t.setHours(0,0,0,0),t}function zw(e){const t=qe(e),r=Jt(e,0);return r.setFullYear(t.getFullYear(),0,1),r.setHours(0,0,0,0),r}function Ay(e,t){var l,c,u,d;const r=Fi(),n=(t==null?void 0:t.weekStartsOn)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.weekStartsOn)??r.weekStartsOn??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.weekStartsOn)??0,i=qe(e),s=i.getDay(),o=(s<n?-7:0)+6-(s-n);return i.setDate(i.getDate()+o),i.setHours(23,59,59,999),i}const qw={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Ww=(e,t,r)=>{let n;const i=qw[e];return typeof i=="string"?n=i:t===1?n=i.one:n=i.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+n:n+" ago":n};function Vn(e){return(t={})=>{const r=t.width?String(t.width):e.defaultWidth;return e.formats[r]||e.formats[e.defaultWidth]}}const Kw={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Yw={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Gw={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Xw={date:Vn({formats:Kw,defaultWidth:"full"}),time:Vn({formats:Yw,defaultWidth:"full"}),dateTime:Vn({formats:Gw,defaultWidth:"full"})},Qw={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Zw=(e,t,r,n)=>Qw[e];function ir(e){return(t,r)=>{const n=r!=null&&r.context?String(r.context):"standalone";let i;if(n==="formatting"&&e.formattingValues){const o=e.defaultFormattingWidth||e.defaultWidth,l=r!=null&&r.width?String(r.width):o;i=e.formattingValues[l]||e.formattingValues[o]}else{const o=e.defaultWidth,l=r!=null&&r.width?String(r.width):e.defaultWidth;i=e.values[l]||e.values[o]}const s=e.argumentCallback?e.argumentCallback(t):t;return i[s]}}const Jw={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},ej={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},tj={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},rj={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},nj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},aj={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ij=(e,t)=>{const r=Number(e),n=r%100;if(n>20||n<10)switch(n%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},sj={ordinalNumber:ij,era:ir({values:Jw,defaultWidth:"wide"}),quarter:ir({values:ej,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ir({values:tj,defaultWidth:"wide"}),day:ir({values:rj,defaultWidth:"wide"}),dayPeriod:ir({values:nj,defaultWidth:"wide",formattingValues:aj,defaultFormattingWidth:"wide"})};function sr(e){return(t,r={})=>{const n=r.width,i=n&&e.matchPatterns[n]||e.matchPatterns[e.defaultMatchWidth],s=t.match(i);if(!s)return null;const o=s[0],l=n&&e.parsePatterns[n]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?lj(l,f=>f.test(o)):oj(l,f=>f.test(o));let u;u=e.valueCallback?e.valueCallback(c):c,u=r.valueCallback?r.valueCallback(u):u;const d=t.slice(o.length);return{value:u,rest:d}}}function oj(e,t){for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t(e[r]))return r}function lj(e,t){for(let r=0;r<e.length;r++)if(t(e[r]))return r}function Py(e){return(t,r={})=>{const n=t.match(e.matchPattern);if(!n)return null;const i=n[0],s=t.match(e.parsePattern);if(!s)return null;let o=e.valueCallback?e.valueCallback(s[0]):s[0];o=r.valueCallback?r.valueCallback(o):o;const l=t.slice(i.length);return{value:o,rest:l}}}const cj=/^(\d+)(th|st|nd|rd)?/i,uj=/\d+/i,dj={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},fj={any:[/^b/i,/^(a|c)/i]},mj={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},hj={any:[/1/i,/2/i,/3/i,/4/i]},pj={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},vj={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},yj={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},xj={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},gj={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},bj={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},wj={ordinalNumber:Py({matchPattern:cj,parsePattern:uj,valueCallback:e=>parseInt(e,10)}),era:sr({matchPatterns:dj,defaultMatchWidth:"wide",parsePatterns:fj,defaultParseWidth:"any"}),quarter:sr({matchPatterns:mj,defaultMatchWidth:"wide",parsePatterns:hj,defaultParseWidth:"any",valueCallback:e=>e+1}),month:sr({matchPatterns:pj,defaultMatchWidth:"wide",parsePatterns:vj,defaultParseWidth:"any"}),day:sr({matchPatterns:yj,defaultMatchWidth:"wide",parsePatterns:xj,defaultParseWidth:"any"}),dayPeriod:sr({matchPatterns:gj,defaultMatchWidth:"any",parsePatterns:bj,defaultParseWidth:"any"})},jj={code:"en-US",formatDistance:Ww,formatLong:Xw,formatRelative:Zw,localize:sj,match:wj,options:{weekStartsOn:0,firstWeekContainsDate:1}};function Nj(e){const t=qe(e);return Bw(t,zw(t))+1}function kj(e){const t=qe(e),r=+ks(t)-+Fw(t);return Math.round(r/wy)+1}function Ey(e,t){var d,f,m,v;const r=qe(e),n=r.getFullYear(),i=Fi(),s=(t==null?void 0:t.firstWeekContainsDate)??((f=(d=t==null?void 0:t.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??i.firstWeekContainsDate??((v=(m=i.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??1,o=Jt(e,0);o.setFullYear(n+1,0,s),o.setHours(0,0,0,0);const l=hn(o,t),c=Jt(e,0);c.setFullYear(n,0,s),c.setHours(0,0,0,0);const u=hn(c,t);return r.getTime()>=l.getTime()?n+1:r.getTime()>=u.getTime()?n:n-1}function Sj(e,t){var l,c,u,d;const r=Fi(),n=(t==null?void 0:t.firstWeekContainsDate)??((c=(l=t==null?void 0:t.locale)==null?void 0:l.options)==null?void 0:c.firstWeekContainsDate)??r.firstWeekContainsDate??((d=(u=r.locale)==null?void 0:u.options)==null?void 0:d.firstWeekContainsDate)??1,i=Ey(e,t),s=Jt(e,0);return s.setFullYear(i,0,n),s.setHours(0,0,0,0),hn(s,t)}function Oj(e,t){const r=qe(e),n=+hn(r,t)-+Sj(r,t);return Math.round(n/wy)+1}function _e(e,t){const r=e<0?"-":"",n=Math.abs(e).toString().padStart(t,"0");return r+n}const Mr={y(e,t){const r=e.getFullYear(),n=r>0?r:1-r;return _e(t==="yy"?n%100:n,t.length)},M(e,t){const r=e.getMonth();return t==="M"?String(r+1):_e(r+1,2)},d(e,t){return _e(e.getDate(),t.length)},a(e,t){const r=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h(e,t){return _e(e.getHours()%12||12,t.length)},H(e,t){return _e(e.getHours(),t.length)},m(e,t){return _e(e.getMinutes(),t.length)},s(e,t){return _e(e.getSeconds(),t.length)},S(e,t){const r=t.length,n=e.getMilliseconds(),i=Math.trunc(n*Math.pow(10,r-3));return _e(i,t.length)}},En={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Bf={G:function(e,t,r){const n=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})}},y:function(e,t,r){if(t==="yo"){const n=e.getFullYear(),i=n>0?n:1-n;return r.ordinalNumber(i,{unit:"year"})}return Mr.y(e,t)},Y:function(e,t,r,n){const i=Ey(e,n),s=i>0?i:1-i;if(t==="YY"){const o=s%100;return _e(o,2)}return t==="Yo"?r.ordinalNumber(s,{unit:"year"}):_e(s,t.length)},R:function(e,t){const r=jy(e);return _e(r,t.length)},u:function(e,t){const r=e.getFullYear();return _e(r,t.length)},Q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(n);case"QQ":return _e(n,2);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})}},q:function(e,t,r){const n=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(n);case"qq":return _e(n,2);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})}},M:function(e,t,r){const n=e.getMonth();switch(t){case"M":case"MM":return Mr.M(e,t);case"Mo":return r.ordinalNumber(n+1,{unit:"month"});case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})}},L:function(e,t,r){const n=e.getMonth();switch(t){case"L":return String(n+1);case"LL":return _e(n+1,2);case"Lo":return r.ordinalNumber(n+1,{unit:"month"});case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})}},w:function(e,t,r,n){const i=Oj(e,n);return t==="wo"?r.ordinalNumber(i,{unit:"week"}):_e(i,t.length)},I:function(e,t,r){const n=kj(e);return t==="Io"?r.ordinalNumber(n,{unit:"week"}):_e(n,t.length)},d:function(e,t,r){return t==="do"?r.ordinalNumber(e.getDate(),{unit:"date"}):Mr.d(e,t)},D:function(e,t,r){const n=Nj(e);return t==="Do"?r.ordinalNumber(n,{unit:"dayOfYear"}):_e(n,t.length)},E:function(e,t,r){const n=e.getDay();switch(t){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})}},e:function(e,t,r,n){const i=e.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return _e(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(i,{width:"short",context:"formatting"});case"eeee":default:return r.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,r,n){const i=e.getDay(),s=(i-n.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return _e(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(i,{width:"narrow",context:"standalone"});case"cccccc":return r.day(i,{width:"short",context:"standalone"});case"cccc":default:return r.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,r){const n=e.getDay(),i=n===0?7:n;switch(t){case"i":return String(i);case"ii":return _e(i,t.length);case"io":return r.ordinalNumber(i,{unit:"day"});case"iii":return r.day(n,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(n,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(n,{width:"short",context:"formatting"});case"iiii":default:return r.day(n,{width:"wide",context:"formatting"})}},a:function(e,t,r){const i=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(e,t,r){const n=e.getHours();let i;switch(n===12?i=En.noon:n===0?i=En.midnight:i=n/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,r){const n=e.getHours();let i;switch(n>=17?i=En.evening:n>=12?i=En.afternoon:n>=4?i=En.morning:i=En.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,r){if(t==="ho"){let n=e.getHours()%12;return n===0&&(n=12),r.ordinalNumber(n,{unit:"hour"})}return Mr.h(e,t)},H:function(e,t,r){return t==="Ho"?r.ordinalNumber(e.getHours(),{unit:"hour"}):Mr.H(e,t)},K:function(e,t,r){const n=e.getHours()%12;return t==="Ko"?r.ordinalNumber(n,{unit:"hour"}):_e(n,t.length)},k:function(e,t,r){let n=e.getHours();return n===0&&(n=24),t==="ko"?r.ordinalNumber(n,{unit:"hour"}):_e(n,t.length)},m:function(e,t,r){return t==="mo"?r.ordinalNumber(e.getMinutes(),{unit:"minute"}):Mr.m(e,t)},s:function(e,t,r){return t==="so"?r.ordinalNumber(e.getSeconds(),{unit:"second"}):Mr.s(e,t)},S:function(e,t){return Mr.S(e,t)},X:function(e,t,r){const n=e.getTimezoneOffset();if(n===0)return"Z";switch(t){case"X":return Uf(n);case"XXXX":case"XX":return en(n);case"XXXXX":case"XXX":default:return en(n,":")}},x:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"x":return Uf(n);case"xxxx":case"xx":return en(n);case"xxxxx":case"xxx":default:return en(n,":")}},O:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+Ff(n,":");case"OOOO":default:return"GMT"+en(n,":")}},z:function(e,t,r){const n=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+Ff(n,":");case"zzzz":default:return"GMT"+en(n,":")}},t:function(e,t,r){const n=Math.trunc(e.getTime()/1e3);return _e(n,t.length)},T:function(e,t,r){const n=e.getTime();return _e(n,t.length)}};function Ff(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),i=Math.trunc(n/60),s=n%60;return s===0?r+String(i):r+String(i)+t+_e(s,2)}function Uf(e,t){return e%60===0?(e>0?"-":"+")+_e(Math.abs(e)/60,2):en(e,t)}function en(e,t=""){const r=e>0?"-":"+",n=Math.abs(e),i=_e(Math.trunc(n/60),2),s=_e(n%60,2);return r+i+t+s}const Vf=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},Ty=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},Aj=(e,t)=>{const r=e.match(/(P+)(p+)?/)||[],n=r[1],i=r[2];if(!i)return Vf(e,t);let s;switch(n){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",Vf(n,t)).replace("{{time}}",Ty(i,t))},Pj={p:Ty,P:Aj},Ej=/^D+$/,Tj=/^Y+$/,_j=["D","DD","YY","YYYY"];function $j(e){return Ej.test(e)}function Cj(e){return Tj.test(e)}function Mj(e,t,r){const n=Dj(e,t,r);if(console.warn(n),_j.includes(e))throw new RangeError(n)}function Dj(e,t,r){const n=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${n} to the input \`${r}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Ij=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Rj=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Lj=/^'([^]*?)'?$/,Bj=/''/g,Fj=/[a-zA-Z]/;function Ne(e,t,r){var d,f,m,v,y,p,x,j;const n=Fi(),i=(r==null?void 0:r.locale)??n.locale??jj,s=(r==null?void 0:r.firstWeekContainsDate)??((f=(d=r==null?void 0:r.locale)==null?void 0:d.options)==null?void 0:f.firstWeekContainsDate)??n.firstWeekContainsDate??((v=(m=n.locale)==null?void 0:m.options)==null?void 0:v.firstWeekContainsDate)??1,o=(r==null?void 0:r.weekStartsOn)??((p=(y=r==null?void 0:r.locale)==null?void 0:y.options)==null?void 0:p.weekStartsOn)??n.weekStartsOn??((j=(x=n.locale)==null?void 0:x.options)==null?void 0:j.weekStartsOn)??0,l=qe(e);if(!Hw(l))throw new RangeError("Invalid time value");let c=t.match(Rj).map(N=>{const b=N[0];if(b==="p"||b==="P"){const g=Pj[b];return g(N,i.formatLong)}return N}).join("").match(Ij).map(N=>{if(N==="''")return{isToken:!1,value:"'"};const b=N[0];if(b==="'")return{isToken:!1,value:Uj(N)};if(Bf[b])return{isToken:!0,value:N};if(b.match(Fj))throw new RangeError("Format string contains an unescaped latin alphabet character `"+b+"`");return{isToken:!1,value:N}});i.localize.preprocessor&&(c=i.localize.preprocessor(l,c));const u={firstWeekContainsDate:s,weekStartsOn:o,locale:i};return c.map(N=>{if(!N.isToken)return N.value;const b=N.value;(!(r!=null&&r.useAdditionalWeekYearTokens)&&Cj(b)||!(r!=null&&r.useAdditionalDayOfYearTokens)&&$j(b))&&Mj(b,t,String(e));const g=Bf[b[0]];return g(l,b,i.localize,u)}).join("")}function Uj(e){const t=e.match(Lj);return t?t[1].replace(Bj,"'"):e}function Vj(e,t){const r=qe(e),n=qe(t);return+r<+n}function Hj(e,t){const r=qe(e),n=qe(t);return r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()}function zj(e){return md(e,Uw(e))}function qj(){return ti(Date.now())}function Ec(e,t){return by(e,-t)}function Wj(e,t){return Ny(e,-t)}function Hf(e){return e.replace(/sekuntia?/,"sekunnin")}function zf(e){return e.replace(/minuuttia?/,"minuutin")}function qf(e){return e.replace(/tuntia?/,"tunnin")}function Kj(e){return e.replace(/päivää?/,"päivän")}function Wf(e){return e.replace(/(viikko|viikkoa)/,"viikon")}function Kf(e){return e.replace(/(kuukausi|kuukautta)/,"kuukauden")}function rs(e){return e.replace(/(vuosi|vuotta)/,"vuoden")}const Yj={lessThanXSeconds:{one:"alle sekunti",other:"alle {{count}} sekuntia",futureTense:Hf},xSeconds:{one:"sekunti",other:"{{count}} sekuntia",futureTense:Hf},halfAMinute:{one:"puoli minuuttia",other:"puoli minuuttia",futureTense:e=>"puolen minuutin"},lessThanXMinutes:{one:"alle minuutti",other:"alle {{count}} minuuttia",futureTense:zf},xMinutes:{one:"minuutti",other:"{{count}} minuuttia",futureTense:zf},aboutXHours:{one:"noin tunti",other:"noin {{count}} tuntia",futureTense:qf},xHours:{one:"tunti",other:"{{count}} tuntia",futureTense:qf},xDays:{one:"päivä",other:"{{count}} päivää",futureTense:Kj},aboutXWeeks:{one:"noin viikko",other:"noin {{count}} viikkoa",futureTense:Wf},xWeeks:{one:"viikko",other:"{{count}} viikkoa",futureTense:Wf},aboutXMonths:{one:"noin kuukausi",other:"noin {{count}} kuukautta",futureTense:Kf},xMonths:{one:"kuukausi",other:"{{count}} kuukautta",futureTense:Kf},aboutXYears:{one:"noin vuosi",other:"noin {{count}} vuotta",futureTense:rs},xYears:{one:"vuosi",other:"{{count}} vuotta",futureTense:rs},overXYears:{one:"yli vuosi",other:"yli {{count}} vuotta",futureTense:rs},almostXYears:{one:"lähes vuosi",other:"lähes {{count}} vuotta",futureTense:rs}},Gj=(e,t,r)=>{const n=Yj[e],i=t===1?n.one:n.other.replace("{{count}}",String(t));return r!=null&&r.addSuffix?r.comparison&&r.comparison>0?n.futureTense(i)+" kuluttua":i+" sitten":i},Xj={full:"eeee d. MMMM y",long:"d. MMMM y",medium:"d. MMM y",short:"d.M.y"},Qj={full:"HH.mm.ss zzzz",long:"HH.mm.ss z",medium:"HH.mm.ss",short:"HH.mm"},Zj={full:"{{date}} 'klo' {{time}}",long:"{{date}} 'klo' {{time}}",medium:"{{date}} {{time}}",short:"{{date}} {{time}}"},Jj={date:Vn({formats:Xj,defaultWidth:"full"}),time:Vn({formats:Qj,defaultWidth:"full"}),dateTime:Vn({formats:Zj,defaultWidth:"full"})},e1={lastWeek:"'viime' eeee 'klo' p",yesterday:"'eilen klo' p",today:"'tänään klo' p",tomorrow:"'huomenna klo' p",nextWeek:"'ensi' eeee 'klo' p",other:"P"},t1=(e,t,r,n)=>e1[e],r1={narrow:["eaa.","jaa."],abbreviated:["eaa.","jaa."],wide:["ennen ajanlaskun alkua","jälkeen ajanlaskun alun"]},n1={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1. kvartaali","2. kvartaali","3. kvartaali","4. kvartaali"]},Tc={narrow:["T","H","M","H","T","K","H","E","S","L","M","J"],abbreviated:["tammi","helmi","maalis","huhti","touko","kesä","heinä","elo","syys","loka","marras","joulu"],wide:["tammikuu","helmikuu","maaliskuu","huhtikuu","toukokuu","kesäkuu","heinäkuu","elokuu","syyskuu","lokakuu","marraskuu","joulukuu"]},a1={narrow:Tc.narrow,abbreviated:Tc.abbreviated,wide:["tammikuuta","helmikuuta","maaliskuuta","huhtikuuta","toukokuuta","kesäkuuta","heinäkuuta","elokuuta","syyskuuta","lokakuuta","marraskuuta","joulukuuta"]},bs={narrow:["S","M","T","K","T","P","L"],short:["su","ma","ti","ke","to","pe","la"],abbreviated:["sunn.","maan.","tiis.","kesk.","torst.","perj.","la"],wide:["sunnuntai","maanantai","tiistai","keskiviikko","torstai","perjantai","lauantai"]},i1={narrow:bs.narrow,short:bs.short,abbreviated:bs.abbreviated,wide:["sunnuntaina","maanantaina","tiistaina","keskiviikkona","torstaina","perjantaina","lauantaina"]},s1={narrow:{am:"ap",pm:"ip",midnight:"keskiyö",noon:"keskipäivä",morning:"ap",afternoon:"ip",evening:"illalla",night:"yöllä"},abbreviated:{am:"ap",pm:"ip",midnight:"keskiyö",noon:"keskipäivä",morning:"ap",afternoon:"ip",evening:"illalla",night:"yöllä"},wide:{am:"ap",pm:"ip",midnight:"keskiyöllä",noon:"keskipäivällä",morning:"aamupäivällä",afternoon:"iltapäivällä",evening:"illalla",night:"yöllä"}},o1=(e,t)=>Number(e)+".",l1={ordinalNumber:o1,era:ir({values:r1,defaultWidth:"wide"}),quarter:ir({values:n1,defaultWidth:"wide",argumentCallback:e=>e-1}),month:ir({values:Tc,defaultWidth:"wide",formattingValues:a1,defaultFormattingWidth:"wide"}),day:ir({values:bs,defaultWidth:"wide",formattingValues:i1,defaultFormattingWidth:"wide"}),dayPeriod:ir({values:s1,defaultWidth:"wide"})},c1=/^(\d+)(\.)/i,u1=/\d+/i,d1={narrow:/^(e|j)/i,abbreviated:/^(eaa.|jaa.)/i,wide:/^(ennen ajanlaskun alkua|jälkeen ajanlaskun alun)/i},f1={any:[/^e/i,/^j/i]},m1={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234]\.? kvartaali/i},h1={any:[/1/i,/2/i,/3/i,/4/i]},p1={narrow:/^[thmkeslj]/i,abbreviated:/^(tammi|helmi|maalis|huhti|touko|kesä|heinä|elo|syys|loka|marras|joulu)/i,wide:/^(tammikuu|helmikuu|maaliskuu|huhtikuu|toukokuu|kesäkuu|heinäkuu|elokuu|syyskuu|lokakuu|marraskuu|joulukuu)(ta)?/i},v1={narrow:[/^t/i,/^h/i,/^m/i,/^h/i,/^t/i,/^k/i,/^h/i,/^e/i,/^s/i,/^l/i,/^m/i,/^j/i],any:[/^ta/i,/^hel/i,/^maa/i,/^hu/i,/^to/i,/^k/i,/^hei/i,/^e/i,/^s/i,/^l/i,/^mar/i,/^j/i]},y1={narrow:/^[smtkpl]/i,short:/^(su|ma|ti|ke|to|pe|la)/i,abbreviated:/^(sunn.|maan.|tiis.|kesk.|torst.|perj.|la)/i,wide:/^(sunnuntai|maanantai|tiistai|keskiviikko|torstai|perjantai|lauantai)(na)?/i},x1={narrow:[/^s/i,/^m/i,/^t/i,/^k/i,/^t/i,/^p/i,/^l/i],any:[/^s/i,/^m/i,/^ti/i,/^k/i,/^to/i,/^p/i,/^l/i]},g1={narrow:/^(ap|ip|keskiyö|keskipäivä|aamupäivällä|iltapäivällä|illalla|yöllä)/i,any:/^(ap|ip|keskiyöllä|keskipäivällä|aamupäivällä|iltapäivällä|illalla|yöllä)/i},b1={any:{am:/^ap/i,pm:/^ip/i,midnight:/^keskiyö/i,noon:/^keskipäivä/i,morning:/aamupäivällä/i,afternoon:/iltapäivällä/i,evening:/illalla/i,night:/yöllä/i}},w1={ordinalNumber:Py({matchPattern:c1,parsePattern:u1,valueCallback:e=>parseInt(e,10)}),era:sr({matchPatterns:d1,defaultMatchWidth:"wide",parsePatterns:f1,defaultParseWidth:"any"}),quarter:sr({matchPatterns:m1,defaultMatchWidth:"wide",parsePatterns:h1,defaultParseWidth:"any",valueCallback:e=>e+1}),month:sr({matchPatterns:p1,defaultMatchWidth:"wide",parsePatterns:v1,defaultParseWidth:"any"}),day:sr({matchPatterns:y1,defaultMatchWidth:"wide",parsePatterns:x1,defaultParseWidth:"any"}),dayPeriod:sr({matchPatterns:g1,defaultMatchWidth:"any",parsePatterns:b1,defaultParseWidth:"any"})},He={code:"fi",formatDistance:Gj,formatLong:Jj,formatRelative:t1,localize:l1,match:w1,options:{weekStartsOn:1,firstWeekContainsDate:4}},j1={},N1={emailVerification:24*60*60*1e3,passwordReset:1*60*60*1e3},_y=()=>window.location.hostname==="bilo.fi"?"https://bilo.fi/auth/action":`${window.location.origin}/auth/action`,Hl=async(e,t,r)=>{try{const n=j1.randomUUID();return await Nn(pe(W,ae.AUTH_TOKENS,n),{email:e,userId:t,type:r,token:n,createdAt:be(),expiresAt:Ke.fromMillis(Date.now()+N1[r]),used:!1}),n}catch(n){throw console.error(`Error creating ${r} token:`,n),new Error("Failed to create authentication token")}},Yf=async(e,t)=>{try{const r=pe(W,ae.AUTH_TOKENS,e),n=await Zt(r);if(!n.exists())return{valid:!1,error:"Token not found"};const i=n.data();return i.type!==t?{valid:!1,error:"Invalid token type"}:i.used?{valid:!1,error:"Token already used"}:i.expiresAt.toMillis()<Date.now()?{valid:!1,error:"Token expired"}:(t==="passwordReset"&&await Qe(r,{used:!0,usedAt:be()}),{valid:!0,userId:i.userId,email:i.email})}catch(r){return console.error(`Error validating ${t} token:`,r),{valid:!1,error:"Error validating token"}}},k1=async e=>{try{const t=pe(W,ae.AUTH_TOKENS,e);return await Qe(t,{used:!0,usedAt:be()}),!0}catch(t){return console.error("Error marking token as used:",t),!1}},zl=async(e,t)=>{try{const r=ye(le(W,ae.AUTH_TOKENS),me("userId","==",e),me("type","==",t),me("used","==",!1)),i=(await ge(r)).docs.map(s=>Qe(s.ref,{used:!0,usedAt:be(),invalidatedManually:!0}));return await Promise.all(i),!0}catch(r){return console.error(`Error invalidating ${t} tokens for user ${e}:`,r),!1}},S1="4573175144a542dfd9c9ad28e304c01b-e298dd8e-b75a04bc",O1="bilo.fi";async function Ui({to:e,subject:t,html:r,from:n="Bilo <noreply@bilo.fi>"}){try{const i=await fetch(`https://api.eu.mailgun.net/v3/${O1}/messages`,{method:"POST",headers:{Authorization:`Basic ${btoa(`api:${S1}`)}`,"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({from:n,to:e,subject:t,html:r})});if(!i.ok)throw new Error(`Mailgun API error: ${i.statusText}`);return!0}catch(i){return console.error("Error sending email:",i),!1}}function A1(e,t,r){const n=e.date instanceof Date?e.date:new Date(e.date.seconds*1e3);return`
    <h2>Varaus vahvistettu</h2>
    <p>Hei ${e.customerDetails.firstName},</p>
    <p>Varauksesi on vahvistettu:</p>
    <ul>
      <li>Palvelu: ${r}</li>
      <li>Päivämäärä: ${Ne(n,"d.M.yyyy 'klo' HH:mm",{locale:He})}</li>
      <li>Yritys: ${t.businessName}</li>
      <li>Osoite: ${t.address}</li>
      <li>Hinta: ${e.totalPrice}€</li>
    </ul>
    <p>Voit tarkastella varausta kirjautumalla Bilo -palveluun: <a href="https://bilo.fi/customer/appointments">https://bilo.fi/customer/appointments</a></p>
  `}function P1(e){return`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Tervetuloa Biloon!</title>
      <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px; }
        .logo { text-align: center; margin-bottom: 20px; }
        .card { border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px; background-color: #f9f9f9; }
        .button { display: inline-block; background-color: #3b82f6; color: white; text-decoration: none; padding: 10px 20px; border-radius: 5px; margin: 20px 0; }
        .footer { margin-top: 30px; font-size: 12px; color: #666; text-align: center; }
      </style>
    </head>
    <body>
      <div class="logo">
        <h1>Bilo</h1>
      </div>
      
      <div class="card">
        <h2>Tervetuloa Biloon!</h2>
        <p>Hei ${e.firstName||"käyttäjä"},</p>
        <p>Kiitos rekisteröitymisestäsi. Olemme antaneet sinulle 10 kolikkoa tervetuliaislahjana.</p>
        <p>Voit käyttää kolikoita alennuksiin varatessasi palveluita.</p>
        
        <div style="text-align: center;">
          <a href="https://bilo.fi/customer/appointments" class="button">Tutustu palveluihin</a>
        </div>
      </div>
      
      <div class="footer">
        <p>Tämä on automaattinen viesti, älä vastaa tähän viestiin.</p>
        <p>&copy; ${new Date().getFullYear()} Bilo. Kaikki oikeudet pidätetään.</p>
      </div>
    </body>
    </html>
  `}function E1(e,t){return`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Vahvista sähköpostiosoitteesi</title>
      <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px; }
        .logo { text-align: center; margin-bottom: 20px; }
        .card { border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px; background-color: #f9f9f9; }
        .button { display: inline-block; background-color: #3b82f6; color: white; text-decoration: none; padding: 10px 20px; border-radius: 5px; margin: 20px 0; }
        .footer { margin-top: 30px; font-size: 12px; color: #666; text-align: center; }
      </style>
    </head>
    <body>
      <div class="logo">
        <h1>Bilo</h1>
      </div>
      
      <div class="card">
        <h2>Vahvista sähköpostiosoitteesi</h2>
        <p>Hei,</p>
        <p>Kiitos rekisteröitymisestäsi. Vahvista sähköpostiosoitteesi klikkaamalla alla olevaa painiketta:</p>
        
        <div style="text-align: center;">
          <a href="${t}" class="button">Vahvista sähköpostiosoite</a>
        </div>
        
        <p>Jos et rekisteröitynyt Biloon, voit jättää tämän viestin huomiotta.</p>
        <p>Vahvistuslinkki on voimassa 24 tuntia.</p>
      </div>
      
      <div class="footer">
        <p>Tämä on automaattinen viesti, älä vastaa tähän viestiin.</p>
        <p>&copy; ${new Date().getFullYear()} Bilo. Kaikki oikeudet pidätetään.</p>
      </div>
    </body>
    </html>
  `}function T1(e,t){return`
    <!DOCTYPE html>
    <html>
    <head>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <title>Salasanan palautus</title>
      <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; max-width: 600px; margin: 0 auto; padding: 20px; }
        .logo { text-align: center; margin-bottom: 20px; }
        .card { border: 1px solid #e0e0e0; border-radius: 8px; padding: 20px; background-color: #f9f9f9; }
        .button { display: inline-block; background-color: #3b82f6; color: white; text-decoration: none; padding: 10px 20px; border-radius: 5px; margin: 20px 0; }
        .footer { margin-top: 30px; font-size: 12px; color: #666; text-align: center; }
      </style>
    </head>
    <body>
      <div class="logo">
        <h1>Bilo</h1>
      </div>
      
      <div class="card">
        <h2>Salasanan palautus</h2>
        <p>Hei,</p>
        <p>Olemme vastaanottaneet pyynnön palauttaa salasanasi. Voit asettaa uuden salasanan klikkaamalla alla olevaa painiketta:</p>
        
        <div style="text-align: center;">
          <a href="${t}" class="button">Palauta salasana</a>
        </div>
        
        <p>Jos et pyytänyt salasanan palautusta, voit jättää tämän viestin huomiotta.</p>
        <p>Palautuslinkki on voimassa 1 tunnin.</p>
      </div>
      
      <div class="footer">
        <p>Tämä on automaattinen viesti, älä vastaa tähän viestiin.</p>
        <p>&copy; ${new Date().getFullYear()} Bilo. Kaikki oikeudet pidätetään.</p>
      </div>
    </body>
    </html>
  `}async function _1(e,t){try{const r=A1(e,t,e.serviceName||"Palvelu");return Ui({to:e.customerDetails.email,subject:"Varauksesi on vahvistettu",html:r})}catch(r){return console.error("Error sending confirmation email:",r),!1}}async function $1(e){try{return Ui({to:e.email,subject:"Tervetuloa Biloon",html:P1(e)})}catch(t){return console.error("Error sending welcome email:",t),!1}}async function C1(e,t,r){try{return Ui({to:e.email,subject:t,html:`<p>${r}</p>`})}catch(n){return console.error("Error sending vendor notification:",n),!1}}async function Gf(e,t){try{const r=`${_y()}?mode=verifyEmail&oobCode=${t}`,n=E1(e,r);return Ui({to:e,subject:"Vahvista sähköpostiosoitteesi - Bilo",html:n})}catch(r){return console.error("Error sending verification email:",r),!1}}async function M1(e,t){try{const r=`${_y()}?mode=resetPassword&oobCode=${t}`,n=T1(e,r);return Ui({to:e,subject:"Salasanan palautus - Bilo",html:n})}catch(r){return console.error("Error sending password reset email:",r),!1}}const D1=async(e,t)=>{const r=pe(W,ae.APPOINTMENTS,e),n=await Zt(r);if(!n.exists())throw new Error("Varausta ei löytynyt");const i=n.data(),s={feedback:{...t,createdAt:Ke.now()}};await Qe(r,s);const o=pe(W,ae.VENDORS,i.vendorId),l=await Zt(o);if(!l.exists())throw new Error("Yritystä ei löytynyt");const c=l.data(),u=c.rating||0,d=c.ratingCount||0,f=(u*d+t.rating)/(d+1);return await Qe(o,{rating:Number(f.toFixed(1)),ratingCount:Ro(1)}),!0},Xf=async(e,t)=>{if(!t)return!0;const r=ye(le(W,ae.VENDORS),me(e,"==",t),Tt(1));return(await ge(r)).empty},I1=async(e,t)=>{const r=pe(W,ae.USERS,e),n=t.role==="vendor",i={...t,createdAt:be(),referralCode:crypto.randomUUID().slice(0,8),referralCount:0};if(n?i.wallet={coins:0,transactions:[]}:i.wallet={coins:10,transactions:[{id:crypto.randomUUID(),amount:10,type:"credit",description:"Tervetuliaislahja uudelle jäsenelle",timestamp:Ke.now()}]},await Nn(r,i),!n)try{await $1({...i,id:r.id})}catch(s){console.error("Error sending welcome email:",s)}if(n){const s=pe(le(W,ae.VENDORS)),o=s.id,l={id:o,userId:e,businessName:"",address:"",businessId:"",city:"",postalCode:"",phone:"",email:t.email||"",services:[],rating:0,ratingCount:0,verified:!1,operatingHours:{monday:{open:"09:00",close:"17:00"},tuesday:{open:"09:00",close:"17:00"},wednesday:{open:"09:00",close:"17:00"},thursday:{open:"09:00",close:"17:00"},friday:{open:"09:00",close:"17:00"},saturday:{open:"closed",close:"closed"},sunday:{open:"closed",close:"closed"}},createdAt:be(),updatedAt:be()},c=Do(W);c.set(s,l),[{name:"Peruspesu",description:"Peruspesut ja pikapesut",icon:"car",order:1,vendorId:o},{name:"Sisäpesu",description:"Auton sisätilojen puhdistus",icon:"armchair",order:2,vendorId:o},{name:"Premium",description:"Premium-tason pesut ja käsittelyt",icon:"star",order:3,vendorId:o},{name:"Erikoispalvelut",description:"Erikoiskäsittelyt ja lisäpalvelut",icon:"sparkles",order:4,vendorId:o}].forEach(d=>{const f=pe(le(W,ae.SERVICE_CATEGORIES));c.set(f,{...d,id:f.id,createdAt:be(),updatedAt:be()})}),await c.commit()}},er=async e=>{const t=pe(W,ae.USERS,e),r=await Zt(t);return r.exists()?{id:r.id,...r.data()}:null},Qf=async e=>{try{const t=pe(W,ae.USERS,e);await Io(t);const r=ye(le(W,ae.APPOINTMENTS),me("customerId","==",e)),n=await ge(r),i=Do(W);return n.docs.forEach(s=>{i.delete(s.ref)}),await i.commit(),!0}catch(t){throw console.error("Error deleting user:",t),t}},R1=async e=>{try{const t=pe(W,ae.VENDORS,e);if(!(await Zt(t)).exists())throw new Error("Vendor not found");const n=Do(W);await Io(t);const i=ye(le(W,ae.SERVICES),me("vendorId","==",e));(await ge(i)).docs.forEach(d=>{n.delete(d.ref)});const o=ye(le(W,ae.APPOINTMENTS),me("vendorId","==",e));(await ge(o)).docs.forEach(d=>{n.delete(d.ref)});const c=ye(le(W,ae.SERVICE_CATEGORIES),me("vendorId","==",e));return(await ge(c)).docs.forEach(d=>{n.delete(d.ref)}),await n.commit(),!0}catch(t){throw console.error("Error deleting vendor:",t),t}},Ss=async(e,t)=>{try{const r=pe(W,ae.USERS,e);return await Qe(r,{...t,updatedAt:be()}),!0}catch(r){throw console.error("Error updating user:",r),r}},L1=async(e,t,r)=>{try{const n=pe(W,ae.USERS,e),i={id:crypto.randomUUID(),amount:t,type:t>0?"credit":"debit",description:r,timestamp:Ke.now()};return await Qe(n,{"wallet.coins":Ro(t),"wallet.transactions":Lo(i)}),!0}catch(n){throw console.error("Error adding coins:",n),n}},B1=async e=>{const t=pe(le(W,ae.SERVICE_CATEGORIES));return await Nn(t,{...e,id:t.id,createdAt:be()}),t.id},F1=async(e,t)=>{const r=pe(W,ae.SERVICE_CATEGORIES,e);return await Qe(r,{...t,updatedAt:be()}),!0},_c=async e=>{const t=ye(le(W,ae.SERVICE_CATEGORIES),me("vendorId","==",e));return(await ge(t)).docs.map(i=>({id:i.id,...i.data()})).sort((i,s)=>(i.order||0)-(s.order||0))},U1=async e=>{const t=pe(le(W,ae.OFFERS));return await Nn(t,{...e,id:t.id,createdAt:be(),updatedAt:be()}),t.id},V1=async(e,t)=>{const r=pe(W,ae.OFFERS,e);return await Qe(r,{...t,updatedAt:be()}),!0},ri=async e=>{const t=ye(le(W,ae.OFFERS),me("vendorId","==",e),Xe("startDate","desc"));return(await ge(t)).docs.map(n=>{const i=n.data();return{...i,id:n.id,startDate:i.startDate.toDate(),endDate:i.endDate.toDate(),createdAt:i.createdAt.toDate(),updatedAt:i.updatedAt.toDate()}})},H1=async e=>{var t;try{let r=ye(le(W,ae.VENDORS),me("verified","==",!0),me("banned","!=",!0),Tt(50)),i=(await ge(r)).docs.map(d=>({id:d.id,...d.data()}));i=i.filter(d=>d.banned!==!0);const s=((t=new URLSearchParams(window.location.search).get("city"))==null?void 0:t.toLowerCase())||"";if(s&&(i=i.filter(d=>{var f;return((f=d.city)==null?void 0:f.toLowerCase())===s}),i.length===0))return[];const o=await ge(le(W,ae.SERVICES)),l=e.toLowerCase(),c=new Set;let u=null;try{o.docs.forEach(f=>{var v;const m=f.data();((v=m.name)!=null&&v.toLowerCase().includes(l)||(m.name||"").toLowerCase().includes(l)||(m.description||"").toLowerCase().includes(l))&&c.add(m.vendorId)});const d=i.filter(f=>c.has(f.id));return d.length===0&&i.length>0?i:d}catch(d){return console.error("Error processing services:",d),u=d,i}}catch(r){return console.error("Error searching vendors:",{error:r}),[]}},z1=async()=>{try{const e=ye(le(W,ae.VENDORS),me("verified","==",!0),me("banned","!=",!0)),r=(await ge(e)).docs.map(o=>o.id),n=ye(le(W,ae.SERVICES),me("available","==",!0),Tt(15));return(await ge(n)).docs.map(o=>({id:o.id,...o.data()})).filter(o=>r.includes(o.vendorId)).slice(0,5)}catch(e){return console.error("Error getting recommended services:",e),[]}},q1=async e=>{const t=pe(le(W,ae.VENDORS)),r=t.id,n=be(),i={...e,id:r,rating:0,ratingCount:0,services:[],verified:!1,createdAt:n,updatedAt:n},s=Do(W);return s.set(t,i),[{name:"Peruspesu",description:"Peruspesut ja pikapesut",icon:"car",order:1,vendorId:r},{name:"Sisäpesu",description:"Auton sisätilojen puhdistus",icon:"armchair",order:2,vendorId:r},{name:"Premium",description:"Premium-tason pesut ja käsittelyt",icon:"star",order:3,vendorId:r},{name:"Erikoispalvelut",description:"Erikoiskäsittelyt ja lisäpalvelut",icon:"sparkles",order:4,vendorId:r}].forEach(l=>{const c=pe(le(W,ae.SERVICE_CATEGORIES));s.set(c,{...l,id:c.id,createdAt:n,updatedAt:n})}),await s.commit(),r},ba=async e=>{try{const t=ye(le(W,ae.VENDORS),me("userId","==",e),Tt(1)),r=await ge(t);if(!r.empty){const s=r.docs[0],o={id:s.id,...s.data()};return o.banned===!0?null:o}const n=pe(W,ae.VENDORS,e),i=await Zt(n);if(i.exists()){const s={id:i.id,...i.data()};return s.banned===!0?null:s}return null}catch(t){return console.error("Error fetching vendor:",t),null}},Os=async(e,t)=>{try{const r=pe(W,ae.VENDORS,e),n=await Zt(r),i=n.exists()?n.data():{},[s,o]=await Promise.all([pn(e),ni(e)]),l=Dw({...i,...t,id:e},s,o);return await Qe(r,{...t,structuredData:l,updatedAt:be()}),!0}catch(r){throw console.error("Error updating vendor:",r),r}},W1=async e=>{const t=pe(le(W,ae.SERVICES));return await Nn(t,{...e,id:t.id,createdAt:be()}),t.id},K1=async(e,t)=>{const r=pe(W,ae.SERVICES,e);return await Qe(r,{...t,updatedAt:be()}),!0},Y1=async e=>{const t=pe(W,ae.SERVICES,e);return await Io(t),!0},pn=async e=>{const t=pe(W,ae.VENDORS,e),r=await Zt(t);if(!r.exists()||r.data().banned===!0)return[];const n=ye(le(W,ae.SERVICES),me("vendorId","==",e));return(await ge(n)).docs.map(s=>({id:s.id,...s.data()}))},Zf=async(e,t)=>{try{const r=pe(W,ae.APPOINTMENTS,e),n=await Zt(r);if(!n.exists())throw new Error("Appointment not found");const i=n.data();if(t.status==="completed"&&i.status!=="completed")if(!i.customerId||!i.serviceId)console.error("Invalid appointment data for coin reward",{appointmentId:e});else if(i.coinRewardProcessed)console.warn("Appointment already processed for coin reward",{appointmentId:e});else return await ly(W,async s=>{const o=pe(W,ae.SERVICES,i.serviceId),l=await s.get(o);if(!l.exists())throw new Error("Service not found");const c=l.data(),u=c.coinReward||0;if(u>0){const d=pe(W,ae.USERS,i.customerId);if(!(await s.get(d)).exists())throw new Error("User not found");const m={id:crypto.randomUUID(),amount:u,type:"credit",description:`Kolikot palvelusta: ${c.name}`,timestamp:Ke.now(),serviceId:c.id,appointmentId:e};s.update(d,{"wallet.coins":Ro(u),"wallet.transactions":Lo(m)}),s.update(r,{...t,coinRewardProcessed:!0,coinRewardAmount:u,coinRewardTimestamp:Ke.now(),updatedAt:be()})}else s.update(r,{...t,coinRewardProcessed:!0,coinRewardAmount:0,updatedAt:be()})}),!0;return await Qe(r,{...t,updatedAt:be()}),!0}catch(r){throw console.error("Error updating appointment:",r),r}},G1=async(e,t=0)=>{const r=pe(le(W,ae.APPOINTMENTS));try{const n=pe(W,ae.VENDORS,e.vendorId),i=await Zt(n);if(!i.exists()||i.data().banned===!0)throw new Error("Palveluntarjoaja ei ole enää saatavilla");const s=Ke.now(),o=Ke.fromDate(e.date),l={...e,id:r.id,date:o,createdAt:s,updatedAt:s,coinsUsed:t,status:"confirmed",coinRewardProcessed:!1};t>0?await ly(W,async c=>{var y;const u=pe(W,ae.USERS,e.customerId),d=await c.get(u);if(!d.exists())throw new Error("Käyttäjää ei löydy");if((((y=d.data().wallet)==null?void 0:y.coins)||0)<t)throw new Error("Ei tarpeeksi kolikoita");const v={id:crypto.randomUUID(),amount:-t,type:"debit",description:"Kolikot käytetty alennukseen",timestamp:s,appointmentId:r.id};c.update(u,{"wallet.coins":Ro(-t),"wallet.transactions":Lo(v)}),c.set(r,l)}):await Nn(r,l);try{const c=await ba(e.vendorId);c&&await Promise.all([_1(l,c),C1(c,"Uusi varaus",`Uusi varaus tehty: ${l.id}`)])}catch(c){console.error("Error sending confirmation emails:",c)}return r.id}catch(n){throw console.error("Error creating appointment:",n),n}},Jf=async e=>{const t=ye(le(W,ae.APPOINTMENTS),me("customerId","==",e),Xe("date","desc"));return(await ge(t)).docs.map(n=>({id:n.id,...n.data()}))},ni=async e=>{const t=pe(W,ae.VENDORS,e),r=await Zt(t);if(!r.exists()||r.data().banned===!0)return[];const n=ye(le(W,ae.APPOINTMENTS),me("vendorId","==",e),Xe("date","desc"));return(await ge(n)).docs.map(s=>({id:s.id,...s.data()}))},X1=async e=>{const t=pe(le(W,ae.SUPPORT_TICKETS));return await Nn(t,{...e,id:t.id,status:"open",createdAt:be(),updatedAt:be()}),t.id},Q1=async(e,t)=>{const r=pe(W,ae.SUPPORT_TICKETS,e),n={id:crypto.randomUUID(),...t,createdAt:Ke.now()};return await Qe(r,{responses:Lo(n),updatedAt:be()}),n},Z1=async e=>{const t=pe(W,ae.SUPPORT_TICKETS,e);return await Qe(t,{status:"closed",updatedAt:be()}),!0},ql=async()=>{const e=ye(le(W,ae.SUPPORT_TICKETS),Xe("createdAt","desc"));return(await ge(e)).docs.map(r=>({id:r.id,...r.data()}))},em=!0,$y=k.createContext(null),Ye=()=>{const e=k.useContext($y);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},J1=({children:e})=>{const[t,r]=k.useState(null),[n,i]=k.useState(!0),[s,o]=k.useState(!1),l=async(p,x,j=!1)=>{try{const N=await Hb(Gt,p,x);try{if(await I1(N.user.uid,{email:p,role:j?"vendor":"customer",createdAt:new Date,emailVerified:!1}),await Xr({userId:N.user.uid,userEmail:p,action:"user_signup",entity:"user",entityId:N.user.uid,details:{isVendor:j}}),em){const b=await Hl(p,N.user.uid,"emailVerification");await Gf(p,b)}return N}catch(b){console.error("Database operation failed during signup:",b);try{await N.user.delete()}catch(g){console.error("Failed to clean up auth user after database error:",g)}throw b}}catch(N){throw console.error("Auth creation failed during signup:",N),N}},c=async(p,x)=>{try{const j=await zb(Gt,p,x);return await Xr({userId:j.user.uid,userEmail:p,action:"user_login",entity:"user",entityId:j.user.uid}),j}catch(j){throw console.error("Login error:",j),j}},u=async()=>{try{return t&&await Xr({userId:t.uid,userEmail:t.email||void 0,action:"user_logout",entity:"user",entityId:t.uid}),qb(Gt)}catch(p){throw console.error("Logout error:",p),p}},d=async()=>{if(!t)throw new Error("No user logged in");{await zl(t.uid,"emailVerification");const p=await Hl(t.email,t.uid,"emailVerification");return await Xr({userId:t.uid,userEmail:t.email||void 0,action:"resend_verification_email",entity:"user",entityId:t.uid}),Gf(t.email,p)}},f=async p=>{try{if(em){const x=await er(p);if(!x){console.log("Password reset requested for non-existent email:",p);return}await zl(x.id,"passwordReset");const j=await Hl(p,x.id,"passwordReset");await Xr({userId:x.id,userEmail:p,action:"password_reset_request",entity:"user",entityId:x.id}),await M1(p,j)}}catch(x){throw console.error("Error sending password reset:",x),new Error("Salasanan nollausviestin lähettäminen epäonnistui.")}},m=async(p,x)=>{if(!t||!t.email)throw new Error("No user logged in");try{const j=Wb.credential(t.email,p);return await Kb(t,j),await Yb(t,x),await zl(t.uid,"passwordReset"),await Ss(t.uid,{passwordLastChanged:new Date}),await Xr({userId:t.uid,userEmail:t.email,action:"password_changed",entity:"user",entityId:t.uid}),!0}catch(j){throw console.error("Error updating password:",j),j}},v=async p=>{try{return await Nc(Gt,p),t&&(await Ss(t.uid,{emailVerified:!0}),await Xr({userId:t.uid,userEmail:t.email||void 0,action:"email_verified",entity:"user",entityId:t.uid}),await t.reload(),o(t.emailVerified)),!0}catch(x){throw console.error("Error verifying email:",x),x}};k.useEffect(()=>Vb(Gt,x=>{r(x),o((x==null?void 0:x.emailVerified)||!1),i(!1)}),[]);const y={currentUser:t,emailVerified:s,signup:l,login:c,logout:u,resendVerificationEmail:d,resetPassword:f,updateUserPassword:m,verifyEmail:v,loading:n};return a.jsx($y.Provider,{value:y,children:!n&&e})},Cy=k.createContext(null),hd=()=>{const e=k.useContext(Cy);if(!e)throw new Error("useSupportDialog must be used within a SupportProvider");return e},eN=({children:e})=>{const[t,r]=k.useState(!1),[n,i]=k.useState(null),s=(o,l)=>{r(o),i(l||null)};return a.jsx(Cy.Provider,{value:{showSupportDialog:t,setShowSupportDialog:s,defaultSubject:n},children:e})};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var tN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Q=(e,t)=>{const r=k.forwardRef(({color:n="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:l="",children:c,...u},d)=>k.createElement("svg",{ref:d,...tN,width:i,height:i,stroke:n,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${rN(e)}`,l].join(" "),...u},[...t.map(([f,m])=>k.createElement(f,m)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $c=Q("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tr=Q("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cc=Q("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const My=Q("Armchair",[["path",{d:"M19 9V6a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v3",key:"irtipd"}],["path",{d:"M3 16a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-5a2 2 0 0 0-4 0v2H7v-2a2 2 0 0 0-4 0Z",key:"1e01m0"}],["path",{d:"M5 18v2",key:"ppbyun"}],["path",{d:"M19 18v2",key:"gy7782"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dy=Q("ArrowDownRight",[["path",{d:"m7 7 10 10",key:"1fmybs"}],["path",{d:"M17 7v10H7",key:"6fjiku"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nN=Q("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ws=Q("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ai=Q("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=Q("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=Q("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iy=Q("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ry=Q("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fe=Q("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vr=Q("Car",[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hr=Q("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nt=Q("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vn=Q("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wn=Q("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fr=Q("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=Q("Clock2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 10",key:"1g230d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const De=Q("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gt=Q("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fo=Q("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oN=Q("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ly=Q("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const By=Q("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fy=Q("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const As=Q("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=Q("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=Q("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ps=Q("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uN=Q("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Es=Q("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=Q("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fN=Q("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pd=Q("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mN=Q("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hN=Q("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pN=Q("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=Q("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vN=Q("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vd=Q("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ii=Q("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yN=Q("MailOpen",[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rr=Q("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pt=Q("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xN=Q("MapPinned",[["path",{d:"M18 8c0 4.5-6 9-6 9s-6-4.5-6-9a6 6 0 0 1 12 0",key:"yrbn30"}],["circle",{cx:"12",cy:"8",r:"2",key:"1822b1"}],["path",{d:"M8.835 14H5a1 1 0 0 0-.9.7l-2 6c-.1.1-.1.2-.1.3 0 .6.4 1 1 1h18c.6 0 1-.4 1-1 0-.1 0-.2-.1-.3l-2-6a1 1 0 0 0-.9-.7h-3.835",key:"112zkj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Or=Q("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tm=Q("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gN=Q("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bN=Q("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dt=Q("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mc=Q("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kn=Q("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=Q("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uy=Q("RefreshCcw",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ts=Q("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zr=Q("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _s=Q("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wN=Q("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vy=Q("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jN=Q("ShieldAlert",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yd=Q("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uo=Q("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xd=Q("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mt=Q("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _t=Q("Store",[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2v0a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12v0a2 2 0 0 1-2-2V7",key:"jon5kx"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rm=Q("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dn=Q("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gd=Q("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const js=Q("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NN=Q("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bt=Q("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yn=Q("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kN=Q("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Me=Q("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),SN=()=>{const{currentUser:e,emailVerified:t,resendVerificationEmail:r}=Ye(),[n,i]=P.useState(!1),[s,o]=P.useState(!1),[l,c]=P.useState("");if(!e||t)return null;const u=async()=>{try{i(!0),c(""),await r(),o(!0),setTimeout(()=>o(!1),5e3)}catch(d){console.error("Failed to resend verification:",d),c("Viestin lähetys epäonnistui. Yritä uudelleen myöhemmin.")}finally{i(!1)}};return a.jsx("div",{className:"bg-blue-50 border-l-4 border-blue-400 p-4 mb-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(rr,{className:"h-5 w-5 text-blue-400"})}),a.jsxs("div",{className:"ml-3",children:[a.jsxs("p",{className:"text-sm text-blue-700",children:["Vahvista sähköpostiosoitteesi napsauttamalla sähköpostiisi lähetettyä linkkiä.",!s&&!n&&a.jsxs("span",{className:"ml-2",children:["Etkö saanut viestiä?"," ",a.jsx("button",{onClick:u,className:"font-medium underline text-blue-700 hover:text-blue-600",children:"Lähetä uudelleen"})]}),n&&a.jsx("span",{className:"ml-2",children:"Lähetetään..."}),s&&a.jsx("span",{className:"ml-2 text-green-600",children:"Viesti lähetetty!"})]}),l&&a.jsx("p",{className:"mt-1 text-sm text-red-600",children:l})]})]})})},ON=()=>{const{currentUser:e,logout:t}=Ye(),r=Ut(),n=k.useRef(null);ga();const[i,s]=k.useState("Autopesu"),[o,l]=k.useState(!1),[c,u]=k.useState(null),d=["Autopesu","detailing","pikahuolto"],[f,m]=k.useState(0);k.useEffect(()=>{const y=p=>{n.current&&!n.current.contains(p.target)&&l(!1)};return document.addEventListener("mousedown",y),()=>document.removeEventListener("mousedown",y)},[]),k.useEffect(()=>{const y=setInterval(()=>{m(p=>(p+1)%d.length)},3e3);return()=>clearInterval(y)},[]),k.useEffect(()=>{s(d[f])},[f]),k.useEffect(()=>{(async()=>{if(e){const p=await er(e.uid);u(p)}})()},[e]);const v=async()=>{try{await t(),r("/login")}catch(y){console.error("Logout failed:",y)}};return a.jsx("nav",{className:"bg-bilo-gray/80 shadow-sm relative ios-blur fixed top-0 left-0 right-0 z-[100]",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4",children:a.jsxs("div",{className:"flex justify-between h-16",children:[a.jsx("div",{className:"flex items-center",children:a.jsxs(qt,{to:"/",className:"flex items-center",children:[a.jsx("span",{className:"text-3xl font-bold bilo-text mr-2",children:"Bilo"}),a.jsxs("div",{className:"text-sm flex items-center",children:[a.jsx("span",{className:"text-bilo-navy mr-1",children:"Nykyajan"}),a.jsx("span",{className:"changing-word font-medium",children:i})]})]})}),a.jsx("div",{className:"hidden md:flex items-center space-x-4",children:e?a.jsx(a.Fragment,{children:a.jsxs("div",{className:"relative",ref:n,children:[a.jsxs("button",{onClick:()=>l(!o),className:`flex items-center px-4 py-2.5 text-bilo-navy rounded-xl
                      transition-all duration-300 group relative
                      hover:bg-gradient-to-br hover:from-gray-100 hover:to-gray-200
                      active:scale-95 focus:outline-none focus:ring-2 focus:ring-bilo-silver`,children:[a.jsx("div",{className:`w-8 h-8 rounded-full bg-bilo-gray flex items-center justify-center
                      group-hover:bg-white transition-all duration-300 mr-2 overflow-hidden`,children:a.jsx("img",{src:"https://api.dicebear.com/7.x/avataaars/svg?seed=Felix&backgroundColor=b6e3f4",alt:"Avatar",className:"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300"})}),a.jsx("span",{className:"mr-2 font-medium group-hover:text-bilo-silver transition-colors duration-300",children:(c==null?void 0:c.firstName)||"Käyttäjä"}),a.jsx(vn,{className:"w-4 h-4 group-hover:rotate-180 transition-transform duration-300"})]}),o&&a.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-xl shadow-lg py-2 z-[101]",children:[(c==null?void 0:c.role)==="customer"&&a.jsxs(a.Fragment,{children:[a.jsxs(qt,{to:"/customer/profile",className:"block px-4 py-2 text-gray-700 hover:bg-gray-100",children:[a.jsx(bt,{className:"w-4 h-4 inline mr-2"}),"Profiili"]}),a.jsxs(qt,{to:"/customer/coins",className:"block px-4 py-2 text-gray-700 hover:bg-gray-100",children:[a.jsx(gt,{className:"w-4 h-4 inline mr-2"}),"Kolikot"]}),a.jsxs(qt,{to:"/customer/appointments",className:"block px-4 py-2 text-gray-700 hover:bg-gray-100",children:[a.jsx(Fe,{className:"w-4 h-4 inline mr-2"}),"Varaukset"]})]}),(c==null?void 0:c.role)==="vendor"&&a.jsxs(a.Fragment,{children:[a.jsxs(qt,{to:"/vendor-dashboard",className:"block px-4 py-2 text-gray-700 hover:bg-gray-100",children:[a.jsx(_t,{className:"w-4 h-4 inline mr-2"}),"Kojelauta"]}),a.jsxs(qt,{to:"/vendor-offers",className:"block px-4 py-2 text-gray-700 hover:bg-gray-100",children:[a.jsx(dt,{className:"w-4 h-4 inline mr-2"}),"Tarjoukset"]})]}),(c==null?void 0:c.role)==="admin"&&a.jsxs(qt,{to:"/admin",className:"block px-4 py-2 text-gray-700 hover:bg-gray-100",children:[a.jsx(dn,{className:"w-4 h-4 inline mr-2"}),"Hallintapaneeli"]}),a.jsx("hr",{className:"my-2"}),a.jsxs("button",{onClick:v,className:"block w-full text-left px-4 py-2 text-red-600 hover:bg-red-50",children:[a.jsx(ii,{className:"w-4 h-4 inline mr-2"}),"Kirjaudu ulos"]})]})]})}):a.jsxs(a.Fragment,{children:[a.jsx(qt,{to:"/login",className:"px-4 py-2 text-bilo-navy hover:bg-bilo-gray rounded-lg transition-colors",children:"Kirjaudu sisään"}),a.jsx(qt,{to:"/register",className:"px-4 py-2 bg-bilo-silver text-bilo-navy rounded-lg hover:bg-bilo-silver/80 transition-colors",children:"Rekisteröidy"})]})})]})})})},AN=["Helsinki","Espoo","Tampere","Vantaa","Oulu","Turku","Jyväskylä","Lahti","Kuopio","Pori","Joensuu","Lappeenranta","Hämeenlinna","Vaasa","Seinäjoki","Rovaniemi","Mikkeli","Kotka","Salo","Porvoo"],Wl="recentSearches",PN=5,EN=[{id:"quick",name:"Pikapesu",icon:a.jsx(Vr,{className:"w-4 h-4"})},{id:"interior",name:"Sisäpesu",icon:a.jsx(Vr,{className:"w-4 h-4"})},{id:"premium",name:"Premium-pesu",icon:a.jsx(Uo,{className:"w-4 h-4"})}],bd=({onClose:e,isMobile:t,selectedCity:r,onCityChange:n})=>{const[i,s]=k.useState(""),[o,l]=k.useState([]),[c,u]=k.useState(!1),[d,f]=k.useState(!1),m=k.useRef(null),v=k.useRef(null),y=k.useRef(null),p=Ut();k.useEffect(()=>{const g=localStorage.getItem(Wl);g&&l(JSON.parse(g)),t&&y.current&&y.current.focus()},[t]),k.useEffect(()=>{const g=h=>{var A,O;const w=(A=v.current)==null?void 0:A.contains(h.target),S=(O=m.current)==null?void 0:O.contains(h.target);w||u(!1),!S&&!w&&f(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]);const x=g=>{const h=[g,...o.filter(w=>w!==g)].slice(0,PN);l(h),localStorage.setItem(Wl,JSON.stringify(h))},j=g=>{if(!g.trim())return;x(g);const h=new URLSearchParams;h.append("q",g),r&&h.append("city",r),t?window.location.href=`/search?${h.toString()}`:p(`/search?${h.toString()}`),u(!1),s(""),e==null||e()},N=g=>{x(g);const h=new URLSearchParams;h.append("q",g),r&&h.append("city",r),t?window.location.href=`/search?${h.toString()}`:p(`/search?${h.toString()}`),u(!1),s(""),e==null||e()},b=(g,h)=>{h.stopPropagation();const w=o.filter(S=>S!==g);l(w),localStorage.setItem(Wl,JSON.stringify(w))};return a.jsxs("div",{ref:v,className:"relative w-full",children:[a.jsxs("div",{className:"flex flex-col space-y-3",children:[a.jsxs("div",{className:"w-full",children:[a.jsxs("button",{onClick:()=>{f(!0),u(!1)},className:"relative w-full flex items-center pl-3 pr-4 py-3.5 text-left border border-gray-200 focus:outline-none focus:ring-2 focus:ring-bilo-silver rounded-lg bg-white hover:bg-bilo-gray transition-colors",children:[a.jsx(pt,{className:"h-5 w-5 text-bilo-navy mr-2"}),a.jsx("span",{className:"text-sm font-medium truncate text-bilo-navy",children:r||"Kaikki kaupungit"})]}),d&&a.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 animate-[fadeIn_0.2s_ease-out]",children:a.jsxs("div",{ref:m,className:"bg-white rounded-2xl w-full max-w-sm overflow-hidden shadow-xl",children:[a.jsx("div",{className:"p-4 border-b border-bilo-gray",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold text-bilo-navy",children:"Valitse kaupunki"}),a.jsx("button",{onClick:()=>f(!1),className:"p-2 hover:bg-bilo-gray rounded-full transition-colors",children:a.jsx(Me,{className:"w-5 h-5 text-bilo-navy"})})]})}),a.jsxs("div",{className:"p-2 max-h-[60vh] overflow-y-auto",children:[a.jsxs("button",{onClick:()=>{n==null||n(""),f(!1)},className:"w-full px-4 py-3 text-left hover:bg-bilo-gray rounded-xl flex items-center group",children:[a.jsx(pt,{className:"w-5 h-5 text-bilo-navy group-hover:text-bilo-emerald mr-3"}),a.jsx("span",{className:"font-medium text-bilo-navy",children:"Kaikki kaupungit"})]}),AN.map(g=>a.jsxs("button",{onClick:()=>{n==null||n(g),f(!1)},className:"w-full px-4 py-3 text-left hover:bg-bilo-gray rounded-xl flex items-center group",children:[a.jsx(pt,{className:"w-5 h-5 text-bilo-navy group-hover:text-bilo-emerald mr-3"}),a.jsx("span",{className:"font-medium text-bilo-navy",children:g})]},g))]})]})})]}),a.jsxs("div",{className:"w-full",children:[a.jsx("input",{ref:y,type:"text",value:i,onChange:g=>{s(g.target.value)},onFocus:()=>u(!0),placeholder:"Etsi palveluita...",className:`
            w-full pl-12 pr-10 py-3.5 bg-white/80 rounded-ios text-bilo-navy 
            w-full pl-12 pr-10 py-3.5 bg-white text-bilo-navy 
            placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-bilo-silver 
            border border-gray-200 rounded-lg
            hover:bg-bilo-gray transition-all
            ${t?"shadow-sm":"shadow-md"}
          `}),i&&a.jsx("button",{onClick:()=>{s(""),u(!1)},className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-bilo-navy hover:text-bilo-navy p-1 hover:bg-bilo-gray rounded-full transition-colors",children:a.jsx(Me,{className:"w-5 h-5"})})]})]}),c&&a.jsxs("div",{className:"absolute top-full left-0 right-0 mt-2 bg-white rounded-lg shadow-lg border border-bilo-gray overflow-hidden z-50",children:[i&&a.jsxs("button",{onClick:()=>j(i),className:"w-full px-4 py-3 text-left hover:bg-bilo-gray flex items-center text-bilo-emerald transition-all ios-btn-active",children:[a.jsx(zr,{className:"w-4 h-4 mr-3"}),a.jsxs("span",{children:["Hae: ",a.jsx("span",{className:"font-medium",children:i})]})]}),o.length>0&&a.jsxs("div",{className:"px-3 py-2",children:[a.jsx("h3",{className:"text-xs font-medium text-bilo-navy px-1 mb-1",children:"Viimeisimmät haut"}),o.map((g,h)=>a.jsxs("button",{onClick:()=>j(g),className:"w-full px-4 py-2.5 text-left hover:bg-bilo-gray rounded-lg flex items-center justify-between group transition-colors",children:[a.jsxs("div",{className:"flex items-center text-bilo-navy",children:[a.jsx(De,{className:"w-4 h-4 mr-3 text-bilo-silver"}),g]}),a.jsx(Me,{className:"w-4 h-4 text-bilo-navy opacity-0 group-hover:opacity-100 hover:bg-bilo-gray rounded-full p-1 transition-all",onClick:w=>b(g,w)})]},h))]}),a.jsxs("div",{className:"px-3 py-2 border-t border-bilo-gray",children:[a.jsx("h3",{className:"text-xs font-medium text-bilo-navy px-1 mb-1",children:"Suositut haut"}),EN.map(g=>a.jsxs("button",{onClick:()=>N(g.name),className:"w-full px-4 py-2.5 text-left hover:bg-bilo-gray rounded-lg flex items-center text-bilo-navy transition-colors",children:[a.jsx("span",{className:"mr-3 text-bilo-silver",children:g.icon}),g.name]},g.id))]})]})]})},Kl=[{icon:a.jsx(zr,{className:"w-3.5 h-3.5 text-gray-400"}),text:"Autopesut kaikkialla Suomessa"},{icon:a.jsx(xN,{className:"w-3.5 h-3.5 text-gray-400"}),text:"Varaa autopesu omasta kaupungistasi"},{icon:a.jsx(gt,{className:"w-3.5 h-3.5 text-gray-400"}),text:"Kerää kolikoita jokaisesta pesusta"}],TN=["Käsinpesu","Täyspalvelu","Yksityiskohdat","Kiillotus","Vahaus","Sisäpesu","Moottorin pesu","Nahanhoito","Pinnoitus","Keraamiset pinnoitteet"],_N=["Helsinki","Espoo","Tampere","Vantaa","Oulu","Turku","Jyväskylä","Lahti","Kuopio","Pori","Joensuu","Lappeenranta","Hämeenlinna","Vaasa","Seinäjoki","Rovaniemi","Mikkeli","Kotka","Salo","Porvoo"],$N=()=>{const e=Ut(),[t,r]=k.useState(""),[n,i]=k.useState(0),[s,o]=k.useState(!1),[l,c]=k.useState(!0),[u,d]=k.useState(!1),[f,m]=k.useState(null),[v,y]=k.useState(null),p=k.useRef(null),x=k.useRef(null),[j,N]=k.useState(!1),[b,g]=k.useState(!0),h=k.useRef(null),w=k.useRef(0),S=k.useRef(0),[A,O]=k.useState([]),[C,T]=k.useState(!1),[E,M]=k.useState({}),[$,D]=k.useState(0),[F,_]=k.useState(!1),[R,L]=k.useState(!1),[z,V]=k.useState(null),[q,J]=k.useState(null),[X,ee]=k.useState(null),[re,Pe]=k.useState(!0),[Ee,G]=k.useState(!1);k.useEffect(()=>{const B=setInterval(()=>{_(!0),setTimeout(()=>{D(ne=>(ne+1)%Kl.length),_(!1),L(!0),setTimeout(()=>L(!1),1e3)},500)},5e3);return()=>clearInterval(B)},[]),k.useEffect(()=>{Ee&&Pe(!1);const B=setTimeout(()=>{Ee||Pe(!0)},3e4);return()=>clearTimeout(B)},[Ee]),k.useEffect(()=>{(async()=>{try{T(!0);const ne=le(W,ae.VENDORS),je=ye(ne,me("city","==","Tampere"),me("verified","==",!0),me("banned","!=",!0),Tt(8)),we=await ge(je);if(we.empty)O([{id:"1",businessName:"Premium Autopesu",coverImage:null,description:"Laadukas käsinpesu ja vahaus",rating:4.8,deliveryTime:"20-30"},{id:"2",businessName:"Tampereen Autopesu",coverImage:null,description:"Nopea ja tehokas autopesu",rating:4.5,deliveryTime:"15-25"},{id:"3",businessName:"Kiilto Autopesu",coverImage:null,description:"Erikoistunut kiillotuksiin",rating:4.9,deliveryTime:"45-55"},{id:"4",businessName:"Eco Autopesu",coverImage:null,description:"Ympäristöystävällinen pesu",rating:4.7,deliveryTime:"20-30"}]);else{const xe=we.docs.map(Te=>{const wt=Te.data();return{id:Te.id,businessName:wt.businessName,coverImage:wt.coverImage||null,description:wt.description||"Autopesupalvelut Tampereella",rating:wt.rating||4.5,deliveryTime:"20-30"}}).filter(Te=>!Te.banned);xe.length>0?O(xe):O([{id:"1",businessName:"Premium Autopesu",coverImage:null,description:"Laadukas käsinpesu ja vahaus",rating:4.8,deliveryTime:"20-30"},{id:"2",businessName:"Tampereen Autopesu",coverImage:null,description:"Nopea ja tehokas autopesu",rating:4.5,deliveryTime:"15-25"},{id:"3",businessName:"Kiilto Autopesu",coverImage:null,description:"Erikoistunut kiillotuksiin",rating:4.9,deliveryTime:"45-55"},{id:"4",businessName:"Eco Autopesu",coverImage:null,description:"Ympäristöystävällinen pesu",rating:4.7,deliveryTime:"20-30"}])}}catch(ne){console.error("Error fetching Tampere vendors:",ne),O([{id:"1",businessName:"Premium Autopesu",coverImage:null,description:"Laadukas käsinpesu ja vahaus",rating:4.8,deliveryTime:"20-30"},{id:"2",businessName:"Tampereen Autopesu",coverImage:null,description:"Nopea ja tehokas autopesu",rating:4.5,deliveryTime:"15-25"},{id:"3",businessName:"Kiilto Autopesu",coverImage:null,description:"Erikoistunut kiillotuksiin",rating:4.9,deliveryTime:"45-55"},{id:"4",businessName:"Eco Autopesu",coverImage:null,description:"Ympäristöystävällinen pesu",rating:4.7,deliveryTime:"20-30"}])}finally{T(!1)}})()},[]);const ie=B=>{M(ne=>({...ne,[B]:!0}))},oe=()=>{if(!p.current)return;const{scrollLeft:B,scrollWidth:ne,clientWidth:je}=p.current;o(B>5),c(B<ne-je-5),i(B),B>0&&!Ee&&G(!0);const we=Date.now(),xe=we-w.current;xe>0&&Math.abs(B-S.current)/xe>.5&&(d(!0),clearTimeout(v),y(setTimeout(()=>d(!1),300))),w.current=we,S.current=B},I=()=>{if(!x.current)return;const{scrollLeft:B,scrollWidth:ne,clientWidth:je}=x.current;N(B>5),g(B<ne-je-5)};k.useEffect(()=>{const B=p.current;if(B)return B.addEventListener("scroll",oe),oe(),te(),()=>{B.removeEventListener("scroll",oe),v&&clearTimeout(v),h.current&&cancelAnimationFrame(h.current)}},[]),k.useEffect(()=>{const B=x.current;if(B)return B.addEventListener("scroll",I),I(),()=>{B.removeEventListener("scroll",I)}},[A]);const te=()=>{let B="right",ne=.2,je=!0;performance.now();const we=xe=>{if(!je||!p.current){h.current=null;return}const{scrollLeft:Te,scrollWidth:wt,clientWidth:ar}=p.current;Te<=0?(B="right",ne=0,setTimeout(()=>{ne=.2},1e3)):Te>=wt-ar&&(B="left",ne=0,setTimeout(()=>{ne=.2},1e3));const yr=B==="right"?ne:-ne;p.current.scrollLeft+=yr,h.current=requestAnimationFrame(we)};if(h.current=requestAnimationFrame(we),p.current){const xe=()=>{je=!1,h.current&&cancelAnimationFrame(h.current)},Te=()=>{setTimeout(()=>{je=!0,h.current||(performance.now(),h.current=requestAnimationFrame(we))},5e3)};return p.current.addEventListener("mouseenter",xe),p.current.addEventListener("touchstart",xe),p.current.addEventListener("mouseleave",Te),p.current.addEventListener("touchend",Te),()=>{p.current&&(p.current.removeEventListener("mouseenter",xe),p.current.removeEventListener("touchstart",xe),p.current.removeEventListener("mouseleave",Te),p.current.removeEventListener("touchend",Te))}}},ue=B=>{const ne=p.current;if(!ne)return;m(B),G(!0);const je=B==="left"?-Math.min(ne.clientWidth*.8,300):Math.min(ne.clientWidth*.8,300),we=ne.scrollLeft,xe=performance.now(),Te=600;h.current&&cancelAnimationFrame(h.current);const wt=yr=>1-Math.pow(1-yr,3),ar=yr=>{const Rl=yr-xe,Ma=Math.min(Rl/Te,1),Ll=wt(Ma);ne.scrollLeft=we+je*Ll,Ma<1?h.current=requestAnimationFrame(ar):(h.current=null,m(null),oe())};h.current=requestAnimationFrame(ar)},H=B=>{const ne=x.current;if(!ne)return;const je=B==="left"?-Math.min(ne.clientWidth*.8,600):Math.min(ne.clientWidth*.8,600),we=ne.scrollLeft,xe=performance.now(),Te=600,wt=yr=>1-Math.pow(1-yr,3),ar=yr=>{const Rl=yr-xe,Ma=Math.min(Rl/Te,1),Ll=wt(Ma);ne.scrollLeft=we+je*Ll,Ma<1?requestAnimationFrame(ar):I()};requestAnimationFrame(ar)},K=B=>{e(`/vendor/${B}`)},de=B=>{const ne=new URLSearchParams;ne.append("city",B),ne.append("q","pesu"),e(`/search?${ne.toString()}`)};return a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsxs("div",{className:"max-w-5xl mx-auto px-4 py-6",children:[a.jsx(bd,{selectedCity:t,onCityChange:r}),a.jsx("div",{className:"mt-6 overflow-x-auto pb-4",children:a.jsx("div",{className:"flex space-x-2 whitespace-nowrap",children:TN.map(B=>a.jsx("button",{onClick:()=>{V(B),setTimeout(()=>{e(`/search?q=${encodeURIComponent(B)}`),V(null)},300)},onMouseEnter:()=>V(B),onMouseLeave:()=>V(null),className:`px-4 py-2 rounded-full text-sm font-medium transition-all duration-300 
                  ${z===B?"bg-bilo-navy text-white transform scale-105 shadow-md":"bg-gray-100 hover:bg-gray-200 text-gray-700 hover:shadow-sm"}`,children:B},B))})}),a.jsx("div",{className:"mt-4 mb-6 flex justify-center",children:a.jsx("div",{className:"bg-white rounded-full shadow-sm py-1.5 px-3 max-w-xs mx-auto overflow-hidden hover:shadow-md transition-shadow duration-300",children:a.jsxs("div",{className:`flex items-center justify-center transition-opacity duration-500 ${F?"opacity-0":"opacity-100"}`,style:{height:"24px"},children:[a.jsx("div",{className:`flex-shrink-0 mr-2 p-1 bg-gray-50 rounded-full 
                  ${R?"animate-pulse-quick":""}
                  relative overflow-hidden group
                  before:absolute before:inset-0 before:bg-gradient-to-r before:from-gray-50 before:to-gray-100 before:opacity-0 
                  before:transition-opacity before:duration-300 hover:before:opacity-100
                  after:absolute after:inset-0 after:bg-gray-300/20 after:rounded-full after:blur-sm after:opacity-0 
                  after:transition-opacity after:duration-300 hover:after:opacity-100`,children:a.jsx("div",{className:"relative z-10 transform transition-transform duration-300 hover:scale-110",children:Kl[$].icon})}),a.jsx("p",{className:"text-gray-700 text-xs font-medium whitespace-nowrap",children:Kl[$].text})]})})}),a.jsxs("div",{className:"mt-8 relative",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Kaupungit"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>ue("left"),className:`p-2 bg-white rounded-full shadow-sm transition-all duration-300 ${s?"opacity-100 hover:bg-gray-50 hover:shadow-md transform hover:scale-110 active:scale-95":"opacity-0 cursor-default"} ${f==="left"?"bg-gray-100":""}`,disabled:!s,"aria-hidden":!s,children:a.jsx("svg",{className:`w-5 h-5 transition-transform duration-300 ${f==="left"?"scale-90":""}`,viewBox:"0 0 24 24",fill:"none",children:a.jsx("path",{d:"M15 18l-6-6 6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),a.jsx("button",{onClick:()=>ue("right"),className:`p-2 bg-white rounded-full shadow-sm transition-all duration-300 ${l?"opacity-100 hover:bg-gray-50 hover:shadow-md transform hover:scale-110 active:scale-95":"opacity-0 cursor-default"} ${f==="right"?"bg-gray-100":""}`,disabled:!l,"aria-hidden":!l,children:a.jsx("svg",{className:`w-5 h-5 transition-transform duration-300 ${f==="right"?"scale-90":""}`,viewBox:"0 0 24 24",fill:"none",children:a.jsx("path",{d:"M9 18l6-6-6-6",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),re&&!Ee&&a.jsx("div",{className:"absolute inset-0 pointer-events-none z-10 flex items-center justify-center",children:a.jsxs("div",{className:"bg-white/80 backdrop-blur-sm px-4 py-2 rounded-full shadow-lg animate-pulse flex items-center",children:[a.jsx(Wn,{className:"w-4 h-4 mr-1"}),a.jsx("span",{className:"text-sm font-medium",children:"Selaa kaupunkeja"}),a.jsx(fr,{className:"w-4 h-4 ml-1"})]})}),a.jsx("div",{ref:p,className:`overflow-x-auto pb-6 scrollbar-hide scroll-smooth city-slider ${u?"scrolling":""}`,children:a.jsx("div",{className:"flex space-x-5 min-w-max px-1",children:_N.map((B,ne)=>a.jsxs("button",{onClick:()=>de(B),onMouseEnter:()=>ee(B),onMouseLeave:()=>ee(null),onTouchStart:()=>ee(B),onTouchEnd:()=>ee(null),className:`flex-shrink-0 text-center group city-item transition-transform duration-500 ease-out
                    ${f==="right"?"animate-slide-right":""}
                    ${f==="left"?"animate-slide-left":""}
                  `,style:{animationDelay:`${ne*30}ms`,transform:f?"scale(0.98)":"scale(1)"},children:[a.jsxs("div",{className:`w-20 h-20 bg-white dark:bg-gray-800 rounded-full mx-auto mb-2 flex items-center justify-center
                    transition-all duration-300 
                    relative overflow-hidden
                    before:absolute before:inset-0 before:rounded-full before:bg-gradient-to-r before:from-gray-100 before:to-gray-200
                    after:absolute after:inset-0 after:rounded-full after:bg-white/30 after:opacity-0 
                    group-hover:after:opacity-100 after:transition-opacity after:duration-300
                    ${X===B?"shadow-xl scale-105 ring-2 ring-gray-200/50":"shadow-lg group-hover:shadow-xl group-hover:scale-105 group-hover:ring-2 group-hover:ring-gray-200/50"}
                  `,children:[a.jsx("div",{className:`relative z-10 transition-colors duration-300 
                      ${X===B?"text-blue-500":"text-gray-700 group-hover:text-blue-500"}`,children:a.jsx(pt,{className:`w-8 h-8 transition-all duration-300 
                        ${X===B?"text-blue-500 scale-110":"text-gray-700 group-hover:text-blue-500"}`})}),a.jsx("div",{className:`absolute inset-0 bg-blue-500/10 rounded-full blur-xl transition-opacity duration-300
                      ${X===B?"opacity-100":"opacity-0 group-hover:opacity-100"}`})]}),a.jsx("span",{className:`font-medium text-sm transition-colors duration-300
                    ${X===B?"text-blue-600":"text-gray-700 group-hover:text-blue-600"}`,children:B})]},B))})})]}),a.jsxs("div",{className:"mt-12 relative",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold",children:"Autopesu Tampere"}),a.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Parhaat autopesut Tampereella"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>H("left"),className:`p-2 bg-white rounded-full shadow-sm transition-all duration-300 ${j?"opacity-100 hover:bg-gray-50 hover:shadow-md transform hover:scale-110 active:scale-95":"opacity-0 cursor-default"}`,disabled:!j,"aria-hidden":!j,children:a.jsx(Wn,{className:"w-5 h-5"})}),a.jsx("button",{onClick:()=>H("right"),className:`p-2 bg-white rounded-full shadow-sm transition-all duration-300 ${b?"opacity-100 hover:bg-gray-50 hover:shadow-md transform hover:scale-110 active:scale-95":"opacity-0 cursor-default"}`,disabled:!b,"aria-hidden":!b,children:a.jsx(fr,{className:"w-5 h-5"})})]})]}),a.jsx("div",{ref:x,className:"overflow-x-auto pb-6 scrollbar-hide scroll-smooth",children:a.jsx("div",{className:"flex space-x-4 min-w-max",children:C?Array(4).fill(0).map((B,ne)=>a.jsxs("div",{className:"flex-shrink-0 w-72 h-64 bg-white rounded-xl shadow-md overflow-hidden relative",children:[a.jsx("div",{className:"h-32 bg-gray-200 animate-pulse relative overflow-hidden",children:a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 animate-shimmer",style:{backgroundSize:"200% 100%"}})}),a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2 animate-pulse relative overflow-hidden",children:a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 animate-shimmer",style:{backgroundSize:"200% 100%"}})}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 mb-4 animate-pulse relative overflow-hidden",children:a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 animate-shimmer",style:{backgroundSize:"200% 100%"}})}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/4 animate-pulse relative overflow-hidden",children:a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 animate-shimmer",style:{backgroundSize:"200% 100%"}})}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/4 animate-pulse relative overflow-hidden",children:a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-gray-200 via-gray-100 to-gray-200 animate-shimmer",style:{backgroundSize:"200% 100%"}})})]})]})]},ne)):A.map(B=>a.jsxs("div",{className:`flex-shrink-0 w-72 bg-white rounded-xl shadow-md overflow-hidden 
                      transition-all duration-300 cursor-pointer
                      ${q===B.id?"shadow-lg transform -translate-y-1 scale-[1.02]":"hover:shadow-lg hover:-translate-y-1 hover:scale-[1.02]"}`,onClick:()=>K(B.id),onMouseEnter:()=>J(B.id),onMouseLeave:()=>J(null),onTouchStart:()=>J(B.id),onTouchEnd:()=>setTimeout(()=>J(null),300),children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"h-32 bg-gray-100 overflow-hidden",children:B.coverImage&&!E[B.id]?a.jsx("img",{src:B.coverImage,alt:B.businessName,className:`w-full h-full object-cover transition-transform duration-700 
                              ${q===B.id?"scale-110":"group-hover:scale-110"}`,onError:()=>ie(B.id)}):a.jsxs("div",{className:`w-full h-full flex flex-col items-center justify-center bg-gradient-to-br from-gray-100 to-gray-200
                            transition-colors duration-300
                            ${q===B.id?"from-gray-200 to-gray-300":""}`,children:[a.jsx(pd,{className:`w-10 h-10 text-gray-400 mb-2 transition-transform duration-300
                              ${q===B.id?"scale-110":""}`}),a.jsx("span",{className:"text-xs text-gray-500",children:B.businessName})]})}),a.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex space-x-1",children:[0,1,2,3,4].map(ne=>a.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-all duration-300
                              ${ne===0?q===B.id?"bg-white w-3":"bg-white":"bg-white/50"}`},ne))})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("h3",{className:`font-bold mb-1 transition-colors duration-200
                        ${q===B.id?"text-blue-600":"text-gray-800 group-hover:text-blue-600"}`,children:B.businessName}),a.jsx("p",{className:"text-gray-500 text-sm mb-3",children:B.description}),a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:`flex items-center transition-all duration-300
                          ${q===B.id?"transform scale-105":""}`,children:[a.jsx(mt,{className:`w-4 h-4 fill-yellow-500 transition-colors duration-300
                            ${q===B.id,"text-yellow-500"}`}),a.jsx("span",{className:"text-sm font-medium ml-1",children:B.rating.toFixed(1)})]}),a.jsxs("div",{className:`flex items-center text-gray-500 transition-all duration-300
                          ${q===B.id?"transform scale-105":""}`,children:[a.jsx(De,{className:"w-3 h-3 mr-1"}),a.jsxs("span",{className:"text-xs",children:[B.deliveryTime," min"]})]})]})]})]},B.id))})})]})]})})},CN=()=>{const e=ga(),t=Ut(),r=new URLSearchParams(e.search),n=r.get("q")||"",i=r.get("city")||"",[s,o]=k.useState([]),[l,c]=k.useState(!0),[u,d]=k.useState(null),[f,m]=k.useState({}),[v,y]=k.useState(!0),[p,x]=k.useState({}),[j,N]=k.useState([]);k.useState(n);const[b,g]=k.useState(null);k.useEffect(()=>{n&&(async()=>{try{if(!n)return;c(!0),d(null);const C=await H1(n);if(i&&C.length===0){y(!1),o([]);return}o(C);const T=await z1();if(N(T),C.length>0){const E=C.map(async F=>{const[_,R]=await Promise.all([pn(F.id),ri(F.id)]);return{vendorId:F.id,services:_,offers:R.filter(L=>L.active)}}),M=await Promise.all(E),$={},D={};M.forEach(({vendorId:F,services:_,offers:R})=>{$[F]=_,D[F]=R}),m($),x(D)}}catch(C){console.error("Error fetching results:",C),d("Hakutuloksia ei voitu ladata. Yritä hetken kuluttua uudelleen.")}finally{c(!1)}})()},[n]);const h=O=>{const C=Ne(new Date,"EEEE",{locale:He}).toLowerCase();return O.operatingHours[C]||O.operatingHours.monday},w=O=>{t(`/vendor/${O}`)},S=(O,C)=>{const E=(p[O]||[]).find(M=>M.serviceId===C.id&&new Date(M.startDate)<=new Date&&new Date(M.endDate)>=new Date);return(E==null?void 0:E.discountPercentage)||0},A=(O,C)=>{const T=S(O,C);return T>0?C.price*(1-T/100):C.price};return l?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"flex items-center space-x-2 text-blue-600",children:[a.jsx(Je,{className:"h-6 w-6 animate-spin"}),a.jsx("span",{children:"Haetaan tuloksia..."})]})}):u?a.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 max-w-md w-full mx-4",children:[a.jsx("div",{className:"flex items-center justify-center mb-4",children:a.jsx(tr,{className:"h-8 w-8 text-red-500"})}),a.jsx("h3",{className:"text-lg font-medium text-center text-gray-900 mb-2",children:"Virhe haussa"}),a.jsx("p",{className:"text-gray-600 text-center mb-4",children:u}),a.jsx("div",{className:"flex justify-center",children:a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Yritä uudelleen"})})]})}):a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-gradient-to-br from-blue-50 via-indigo-50/50 to-gray-50 shadow-sm",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 py-6",children:[a.jsx("div",{className:"max-w-3xl mx-auto mb-8",children:a.jsx(bd,{selectedCity:i,onCityChange:O=>{const C=new URLSearchParams(e.search);O?C.set("city",O):C.delete("city"),window.location.href=`/search?${C.toString()}`}})}),a.jsxs("div",{className:"text-center max-w-2xl mx-auto",children:[a.jsxs("div",{className:"inline-flex items-center bg-white/50 backdrop-blur-sm px-4 py-2 rounded-full border border-white/20 shadow-sm",children:[a.jsx("span",{className:"text-gray-600 mr-2",children:"🔍"}),a.jsx("span",{className:"font-medium text-gray-900",children:n})]}),a.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row items-center justify-center gap-3 text-sm",children:[a.jsxs("div",{className:"flex items-center text-gray-600",children:[a.jsx(pt,{className:"w-4 h-4 mr-1.5 text-gray-400"}),i||"Kaikki kaupungit"]}),a.jsx("div",{className:"hidden sm:block text-gray-300",children:"•"}),a.jsxs("div",{className:"flex items-center text-gray-600",children:[a.jsx(zr,{className:"w-4 h-4 mr-1.5 text-gray-400"}),s.length>0?`${s.length} autopesupalvelua löytyi`:"Ei hakutuloksia"]})]})]})]})}),a.jsx("div",{className:"max-w-7xl mx-auto px-4 pt-4 pb-8",children:a.jsx("div",{children:a.jsx("div",{children:v?s.length===0?a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(tr,{className:"h-6 w-6 text-yellow-500"})}),a.jsxs("div",{children:[a.jsxs("h3",{className:"text-lg font-medium text-gray-900",children:['Valitettavasti emme löytäneet hakusanalla "',n,'" yhtään palvelua']}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Tässä kuitenkin suosittelemiamme palveluita:"})]})]}),a.jsx("div",{className:"mt-6 divide-y divide-gray-200",children:j.map(O=>a.jsx("div",{className:"py-4 first:pt-0 last:pb-0",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-medium text-gray-900",children:O.name}),a.jsx("p",{className:"mt-1 text-sm text-gray-600",children:O.description}),a.jsxs("div",{className:"mt-2 flex items-center gap-4 text-sm text-gray-500",children:[a.jsxs("span",{className:"flex items-center",children:[a.jsx(De,{className:"h-4 w-4 mr-1"}),O.duration," min"]}),a.jsxs("div",{className:"flex flex-col items-end",children:[S(O.vendorId,O)>0&&a.jsxs("span",{className:"text-sm text-gray-500 line-through",children:[O.price,"€"]}),a.jsxs("span",{className:`font-medium ${S(O.vendorId,O)>0?"text-green-600":"text-blue-600"}`,children:[A(O.vendorId,O).toFixed(2),"€"]})]})]})]}),a.jsxs("button",{onClick:()=>w(O.vendorId),className:"flex items-center text-blue-600 hover:text-blue-800 font-medium",children:["Varaa",a.jsx(nN,{className:"h-4 w-4 ml-1"})]})]})},O.id))})]})}):a.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:s.map(O=>{var D;const C=f[O.id]||[],T=h(O),E=b===O.id,M=C.find(F=>F.name.toLowerCase().includes(n.toLowerCase())||F.description.toLowerCase().includes(n.toLowerCase())),$=((D=p[O.id])==null?void 0:D.length)>0;return a.jsx("div",{id:`vendor-${O.id}`,onClick:()=>w(O.id),className:`bg-white rounded-lg shadow-sm overflow-hidden hover:shadow-md transition-all duration-200 cursor-pointer select-none transform hover:scale-[1.02] ${E?"ring-2 ring-blue-500":"border border-gray-100/50 hover:border-blue-200"}`,children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-3",children:[a.jsxs("div",{className:"absolute top-2 right-2 flex flex-col items-end space-y-1",children:[$&&a.jsx("div",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full",children:"Tarjous"}),O.rating&&a.jsxs("div",{className:"flex items-center bg-yellow-50 px-2 py-1 rounded-full",children:[a.jsx(mt,{className:"h-3 w-3 text-yellow-400 mr-1",fill:"currentColor"}),a.jsx("span",{className:"text-xs font-medium text-yellow-700",children:O.rating})]})]}),a.jsx("div",{className:"w-12 h-12 rounded-lg overflow-hidden bg-gray-100 flex-shrink-0",children:a.jsx("img",{src:O.logoImage||"https://images.unsplash.com/photo-1607860108855-64acf2078ed9?auto=format&fit=crop&q=80",alt:O.businessName,className:"w-full h-full object-cover"})}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("h2",{className:"text-base font-semibold text-gray-900 truncate",children:O.businessName})}),a.jsxs("div",{className:"flex items-center text-gray-500 text-sm mt-0.5",children:[a.jsx(pt,{className:"h-3 w-3 mr-1"}),a.jsx("span",{className:"truncate",children:O.address})]})]})]}),M&&a.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[a.jsxs("div",{className:"flex items-center justify-between mb-1",children:[a.jsx("h3",{className:"font-medium text-gray-900 text-sm line-clamp-1",children:M.name}),a.jsx("div",{className:`text-xs font-medium px-2 py-0.5 rounded-full ${T.open==="closed"&&T.close==="closed"?"bg-red-100 text-red-800":T.open==="00:00"&&T.close==="23:59"?"bg-green-100 text-green-800":"bg-blue-100 text-blue-800"}`,children:T.open==="closed"&&T.close==="closed"?"Suljettu":T.open==="00:00"&&T.close==="23:59"?"24h":`${T.open} - ${T.close}`})]}),a.jsx("p",{className:"text-xs text-gray-600 mb-2 line-clamp-2",children:M.description}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"flex items-center text-xs text-gray-600",children:[a.jsx(De,{className:"h-3 w-3 mr-1"}),M.duration," min"]}),a.jsxs("div",{className:"flex items-center",children:[S(O.id,M)>0&&a.jsxs("span",{className:"text-xs text-gray-500 line-through mr-1",children:[M.price,"€"]}),a.jsxs("span",{className:`font-medium text-sm ${S(O.id,M)>0?"text-green-600":"text-gray-900"}`,children:[A(O.id,M).toFixed(2),"€"]})]})]}),a.jsxs("button",{className:"px-3 py-1.5 bg-blue-600 text-white rounded-lg text-xs font-medium flex items-center hover:bg-blue-700 transition-colors",onClick:F=>{F.stopPropagation(),w(O.id)},children:["Varaa",a.jsx(fr,{className:"h-3 w-3 ml-0.5"})]})]})]})]})},O.id)})}):a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(pt,{className:"w-10 h-10 text-blue-600"})}),a.jsxs("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:["Tulossa pian kaupunkiin ",i,"!"]}),a.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"Emme vielä tarjoa palveluja tässä kaupungissa, mutta laajennamme toimintaamme jatkuvasti. Pysy kuulolla!"}),a.jsx("button",{onClick:()=>{const O=new URLSearchParams(e.search);O.delete("city"),t(`/search?${O.toString()}`)},className:"mt-6 px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Näytä kaikki palvelut"})]})})})})]})},MN=()=>{const{currentUser:e}=Ye(),t=k.useRef(null),[r,n]=k.useState(!1),[i,s]=k.useState(!1),[o,l]=k.useState(null),[c,u]=k.useState(!1),[d,f]=k.useState({firstName:"",lastName:"",email:"",phone:"",licensePlate:""}),[m,v]=k.useState(!1);k.useEffect(()=>{(async()=>{if(e){const x=await er(e.uid);x&&f({firstName:x.firstName||"",lastName:x.lastName||"",email:x.email||"",phone:x.phone||"",licensePlate:x.licensePlate||""})}})()},[e]);const y=async p=>{if(p.preventDefault(),!!e)try{n(!0),l(null),await Ss(e.uid,d),s(!0),setTimeout(()=>s(!1),3e3)}catch(x){console.error("Error updating profile:",x),l("Profiilin päivitys epäonnistui")}finally{n(!1)}};return a.jsxs("div",{className:"min-h-screen bg-bilo-gray",children:[a.jsx("div",{className:`transition-all duration-300 
        ${c?"bg-white/90 backdrop-blur-lg shadow-sm":"bg-transparent"}`,children:a.jsx("div",{className:"px-4 py-6",children:a.jsx("h1",{className:`text-2xl font-semibold transition-all duration-300
            ${c?"text-bilo-navy":"text-gray-900"}`,children:"Profiili"})})}),a.jsxs("form",{ref:t,onSubmit:y,id:"profile-form",className:"pb-32 px-4 space-y-6 h-screen overflow-y-auto",children:[a.jsx("div",{className:"bg-white rounded-2xl p-6 shadow-sm",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:`w-20 h-20 bg-gradient-to-br from-bilo-silver to-gray-300 
              rounded-2xl flex items-center justify-center shadow-inner`,children:a.jsx(bt,{className:"w-10 h-10 text-white"})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-semibold text-bilo-navy",children:d.firstName||"Käyttäjä"}),a.jsx("p",{className:"text-gray-500",children:d.email})]})]})}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"bg-white rounded-2xl shadow-sm overflow-hidden",children:[a.jsx("div",{className:"p-4 border-b border-gray-100",children:a.jsx("h3",{className:"text-sm font-medium text-gray-500",children:"Henkilötiedot"})}),a.jsx("div",{className:"divide-y divide-gray-100",children:a.jsxs("div",{className:"space-y-5",children:[a.jsxs("div",{className:"p-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Etunimi"}),a.jsx("input",{type:"text",value:d.firstName,onChange:p=>f(x=>({...x,firstName:p.target.value})),className:`w-full px-4 py-3 rounded-xl bg-gray-50 border-2 border-transparent
                      focus:border-bilo-silver focus:ring-2 focus:ring-bilo-silver/20 focus:bg-white
                      transition-all duration-300`,required:!0})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sukunimi"}),a.jsx("input",{type:"text",value:d.lastName,onChange:p=>f(x=>({...x,lastName:p.target.value})),className:`w-full px-4 py-3 rounded-xl bg-gray-50 border-2 border-transparent
                      focus:border-bilo-silver focus:ring-2 focus:ring-bilo-silver/20 focus:bg-white
                      transition-all duration-300`,required:!0})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Rekisterinumero"}),a.jsx("input",{type:"text",value:d.licensePlate,onChange:p=>f(x=>({...x,licensePlate:p.target.value.toUpperCase()})),className:`w-full px-4 py-3 rounded-xl bg-gray-50 border-2 border-transparent
                      focus:border-bilo-silver focus:ring-2 focus:ring-bilo-silver/20 focus:bg-white
                      transition-all duration-300`,placeholder:"ABC-123",required:!0})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sähköposti"}),a.jsx("input",{type:"email",value:d.email,disabled:!0,className:`w-full px-4 py-3 rounded-xl bg-gray-100 border-2 border-transparent
                      text-gray-500 cursor-not-allowed`})]}),a.jsxs("div",{className:"p-4",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Puhelinnumero"}),a.jsx("input",{type:"tel",value:d.phone,onChange:p=>f(x=>({...x,phone:p.target.value})),className:`w-full px-4 py-3 rounded-xl bg-gray-50 border-2 border-transparent
                      focus:border-bilo-silver focus:ring-2 focus:ring-bilo-silver/20 focus:bg-white
                      transition-all duration-300`,placeholder:"+358",required:!0})]})]})})]})}),a.jsx("button",{type:"submit",disabled:r,className:`w-full flex items-center justify-center px-6 py-3 next-step-button
            text-bilo-navy font-medium rounded-xl mt-6
            transition-all duration-300 relative group
            hover:scale-[1.02] hover:shadow-xl
            disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100
            active:scale-98 focus:outline-none focus:ring-2 focus:ring-bilo-silver`,children:r?a.jsxs(a.Fragment,{children:[a.jsx(Je,{className:"animate-spin h-5 w-5 mr-2 relative z-10"}),a.jsx("span",{className:"animate-pulse relative z-10",children:"Tallennetaan..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Ts,{className:"h-5 w-5 mr-2 relative z-10 group-hover:scale-110 transition-transform"}),a.jsx("span",{className:"relative z-10 group-hover:translate-x-0.5 transition-transform",children:"Tallenna muutokset"})]})}),o&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-xl animate-shake",children:a.jsx("p",{className:"text-lg text-red-700 font-poppins",children:o})}),i&&a.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4 rounded-xl animate-fadeIn",children:a.jsx("p",{className:"text-lg text-green-700 font-poppins",children:"Profiili päivitetty onnistuneesti!"})})]}),m&&a.jsx("div",{className:`fixed bottom-0 left-0 right-0 p-4 bg-white/80 backdrop-blur-lg border-t
          border-gray-200/50 shadow-lg transform transition-all duration-300
          animate-slideUp`,children:a.jsx("button",{type:"submit",form:"profile-form",disabled:r,className:`w-full flex items-center justify-center px-6 py-3 bg-bilo-navy
              text-white rounded-xl font-medium transform transition-all duration-300
              hover:bg-bilo-navy/90 active:scale-98 disabled:opacity-50
              disabled:cursor-not-allowed focus:outline-none focus:ring-2
              focus:ring-bilo-navy focus:ring-offset-2`,children:r?a.jsx(Je,{className:"animate-spin h-5 w-5"}):a.jsxs(a.Fragment,{children:[a.jsx(Ts,{className:"w-5 h-5 mr-2"}),"Tallenna muutokset"]})})})]})},DN=[{id:"profile",label:"Profiili",icon:a.jsx(bt,{className:"w-5 h-5"}),path:"/customer/profile"},{id:"coins",label:"Kolikot",icon:a.jsx(gt,{className:"w-5 h-5"}),path:"/customer/coins"},{id:"appointments",label:"Varaukset",icon:a.jsx(Fe,{className:"w-5 h-5"}),path:"/customer/appointments"}],IN=()=>{const e=ga(),t=Ut(),{logout:r}=Ye(),n=async()=>{try{await r(),t("/login")}catch(i){console.error("Logout failed:",i)}};return a.jsx("div",{className:"bg-white rounded-xl shadow-sm p-4",children:a.jsxs("nav",{className:"space-y-2",children:[DN.map(i=>a.jsxs("button",{onClick:()=>t(i.path),className:`w-full flex items-center px-4 py-2 rounded-lg text-left transition-colors ${e.pathname===i.path?"bg-blue-50 text-blue-700":"text-gray-700 hover:bg-gray-50"}`,children:[a.jsx("span",{className:`${e.pathname===i.path?"text-blue-600":"text-gray-400"}`,children:i.icon}),a.jsx("span",{className:"ml-3 font-medium",children:i.label})]},i.id)),a.jsxs("button",{onClick:n,className:"w-full flex items-center px-4 py-2 rounded-lg text-left text-red-600 hover:bg-red-50 transition-colors",children:[a.jsx(ii,{className:"w-5 h-5"}),a.jsx("span",{className:"ml-3 font-medium",children:"Kirjaudu ulos"})]})]})})},Dc=({children:e})=>a.jsx("div",{className:"min-h-screen bg-gray-50",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-8",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[a.jsx("div",{className:"hidden md:block md:col-span-1",children:a.jsx(IN,{})}),a.jsx("div",{className:"col-span-1 md:col-span-3",children:e})]})})}),RN=({coins:e,transactions:t,referralCode:r,referralCount:n=0,activePromotions:i=[]})=>{Ye(),k.useState(""),k.useState(!1),k.useState(null),k.useState(null);const s=o=>o&&typeof o.toDate=="function"?Ne(o.toDate(),"d.M.yyyy 'klo' HH:mm",{locale:He}):o instanceof Date?Ne(o,"d.M.yyyy 'klo' HH:mm",{locale:He}):o&&o.seconds?Ne(new Date(o.seconds*1e3),"d.M.yyyy 'klo' HH:mm",{locale:He}):"Invalid date";return a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:a.jsx(gt,{className:"h-6 w-6 text-blue-600"})}),a.jsx("div",{children:a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Kolikot"})})]}),a.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[e," ",a.jsx("span",{className:"text-sm",children:"kolikkoa"})]})]}),t.length===1&&t[0].description.includes("Tervetuliaislahja")&&a.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx(uN,{className:"h-5 w-5 text-blue-600 mt-1"}),a.jsxs("div",{children:[a.jsx("h3",{className:"font-medium text-blue-900",children:"Tervetuloa bilo.fi -palveluun!"}),a.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Olet saanut 10 kolikkoa tervetuliaislahjana. Käytä kolikot alennuksiin tulevissa varauksissa."})]})]})}),i.length>0&&a.jsxs("div",{className:"border-t pt-4 mt-4",children:[a.jsxs("h3",{className:"text-lg font-medium mb-4 flex items-center",children:[a.jsx(Uo,{className:"h-5 w-5 text-yellow-500 mr-2"}),"Erikoistarjoukset"]}),a.jsx("div",{className:"space-y-3",children:i.map(o=>a.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 p-4 rounded-lg",children:[a.jsx("h4",{className:"font-medium text-blue-900",children:o.title}),a.jsx("p",{className:"text-sm text-blue-700 mt-1",children:o.description}),a.jsxs("div",{className:"mt-2 text-sm",children:[a.jsxs("span",{className:"font-medium text-purple-600",children:["+",o.bonusCoins," kolikkoa"]}),o.minimumPurchase&&a.jsxs("span",{className:"text-gray-600",children:[" (min. ",o.minimumPurchase,"€)"]})]})]},o.id))})]}),a.jsxs("div",{className:"border-t pt-4 mt-4",children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Viimeisimmät tapahtumat"}),a.jsx("div",{className:"space-y-3",children:t.length===0?a.jsx("p",{className:"text-center text-gray-500 py-4",children:"Ei tapahtumia"}):t.map(o=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[o.type==="credit"?a.jsx("div",{className:"p-2 bg-green-100 rounded-full",children:a.jsx(ws,{className:"h-4 w-4 text-green-600"})}):a.jsx("div",{className:"p-2 bg-red-100 rounded-full",children:a.jsx(Dy,{className:"h-4 w-4 text-red-600"})}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium text-gray-900",children:o.description}),a.jsx("p",{className:"text-sm text-gray-500",children:s(o.timestamp)})]})]}),a.jsxs("span",{className:`font-medium ${o.type==="credit"?"text-green-600":"text-red-600"}`,children:[o.type==="credit"?"+":"-",o.amount]})]},o.id))})]})]})})},LN=()=>{const{currentUser:e}=Ye(),[t,r]=P.useState(null);return P.useEffect(()=>{(async()=>{if(e){const i=await er(e.uid);r(i)}})()},[e]),a.jsx(Dc,{children:(t==null?void 0:t.wallet)&&a.jsx(RN,{coins:t.wallet.coins,transactions:t.wallet.transactions,referralCode:t.referralCode,referralCount:t.referralCount})})},BN=({isOpen:e,onClose:t,appointment:r})=>{const[n,i]=k.useState(0),[s,o]=k.useState(""),[l,c]=k.useState(!1),[u,d]=k.useState(null);if(!e)return null;const f=async m=>{if(m.preventDefault(),n===0){d("Valitse arvosana");return}try{c(!0),d(null),await D1(r.id,{rating:n,comment:s}),t()}catch(v){console.error("Error submitting feedback:",v),d("Virhe palautteen lähetyksessä")}finally{c(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50",children:a.jsx("div",{className:"bg-white rounded-xl w-full max-w-lg overflow-hidden",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-start mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Anna palautetta"}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:a.jsx(Me,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:f,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kuinka tyytyväinen olit palveluun?"}),a.jsx("div",{className:"flex items-center space-x-2",children:[1,2,3,4,5].map(m=>a.jsx("button",{type:"button",onClick:()=>i(m),className:`p-2 rounded-full transition-colors ${n>=m?"text-yellow-400":"text-gray-300"}`,children:a.jsx(mt,{className:"w-8 h-8 fill-current"})},m))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kommentti (valinnainen)"}),a.jsx("textarea",{value:s,onChange:m=>o(m.target.value),rows:4,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Kerro kokemuksestasi..."})]}),u&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:a.jsx("p",{className:"text-sm text-red-700",children:u})}),a.jsx("div",{className:"flex justify-end",children:a.jsxs("button",{type:"submit",disabled:l,className:"flex items-center px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:[a.jsx(_s,{className:"w-4 h-4 mr-2"}),l?"Lähetetään...":"Lähetä palaute"]})})]})]})})})},FN=()=>{const{currentUser:e}=Ye(),{setShowSupportDialog:t}=hd(),[r,n]=k.useState([]),[i,s]=k.useState(null),[o,l]=k.useState(!0);return k.useEffect(()=>{(async()=>{if(e){const d=(await Jf(e.uid)).map(f=>({...f,date:new Date(f.date.seconds*1e3)}));n(d),l(!1)}})()},[e]),o?a.jsx(Dc,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):a.jsxs(Dc,{children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Varaukset"}),a.jsxs("div",{className:"space-y-4",children:[r.map(c=>a.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 hover:bg-gray-100 transition-all",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium",children:["Pesu #",c.id.slice(0,8)]}),a.jsxs("p",{className:"text-sm text-gray-600 flex items-center",children:[a.jsx(De,{className:"h-4 w-4 mr-1"}),Ne(c.date,"d. MMMM yyyy 'klo' HH:mm",{locale:He})]})]}),a.jsx("span",{className:`px-3 py-1 rounded-full text-sm ${c.status==="confirmed"?"bg-green-100 text-green-800 ring-1 ring-green-600/20":c.status==="completed"?"bg-blue-100 text-blue-800 ring-1 ring-blue-600/20":c.status==="no_show"?"bg-purple-100 text-purple-800 ring-1 ring-purple-600/20":c.status==="cancelled_by_customer"?"bg-orange-100 text-orange-800 ring-1 ring-orange-600/20":c.status==="cancelled"?"bg-red-100 text-red-800 ring-1 ring-red-600/20":"bg-yellow-100 text-yellow-800 ring-1 ring-yellow-600/20"}`,children:c.status==="confirmed"?"Vahvistettu":c.status==="completed"?"Valmis":c.status==="no_show"?"Ei saapunut":c.status==="cancelled_by_customer"?"Peruttu (asiakas)":c.status==="cancelled"?"Peruttu":"Odottaa"})]}),a.jsxs("div",{className:"flex items-center justify-between mt-4",children:[a.jsxs("button",{onClick:u=>{u.stopPropagation(),t(!0,`Apua varaukseni kanssa #${c.id.slice(0,8)}`)},className:"inline-flex items-center px-3 py-1.5 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-200/50 rounded-lg transition-colors",children:[a.jsx(Or,{className:"w-4 h-4 mr-1.5"}),"Tarvitsetko apua?"]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[c.status==="completed"&&!c.feedback&&a.jsxs("button",{onClick:()=>s(c),className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700",children:[a.jsx(mt,{className:"w-4 h-4 mr-1.5"}),"Anna palautetta"]}),c.feedback&&a.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[a.jsx("div",{className:"flex items-center",children:Array.from({length:5}).map((u,d)=>a.jsx(mt,{className:`w-4 h-4 ${d<c.feedback.rating?"text-yellow-400 fill-current":"text-gray-300"}`},d))}),a.jsx("span",{className:"ml-2",children:"Palaute annettu"})]})]})]})]},c.id)),r.length===0&&a.jsxs("div",{className:"text-center py-12",children:[a.jsx(Fe,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsx("p",{className:"text-gray-500",children:"Ei varauksia"})]})]})]}),i&&a.jsx(BN,{isOpen:!!i,onClose:()=>{s(null),e&&Jf(e.uid).then(c=>{const u=c.map(d=>({...d,date:new Date(d.date.seconds*1e3)}));n(u)})},appointment:i})]})};function UN(e,t,r,n){function i(s){return s instanceof r?s:new r(function(o){o(s)})}return new(r||(r=Promise))(function(s,o){function l(d){try{u(n.next(d))}catch(f){o(f)}}function c(d){try{u(n.throw(d))}catch(f){o(f)}}function u(d){d.done?s(d.value):i(d.value).then(l,c)}u((n=n.apply(e,[])).next())})}function VN(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var HN=function e(t,r){if(t===r)return!0;if(t&&r&&typeof t=="object"&&typeof r=="object"){if(t.constructor!==r.constructor)return!1;var n,i,s;if(Array.isArray(t)){if(n=t.length,n!=r.length)return!1;for(i=n;i--!==0;)if(!e(t[i],r[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===r.source&&t.flags===r.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===r.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===r.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(r).length)return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(r,s[i]))return!1;for(i=n;i--!==0;){var o=s[i];if(!e(t[o],r[o]))return!1}return!0}return t!==t&&r!==r},zN=VN(HN);const nm="__googleMapsScriptId";var Mn;(function(e){e[e.INITIALIZED=0]="INITIALIZED",e[e.LOADING=1]="LOADING",e[e.SUCCESS=2]="SUCCESS",e[e.FAILURE=3]="FAILURE"})(Mn||(Mn={}));class an{constructor({apiKey:t,authReferrerPolicy:r,channel:n,client:i,id:s=nm,language:o,libraries:l=[],mapIds:c,nonce:u,region:d,retries:f=3,url:m="https://maps.googleapis.com/maps/api/js",version:v}){if(this.callbacks=[],this.done=!1,this.loading=!1,this.errors=[],this.apiKey=t,this.authReferrerPolicy=r,this.channel=n,this.client=i,this.id=s||nm,this.language=o,this.libraries=l,this.mapIds=c,this.nonce=u,this.region=d,this.retries=f,this.url=m,this.version=v,an.instance){if(!zN(this.options,an.instance.options))throw new Error(`Loader must not be called again with different options. ${JSON.stringify(this.options)} !== ${JSON.stringify(an.instance.options)}`);return an.instance}an.instance=this}get options(){return{version:this.version,apiKey:this.apiKey,channel:this.channel,client:this.client,id:this.id,libraries:this.libraries,language:this.language,region:this.region,mapIds:this.mapIds,nonce:this.nonce,url:this.url,authReferrerPolicy:this.authReferrerPolicy}}get status(){return this.errors.length?Mn.FAILURE:this.done?Mn.SUCCESS:this.loading?Mn.LOADING:Mn.INITIALIZED}get failed(){return this.done&&!this.loading&&this.errors.length>=this.retries+1}createUrl(){let t=this.url;return t+="?callback=__googleMapsCallback&loading=async",this.apiKey&&(t+=`&key=${this.apiKey}`),this.channel&&(t+=`&channel=${this.channel}`),this.client&&(t+=`&client=${this.client}`),this.libraries.length>0&&(t+=`&libraries=${this.libraries.join(",")}`),this.language&&(t+=`&language=${this.language}`),this.region&&(t+=`&region=${this.region}`),this.version&&(t+=`&v=${this.version}`),this.mapIds&&(t+=`&map_ids=${this.mapIds.join(",")}`),this.authReferrerPolicy&&(t+=`&auth_referrer_policy=${this.authReferrerPolicy}`),t}deleteScript(){const t=document.getElementById(this.id);t&&t.remove()}load(){return this.loadPromise()}loadPromise(){return new Promise((t,r)=>{this.loadCallback(n=>{n?r(n.error):t(window.google)})})}importLibrary(t){return this.execute(),google.maps.importLibrary(t)}loadCallback(t){this.callbacks.push(t),this.execute()}setScript(){var t,r;if(document.getElementById(this.id)){this.callback();return}const n={key:this.apiKey,channel:this.channel,client:this.client,libraries:this.libraries.length&&this.libraries,v:this.version,mapIds:this.mapIds,language:this.language,region:this.region,authReferrerPolicy:this.authReferrerPolicy};Object.keys(n).forEach(s=>!n[s]&&delete n[s]),!((r=(t=window==null?void 0:window.google)===null||t===void 0?void 0:t.maps)===null||r===void 0)&&r.importLibrary||(s=>{let o,l,c,u="The Google Maps JavaScript API",d="google",f="importLibrary",m="__ib__",v=document,y=window;y=y[d]||(y[d]={});const p=y.maps||(y.maps={}),x=new Set,j=new URLSearchParams,N=()=>o||(o=new Promise((b,g)=>UN(this,void 0,void 0,function*(){var h;yield l=v.createElement("script"),l.id=this.id,j.set("libraries",[...x]+"");for(c in s)j.set(c.replace(/[A-Z]/g,w=>"_"+w[0].toLowerCase()),s[c]);j.set("callback",d+".maps."+m),l.src=this.url+"?"+j,p[m]=b,l.onerror=()=>o=g(Error(u+" could not load.")),l.nonce=this.nonce||((h=v.querySelector("script[nonce]"))===null||h===void 0?void 0:h.nonce)||"",v.head.append(l)})));p[f]?console.warn(u+" only loads once. Ignoring:",s):p[f]=(b,...g)=>x.add(b)&&N().then(()=>p[f](b,...g))})(n);const i=this.libraries.map(s=>this.importLibrary(s));i.length||i.push(this.importLibrary("core")),Promise.all(i).then(()=>this.callback(),s=>{const o=new ErrorEvent("error",{error:s});this.loadErrorCallback(o)})}reset(){this.deleteScript(),this.done=!1,this.loading=!1,this.errors=[],this.onerrorEvent=null}resetIfRetryingFailed(){this.failed&&this.reset()}loadErrorCallback(t){if(this.errors.push(t),this.errors.length<=this.retries){const r=this.errors.length*Math.pow(2,this.errors.length);console.error(`Failed to load Google Maps script, retrying in ${r} ms.`),setTimeout(()=>{this.deleteScript(),this.setScript()},r)}else this.onerrorEvent=t,this.callback()}callback(){this.done=!0,this.loading=!1,this.callbacks.forEach(t=>{t(this.onerrorEvent)}),this.callbacks=[]}execute(){if(this.resetIfRetryingFailed(),!this.loading)if(this.done)this.callback();else{if(window.google&&window.google.maps&&window.google.maps.version){console.warn("Google Maps already loaded outside @googlemaps/js-api-loader. This may result in undesirable behavior as options and script parameters may not match."),this.callback();return}this.loading=!0,this.setScript()}}}const qN="AIzaSyDKHehSPh4RLaknK32pWFgIhoA4OeYC-Oc";let ns=null;const WN=async()=>ns||(await new an({apiKey:qN,version:"weekly"}).load(),ns=new google.maps.Geocoder,ns),KN=async e=>{const t=await WN();if(!e.trim())return null;try{const r=await t.geocode({address:e});if(r.results.length>0){const{lat:n,lng:i}=r.results[0].geometry.location;return{lat:n(),lng:i()}}return null}catch(r){return console.error("Geocoding error:",r),null}},YN=({service:e,onEdit:t})=>a.jsxs("div",{className:`ios-glass bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition-all duration-300 transform hover:scale-105 border ${e.available?"border-l-4 border-bilo-emerald":"border-l-4 border-red-500"}`,children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-bilo-navy",children:e.name}),a.jsx("p",{className:"text-gray-600 mt-1.5 text-sm line-clamp-2",children:e.description})]}),a.jsx("button",{className:"p-2.5 bg-bilo-gray hover:bg-bilo-silver text-gray-600 hover:text-bilo-navy rounded-full transition-all duration-300 transform hover:scale-105 active:scale-95 shadow-sm hover:shadow-md",onClick:t,"aria-label":"Muokkaa palvelua",children:a.jsx(xd,{className:"h-4 w-4"})})]}),a.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-5",children:[a.jsxs("div",{className:"flex items-center bg-bilo-gray px-3 py-1.5 rounded-full shadow-sm",children:[a.jsx(De,{className:"h-4 w-4 text-gray-500 mr-1.5"}),a.jsxs("span",{className:"text-sm text-bilo-navy",children:[e.duration," min"]})]}),a.jsx("div",{className:"flex items-center bg-bilo-silver px-3 py-1.5 rounded-full shadow-sm",children:a.jsxs("span",{className:"text-sm font-medium text-bilo-navy",children:[e.price.toFixed(2),"€"]})}),e.coinReward>0&&a.jsxs("div",{className:"flex items-center bg-yellow-50 px-3 py-1.5 rounded-full shadow-sm",children:[a.jsx(gt,{className:"h-4 w-4 text-yellow-600 mr-1.5"}),a.jsxs("span",{className:"text-sm font-medium text-yellow-700",children:["+",e.coinReward]})]}),a.jsx("div",{className:`flex items-center px-3 py-1.5 rounded-full ml-auto shadow-sm ${e.available?"bg-green-50 text-bilo-emerald":"bg-red-50 text-red-700"}`,children:e.available?a.jsxs(a.Fragment,{children:[a.jsx(Nt,{className:"h-4 w-4 mr-1.5"}),a.jsx("span",{className:"text-sm font-medium",children:"Saatavilla"})]}):a.jsxs(a.Fragment,{children:[a.jsx(Me,{className:"h-4 w-4 mr-1.5"}),a.jsx("span",{className:"text-sm font-medium",children:"Ei saatavilla"})]})})]})]});let as;const GN=new Uint8Array(16);function XN(){if(!as&&(as=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!as))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return as(GN)}const ot=[];for(let e=0;e<256;++e)ot.push((e+256).toString(16).slice(1));function QN(e,t=0){return ot[e[t+0]]+ot[e[t+1]]+ot[e[t+2]]+ot[e[t+3]]+"-"+ot[e[t+4]]+ot[e[t+5]]+"-"+ot[e[t+6]]+ot[e[t+7]]+"-"+ot[e[t+8]]+ot[e[t+9]]+"-"+ot[e[t+10]]+ot[e[t+11]]+ot[e[t+12]]+ot[e[t+13]]+ot[e[t+14]]+ot[e[t+15]]}const ZN=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),am={randomUUID:ZN};function JN(e,t,r){if(am.randomUUID&&!t&&!e)return am.randomUUID();e=e||{};const n=e.random||(e.rng||XN)();return n[6]=n[6]&15|64,n[8]=n[8]&63|128,QN(n)}const $s=({currentImage:e,onImageUploaded:t,type:r})=>{const[n,i]=k.useState(!1),[s,o]=k.useState(null),l=k.useRef(null),[c,u]=k.useState(0),d=3,f=async v=>{var p;const y=(p=v.target.files)==null?void 0:p[0];if(y){if(!y.type.startsWith("image/")){o("Vain kuvatiedostot ovat sallittuja");return}if(y.size>5*1024*1024){o("Kuvan maksimikoko on 5MB");return}try{i(!0),o(null);const x=y.name.split(".").pop(),j=`${r}_${JN()}.${x}`,N=Pf(Rf,`vendor_images/${j}`);let b;try{await Gb(N,y),b=await Xb(N)}catch(g){if(console.error("Upload error:",g),c<d)return u(h=>h+1),await new Promise(h=>setTimeout(h,1e3)),f(v);throw g}if(e)try{const h=new URL(e).pathname.match(/\/o\/([^?]+)/);if(h&&h[1]){const w=decodeURIComponent(h[1]),S=Pf(Rf,w);await Qb(S).catch(A=>{console.warn("Error deleting old image (non-critical):",A)})}}catch(g){console.error("Error parsing or deleting old image:",g)}u(0),t(b)}catch(x){console.error("Error uploading image:",x),o("Virhe kuvan latauksessa. Yritä uudelleen.")}finally{i(!1)}}},m=()=>{var v;(v=l.current)==null||v.click()};return a.jsxs("div",{className:"space-y-4",children:[e&&a.jsx("div",{className:"relative",children:a.jsx("img",{src:e,alt:r==="logo"?"Yrityksen logo":"Kansikuva",className:`rounded-lg ${r==="logo"?"w-32 h-32 object-cover":"w-full h-48 object-cover"}`,onError:v=>{console.warn("Image failed to load:",e),v.currentTarget.src=r==="logo"?"https://via.placeholder.com/128?text=Logo":"https://via.placeholder.com/800x200?text=Cover+Image"}})}),a.jsxs("div",{onClick:m,className:`
          border-2 border-dashed border-gray-300 rounded-lg 
          ${r==="logo"?"p-4":"p-8"}
          hover:border-blue-500 transition-colors cursor-pointer
          flex flex-col items-center justify-center space-y-2
          ${n?"opacity-50 cursor-not-allowed":""}
        `,children:[a.jsx("input",{ref:l,type:"file",accept:"image/*",onChange:f,className:"hidden",disabled:n}),n?a.jsx(Je,{className:"h-8 w-8 text-blue-600 animate-spin"}):e?a.jsxs(a.Fragment,{children:[a.jsx(NN,{className:"h-8 w-8 text-gray-400"}),a.jsx("p",{className:"text-sm text-gray-500",children:"Vaihda kuva"})]}):a.jsxs(a.Fragment,{children:[a.jsx(pd,{className:"h-8 w-8 text-gray-400"}),a.jsx("p",{className:"text-sm text-gray-500",children:r==="logo"?"Lataa logo":"Lataa kansikuva"}),a.jsx("p",{className:"text-xs text-gray-400",children:"Klikkaa tai raahaa kuva tähän"})]})]}),s&&a.jsxs("div",{className:"text-sm text-red-600 flex items-center",children:[a.jsx(Me,{className:"h-4 w-4 mr-1"}),s]})]})},e2=({isOpen:e,onClose:t,service:r,vendorId:n,categories:i,onServiceSaved:s})=>{const[o,l]=k.useState({name:"",description:"",categoryId:"",price:"",duration:"30",available:!0,coinReward:"0"}),[c,u]=k.useState({name:"",description:"",icon:"car"}),[d,f]=k.useState(!1),[m,v]=k.useState(!1),[y,p]=k.useState(null);P.useEffect(()=>(e?document.body.classList.add("no-scroll"):document.body.classList.remove("no-scroll"),()=>{document.body.classList.remove("no-scroll")}),[e]),k.useEffect(()=>{var b;l(r?{name:r.name,description:r.description,categoryId:r.categoryId,price:r.price.toString(),duration:r.duration.toString(),available:r.available,coinReward:(r.coinReward||0).toString()}:{name:"",description:"",categoryId:((b=i[0])==null?void 0:b.id)||"",price:"",duration:"30",available:!0,coinReward:"0"})},[r]);const x=async b=>{var g;b.preventDefault(),!o.categoryId&&i.length>0&&(o.categoryId=i[0].id);try{v(!0),p(null);const h={...o,price:parseFloat(o.price)||0,duration:parseInt(o.duration)||30,coinReward:parseInt(o.coinReward)||0,categoryId:o.categoryId||((g=i[0])==null?void 0:g.id)};r?await K1(r.id,{...h,vendorId:n}):await W1({...h,vendorId:n,id:""}),s(),t()}catch(h){console.error("Error saving service:",h),p("Virhe palvelun tallennuksessa")}finally{v(!1)}},j=async()=>{if(r)try{v(!0),p(null),await Y1(r.id),s(),t()}catch(b){console.error("Error deleting service:",b),p("Virhe palvelun poistossa")}finally{v(!1)}},N=async b=>{var g;if((g=b.preventDefault)==null||g.call(b),!c.name||!c.description){p("Täytä kaikki kentät");return}try{v(!0),p(null);const h=await B1({...c,vendorId:n,order:i.length+1,icon:c.icon});l(S=>({...S,categoryId:h})),u({name:"",description:"",icon:"car"}),f(!1),await(async()=>{await s()})()}catch(h){console.error("Error creating category:",h),p("Virhe kategorian luonnissa")}finally{v(!1)}};return e?a.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 modal-animation overflow-y-auto",children:a.jsxs("div",{className:"bg-white rounded-xl w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-xl ios-glass transform transition-all duration-300 my-4 sm:my-8 mx-4",children:[a.jsxs("div",{className:"sticky top-0 bg-white z-10 border-b px-4 py-3 sm:px-6 sm:py-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-bold text-bilo-navy",children:r?"Muokkaa palvelua":"Lisää uusi palvelu"}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-bilo-navy transition-colors duration-300 p-2 rounded-full hover:bg-bilo-gray",children:a.jsx(Me,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),a.jsx("div",{className:"p-4 sm:p-6",children:a.jsxs("form",{onSubmit:x,className:"space-y-4 sm:space-y-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-bilo-navy mb-1",children:"Nimi"}),a.jsx("input",{type:"text",value:o.name,onChange:b=>l(g=>({...g,name:b.target.value})),className:"modern-input",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-bilo-navy mb-1",children:"Kategoria"}),a.jsxs("div",{className:"relative mt-1",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row sm:space-x-2 space-y-2 sm:space-y-0",children:[a.jsx("select",{value:o.categoryId,onChange:b=>l(g=>({...g,categoryId:b.target.value})),className:"modern-input appearance-none pr-10 w-full",required:!0,children:i.map(b=>a.jsx("option",{value:b.id,children:b.name},b.id))}),a.jsxs("button",{type:"button",onClick:()=>f(!0),"data-add-category":!0,className:"px-3 py-2 bg-bilo-gray text-bilo-navy rounded-xl hover:bg-bilo-silver flex items-center justify-center transition-all duration-300 active:scale-95",children:[a.jsx(lr,{className:"w-4 h-4 mr-1"}),a.jsx("span",{children:"Lisää kategoria"})]})]}),d&&a.jsx("div",{className:"fixed inset-0 sm:absolute sm:top-full sm:left-0 sm:right-0 sm:inset-auto flex items-center justify-center sm:block sm:mt-2 bg-black/40 sm:bg-transparent backdrop-blur-sm sm:backdrop-blur-none z-20 p-4 sm:p-0",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-lg ios-glass border border-gray-100 w-full max-w-sm sm:max-w-none sm:w-auto animate-fadeIn p-5",children:[a.jsxs("div",{className:"flex justify-between items-center mb-4 sm:hidden",children:[a.jsx("h3",{className:"text-lg font-medium text-bilo-navy",children:"Lisää uusi kategoria"}),a.jsx("button",{type:"button",onClick:()=>f(!1),className:"text-gray-500 hover:text-bilo-navy p-1",children:a.jsx(Me,{className:"w-5 h-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-bilo-navy mb-1",children:"Kategorian nimi"}),a.jsx("input",{placeholder:"Esim. Premium-pesut",type:"text",value:c.name,onChange:b=>u(g=>({...g,name:b.target.value})),className:"modern-input",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-bilo-navy mb-1",children:"Kuvaus"}),a.jsx("input",{placeholder:"Esim. Premium-tason autopesupalvelut",type:"text",value:c.description,onChange:b=>u(g=>({...g,description:b.target.value})),className:"modern-input",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-bilo-navy mb-1",children:"Kuvake"}),a.jsxs("select",{value:c.icon,onChange:b=>u(g=>({...g,icon:b.target.value})),className:"modern-input",children:[a.jsx("option",{value:"car",children:"Auto"}),a.jsx("option",{value:"armchair",children:"Sisätilat"}),a.jsx("option",{value:"star",children:"Premium"}),a.jsx("option",{value:"sparkles",children:"Erikois"}),a.jsx("option",{value:"package",children:"Muu"})]})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-2",children:[a.jsx("button",{type:"button",onClick:()=>f(!1),className:"px-4 py-2.5 text-gray-600 hover:text-bilo-navy transition-colors duration-300 rounded-xl",children:"Peruuta"}),a.jsx("button",{type:"submit",disabled:m,onClick:N,className:"px-4 py-2.5 bg-bilo-silver text-bilo-navy rounded-xl hover:bg-bilo-navy hover:text-white shadow-md hover:shadow-lg transition-all duration-300 active:scale-95 disabled:opacity-50",children:m?"Luodaan...":"Luo kategoria"})]})]})]})})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-bilo-navy mb-1",children:"Kuvaus"}),a.jsx("textarea",{value:o.description,onChange:b=>l(g=>({...g,description:b.target.value})),rows:3,className:"modern-input",required:!0})]}),a.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-bilo-navy mb-1",children:"Hinta (€)"}),a.jsx("input",{type:"number",value:o.price,onChange:b=>l(g=>({...g,price:b.target.value})),min:"0",step:"0.01",className:"modern-input",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-bilo-navy mb-1",children:"Kesto (min)"}),a.jsx("input",{type:"number",value:o.duration,onChange:b=>l(g=>({...g,duration:b.target.value})),min:"5",step:"5",className:"modern-input",required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-bilo-navy mb-1",children:"Kolikkopalkkio"}),a.jsx("input",{type:"number",value:o.coinReward,onChange:b=>l(g=>({...g,coinReward:b.target.value})),min:"0",className:"modern-input"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Asiakkaat saavat tämän verran kolikoita varatessaan tämän palvelun"})]}),a.jsxs("div",{className:"flex items-center mt-4",children:[a.jsxs("div",{className:"relative inline-block w-10 h-6 mr-2",children:[a.jsx("input",{type:"checkbox",checked:o.available,onChange:b=>l(g=>({...g,available:b.target.checked})),className:"opacity-0 w-0 h-0",id:"toggle-available"}),a.jsx("label",{htmlFor:"toggle-available",className:`absolute cursor-pointer top-0 left-0 right-0 bottom-0 rounded-full transition-all duration-300 ${o.available?"bg-bilo-emerald":"bg-gray-300"}`,children:a.jsx("span",{className:`absolute w-4 h-4 bg-white rounded-full top-1 transition-all duration-300 transform ${o.available?"left-5":"left-1"}`})})]}),a.jsx("label",{htmlFor:"toggle-available",className:"block text-sm text-bilo-navy cursor-pointer",children:"Palvelu on varattavissa"})]}),y&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-3 sm:p-4 rounded-r-xl animate-fadeIn",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Me,{className:"h-5 w-5 text-red-400"})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-700",children:y})})]})}),a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between gap-4 sm:gap-0 pt-4",children:[r&&a.jsx("button",{type:"button",onClick:j,disabled:m,className:"px-4 py-2.5 text-red-600 hover:text-red-700 font-medium disabled:opacity-50 hover:bg-red-50 rounded-xl transition-all duration-300 order-2 sm:order-1",children:"Poista palvelu"}),a.jsxs("div",{className:"flex space-x-3 w-full sm:w-auto justify-end order-1 sm:order-2",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2.5 text-gray-600 hover:text-bilo-navy bg-gray-100 hover:bg-gray-200 rounded-xl transition-all duration-300 active:scale-95",children:"Peruuta"}),a.jsx("button",{type:"submit",disabled:m,className:"px-5 py-2.5 bg-bilo-silver text-bilo-navy rounded-xl hover:bg-bilo-navy hover:text-white shadow-md hover:shadow-lg transition-all duration-300 active:scale-95 disabled:opacity-50",children:m?a.jsxs("div",{className:"flex items-center",children:[a.jsx(Je,{className:"animate-spin h-5 w-5 mr-2"}),"Tallennetaan..."]}):"Tallenna"})]})]})]})})]})}):null},t2=[{id:"monday",label:"Maanantai"},{id:"tuesday",label:"Tiistai"},{id:"wednesday",label:"Keskiviikko"},{id:"thursday",label:"Torstai"},{id:"friday",label:"Perjantai"},{id:"saturday",label:"Lauantai"},{id:"sunday",label:"Sunnuntai"}],Hy=({operatingHours:e,dayStatus:t,onStatusChange:r,onHoursChange:n})=>a.jsxs("div",{className:"space-y-4 font-ubuntu",children:[a.jsxs("div",{className:"flex flex-wrap gap-4 mb-4 px-1",children:[a.jsxs("div",{className:"flex items-center text-sm bg-bilo-gray/30 rounded-lg px-3 py-1.5",children:[a.jsx("div",{className:"w-3 h-3 bg-bilo-emerald rounded-full mr-2"}),a.jsx("span",{className:"text-bilo-navy",children:"Avoinna"})]}),a.jsxs("div",{className:"flex items-center text-sm bg-bilo-gray/30 rounded-lg px-3 py-1.5",children:[a.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full mr-2"}),a.jsx("span",{className:"text-bilo-navy",children:"24h"})]}),a.jsxs("div",{className:"flex items-center text-sm bg-bilo-gray/30 rounded-lg px-3 py-1.5",children:[a.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full mr-2"}),a.jsx("span",{className:"text-bilo-navy",children:"Suljettu"})]})]}),a.jsx("div",{className:"space-y-3",children:t2.map(i=>{var s,o;return a.jsx("div",{className:"p-4 bg-bilo-gray/30 rounded-xl hover:bg-bilo-gray/40 transition-all duration-300 shadow-sm hover:shadow",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 items-center",children:[a.jsx("div",{className:"flex items-center",children:a.jsx("span",{className:"text-sm font-medium text-bilo-navy",children:i.label})}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("button",{type:"button",onClick:()=>r(i.id,"open"),className:`flex items-center px-3 py-2 rounded-lg text-sm transition-all duration-300 ${t[i.id]==="open"?"bg-bilo-emerald/20 text-bilo-emerald font-medium ring-2 ring-bilo-emerald/50":"bg-bilo-gray/50 text-gray-600 hover:bg-bilo-gray/70"}`,children:[a.jsx(rm,{className:"w-4 h-4 mr-1.5"}),"Auki"]}),a.jsxs("button",{type:"button",onClick:()=>r(i.id,"24h"),className:`flex items-center px-3 py-2 rounded-lg text-sm transition-all duration-300 ${t[i.id]==="24h"?"bg-blue-100 text-blue-600 font-medium ring-2 ring-blue-400/50":"bg-bilo-gray/50 text-gray-600 hover:bg-bilo-gray/70"}`,children:[a.jsx(sN,{className:"w-4 h-4 mr-1.5"}),"24h"]}),a.jsxs("button",{type:"button",onClick:()=>r(i.id,"closed"),className:`flex items-center px-3 py-2 rounded-lg text-sm transition-all duration-300 ${t[i.id]==="closed"?"bg-red-100 text-red-600 font-medium ring-2 ring-red-400/50":"bg-bilo-gray/50 text-gray-600 hover:bg-bilo-gray/70"}`,children:[a.jsx(ai,{className:"w-4 h-4 mr-1.5"}),"Suljettu"]})]}),t[i.id]==="open"&&a.jsxs("div",{className:"col-span-2 flex space-x-4",children:[a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(rm,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-bilo-silver"}),a.jsx("input",{type:"time",value:((s=e[i.id])==null?void 0:s.open)||"09:00",onChange:l=>n(i.id,"open",l.target.value),className:"w-full pl-10 px-4 py-2.5 bg-white/70 border-2 border-transparent rounded-xl focus:border-bilo-silver focus:ring-2 focus:ring-bilo-silver/20 focus:bg-white shadow-sm transition-all duration-300"})]})}),a.jsx("div",{className:"flex-1",children:a.jsxs("div",{className:"relative",children:[a.jsx(gN,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-bilo-silver"}),a.jsx("input",{type:"time",value:((o=e[i.id])==null?void 0:o.close)||"17:00",onChange:l=>n(i.id,"close",l.target.value),className:"w-full pl-10 px-4 py-2.5 bg-white/70 border-2 border-transparent rounded-xl focus:border-bilo-silver focus:ring-2 focus:ring-bilo-silver/20 focus:bg-white shadow-sm transition-all duration-300"})]})})]}),t[i.id]==="24h"&&a.jsxs("div",{className:"col-span-2 text-sm text-blue-600 flex items-center bg-white/60 px-4 py-2.5 rounded-xl",children:[a.jsx(De,{className:"w-4 h-4 mr-2"}),a.jsx("span",{children:"Avoinna 24 tuntia vuorokaudessa"})]}),t[i.id]==="closed"&&a.jsxs("div",{className:"col-span-2 text-sm text-red-600 flex items-center bg-white/60 px-4 py-2.5 rounded-xl",children:[a.jsx(ai,{className:"w-4 h-4 mr-2"}),a.jsx("span",{children:"Suljettu koko päivän"})]})]})},i.id)})})]}),r2=[{id:"car",label:"Auto",icon:a.jsx(Vr,{className:"w-5 h-5"})},{id:"armchair",label:"Sisätilat",icon:a.jsx(My,{className:"w-5 h-5"})},{id:"star",label:"Premium",icon:a.jsx(mt,{className:"w-5 h-5"})},{id:"sparkles",label:"Erikois",icon:a.jsx(Uo,{className:"w-5 h-5"})},{id:"package",label:"Muu",icon:a.jsx(dt,{className:"w-5 h-5"})}],n2=({isOpen:e,onClose:t,category:r,onCategorySaved:n})=>{const[i,s]=k.useState({name:r.name,description:r.description,icon:r.icon}),[o,l]=k.useState(!1),[c,u]=k.useState(null);if(!e)return null;const d=async f=>{if(f.preventDefault(),!i.name||!i.description){u("Täytä kaikki kentät");return}try{l(!0),u(null),await F1(r.id,{...r,name:i.name,description:i.description,icon:i.icon}),n(),t()}catch(m){console.error("Error updating category:",m),u("Virhe kategorian päivityksessä")}finally{l(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/40 backdrop-blur-sm flex items-center justify-center z-50 overflow-y-auto",children:a.jsxs("div",{className:"bg-white rounded-xl w-full max-w-lg max-h-[90vh] overflow-y-auto shadow-xl ios-glass m-4",children:[a.jsxs("div",{className:"sticky top-0 bg-white z-10 border-b px-4 py-3 sm:px-6 sm:py-4 flex justify-between items-center",children:[a.jsx("h2",{className:"text-lg sm:text-xl font-bold text-bilo-navy",children:"Muokkaa kategoriaa"}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-bilo-navy transition-colors duration-300 p-2 rounded-full hover:bg-bilo-gray",children:a.jsx(Me,{className:"w-5 h-5 sm:w-6 sm:h-6"})})]}),a.jsx("div",{className:"p-4 sm:p-6",children:a.jsxs("form",{onSubmit:d,className:"space-y-5",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-bilo-navy mb-1",children:"Kategorian nimi"}),a.jsx("input",{type:"text",value:i.name,onChange:f=>s(m=>({...m,name:f.target.value})),className:"modern-input",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-bilo-navy mb-1",children:"Kuvaus"}),a.jsx("input",{type:"text",value:i.description,onChange:f=>s(m=>({...m,description:f.target.value})),className:"modern-input",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-bilo-navy mb-2",children:"Kuvake"}),a.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-5 gap-2",children:r2.map(f=>a.jsxs("button",{type:"button",onClick:()=>s(m=>({...m,icon:f.id})),className:`p-3 rounded-lg flex flex-col items-center justify-center space-y-1 transition-colors ${i.icon===f.id?"bg-bilo-gray text-bilo-navy ring-2 ring-bilo-silver":"bg-gray-50 text-gray-600 hover:bg-gray-100"}`,children:[f.icon,a.jsx("span",{className:"text-xs",children:f.label})]},f.id))})]}),c&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-3 sm:p-4 rounded-r-xl animate-fadeIn",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Me,{className:"h-5 w-5 text-red-400"})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-700",children:c})})]})}),a.jsxs("div",{className:"flex flex-col-reverse sm:flex-row justify-end space-y-3 space-y-reverse sm:space-y-0 sm:space-x-3 pt-2",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2.5 text-gray-600 hover:text-bilo-navy bg-gray-100 hover:bg-gray-200 rounded-xl transition-all duration-300 active:scale-95",children:"Peruuta"}),a.jsx("button",{type:"submit",disabled:o,className:"px-5 py-2.5 bg-bilo-silver text-bilo-navy rounded-xl hover:bg-bilo-navy hover:text-white shadow-md hover:shadow-lg transition-all duration-300 active:scale-95 disabled:opacity-50 flex items-center justify-center",children:o?a.jsxs(a.Fragment,{children:[a.jsx(Je,{className:"animate-spin h-5 w-5 mr-2"}),"Tallennetaan..."]}):"Tallenna"})]})]})})]})})},a2=()=>{var J,X,ee,re,Pe,Ee,G,ie,oe,I,te,ue;const{currentUser:e}=Ye(),[t,r]=k.useState(null),[n,i]=k.useState([]),[s,o]=k.useState([]),[l,c]=k.useState([]),[u,d]=k.useState(!0),[f,m]=k.useState(!1),[v,y]=k.useState(null),[p,x]=k.useState(!1),[j,N]=k.useState("services"),[b,g]=k.useState(null),[h,w]=k.useState(!1),[S,A]=k.useState(null);k.useState(null);const[O,C]=k.useState({}),[T,E]=k.useState({}),M=async()=>{if(t){const H=await _c(t.id);c(H)}},[$,D]=k.useState({businessName:"",description:"",address:"",city:"",postalCode:"",phone:"",email:"",website:"",coverImage:"",logoImage:"",operatingHours:{}});k.useEffect(()=>{(async()=>{if(e)try{d(!0);const K=await ba(e.uid);if(K){r(K),D({businessName:K.businessName,description:K.description||"",address:K.address,city:K.city||"",postalCode:K.postalCode||"",phone:K.phone,email:K.email||"",website:K.website||"",coverImage:K.coverImage||"",logoImage:K.logoImage||"",operatingHours:K.operatingHours});const de={};Object.entries(K.operatingHours).forEach(([xe,Te])=>{!Te||Te.open==="closed"&&Te.close==="closed"?de[xe]="closed":Te.open==="00:00"&&Te.close==="23:59"?de[xe]="24h":de[xe]="open"}),C(de);const B=await ni(K.id),ne=await pn(K.id),je=await _c(K.id),we=B.map(xe=>({...xe,date:new Date(xe.date.seconds*1e3)}));i(we),o(ne),c(je),je.length>0&&E({[je[0].id]:!0})}}catch(K){console.error("Error loading vendor data:",K),y("Virhe ladattaessa tietoja")}finally{d(!1)}})()},[e]);const F=async()=>{if(t){if(!$.businessName.trim()){y("Yrityksen nimi on pakollinen");return}try{m(!0),y(null);let H=null;if($.address&&$.postalCode&&$.city){const de=`${$.address}, ${$.postalCode} ${$.city}`;H=await KN(de)}const K=Object.fromEntries(Object.entries({...$,location:H||void 0}).filter(([de,B])=>B!==void 0&&B!==""));await Os(t.id,{...t,...K,...$,updatedAt:new Date}),x(!0),setTimeout(()=>x(!1),3e3)}catch(H){console.error("Error updating vendor:",H),y("Virhe tallennettaessa muutoksia")}finally{m(!1)}}},_=(H,K,de)=>{D(B=>({...B,operatingHours:{...B.operatingHours,[H]:{...B.operatingHours[H],[K]:de}}}))},R=(H,K)=>{C(B=>({...B,[H]:K}));let de={open:"",close:""};if(K==="closed")de={open:"closed",close:"closed"};else if(K==="24h")de={open:"00:00",close:"23:59"};else{const B=$.operatingHours[H];de={open:(B==null?void 0:B.open)||"09:00",close:(B==null?void 0:B.close)||"17:00"}}D(B=>({...B,operatingHours:{...B.operatingHours,[H]:de}}))},L=async(H,K)=>{try{if(!t)return;const de={...t,[H==="logo"?"logoImage":"coverImage"]:K};await Os(t.id,de),D(B=>({...B,[H==="logo"?"logoImage":"coverImage"]:K})),x(!0),setTimeout(()=>x(!1),3e3)}catch(de){console.error("Error updating image:",de),y("Virhe kuvan päivityksessä")}},z=H=>{E(K=>({...K,[H]:!K[H]}))},V=[{id:"services",label:"Palvelut",icon:a.jsx(dt,{className:"w-5 h-5"})},{id:"analytics",label:"Analytiikka",icon:a.jsx(aN,{className:"w-5 h-5"})},{id:"settings",label:"Asetukset",icon:a.jsx(Vy,{className:"w-5 h-5"})}];if(u)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-bilo-gray",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-bilo-navy"})});if(v||!t)return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-bilo-gray",children:a.jsxs("div",{className:"text-center bg-white rounded-xl shadow-md p-8 ios-glass",children:[a.jsx("h2",{className:"text-2xl font-bold text-bilo-navy mb-3",children:"Virhe!"}),a.jsx("p",{className:"text-gray-600",children:v||"Yritystietoja ei löytynyt"})]})});const q=()=>{switch(j){case"services":return a.jsxs("div",{className:"animate-fadeIn space-y-8",children:[a.jsxs("div",{className:"bg-white rounded-xl shadow-md p-8 border border-gray-100 hover:shadow-lg transition-all duration-300 ios-glass",children:[a.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-bilo-navy",children:"Palvelut"}),a.jsx("p",{className:"mt-1 text-gray-600",children:"Hallitse tarjoamiasi palveluita"})]}),a.jsxs("button",{className:"next-step-button flex items-center px-6 py-3 rounded-full font-medium text-bilo-navy hover:text-white transition-all duration-300 active:scale-95 shadow-md hover:shadow-lg transform hover:-translate-y-0.5",onClick:()=>{g(null),w(!0)},children:[a.jsx(lr,{className:"w-4 h-4 mr-2 transition-all"}),"Lisää palvelu"]})]}),a.jsxs("div",{className:"mt-8 grid grid-cols-1 sm:grid-cols-3 gap-4",children:[a.jsx("div",{className:"ios-glass bg-white rounded-xl p-6 shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"bg-bilo-gray p-3 rounded-full shadow-sm",children:a.jsx(dt,{className:"h-6 w-6 text-bilo-navy"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Palvelut yhteensä"}),a.jsx("p",{className:"text-2xl font-bold text-bilo-navy",children:s.length})]})]})}),a.jsx("div",{className:"ios-glass bg-white rounded-xl p-6 shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"bg-bilo-gray p-3 rounded-full shadow-sm",children:a.jsx(Nt,{className:"h-6 w-6 text-bilo-emerald"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Saatavilla"}),a.jsx("p",{className:"text-2xl font-bold text-bilo-emerald",children:s.filter(H=>H.available).length})]})]})}),a.jsx("div",{className:"ios-glass bg-white rounded-xl p-6 shadow-md hover:shadow-lg transition-all duration-300 transform hover:scale-105",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"bg-bilo-gray p-3 rounded-full shadow-sm",children:a.jsx(gt,{className:"h-6 w-6 text-yellow-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Kolikot yhteensä"}),a.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:s.reduce((H,K)=>H+K.coinReward,0)})]})]})})]})]}),a.jsx("div",{className:"space-y-5",children:l.length===0?a.jsxs("div",{className:"text-center py-16 bg-white rounded-xl shadow-md ios-glass",children:[a.jsx(dt,{className:"w-16 h-16 mx-auto text-bilo-silver mb-4"}),a.jsx("h3",{className:"text-xl font-medium text-bilo-navy mb-2",children:"Ei palvelukategorioita"}),a.jsx("p",{className:"text-gray-500 mb-6",children:"Aloita lisäämällä ensimmäinen palvelusi"}),a.jsxs("button",{onClick:()=>{g(null),w(!0)},className:"next-step-button px-6 py-3 rounded-full font-medium text-bilo-navy hover:text-white transition-all duration-300 active:scale-95 shadow-md hover:shadow-lg transform hover:-translate-y-0.5",children:[a.jsx(lr,{className:"w-4 h-4 mr-2 inline-block"}),"Lisää palvelu"]})]}):l.map(H=>{const K=s.filter(B=>B.categoryId===H.id),de=T[H.id];return a.jsxs("div",{className:"bg-white rounded-xl shadow-md overflow-hidden border border-gray-100 transition-all duration-300 hover:shadow-lg ios-glass",children:[a.jsxs("div",{onClick:()=>z(H.id),className:"w-full p-6 flex items-center justify-between bg-white cursor-pointer group transition-all duration-300",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"p-3 bg-bilo-gray rounded-full shadow-sm group-hover:shadow transition-all duration-300",children:[H.icon==="car"&&a.jsx(Vr,{className:"w-5 h-5 text-bilo-navy"}),H.icon==="armchair"&&a.jsx(My,{className:"w-5 h-5 text-bilo-navy"}),H.icon==="star"&&a.jsx(mt,{className:"w-5 h-5 text-bilo-navy"}),H.icon==="sparkles"&&a.jsx(Uo,{className:"w-5 h-5 text-bilo-navy"}),H.icon==="package"&&a.jsx(dt,{className:"w-5 h-5 text-bilo-navy"})]}),a.jsxs("div",{className:"text-left",children:[a.jsx("h3",{className:"font-medium text-bilo-navy flex items-center",children:H.name}),a.jsxs("p",{className:"text-sm text-gray-500 mt-0.5",children:[K.length," palvelua"]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:B=>{B.stopPropagation(),A(H)},className:"p-2 text-gray-400 hover:text-bilo-navy opacity-0 group-hover:opacity-100 transition-all duration-300 bg-bilo-gray rounded-full hover:bg-bilo-silver",children:a.jsx(xd,{className:"w-4 h-4"})}),a.jsx(vn,{className:`w-5 h-5 text-gray-400 transition-transform duration-300 ${de?"transform rotate-180":""}`})]})]}),a.jsx("div",{className:`transition-all duration-300 overflow-hidden ${de?"max-h-[2000px] opacity-100":"max-h-0 opacity-0"}`,children:a.jsxs("div",{className:"p-6 space-y-4",children:[a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:K.map(B=>a.jsx(YN,{service:B,onEdit:()=>{g(B),w(!0)}},B.id))}),K.length===0&&a.jsxs("div",{className:"text-center py-8 bg-bilo-gray rounded-xl",children:[a.jsx(dt,{className:"w-12 h-12 mx-auto text-gray-300 mb-3"}),a.jsx("p",{className:"text-gray-500 mb-3",children:"Ei palveluita tässä kategoriassa"}),a.jsxs("button",{onClick:()=>{g(null),w(!0)},className:"mt-2 px-6 py-3 text-bilo-navy hover:text-white font-medium rounded-full bg-bilo-silver hover:bg-bilo-navy transition-all duration-300 active:scale-95",children:[a.jsx(lr,{className:"w-4 h-4 mr-1 inline-block"}),"Lisää palvelu"]})]})]})})]},H.id)})}),t&&a.jsx(e2,{isOpen:h,onClose:()=>{w(!1),g(null)},service:b,vendorId:t.id,categories:l,onServiceSaved:async()=>{await M();const H=await pn(t.id);o(H)}}),S&&a.jsx(n2,{isOpen:!!S,onClose:()=>A(null),category:S,onCategorySaved:async()=>{await M()}})]});case"analytics":return a.jsx("div",{className:"space-y-8",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Analytiikka"}),a.jsx("p",{className:"mt-1 text-gray-600",children:"Seuraa liiketoimintasi kehitystä"}),a.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-blue-50 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Varaukset tässä kuussa"}),a.jsx("p",{className:"text-3xl font-bold mt-2 text-blue-700",children:n.filter(H=>{const K=new Date;return new Date(H.date).getMonth()===K.getMonth()}).length}),a.jsxs("div",{className:"mt-4 flex items-center text-blue-600",children:[a.jsx(Fe,{className:"h-5 w-5 mr-2"}),a.jsx("span",{className:"text-sm",children:"Tässä kuussa"})]})]}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Suosituin palvelu"}),a.jsx("p",{className:"text-3xl font-bold mt-2 text-green-700",children:s.length>0?s[0].name:"-"}),a.jsxs("div",{className:"mt-4 flex items-center text-green-600",children:[a.jsx(dt,{className:"h-5 w-5 mr-2"}),a.jsx("span",{className:"text-sm",children:"Eniten varauksia"})]})]}),a.jsxs("div",{className:"bg-yellow-50 rounded-lg p-6",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Keskimääräinen arvio"}),a.jsxs("p",{className:"text-3xl font-bold mt-2 text-yellow-700",children:[t.rating||"-","/5"]}),a.jsxs("div",{className:"mt-4 flex items-center text-yellow-600",children:[a.jsx(mt,{className:"h-5 w-5 mr-2"}),a.jsxs("span",{className:"text-sm",children:[t.ratingCount||0," arvostelua"]})]})]})]})]})});case"settings":return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Asetukset"}),a.jsx("p",{className:"mt-1 text-gray-600",children:"Hallitse yrityksen asetuksia"})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Kuvat"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Logo"}),a.jsx($s,{type:"logo",currentImage:$.logoImage,onImageUploaded:H=>L("logo",H)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kansikuva"}),a.jsx($s,{type:"cover",currentImage:$.coverImage,onImageUploaded:H=>L("cover",H)})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Perustiedot"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:a.jsxs("span",{className:"flex items-center",children:[a.jsx(dt,{className:"w-4 h-4 mr-2"}),"Yrityksen nimi"]})}),a.jsx("input",{type:"text",value:$.businessName,onChange:H=>D(K=>({...K,businessName:H.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Kuvaus"}),a.jsx("textarea",{rows:3,value:$.description,onChange:H=>D(K=>({...K,description:H.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Sijainti"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:a.jsxs("span",{className:"flex items-center",children:[a.jsx(pt,{className:"w-4 h-4 mr-2"}),"Katuosoite"]})}),a.jsx("input",{type:"text",value:$.address,onChange:H=>D(K=>({...K,address:H.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Esim. Esimerkkikatu 123"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:a.jsxs("span",{className:"flex items-center",children:[a.jsx(pt,{className:"w-4 h-4 mr-2"}),"Kaupunki"]})}),a.jsx("input",{type:"text",value:$.city,onChange:H=>D(K=>({...K,city:H.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Esim. Helsinki"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:a.jsxs("span",{className:"flex items-center",children:[a.jsx(pt,{className:"w-4 h-4 mr-2"}),"Postinumero"]})}),a.jsx("input",{type:"text",value:$.postalCode,onChange:H=>D(K=>({...K,postalCode:H.target.value.toUpperCase()})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"Esim. 00100",maxLength:5,pattern:"[0-9]{5}"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Syötä 5-numeroinen postinumero"})]})]}),"            "]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Yhteystiedot"}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:a.jsxs("span",{className:!0,className:"flex items-center",children:[a.jsx(Kn,{className:"w-4 h-4 mr-2"}),"Puhelinnumero"]})}),a.jsx("input",{type:"tel",value:$.phone,onChange:H=>D(K=>({...K,phone:H.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:a.jsxs("span",{className:"flex items-center",children:[a.jsx(rr,{className:"w-4 h-4 mr-2"}),"Sähköposti"]})}),a.jsx("input",{type:"email",value:$.email,onChange:H=>D(K=>({...K,email:H.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:a.jsxs("span",{className:"flex items-center",children:[a.jsx(Es,{className:"w-4 h-4 mr-2"}),"Verkkosivusto"]})}),a.jsx("input",{type:"url",value:$.website,onChange:H=>D(K=>({...K,website:H.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"https://"})]})]})]}),a.jsx(Hy,{operatingHours:$.operatingHours,dayStatus:O,onStatusChange:R,onHoursChange:_}),v&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-700",children:v})})]})}),p&&a.jsx("div",{className:"bg-green-50 border-l-4 border-green-400 p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-green-700",children:"Muutokset tallennettu onnistuneesti!"})})]})}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{onClick:F,disabled:f,className:"flex items-center px-6 py-3 rounded-xl font-medium bg-bilo-silver text-bilo-navy hover:bg-bilo-navy hover:text-white transition-all duration-300 active:scale-95 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 disabled:opacity-50",children:f?a.jsxs(a.Fragment,{children:[a.jsx(Je,{className:"animate-spin h-5 w-5 mr-2"}),"Tallennetaan..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ts,{className:"h-5 w-5 mr-2"}),"Tallenna muutokset"]})})})]});default:return null}};return a.jsxs("div",{className:"min-h-screen bg-bilo-gray",children:[!t.verified&&a.jsx("div",{className:"bg-yellow-50 border-b border-yellow-100",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-3",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-yellow-700",children:"Yrityksesi odottaa vielä ylläpidon vahvistusta. Yritys ei näy hakutuloksissa ennen vahvistusta."})})]})})}),a.jsx("div",{className:"bg-white shadow-sm border-b ios-glass",children:a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3",children:[a.jsxs("div",{className:"flex flex-wrap gap-3",children:[a.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg shadow-sm p-3 border border-gray-100 flex-1 transform transition-all duration-300 hover:shadow-md hover:scale-[1.01] min-w-[200px]",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"relative w-10 h-10 bg-bilo-gray rounded-md overflow-hidden border border-white",children:t.logoImage?a.jsx("img",{src:t.logoImage,alt:t.businessName,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center bg-bilo-silver/20",children:a.jsx(Ry,{className:"w-5 h-5 text-bilo-silver"})})}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("h1",{className:"text-base font-bold text-bilo-navy",children:t.businessName}),t.verified&&a.jsx("div",{className:"ml-1 bg-bilo-emerald/10 p-0.5 rounded-full",children:a.jsx(Nt,{className:"h-3 w-3 text-bilo-emerald"})})]}),a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(_t,{className:"h-3 w-3 mr-1 text-bilo-navy/60"}),a.jsx("span",{children:t.businessId})]})]})]})}),a.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg shadow-sm p-3 border border-gray-100 flex-1 transform transition-all duration-300 hover:shadow-md hover:scale-[1.01] min-w-[200px]",children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsx("h3",{className:"text-xs font-medium text-bilo-navy mb-2",children:"Yhteystiedot"}),a.jsxs("div",{className:"space-y-1",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Kn,{className:"h-3 w-3 mr-1.5 text-gray-500"}),a.jsx("span",{className:"text-xs text-gray-600",children:t.phone})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(rr,{className:"h-3 w-3 mr-1.5 text-gray-500"}),a.jsx("span",{className:"text-xs text-gray-600",children:t.email})]}),t.website&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(Es,{className:"h-3 w-3 mr-1.5 text-gray-500"}),a.jsx("a",{href:t.website,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-600 hover:text-blue-800 truncate",children:t.website.replace(/^https?:\/\//,"")})]})]})]})}),a.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg shadow-sm p-3 border border-gray-100 flex-1 transform transition-all duration-300 hover:shadow-md hover:scale-[1.01] min-w-[200px]",children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsx("h3",{className:"text-xs font-medium text-bilo-navy mb-2",children:"Toimipisteen sijainti"}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex",children:[a.jsx(pt,{className:"h-3 w-3 mr-1.5 text-gray-500 flex-shrink-0 mt-0.5"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-xs text-gray-600",children:t.address}),a.jsxs("p",{className:"text-xs text-gray-600",children:[t.postalCode," ",t.city]})]})]}),a.jsxs("div",{className:"flex items-center mt-1",children:[a.jsx(De,{className:"h-3 w-3 mr-1.5 text-gray-500"}),a.jsx("span",{className:"text-xs text-gray-600",children:((X=(J=t.operatingHours)==null?void 0:J.monday)==null?void 0:X.open)==="closed"&&((re=(ee=t.operatingHours)==null?void 0:ee.monday)==null?void 0:re.close)==="closed"?"Suljettu tänään":((Ee=(Pe=t.operatingHours)==null?void 0:Pe.monday)==null?void 0:Ee.open)==="00:00"&&((ie=(G=t.operatingHours)==null?void 0:G.monday)==null?void 0:ie.close)==="23:59"?"Avoinna 24h":`Avoinna: ${((I=(oe=t.operatingHours)==null?void 0:oe.monday)==null?void 0:I.open)||"09:00"} - ${((ue=(te=t.operatingHours)==null?void 0:te.monday)==null?void 0:ue.close)||"17:00"}`})]})]})]})})]}),a.jsxs("div",{className:"mt-3 flex flex-wrap gap-3",children:[a.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg shadow-sm p-2 border border-gray-100 transition-all duration-300 hover:shadow-md hover:bg-white/90 hover:scale-[1.01] flex-1 min-w-[100px]",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"bg-bilo-gray/60 p-1.5 rounded-md",children:a.jsx(Fe,{className:"h-3 w-3 text-bilo-navy/80"})}),a.jsxs("div",{className:"ml-2",children:[a.jsx("p",{className:"text-base font-bold text-bilo-navy",children:n.filter(H=>H.status==="confirmed").length}),a.jsx("p",{className:"text-[10px] text-gray-500",children:"Tulevat varaukset"})]})]})}),a.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg shadow-sm p-2 border border-gray-100 transition-all duration-300 hover:shadow-md hover:bg-white/90 hover:scale-[1.01] flex-1 min-w-[100px]",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"bg-bilo-gray/60 p-1.5 rounded-md",children:a.jsx(dt,{className:"h-3 w-3 text-bilo-navy/80"})}),a.jsxs("div",{className:"ml-2",children:[a.jsx("p",{className:"text-base font-bold text-bilo-emerald",children:s.filter(H=>H.available).length}),a.jsx("p",{className:"text-[10px] text-gray-500",children:"Aktiiviset palvelut"})]})]})}),a.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-lg shadow-sm p-2 border border-gray-100 transition-all duration-300 hover:shadow-md hover:bg-white/90 hover:scale-[1.01] flex-1 min-w-[100px]",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"bg-bilo-gray/60 p-1.5 rounded-md",children:a.jsx(mt,{className:"h-3 w-3 text-bilo-navy/80"})}),a.jsxs("div",{className:"ml-2",children:[a.jsxs("p",{className:"text-base font-bold text-yellow-600",children:[t.rating||"-","/5"]}),a.jsx("p",{className:"text-[10px] text-gray-500",children:"Arvosana"})]})]})})]})]})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[a.jsx("div",{className:"mt-6 bg-white rounded-xl shadow-md overflow-x-auto backdrop-blur-sm ios-glass",children:a.jsx("nav",{className:"flex p-2 min-w-max","aria-label":"Tabs",children:V.map(H=>a.jsxs("button",{onClick:()=>N(H.id),className:`
                  flex-1 inline-flex items-center justify-center py-4 px-6 rounded-xl font-medium text-sm transition-all duration-300 whitespace-nowrap transform active:scale-95
                  ${j===H.id?"bg-bilo-silver text-bilo-navy shadow-md":"text-gray-600 hover:text-bilo-navy hover:bg-bilo-gray"}
                `,children:[a.jsx("span",{className:`mr-3 transition-colors duration-300 ${j===H.id?"text-bilo-navy":"text-gray-400"}`,children:H.icon}),H.label]},H.id))})}),a.jsx("div",{className:"py-8",children:q()})]})]})},im=(e,t)=>{const r=Ne(e,"EEEE").toLowerCase();return t.operatingHours[r]||{open:"09:00",close:"17:00"}},i2=["MON","TUE","WED","THU","FRI","SAT","SUN"],s2=({isOpen:e,onClose:t,service:r,vendorId:n,vendor:i})=>{const{currentUser:s,signup:o}=Ye(),l=Ut();P.useEffect(()=>(e?document.body.classList.add("no-scroll"):document.body.classList.remove("no-scroll"),()=>{document.body.classList.remove("no-scroll")}),[e]),P.useEffect(()=>(e?document.body.classList.add("no-scroll"):document.body.classList.remove("no-scroll"),()=>{document.body.classList.remove("no-scroll")}),[e]);const[c,u]=k.useState("date"),[d,f]=k.useState(null),[m,v]=k.useState(""),[y,p]=k.useState(new Date),[x,j]=k.useState(!1),[N,b]=k.useState(!1),[g,h]=k.useState(null),[w,S]=k.useState(!1),[A,O]=k.useState(!1),[C,T]=k.useState(null),[E,M]=k.useState([]),[$,D]=k.useState({firstName:"",lastName:"",email:(s==null?void 0:s.email)||"",phone:"",licensePlate:"",password:""});if(!e)return null;k.useEffect(()=>{(async()=>{if(s){const[te,ue]=await Promise.all([er(s.uid),ri(n)]);T(te),M(ue.filter(H=>H.active))}})()},[s,n]);const F=()=>{const I=E.find(te=>te.serviceId===r.id&&new Date(te.startDate)<=new Date&&new Date(te.endDate)>=new Date);return(I==null?void 0:I.discountPercentage)||0},_=()=>{const I=F();return I>0?r.price*(1-I/100):r.price},R=async()=>{if(!d||!m){h("Valitse päivä ja aika");return}if(!$.firstName||!$.lastName||!$.email||!$.phone||!$.licensePlate){h("Täytä kaikki asiakastiedot");return}try{b(!0),h(null);let I=s==null?void 0:s.uid;if(!s&&$.password)try{I=(await o($.email,$.password)).user.uid}catch(de){if(de.code==="auth/email-already-in-use"){S(!0),h("Sähköposti on jo käytössä. Kirjaudu sisään jatkaaksesi.");return}throw de}if(!I){h("Kirjautuminen epäonnistui");return}const te=new Date(d),[ue,H]=m.split(":");if(te.setHours(parseInt(ue),parseInt(H)),x&&(!C||x>C.wallet.coins)){h("Ei tarpeeksi kolikoita");return}const K={customerId:I,vendorId:n,serviceId:r.id,date:te,status:"confirmed",totalPrice:x?Math.max(0,_()-Math.min((C==null?void 0:C.wallet.coins)||0,Math.floor(_()/.5))*.5):_(),customerDetails:{firstName:$.firstName,lastName:$.lastName,email:$.email,phone:$.phone,licensePlate:$.licensePlate}};await G1(K,x?Math.min((C==null?void 0:C.wallet.coins)||0,Math.floor(r.price/.5)):0),O(!0),setTimeout(()=>{l("/"),t()},3e3)}catch(I){console.error("Booking error:",I),h("Varauksen luonti epäonnistui. Yritä uudelleen.")}finally{b(!1)}},L=()=>{const I={service:r,vendorId:n,selectedDate:d,selectedTime:m,customerDetails:$};sessionStorage.setItem("pendingBooking",JSON.stringify(I)),l("/login")},z=()=>{if(!d)return[];const I=im(d,i);if(I.open==="closed"&&I.close==="closed")return[];if(I.open==="00:00"&&I.close==="23:59")return Array.from({length:48},(je,we)=>{const xe=Math.floor(we/2),Te=we%2===0?"00":"30";return`${xe.toString().padStart(2,"0")}:${Te}`});const[te,ue="0"]=I.open.split(":"),[H,K="0"]=I.close.split(":"),de=parseInt(te)*60+parseInt(ue),B=parseInt(H)*60+parseInt(K),ne=[];for(let je=de;je<B;je+=30){const we=Math.floor(je/60),xe=je%60;ne.push(`${we.toString().padStart(2,"0")}:${xe.toString().padStart(2,"0")}`)}return ne},V=I=>{const te=im(I,i);return!(te.open==="closed"&&te.close==="closed")},q=()=>{c==="date"&&d?u("time"):c==="time"&&m?u("details"):c==="details"&&$.firstName&&$.lastName&&$.email&&$.phone&&$.licensePlate?u(s?"confirm":"signup"):c==="signup"&&$.password&&u("confirm")},J=()=>{c==="time"?u("date"):c==="details"?u("time"):c==="signup"?u("details"):c==="confirm"&&u(s?"details":"signup")},X=()=>{p(by(y,1))},ee=()=>{p(Ec(y,1))},re=()=>{const I=Oy(y),te=ky(I),ue=hn(I,{weekStartsOn:1}),H=Ay(te,{weekStartsOn:1}),K=qj(),de=Sy({start:ue,end:H});return a.jsxs("div",{className:"p-4 animate-fadeIn",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsx("button",{onClick:ee,className:"p-2 hover:bg-gray-100 rounded-full transition-all duration-200 active:scale-95",children:a.jsx(Wn,{className:"w-5 h-5"})}),a.jsx("h2",{className:"text-xl font-semibold",children:Ne(y,"MMMM yyyy",{locale:He})}),a.jsx("button",{onClick:X,className:"p-2 hover:bg-gray-100 rounded-full transition-all duration-200 active:scale-95",children:a.jsx(fr,{className:"w-5 h-5"})})]}),a.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:i2.map(B=>a.jsx("div",{className:"text-center text-sm font-medium text-gray-500",children:B},B))}),a.jsx("div",{className:"grid grid-cols-7 gap-1",children:de.map(B=>{const ne=d&&md(B,d),je=Hj(B,y),we=Vj(B,K),xe=V(B);return a.jsx("div",{className:`
                  relative p-2 text-center
                  ${!je&&"opacity-30"}
                  ${we&&"opacity-30 cursor-not-allowed"}
                `,children:a.jsxs("button",{onClick:()=>!we&&f(B),disabled:we||!je,className:`
                    w-full aspect-square flex flex-col items-center justify-center rounded-lg
                    transition-all duration-200
                    ${ne?"bg-blue-600 text-white scale-105 shadow-lg":"hover:bg-gray-100 hover:scale-105"}
                    ${we||!je?"cursor-not-allowed":"cursor-pointer"}
                    ${xe&&!ne?"hover:bg-green-50":""}
                    active:scale-95
                  `,children:[a.jsx("span",{className:`text-sm ${zj(B)&&"font-bold"}`,children:Ne(B,"d")}),xe&&a.jsx("div",{className:`mt-1 h-1 w-4 rounded-full mx-auto
                      ${ne?"bg-white":"bg-green-500"}
                      transition-all duration-200
                    `})]})},B.toString())})})]})},Pe=()=>{const I=z();return I.length===0?a.jsxs("div",{className:"p-4 text-center animate-fadeIn",children:[a.jsx("p",{className:"text-gray-600",children:"Valitettavasti tämä päivä on suljettu."}),a.jsx("button",{onClick:()=>u("date"),className:"mt-4 text-blue-600 hover:text-blue-800 transition-colors",children:"Valitse toinen päivä"})]}):a.jsxs("div",{className:"p-4 animate-fadeIn",children:[a.jsx("div",{className:"text-center mb-6",children:a.jsx("h3",{className:"text-lg font-medium",children:d&&Ne(d,"EEEE d.M.yyyy",{locale:He})})}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-2",children:I.map((te,ue)=>{const H=te===m;return a.jsx("button",{onClick:()=>v(te),className:`
                  p-3 rounded-lg text-center
                  transition-all duration-200
                  transform hover:scale-105
                  active:scale-95
                  ${H?"bg-blue-600 text-white shadow-lg scale-105":"bg-gray-50 hover:bg-gray-100"}
                `,style:{animation:`fadeIn 0.3s ease-out ${ue*.05}s both`},children:a.jsx("span",{className:"text-lg",children:te})},te)})})]})},Ee=()=>a.jsx("div",{className:"p-4 animate-fadeIn",children:a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Etunimi"}),a.jsx("input",{type:"text",value:$.firstName,onChange:I=>D(te=>({...te,firstName:I.target.value})),className:`mt-1 block w-full rounded-lg border-gray-300 shadow-sm
                  focus:border-blue-500 focus:ring-blue-500
                  transition-all duration-200
                  hover:border-gray-400`,required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sukunimi"}),a.jsx("input",{type:"text",value:$.lastName,onChange:I=>D(te=>({...te,lastName:I.target.value})),className:`mt-1 block w-full rounded-lg border-gray-300 shadow-sm
                  focus:border-blue-500 focus:ring-blue-500
                  transition-all duration-200
                  hover:border-gray-400`,required:!0})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Rekisterinumero"}),a.jsx("input",{type:"text",value:$.licensePlate,onChange:I=>D(te=>({...te,licensePlate:I.target.value.toUpperCase()})),className:`mt-1 block w-full rounded-lg border-gray-300 shadow-sm
                focus:border-blue-500 focus:ring-blue-500
                transition-all duration-200
                hover:border-gray-400`,placeholder:"ABC-123",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sähköposti"}),a.jsx("input",{type:"email",value:$.email,onChange:I=>D(te=>({...te,email:I.target.value})),className:`mt-1 block w-full rounded-lg border-gray-300 shadow-sm
                focus:border-blue-500 focus:ring-blue-500
                transition-all duration-200
                hover:border-gray-400`,required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Puhelinnumero"}),a.jsx("input",{type:"tel",value:$.phone,onChange:I=>D(te=>({...te,phone:I.target.value})),className:`mt-1 block w-full rounded-lg border-gray-300 shadow-sm
                focus:border-blue-500 focus:ring-blue-500
                transition-all duration-200
                hover:border-gray-400`,placeholder:"+358",required:!0})]})]})}),G=()=>a.jsxs("div",{className:"p-4 animate-fadeIn",children:[a.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg mb-6 transform hover:scale-[1.02] transition-transform duration-200",children:[a.jsxs("div",{className:"flex items-center space-x-3 text-blue-700",children:[a.jsx(gt,{className:"h-6 w-6 animate-bounce"}),a.jsx("h3",{className:"font-semibold text-lg",children:"Liity jäseneksi ja saa 10 kolikkoa!"})]}),a.jsx("p",{className:"mt-2 text-sm text-blue-600",children:"Aseta salasana tilillesi ja saat heti 10 kolikkoa käyttöösi. Voit käyttää kolikoita alennuksiin tulevissa varauksissa."})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sähköposti"}),a.jsx("input",{type:"email",value:$.email,disabled:!0,className:"mt-1 block w-full rounded-lg border-gray-300 bg-gray-50 shadow-sm"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Salasana"}),a.jsx("input",{type:"password",value:$.password,onChange:I=>D(te=>({...te,password:I.target.value})),className:`mt-1 block w-full rounded-lg border-gray-300 shadow-sm
                focus:border-blue-500 focus:ring-blue-500
                transition-all duration-200
                hover:border-gray-400`,placeholder:"Vähintään 6 merkkiä",required:!0,minLength:6})]})]})]}),ie=()=>!d||!m?null:a.jsx("div",{className:"p-4 animate-fadeIn",children:a.jsxs("div",{className:"bg-blue-50 p-6 rounded-lg",children:[a.jsx("h3",{className:"font-semibold text-lg mb-4",children:"Varauksen tiedot"}),a.jsxs("div",{className:"space-y-4",children:[s&&C&&C.wallet.coins>0&&a.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg mb-4 transform hover:scale-[1.02] transition-transform duration-200",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(gt,{className:"w-5 h-5 text-yellow-600 mr-2"}),a.jsxs("span",{className:"text-sm text-yellow-700",children:["Käytettävissä: ",C.wallet.coins," kolikkoa"]})]}),a.jsx("button",{type:"button",onClick:()=>j(!x),className:`px-4 py-2 rounded-lg text-sm font-medium
                      transition-all duration-200
                      transform hover:scale-105 active:scale-95
                      ${x?"bg-green-500 text-white hover:bg-green-600":"bg-yellow-500 text-white hover:bg-yellow-600"}`,children:x?"Kolikot käytössä":"Käytä kolikot"})]}),x&&a.jsx("div",{className:"mt-3 text-sm text-yellow-600 animate-fadeIn",children:a.jsxs("p",{children:["Käytetään ",Math.min(C.wallet.coins,Math.floor(r.price/.5))," kolikkoa = ",(Math.min(C.wallet.coins,Math.floor(r.price/.5))*.5).toFixed(2),"€ alennus"]})})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{className:"flex justify-between items-center p-2 hover:bg-blue-100 rounded-lg transition-colors",children:[a.jsx("span",{className:"text-gray-600",children:"Palvelu"}),a.jsx("span",{className:"font-medium text-gray-900",children:r.name})]}),a.jsxs("div",{className:"flex justify-between items-center p-2 hover:bg-blue-100 rounded-lg transition-colors",children:[a.jsx("span",{className:"text-gray-600",children:"Päivämäärä"}),a.jsx("span",{className:"font-medium text-gray-900",children:Ne(d,"d.M.yyyy")})]}),a.jsxs("div",{className:"flex justify-between items-center p-2 hover:bg-blue-100 rounded-lg transition-colors",children:[a.jsx("span",{className:"text-gray-600",children:"Aika"}),a.jsx("span",{className:"font-medium text-gray-900",children:m})]}),a.jsxs("div",{className:"flex justify-between items-center p-2 hover:bg-blue-100 rounded-lg transition-colors",children:[a.jsx("span",{className:"text-gray-600",children:"Kesto"}),a.jsxs("span",{className:"font-medium text-gray-900",children:[r.duration," min"]})]}),a.jsxs("div",{className:"flex justify-between items-center p-2 hover:bg-blue-100 rounded-lg transition-colors",children:[a.jsx("span",{className:"text-gray-600",children:"Asiakas"}),a.jsxs("span",{className:"font-medium text-gray-900",children:[$.firstName," ",$.lastName]})]}),a.jsxs("div",{className:"flex justify-between items-center p-2 hover:bg-blue-100 rounded-lg transition-colors",children:[a.jsx("span",{className:"text-gray-600",children:"Rekisterinumero"}),a.jsx("span",{className:"font-medium text-gray-900",children:$.licensePlate})]})]}),a.jsx("div",{className:"pt-4 border-t mt-4",children:a.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 rounded-lg",children:[a.jsx("span",{className:"font-semibold",children:"Yhteensä"}),a.jsxs("div",{className:"text-right",children:[x&&a.jsxs("div",{className:"text-sm text-gray-500 line-through mb-1 animate-fadeIn",children:[_().toFixed(2),"€"]}),a.jsxs("span",{className:"font-semibold text-lg text-gray-900",children:[x?Math.max(0,_()-Math.min((C==null?void 0:C.wallet.coins)||0,Math.floor(_()/.5))*.5).toFixed(2):_().toFixed(2),"€"]})]})]})})]})]})}),oe=()=>a.jsxs("div",{className:"p-8 text-center animate-fadeIn",children:[a.jsx("div",{className:`w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4
        animate-[bounce_1s_ease-in-out_infinite]`,children:a.jsx(Nt,{className:"w-8 h-8 text-green-600"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Varaus vahvistettu!"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"Lähetimme varausvahvistuksen sähköpostiisi. Nähdään pian!"}),a.jsx("div",{className:"animate-pulse text-sm text-gray-500",children:"Sinut ohjataan kojelaudalle..."})]});return a.jsx("div",{className:`fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-[100]
      animate-fadeIn`,children:a.jsxs("div",{className:`bg-white rounded-xl w-full max-w-lg max-h-[90vh] overflow-hidden flex flex-col
        transform transition-all duration-300 animate-slideDown`,children:[a.jsxs("div",{className:"border-b p-4",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("h2",{className:"text-xl font-bold",children:"Varaa aika"}),a.jsx("button",{onClick:t,className:`text-gray-500 hover:text-gray-700 transition-colors
                rounded-full p-1 hover:bg-gray-100`,children:a.jsx(Me,{className:"w-6 h-6"})})]}),a.jsxs("div",{className:"flex items-center justify-between mt-6 relative",children:[a.jsxs("div",{className:`flex flex-col items-center z-10 transition-all duration-300
              ${c==="date"?"text-bilo-navy":"text-gray-500"}`,children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center
                transition-all duration-300 transform
                ${c==="date"?"bg-gradient-to-br from-gray-100 to-bilo-silver scale-110 shadow-lg ring-2 ring-bilo-silver/30 animate-pulse":"bg-white border-2 border-gray-200 hover:border-bilo-silver hover:scale-105"}`,children:a.jsx(Fe,{className:`w-5 h-5 transition-transform duration-300 ${c==="date"?"scale-110":""}`})}),a.jsx("span",{className:"mt-2 text-xs font-medium",children:"Päivä"})]}),a.jsxs("div",{className:`flex flex-col items-center z-10 transition-all duration-300
              ${c==="time"?"text-bilo-navy":"text-gray-500"}`,children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center
                transition-all duration-300 transform
                ${c==="time"?"bg-gradient-to-br from-gray-100 to-bilo-silver scale-110 shadow-lg ring-2 ring-bilo-silver/30 animate-pulse":"bg-white border-2 border-gray-200 hover:border-bilo-silver hover:scale-105"}`,children:a.jsx(De,{className:`w-5 h-5 transition-transform duration-300 ${c==="time"?"scale-110":""}`})}),a.jsx("span",{className:"mt-2 text-xs font-medium",children:"Aika"})]}),a.jsxs("div",{className:`flex flex-col items-center z-10 transition-all duration-300
              ${c==="details"?"text-bilo-navy":"text-gray-500"}`,children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center
                transition-all duration-300 transform
                ${c==="details"?"bg-gradient-to-br from-gray-100 to-bilo-silver scale-110 shadow-lg ring-2 ring-bilo-silver/30 animate-pulse":"bg-white border-2 border-gray-200 hover:border-bilo-silver hover:scale-105"}`,children:a.jsx(bt,{className:`w-5 h-5 transition-transform duration-300 ${c==="details"?"scale-110":""}`})}),a.jsx("span",{className:"mt-2 text-xs font-medium",children:"Tiedot"})]}),!s&&a.jsx(a.Fragment,{children:a.jsxs("div",{className:`flex flex-col items-center z-10 transition-all duration-300
                  ${c==="signup"?"text-bilo-navy":"text-gray-500"}`,children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center
                    transition-all duration-300 transform
                    ${c==="signup"?"bg-gradient-to-br from-gray-100 to-bilo-silver scale-110 shadow-lg ring-2 ring-bilo-silver/30 animate-pulse":"bg-white border-2 border-gray-200 hover:border-bilo-silver hover:scale-105"}`,children:a.jsx(gt,{className:`w-5 h-5 transition-transform duration-300 ${c==="signup"?"scale-110":""}`})}),a.jsx("span",{className:"mt-2 text-xs font-medium",children:"Liity"})]})}),a.jsxs("div",{className:`flex flex-col items-center z-10 transition-all duration-300
              ${c==="confirm"?"text-bilo-navy":"text-gray-500"}`,children:[a.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center
                transition-all duration-300 transform
                ${c==="confirm"?"bg-gradient-to-br from-gray-100 to-bilo-silver scale-110 shadow-lg ring-2 ring-bilo-silver/30 animate-pulse":"bg-white border-2 border-gray-200 hover:border-bilo-silver hover:scale-105"}`,children:a.jsx(Nt,{className:`w-5 h-5 transition-transform duration-300 ${c==="confirm"?"scale-110":""}`})}),a.jsx("span",{className:"mt-2 text-xs font-medium",children:"Vahvista"})]})]})]}),a.jsxs("div",{className:"flex-1 overflow-auto",children:[A?oe():a.jsxs(a.Fragment,{children:[c==="date"&&re(),c==="time"&&Pe(),c==="details"&&Ee(),c==="signup"&&G(),c==="confirm"&&ie()]}),g&&a.jsx("div",{className:"m-4 bg-red-50 border-l-4 border-red-400 p-4 animate-shake",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Me,{className:"h-5 w-5 text-red-400"})}),a.jsxs("div",{className:"ml-3",children:[a.jsx("p",{className:"text-sm text-red-700",children:g}),w&&a.jsxs("button",{onClick:L,className:`mt-2 flex items-center text-blue-600 hover:text-blue-800
                        transition-colors group`,children:[a.jsx(vd,{className:"h-4 w-4 mr-1 group-hover:translate-x-1 transition-transform"}),"Kirjaudu sisään"]})]})]})})]}),!A&&a.jsx("div",{className:"border-t p-4 bg-gray-50",children:a.jsxs("div",{className:"flex justify-between",children:[c!=="date"?a.jsxs("button",{onClick:J,className:`flex items-center px-4 py-2 text-gray-700 hover:text-gray-900
                    transition-all duration-200 hover:bg-gray-100 rounded-lg
                    active:scale-95`,children:[a.jsx(Wn,{className:"w-5 h-5 mr-1"}),"Edellinen"]}):a.jsx("div",{}),c!=="confirm"?a.jsxs("button",{onClick:q,disabled:!d||c==="time"&&!m||c==="details"&&(!$.firstName||!$.lastName||!$.email||!$.phone||!$.licensePlate)||c==="signup"&&!$.password,className:`flex items-center px-6 py-3 next-step-button
                    text-bilo-navy font-medium rounded-xl
                    transition-all duration-300 relative group
                    hover:scale-[1.02] hover:shadow-xl
                    disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100
                    active:scale-98 focus:outline-none focus:ring-2 focus:ring-bilo-silver`,children:["Seuraava",a.jsx(fr,{className:"w-5 h-5 ml-1 relative z-10 group-hover:translate-x-1 transition-transform"})]}):a.jsx("button",{onClick:R,disabled:N,className:`flex items-center px-6 py-3 next-step-button
                    text-bilo-navy font-medium rounded-xl
                    transition-all duration-300 relative group
                    hover:scale-[1.02] hover:shadow-xl
                    disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100
                    active:scale-98 focus:outline-none focus:ring-2 focus:ring-bilo-silver`,children:N?a.jsxs(a.Fragment,{children:[a.jsx(De,{className:"animate-spin h-5 w-5 mr-2 relative z-10"}),a.jsx("span",{className:"animate-pulse relative z-10",children:"Varataan..."})]}):a.jsxs(a.Fragment,{children:[a.jsx(Fo,{className:"h-5 w-5 mr-2 relative z-10 group-hover:scale-110 transition-transform"}),a.jsx("span",{className:"relative z-10 group-hover:translate-x-0.5 transition-transform",children:"Vahvista varaus"})]})})]})})]})})},o2=()=>{const{id:e}=Mb();Ye();const[t,r]=k.useState(null),[n,i]=k.useState([]),[s,o]=k.useState([]),[l,c]=k.useState([]),[u,d]=k.useState([]),[f,m]=k.useState(!0),[v,y]=k.useState(null),[p,x]=k.useState(null),[j,N]=k.useState(!1),[b,g]=k.useState(0),[h,w]=k.useState(null),[S,A]=k.useState(null),[O,C]=k.useState(!1),[T,E]=k.useState(!1),M=k.useRef(null),$=k.useRef({});k.useEffect(()=>{(async()=>{if(e)try{m(!0);const ee=await ba(e),[re,Pe,Ee]=await Promise.all([pn(e),_c(e),ri(e)]);if(!ee){y("Yritystä ei löytynyt");return}r(ee),i(re),o(Pe),d(Ee.filter(ie=>ie.active));const G=Pe.filter(ie=>re.some(oe=>oe.categoryId===ie.id));c(G),G.length>0&&w(G[0].id)}catch(ee){console.error("Error loading vendor:",ee),y("Virhe ladattaessa yrityksen tietoja")}finally{m(!1)}})()},[e]),k.useEffect(()=>{const X=()=>{g(window.scrollY)};return window.addEventListener("scroll",X),()=>window.removeEventListener("scroll",X)},[]);const D=X=>{x(X),N(!0)},F=X=>{const ee=u.find(re=>re.serviceId===X.id&&new Date(re.startDate)<=new Date&&new Date(re.endDate)>=new Date);return(ee==null?void 0:ee.discountPercentage)||0},_=X=>{const ee=F(X);return ee>0?X.price*(1-ee/100):X.price},R=X=>{w(X);const ee=$.current[X];if(ee){const Pe=ee.getBoundingClientRect().top+window.pageYOffset+-100;window.scrollTo({top:Pe,behavior:"smooth"})}};if(f)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(v||!t)return a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Hups!"}),a.jsx("p",{className:"text-gray-600",children:v||"Yritystä ei löytynyt"})]})});const L=Ne(new Date,"EEEE").toLowerCase(),z=t.operatingHours[L]||t.operatingHours.monday,V=b*.4,q="https://via.placeholder.com/128?text=Logo",J="https://via.placeholder.com/1200x400?text=Cover+Image";return a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.structuredData&&a.jsx(Mw,{children:a.jsx("script",{type:"application/ld+json",children:JSON.stringify(t.structuredData)})}),a.jsxs("div",{ref:M,className:"h-80 bg-cover bg-center relative overflow-hidden transition-all duration-500",style:{backgroundImage:T?`url("${J}")`:t.coverImage?`url(${t.coverImage})`:`url("${J}")`},children:[t.coverImage&&!T&&a.jsx("img",{src:t.coverImage,alt:"",className:"hidden",onError:()=>E(!0)}),a.jsx("div",{className:"absolute inset-0 bg-black transition-opacity duration-500",style:{opacity:.3+b/1e3,transform:`translateY(${V}px) scale(${1+b/2e3})`}}),a.jsx("div",{className:"absolute bottom-0 left-0 w-full p-6 bg-gradient-to-t from-black to-transparent transition-all duration-300",style:{opacity:Math.min(b/100,1),transform:`translateY(${Math.min(b/10,20)}px)`},children:a.jsx("h1",{className:"text-white text-2xl font-bold",children:t.businessName})})]}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 relative",children:[a.jsx("div",{className:"absolute -top-20 left-8 w-40 h-40 rounded-full border-4 border-white overflow-hidden bg-white shadow-lg transition-all duration-300 hover:shadow-xl",style:{transform:`translateY(${Math.min(b/8,10)}px) scale(${1-b/1e3})`},children:a.jsx("img",{src:O?q:t.logoImage||q,alt:t.businessName,className:"w-full h-full object-cover transition-transform duration-700 hover:scale-110",onError:()=>C(!0)})}),a.jsxs("div",{className:"pt-24 pb-8",children:[a.jsx("div",{className:"flex justify-between items-start",children:a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900 transition-all duration-300 hover:text-blue-600",children:t.businessName}),a.jsxs("div",{className:"mt-4 flex flex-col sm:flex-row sm:items-center gap-3 sm:gap-6 text-gray-600",children:[a.jsxs("div",{className:"flex items-center shrink-0 group cursor-pointer",children:[a.jsx(pt,{className:"h-5 w-5 mr-1 group-hover:text-blue-500 transition-colors duration-300"}),a.jsxs("span",{className:"group-hover:text-blue-500 transition-colors duration-300",children:[t.address,", ",t.postalCode," ",t.city]})]}),t.rating&&a.jsxs("div",{className:"flex items-center shrink-0",children:[a.jsx("div",{className:"flex",children:[...Array(5)].map((X,ee)=>a.jsx(mt,{className:`h-4 w-4 transition-all duration-300 transform hover:scale-125 cursor-pointer
                            ${ee<Math.floor(t.rating)?"text-yellow-400 fill-current":ee<t.rating?"text-yellow-400 fill-current opacity-70":"text-gray-300"}`},ee))}),a.jsx("span",{className:"ml-2 transition-all duration-300 hover:font-medium",children:t.rating.toFixed(1)})]}),a.jsxs("div",{className:"flex items-center shrink-0 group cursor-pointer",children:[a.jsx(De,{className:"h-5 w-5 mr-1 group-hover:text-green-500 transition-colors duration-300"}),a.jsx("span",{className:"whitespace-nowrap group-hover:text-green-500 transition-colors duration-300",children:z.open==="closed"&&z.close==="closed"?"Suljettu tänään":z.open==="00:00"&&z.close==="23:59"?"Avoinna 24h":`Avoinna tänään: ${z.open} - ${z.close}`})]})]})]})}),a.jsx("div",{className:"mt-6 bg-white rounded-lg shadow-sm p-4 transition-all duration-300 hover:shadow-md",children:a.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[a.jsxs("div",{className:"flex flex-col items-center justify-center p-3 rounded-lg bg-gray-50 hover:bg-blue-50 transition-all duration-300 transform hover:scale-105 cursor-pointer",children:[a.jsx(Fe,{className:"h-5 w-5 text-gray-500 mb-1 transition-colors duration-300 group-hover:text-blue-500"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:new Date(t.createdAt.seconds*1e3).getFullYear()}),a.jsx("span",{className:"text-xs text-gray-500",children:"Perustettu"})]}),a.jsxs("div",{className:"flex flex-col items-center justify-center p-3 rounded-lg bg-gray-50 hover:bg-green-50 transition-all duration-300 transform hover:scale-105 cursor-pointer",children:[a.jsx(yd,{className:`h-5 w-5 mb-1 transition-colors duration-300 ${t.verified?"text-green-500":"text-gray-500"}`}),a.jsx("span",{className:`text-sm font-medium transition-colors duration-300 ${t.verified?"text-green-600":"text-gray-900"}`,children:t.verified?"Vahvistettu":"Odottaa"}),a.jsx("span",{className:"text-xs text-gray-500",children:"Tila"})]}),a.jsxs("div",{className:"flex flex-col items-center justify-center p-3 rounded-lg bg-gray-50 hover:bg-yellow-50 transition-all duration-300 transform hover:scale-105 cursor-pointer",children:[a.jsx(mt,{className:"h-5 w-5 text-yellow-400 mb-1 transition-transform duration-300 hover:rotate-12"}),a.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.rating?`${t.rating.toFixed(1)}/5`:"-"}),a.jsx("span",{className:"text-xs text-gray-500",children:t.ratingCount?`${t.ratingCount} arvostelua`:"Ei arvosteluja"})]})]})})]}),l.length>1&&a.jsx("div",{className:"sticky top-0 z-10 bg-white/90 backdrop-blur-sm shadow-sm mb-6 py-3 px-4 rounded-xl transition-all duration-300 hover:shadow-md",children:a.jsx("div",{className:"flex overflow-x-auto scrollbar-hide space-x-3 py-2 px-1",children:l.map(X=>a.jsx("button",{onClick:()=>R(X.id),className:`
                    whitespace-nowrap px-4 py-2.5 rounded-full 
                    transition-all duration-300 transform active:scale-95
                    font-medium text-sm
                    ${h===X.id?"bg-gradient-to-b from-gray-100 to-gray-300 text-gray-800 shadow-sm border border-gray-300/50":"bg-gray-100/80 text-gray-600 hover:bg-gray-200/80 border border-transparent"}
                    ios-btn-active
                  `,style:{boxShadow:h===X.id?"inset 0 1px 1px rgba(255,255,255,0.8), 0 1px 3px rgba(0,0,0,0.1)":"none"},children:X.name},X.id))})}),a.jsxs("div",{className:"py-12",children:[u.length>0&&a.jsxs("div",{className:"mb-12 animate-fadeIn",children:[a.jsx("div",{className:"flex items-center justify-center mb-8",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("h2",{className:"text-3xl font-bold text-gray-900 relative",children:["Voimassa olevat tarjoukset",a.jsx("div",{className:"absolute -top-4 -right-4 w-8 h-8 bg-green-100 rounded-full flex items-center justify-center text-green-600 animate-pulse",children:a.jsx(Mc,{className:"w-4 h-4"})})]}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Hyödynnä erikoistarjoukset nyt!"}),a.jsx("div",{className:"mt-4 w-20 h-1 bg-green-600 mx-auto rounded-full"})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:u.map((X,ee)=>{const re=n.find(Ee=>Ee.id===X.serviceId);if(!re)return null;const Pe=re.price*(1-X.discountPercentage/100);return a.jsx("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-lg transition-all duration-500 border border-green-100 transform hover:-translate-y-1 hover:border-green-300",style:{animationDelay:`${ee*100}ms`},children:a.jsxs("div",{className:"p-6 relative overflow-hidden",children:[a.jsx("div",{className:"absolute -right-10 -top-10 w-20 h-20 bg-green-500 rotate-45 transform transition-transform duration-300 hover:scale-110",children:a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 text-center text-white font-bold text-sm",style:{transform:"rotate(-45deg) translateY(-10px)"},children:[X.discountPercentage,"%"]})}),a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(dn,{className:"w-5 h-5 text-green-600"}),a.jsx("span",{className:"text-sm font-medium bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Tarjous"})]}),a.jsxs("div",{className:"flex items-center bg-blue-100 text-blue-800 px-2 py-1 rounded-full",children:[a.jsx(Mc,{className:"w-4 h-4 mr-1"}),a.jsxs("span",{className:"text-sm font-medium",children:[X.discountPercentage,"%"]})]})]}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 transition-colors duration-300 hover:text-green-600",children:X.title}),a.jsx("p",{className:"text-gray-600 text-sm mb-4",children:X.description}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 transition-all duration-300 hover:bg-green-50",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:re.name}),a.jsxs("div",{className:"flex items-center text-gray-500",children:[a.jsx(De,{className:"w-4 h-4 mr-1"}),a.jsxs("span",{children:[re.duration," min"]})]})]}),a.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[a.jsx("span",{className:"text-sm text-gray-600",children:"Normaalihinta:"}),a.jsxs("span",{className:"text-sm line-through text-gray-500",children:[re.price,"€"]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Tarjoushinta:"}),a.jsxs("span",{className:"text-lg font-semibold text-green-600 transition-all duration-300 hover:scale-110",children:[Pe.toFixed(2),"€"]})]})]}),a.jsxs("button",{onClick:()=>D(re),className:"mt-4 w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-all duration-300 text-sm font-medium flex items-center justify-center transform hover:scale-105 active:scale-95 shadow-sm hover:shadow",children:["Varaa tarjoushintaan",a.jsx(fr,{className:"w-4 h-4 ml-1 transition-transform duration-300 group-hover:translate-x-1"})]})]})},X.id)})})]}),a.jsx("div",{className:"flex items-center justify-center mb-12",children:a.jsxs("div",{className:"text-center",children:[a.jsxs("h2",{className:"text-3xl font-bold text-gray-900 relative",children:["Saatavilla olevat palvelut",a.jsx("div",{className:"absolute -top-4 -right-4 w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center text-blue-600 animate-pulse",children:a.jsx(dt,{className:"w-4 h-4"})})]}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Valitse haluamasi palvelu alta ja varaa aika"}),a.jsx("div",{className:"mt-4 w-20 h-1 bg-blue-600 mx-auto rounded-full"})]})}),a.jsxs("div",{className:"space-y-8",children:[l.map(X=>{const ee=n.filter(re=>re.categoryId===X.id);return ee.length===0?null:a.jsxs("div",{ref:re=>$.current[X.id]=re,className:`scroll-mt-24 transition-all duration-500 ${h===X.id?"scale-100 opacity-100":"scale-98 opacity-90"}`,children:[a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-4 transition-all duration-300 hover:text-blue-600 cursor-pointer",children:X.name}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:ee.map(re=>a.jsx("div",{className:`group bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-300 border border-gray-100 hover:border-blue-200 overflow-hidden transform hover:-translate-y-1 ${S===re.id?"ring-2 ring-blue-400 shadow-md":""}`,onMouseEnter:()=>A(re.id),onMouseLeave:()=>A(null),children:a.jsxs("div",{className:"p-6 relative",children:[F(re)>0&&a.jsx("div",{className:"absolute -right-12 -top-12 w-24 h-24 bg-green-500 rotate-45 transform",children:a.jsxs("div",{className:"absolute bottom-0 left-0 right-0 text-center text-white font-bold",style:{transform:"rotate(-45deg) translateY(-12px)"},children:["-",F(re),"%"]})}),a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-lg font-semibold text-gray-900 group-hover:text-blue-600 transition-colors duration-300",children:re.name}),a.jsx("p",{className:"mt-1.5 text-gray-600 text-sm leading-relaxed",children:re.description})]}),a.jsx("div",{className:"flex items-center justify-center w-10 h-10 bg-blue-50 rounded-lg group-hover:bg-blue-100 transition-colors duration-300 transform group-hover:rotate-12",children:a.jsx(De,{className:"w-5 h-5 text-blue-600"})})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"flex items-center px-3 py-1 bg-gray-50 rounded-full text-sm text-gray-600 group-hover:bg-blue-50 group-hover:text-blue-700 transition-colors duration-300",children:[a.jsx(De,{className:"w-4 h-4 mr-1.5"}),re.duration," min"]}),re.coinReward>0&&a.jsxs("div",{className:"flex items-center px-3 py-1 bg-yellow-50 rounded-full text-sm text-yellow-700 transform group-hover:scale-110 transition-transform duration-300",children:[a.jsx(gt,{className:"w-4 h-4 mr-1.5 animate-pulse"}),"+",re.coinReward]})]}),a.jsxs("div",{className:"mt-4 flex items-center space-x-3",children:[a.jsxs("div",{className:"flex flex-col items-end",children:[F(re)>0&&a.jsxs("span",{className:"text-sm text-gray-500 line-through",children:[re.price.toFixed(2),"€"]}),a.jsxs("span",{className:`text-lg font-semibold transition-all duration-300 ${F(re)>0?"text-green-600 transform group-hover:scale-110":"text-gray-900"}`,children:[_(re).toFixed(2),"€"]})]}),a.jsxs("button",{onClick:()=>D(re),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-300 text-sm font-medium flex items-center group-hover:scale-105 transform active:scale-95 shadow-sm hover:shadow",children:["Varaa",a.jsx(fr,{className:"w-4 h-4 ml-1 transition-transform duration-300 group-hover:translate-x-1"})]})]})]})]})},re.id))})]},X.id)}),n.length===0&&a.jsxs("div",{className:"text-center py-12 bg-gray-50 rounded-lg transition-all duration-300 hover:bg-gray-100",children:[a.jsx("div",{className:"text-gray-400 mb-3",children:a.jsx(dt,{className:"w-12 h-12 mx-auto"})}),a.jsx("p",{className:"text-gray-600",children:"Ei palveluita saatavilla"})]})]})]})]}),p&&a.jsx(s2,{isOpen:j,onClose:()=>{N(!1),x(null)},service:p,vendorId:t.id,vendor:t})]})},l2=[{id:"monday",label:"Maanantai"},{id:"tuesday",label:"Tiistai"},{id:"wednesday",label:"Keskiviikko"},{id:"thursday",label:"Torstai"},{id:"friday",label:"Perjantai"},{id:"saturday",label:"Lauantai"},{id:"sunday",label:"Sunnuntai"}],c2=()=>{const{currentUser:e}=Ye(),[t,r]=k.useState(null),[n,i]=k.useState(!0),[s,o]=k.useState(!1),[l,c]=k.useState(null),[u,d]=k.useState(!1),[f,m]=k.useState({}),[v,y]=k.useState({businessName:"",description:"",address:"",phone:"",email:"",website:"",coverImage:"",logoImage:"",operatingHours:{}});k.useEffect(()=>{(async()=>{if(e)try{const g=await ba(e.uid);if(g){r(g),y({businessName:g.businessName,description:g.description||"",address:g.address,phone:g.phone,email:g.email||"",website:g.website||"",coverImage:g.coverImage||"",logoImage:g.logoImage||"",operatingHours:g.operatingHours});const h={};l2.forEach(w=>{const S=g.operatingHours[w.id];S?S.open==="00:00"&&S.close==="23:59"?h[w.id]="24h":h[w.id]="open":h[w.id]="closed"}),m(h)}}catch(g){console.error("Error loading vendor:",g),c("Virhe ladattaessa yrityksen tietoja")}finally{i(!1)}})()},[e]);const p=(b,g)=>{if(m(h=>({...h,[b]:g})),g==="closed"){const h={...v.operatingHours};delete h[b],y(w=>({...w,operatingHours:h}))}else g==="24h"?y(h=>({...h,operatingHours:{...h.operatingHours,[b]:{open:"00:00",close:"23:59"}}})):v.operatingHours[b]||y(h=>({...h,operatingHours:{...h.operatingHours,[b]:{open:"09:00",close:"17:00"}}}))},x=(b,g,h)=>{y(w=>({...w,operatingHours:{...w.operatingHours,[b]:{...w.operatingHours[b],[g]:h}}}))},j=async(b,g)=>{try{if(!t)return;const h={...t,[b==="logo"?"logoImage":"coverImage"]:g};await Os(t.id,h),y(w=>({...w,[b==="logo"?"logoImage":"coverImage"]:g})),d(!0),setTimeout(()=>d(!1),3e3)}catch(h){console.error("Error updating image:",h),c("Virhe kuvan päivityksessä")}},N=async b=>{if(b.preventDefault(),!!t)try{o(!0),c(null),d(!1),await Os(t.id,{...t,...v}),d(!0),setTimeout(()=>d(!1),3e3)}catch(g){console.error("Error updating vendor:",g),c("Virhe tallennettaessa muutoksia")}finally{o(!1)}};return n?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-bilo-gray",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-bilo-navy"})}):t?a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-8 bg-bilo-gray min-h-screen font-ubuntu",children:[a.jsxs("div",{className:"mb-8",children:[a.jsx("h1",{className:"text-3xl font-bold text-bilo-navy",children:"Yrityksen asetukset"}),a.jsx("p",{className:"mt-2 text-gray-600",children:"Hallitse yrityksesi tietoja ja aukioloaikoja"})]}),a.jsxs("form",{onSubmit:N,className:"space-y-6",children:[a.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl shadow-md hover:shadow-lg transition-all duration-300 p-6 border border-gray-100",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("span",{className:"bg-bilo-gray/50 p-2 rounded-lg mr-3",children:a.jsx(pd,{className:"h-5 w-5 text-bilo-silver"})}),a.jsx("h2",{className:"text-xl font-semibold text-bilo-navy",children:"Kuvat"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-bilo-navy mb-2",children:"Logo"}),a.jsx("div",{className:"bg-bilo-gray/50 p-4 rounded-xl transition duration-300 hover:shadow-md",children:a.jsx($s,{type:"logo",currentImage:v.logoImage,onImageUploaded:b=>j("logo",b)})})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-bilo-navy mb-2",children:"Kansikuva"}),a.jsx("div",{className:"bg-bilo-gray/50 p-4 rounded-xl transition duration-300 hover:shadow-md",children:a.jsx($s,{type:"cover",currentImage:v.coverImage,onImageUploaded:b=>j("cover",b)})})]})]})]}),a.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl shadow-md hover:shadow-lg transition-all duration-300 p-6 border border-gray-100",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("span",{className:"bg-bilo-gray/50 p-2 rounded-lg mr-3",children:a.jsx(mN,{className:"h-5 w-5 text-bilo-silver"})}),a.jsx("h2",{className:"text-xl font-semibold text-bilo-navy",children:"Perustiedot"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-bilo-navy mb-2",children:"Yrityksen nimi"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:v.businessName,onChange:b=>y(g=>({...g,businessName:b.target.value})),className:"w-full px-4 py-3 bg-bilo-gray/50 border-2 border-transparent rounded-xl focus:border-bilo-silver focus:ring-2 focus:ring-bilo-silver/20 focus:bg-white transition-all duration-300",placeholder:"Yrityksen nimi"}),a.jsx(Ry,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-bilo-silver/70 h-5 w-5 pointer-events-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-bilo-navy mb-2",children:"Kuvaus"}),a.jsx("div",{className:"relative",children:a.jsx("textarea",{rows:4,value:v.description,onChange:b=>y(g=>({...g,description:b.target.value})),className:"w-full px-4 py-3 bg-bilo-gray/50 border-2 border-transparent rounded-xl focus:border-bilo-silver focus:ring-2 focus:ring-bilo-silver/20 focus:bg-white transition-all duration-300",placeholder:"Kerro lyhyesti yrityksestäsi"})}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Kuvaa lyhyesti yrityksesi palvelut ja vahvuudet. Hyvä kuvaus auttaa asiakkaita löytämään palvelusi."})]})]})]}),a.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl shadow-md hover:shadow-lg transition-all duration-300 p-6 border border-gray-100",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("span",{className:"bg-bilo-gray/50 p-2 rounded-lg mr-3",children:a.jsx(pt,{className:"h-5 w-5 text-bilo-silver"})}),a.jsx("h2",{className:"text-xl font-semibold text-bilo-navy",children:"Sijainti"})]}),a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-bilo-navy mb-2",children:"Osoite"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"text",value:v.address,onChange:b=>y(g=>({...g,address:b.target.value})),className:"w-full px-4 py-3 bg-bilo-gray/50 border-2 border-transparent rounded-xl focus:border-bilo-silver focus:ring-2 focus:ring-bilo-silver/20 focus:bg-white transition-all duration-300",placeholder:"Yrityksen osoite"}),a.jsx(pt,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-bilo-silver/70 h-5 w-5 pointer-events-none"})]}),a.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Anna tarkka katuosoite, jotta asiakkaat löytävät perille helposti."})]})})]}),a.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl shadow-md hover:shadow-lg transition-all duration-300 p-6 border border-gray-100",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("span",{className:"bg-bilo-gray/50 p-2 rounded-lg mr-3",children:a.jsx(Kn,{className:"h-5 w-5 text-bilo-silver"})}),a.jsx("h2",{className:"text-xl font-semibold text-bilo-navy",children:"Yhteystiedot"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-bilo-navy mb-2",children:"Puhelinnumero"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"tel",value:v.phone,onChange:b=>y(g=>({...g,phone:b.target.value})),className:"w-full px-4 py-3 bg-bilo-gray/50 border-2 border-transparent rounded-xl focus:border-bilo-silver focus:ring-2 focus:ring-bilo-silver/20 focus:bg-white transition-all duration-300",placeholder:"+358 40 1234567"}),a.jsx(Kn,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-bilo-silver/70 h-5 w-5 pointer-events-none"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-bilo-navy mb-2",children:"Sähköposti"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"email",value:v.email,onChange:b=>y(g=>({...g,email:b.target.value})),className:"w-full px-4 py-3 bg-bilo-gray/50 border-2 border-transparent rounded-xl focus:border-bilo-silver focus:ring-2 focus:ring-bilo-silver/20 focus:bg-white transition-all duration-300",placeholder:"yritys@esimerkki.fi"}),a.jsx(rr,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-bilo-silver/70 h-5 w-5 pointer-events-none"})]})]}),a.jsxs("div",{className:"md:col-span-2",children:[a.jsx("label",{className:"block text-sm font-medium text-bilo-navy mb-2",children:"Verkkosivusto"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:"url",value:v.website,onChange:b=>y(g=>({...g,website:b.target.value})),className:"w-full px-4 py-3 bg-bilo-gray/50 border-2 border-transparent rounded-xl focus:border-bilo-silver focus:ring-2 focus:ring-bilo-silver/20 focus:bg-white transition-all duration-300",placeholder:"https://www.yrityksesi.fi"}),a.jsx(Es,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-bilo-silver/70 h-5 w-5 pointer-events-none"})]})]})]})]}),a.jsxs("div",{className:"bg-white/90 backdrop-blur-md rounded-xl shadow-md hover:shadow-lg transition-all duration-300 p-6 border border-gray-100",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("span",{className:"bg-bilo-gray/50 p-2 rounded-lg mr-3",children:a.jsx(De,{className:"h-5 w-5 text-bilo-silver"})}),a.jsx("h2",{className:"text-xl font-semibold text-bilo-navy",children:"Aukioloajat"})]}),a.jsx(Hy,{operatingHours:v.operatingHours,dayStatus:f,onStatusChange:p,onHoursChange:x})]}),l&&a.jsx("div",{className:"bg-red-50 backdrop-blur-sm border border-red-100 rounded-xl p-4 shadow-sm animate-fadeIn",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-700",children:l})})]})}),u&&a.jsx("div",{className:"bg-bilo-emerald/10 backdrop-blur-sm border border-bilo-emerald/20 rounded-xl p-4 shadow-sm animate-fadeIn",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx("svg",{className:"h-5 w-5 text-bilo-emerald",viewBox:"0 0 20 20",fill:"currentColor",children:a.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-bilo-emerald",children:"Muutokset tallennettu onnistuneesti!"})})]})}),a.jsx("div",{className:"flex justify-end",children:a.jsx("button",{type:"submit",disabled:s,className:"flex items-center px-6 py-3 rounded-xl bg-gradient-to-b from-bilo-silver to-[#A8A8A8] text-bilo-navy font-medium shadow-md hover:shadow-lg transition-all duration-300 hover:scale-[1.03] active:scale-95 disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-bilo-silver focus:ring-offset-2",children:s?a.jsxs(a.Fragment,{children:[a.jsx(Je,{className:"animate-spin h-5 w-5 mr-2"}),"Tallennetaan..."]}):a.jsxs(a.Fragment,{children:[a.jsx(Ts,{className:"h-5 w-5 mr-2"}),"Tallenna muutokset"]})})})]})]}):a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-bilo-gray",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-bilo-navy mb-2",children:"Virhe!"}),a.jsx("p",{className:"text-gray-600",children:"Yritystietoja ei löytynyt"})]})})},u2=({isOpen:e,onClose:t,offer:r,vendorId:n,services:i,onOfferSaved:s})=>{var v;const[o,l]=k.useState({title:(r==null?void 0:r.title)||"",description:(r==null?void 0:r.description)||"",serviceId:(r==null?void 0:r.serviceId)||((v=i[0])==null?void 0:v.id)||"",discountPercentage:(r==null?void 0:r.discountPercentage)||10,startDate:r!=null&&r.startDate?new Date(r.startDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],endDate:r!=null&&r.endDate?new Date(r.endDate).toISOString().split("T")[0]:"",active:(r==null?void 0:r.active)??!0}),[c,u]=k.useState(!1),[d,f]=k.useState(null);if(P.useEffect(()=>(e?document.body.classList.add("no-scroll"):document.body.classList.remove("no-scroll"),()=>{document.body.classList.remove("no-scroll")}),[e]),!e)return null;const m=async y=>{if(y.preventDefault(),!o.title||!o.description||!o.serviceId||!o.startDate||!o.endDate){f("Täytä kaikki kentät");return}try{u(!0),f(null);const p={...o,vendorId:n,startDate:new Date(o.startDate),endDate:new Date(o.endDate),discountPercentage:Number(o.discountPercentage)};r?await V1(r.id,p):await U1(p),s(),t()}catch(p){console.error("Error saving offer:",p),f("Virhe tarjouksen tallennuksessa")}finally{u(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center p-4 z-50 animate-[fadeIn_0.2s_ease-out]",children:a.jsx("div",{className:"bg-white/90 backdrop-blur-xl rounded-2xl w-full max-w-lg transform transition-all animate-[iosScale_0.3s_cubic-bezier(0.175,0.885,0.32,1.275)] shadow-2xl border border-bilo-silver/20",children:a.jsxs("div",{className:"p-6 relative",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-2 bg-bilo-gray rounded-xl mr-3",children:a.jsx(dn,{className:"w-6 h-6 text-bilo-navy"})}),a.jsx("h2",{className:"text-2xl font-bold text-bilo-navy",children:r?"Muokkaa tarjousta":"Uusi tarjous"})]}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:a.jsx(Me,{className:"w-6 h-6"})})]}),a.jsxs("form",{onSubmit:m,className:"space-y-6",children:[a.jsxs("div",{className:"relative group",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Palvelu"}),a.jsx("select",{value:o.serviceId,onChange:y=>l(p=>({...p,serviceId:y.target.value})),className:`block w-full rounded-xl py-3 px-4 bg-bilo-gray border-2 border-transparent
                  focus:bg-white focus:ring-2 focus:ring-bilo-silver focus:border-transparent
                  transition-all duration-300 ease-in-out appearance-none
                  hover:bg-gray-100`,required:!0,children:i.map(y=>a.jsxs("option",{value:y.id,children:[y.name," (",y.price,"€)"]},y.id))}),a.jsx(vn,{className:"absolute right-4 top-[60%] transform -translate-y-1/2 text-gray-400 pointer-events-none transition-transform duration-200 group-hover:text-gray-600"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Otsikko"}),a.jsx("input",{type:"text",value:o.title,onChange:y=>l(p=>({...p,title:y.target.value})),className:`block w-full rounded-xl py-3 px-4 bg-bilo-gray border-2 border-transparent
                  focus:bg-white focus:ring-2 focus:ring-bilo-silver focus:border-transparent
                  transition-all duration-300 ease-in-out
                  hover:bg-gray-100`,placeholder:"Esim. Kesätarjous -20%",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Kuvaus"}),a.jsx("textarea",{value:o.description,onChange:y=>l(p=>({...p,description:y.target.value})),rows:4,className:`block w-full rounded-xl py-3 px-4 bg-bilo-gray border-2 border-transparent
                  focus:bg-white focus:ring-2 focus:ring-bilo-silver focus:border-transparent
                  transition-all duration-300 ease-in-out resize-none
                  hover:bg-gray-100`,placeholder:"Kerro asiakkaille tarjouksen yksityiskohdat ja ehdot...",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Alennusprosentti"}),a.jsxs("div",{className:"mt-1 relative rounded-lg shadow-sm",children:[a.jsx("input",{type:"number",value:o.discountPercentage,onChange:y=>l(p=>({...p,discountPercentage:Number(y.target.value)})),min:"1",max:"100",className:`block w-full pr-12 rounded-xl py-3 px-4 bg-bilo-gray border-2 border-transparent
                    focus:bg-white focus:ring-2 focus:ring-bilo-silver focus:border-transparent
                    transition-all duration-300 ease-in-out
                    hover:bg-gray-100`,required:!0}),a.jsx("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none",children:a.jsx("span",{className:"text-gray-500 sm:text-sm",children:"%"})})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Alkaa"}),a.jsx("input",{type:"date",value:o.startDate,onChange:y=>l(p=>({...p,startDate:y.target.value})),className:`block w-full rounded-xl py-3 px-4 bg-bilo-gray border-2 border-transparent
                    focus:bg-white focus:ring-2 focus:ring-bilo-silver focus:border-transparent
                    transition-all duration-300 ease-in-out
                    hover:bg-gray-100`,required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Päättyy"}),a.jsx("input",{type:"date",value:o.endDate,onChange:y=>l(p=>({...p,endDate:y.target.value})),className:`block w-full rounded-xl py-3 px-4 bg-bilo-gray border-2 border-transparent
                    focus:bg-white focus:ring-2 focus:ring-bilo-silver focus:border-transparent
                    transition-all duration-300 ease-in-out
                    hover:bg-gray-100`,required:!0})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"checkbox",checked:o.active,onChange:y=>l(p=>({...p,active:y.target.checked})),className:`h-5 w-5 text-bilo-navy focus:ring-bilo-silver border-bilo-gray rounded-md
                  transition-colors duration-200`}),a.jsx("label",{className:"ml-3 block text-sm font-medium text-gray-700",children:"Tarjous on aktiivinen"})]}),d&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Me,{className:"h-5 w-5 text-red-400"})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-700",children:d})})]})}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:t,className:`px-4 py-2 text-bilo-navy hover:text-bilo-navy/80 rounded-xl hover:bg-bilo-gray
                  transition-all duration-200 active:scale-95`,children:"Peruuta"}),a.jsx("button",{type:"submit",disabled:c,className:`px-6 py-2.5 bg-bilo-silver text-bilo-navy rounded-xl
                  hover:opacity-90 disabled:opacity-50 flex items-center transform transition-all
                  active:scale-95 shadow-lg font-medium`,children:c?a.jsxs(a.Fragment,{children:[a.jsx(Je,{className:"animate-spin h-5 w-5 mr-2"}),"Tallennetaan..."]}):"Tallenna"})]})]})]})})})},d2=()=>{const[e,t]=k.useState(0);k.useEffect(()=>{const N=()=>t(window.scrollY);return window.addEventListener("scroll",N),()=>window.removeEventListener("scroll",N)},[]);const{currentUser:r}=Ye(),[n,i]=k.useState(null),[s,o]=k.useState([]),[l,c]=k.useState([]),[u,d]=k.useState(!0),[f,m]=k.useState(null),[v,y]=k.useState(!1),[p,x]=k.useState(null);k.useEffect(()=>{(async()=>{if(r)try{d(!0),m(null);const b=await ba(r.uid);if(!b){m("Yritystä ei löytynyt");return}const[g,h]=await Promise.all([pn(b.id),ri(b.id)]);i(b),o(g),c(h)}catch(b){console.error("Error loading vendor data:",b),m("Virhe tietojen latauksessa")}finally{d(!1)}})()},[r]);const j=async()=>{if(n)try{const N=await ri(n.id);c(N)}catch(N){console.error("Error refreshing offers:",N)}};return u?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Je,{className:"w-6 h-6 text-blue-600 animate-spin"}),a.jsx("span",{children:"Ladataan..."})]})}):f||!n?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 max-w-md w-full mx-4",children:[a.jsx("div",{className:"flex items-center justify-center mb-4",children:a.jsx(tr,{className:"h-8 w-8 text-red-500"})}),a.jsx("h3",{className:"text-lg font-medium text-center text-gray-900 mb-2",children:"Virhe"}),a.jsx("p",{className:"text-gray-600 text-center",children:f||"Yritystä ei löytynyt"})]})}):a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:`fixed md:relative top-0 left-0 right-0 z-[45] transition-all duration-300 
        ${e>20?"bg-white/90 backdrop-blur-lg shadow-sm":"bg-white/50 backdrop-blur-sm"}`,children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:`text-2xl font-bold transition-all duration-300 ${e>20?"text-gray-900":"text-gray-800"}`,children:"Tarjoukset"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Hallitse yrityksesi tarjouksia"})]}),a.jsxs("button",{onClick:()=>{x(null),y(!0)},className:`flex items-center px-4 py-2 bg-bilo-silver text-bilo-navy rounded-xl hover:bg-bilo-silver/90 
                transition-all duration-300 transform hover:scale-105 active:scale-95`,children:[a.jsx(lr,{className:"w-5 h-5 mr-2"}),a.jsx("span",{className:"font-medium",children:"Lisää tarjous"})]})]})})}),a.jsx("div",{className:"pt-24 md:pt-6 pb-6 px-4 md:px-6",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm hover:shadow-md transition-all duration-300 transform hover:-translate-y-1 border border-bilo-gray/50",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"p-2 bg-bilo-gray rounded-xl",children:a.jsx(dn,{className:"w-6 h-6 text-bilo-navy"})}),a.jsx("span",{className:"text-2xl font-bold text-bilo-navy",children:l.filter(N=>N.active).length})]}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Aktiiviset"})]}),a.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm hover:shadow-md transition-all duration-300 transform hover:-translate-y-1 border border-bilo-gray/50",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"p-2 bg-bilo-gray rounded-xl",children:a.jsx(dt,{className:"w-6 h-6 text-bilo-navy"})}),a.jsx("span",{className:"text-2xl font-bold text-bilo-navy",children:s.length})]}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Palvelut"})]})]})})}),a.jsx("div",{className:"px-4 md:px-6 pb-6",children:a.jsxs("div",{className:"max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[l.map(N=>{const b=s.find(h=>h.id===N.serviceId),g=N.active&&new Date(N.startDate)<=new Date&&new Date(N.endDate)>=new Date;return a.jsxs("div",{onClick:()=>{x(N),y(!0)},className:`bg-white rounded-2xl shadow-sm p-6 cursor-pointer hover:shadow-md transition-all duration-300
                transform hover:-translate-y-1 border ${g?"border-bilo-emerald/50":"border-bilo-gray/50"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(dn,{className:`w-5 h-5 ${g?"text-bilo-emerald":"text-bilo-silver"}`}),a.jsx("span",{className:`text-sm font-medium px-2 py-1 rounded-full ${g?"bg-bilo-emerald/10 text-bilo-emerald":"bg-bilo-gray text-bilo-navy"}`,children:g?"Aktiivinen":"Ei aktiivinen"})]}),a.jsxs("div",{className:"flex items-center bg-bilo-gray text-bilo-navy px-2 py-1 rounded-full",children:[a.jsx(Mc,{className:"w-4 h-4 mr-1"}),a.jsxs("span",{className:"text-sm font-medium",children:[N.discountPercentage,"%"]})]})]}),a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:N.title}),a.jsx("p",{className:"text-gray-600 text-sm mb-4",children:N.description}),b&&a.jsxs("div",{className:"bg-bilo-gray/50 rounded-lg p-3 mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:b.name}),a.jsxs("div",{className:"flex items-center text-gray-500",children:[a.jsx(De,{className:"w-4 h-4 mr-1"}),a.jsxs("span",{children:[b.duration," min"]})]})]}),a.jsxs("div",{className:"mt-2 flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-gray-600",children:"Normaalihinta:"}),a.jsxs("span",{className:"line-through",children:[b.price,"€"]})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm font-medium",children:[a.jsx("span",{className:"text-gray-900",children:"Tarjoushinta:"}),a.jsxs("span",{className:"text-bilo-navy font-bold",children:[(b.price*(1-N.discountPercentage/100)).toFixed(2),"€"]})]})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Fe,{className:"w-4 h-4 mr-1"}),a.jsx("span",{children:Ne(new Date(N.startDate),"d.M.yyyy",{locale:He})})]}),a.jsx("span",{children:"-"}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Fe,{className:"w-4 h-4 mr-1"}),a.jsx("span",{children:Ne(new Date(N.endDate),"d.M.yyyy",{locale:He})})]})]})]},N.id)}),l.length===0&&a.jsxs("div",{className:`col-span-full bg-gradient-to-br from-white to-bilo-gray/20 rounded-2xl p-12 text-center
            transform transition-all duration-500 hover:shadow-lg hover:scale-[1.01] border border-bilo-silver/10`,children:[a.jsxs("div",{className:"relative w-20 h-20 mx-auto mb-6",children:[a.jsx("div",{className:"absolute inset-0 bg-bilo-silver/20 rounded-full blur-xl animate-pulse"}),a.jsx("div",{className:"relative bg-white rounded-full p-4 shadow-lg",children:a.jsx(dn,{className:"w-12 h-12 text-bilo-navy transition-transform duration-300 transform hover:scale-110"})})]}),a.jsx("h3",{className:"text-xl font-semibold text-bilo-navy mb-3",children:"Ei tarjouksia"}),a.jsx("p",{className:"text-gray-600 mb-8 max-w-sm mx-auto",children:'Lisää ensimmäinen tarjous klikkaamalla "Lisää tarjous" -painiketta'}),a.jsxs("button",{onClick:()=>{x(null),y(!0)},className:`inline-flex items-center px-6 py-3 bg-bilo-silver text-bilo-navy rounded-xl
                font-medium transition-all duration-300 transform hover:scale-105 active:scale-95
                shadow-md hover:shadow-xl group`,children:[a.jsx(lr,{className:"w-5 h-5 mr-2 group-hover:rotate-90 transition-transform duration-300"}),a.jsx("span",{className:"relative z-10 group-hover:translate-x-0.5 transition-transform",children:"Lisää ensimmäinen tarjous"})]})]})]})}),n&&a.jsx(u2,{isOpen:v,onClose:()=>{y(!1),x(null)},offer:p,vendorId:n.id,services:s,onOfferSaved:j})]})},sm=Array.from({length:14},(e,t)=>t+8),om={open:"bg-emerald-100",closed:"bg-rose-100","24h":"bg-sky-100",default:"bg-white"},f2=({vendor:e,appointments:t,onAppointmentClick:r})=>{const[n,i]=k.useState(new Date),[s,o]=k.useState(null),l=hn(n,{weekStartsOn:1}),c=Ay(l,{weekStartsOn:1}),u=Sy({start:l,end:c}),d=()=>i(Ny(n,1)),f=()=>i(Wj(n,1)),m=j=>{const N=Ne(j,"EEEE",{locale:He}).toLowerCase();return e.operatingHours[N]||{open:"09:00",close:"17:00"}},v=(j,N)=>{const b=m(j);if(b.open==="closed"&&b.close==="closed")return!1;if(b.open==="00:00"&&b.close==="23:59")return!0;const[g]=b.open.split(":").map(Number),[h]=b.close.split(":").map(Number);return N>=g&&N<h},y=j=>t.filter(N=>{const b=N.date instanceof Date?N.date:new Date(N.date);return md(b,j)}),p=j=>{const N=j instanceof Date?j:new Date(j);return Ne(N,"HH:mm")},x=j=>{const N=m(j);return N.open==="closed"&&N.close==="closed"?"closed":N.open==="00:00"&&N.close==="23:59"?"24h":"open"};return a.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden border border-gray-200",children:[a.jsx("div",{className:"p-4 border-b sm:p-6",children:a.jsxs("div",{className:"flex items-center justify-between mb-2 sm:mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2 sm:space-x-4",children:[a.jsx("button",{onClick:f,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:a.jsx(Wn,{className:"w-4 h-4 sm:w-5 sm:h-5"})}),a.jsxs("h2",{className:"text-sm font-semibold sm:text-xl",children:[Ne(l,"d.M.yyyy",{locale:He})," - ",Ne(c,"d.M.yyyy",{locale:He})]}),a.jsx("button",{onClick:d,className:"p-1 hover:bg-gray-100 rounded-full transition-colors",children:a.jsx(fr,{className:"w-4 h-4 sm:w-5 sm:h-5"})})]}),a.jsxs("div",{className:"hidden sm:flex items-center space-x-2 sm:space-x-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-2 h-2 bg-emerald-500 rounded-full mr-1"}),a.jsx("span",{className:"text-xs",children:"Avoinna"})]}),a.jsx("div",{className:"flex items-center",children:a.jsx("div",{className:"w-2 h-2 bg-rose-500 rounded-full mr-1"})}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"w-2 h-2 bg-blue-600 rounded-full mr-1"}),a.jsx("span",{className:"text-xs",children:"Varaus"})]})]})]})}),a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:"absolute left-0 top-0 w-10 sm:w-14 bg-gray-50 z-10 border-r border-gray-200",children:sm.map(j=>a.jsxs("div",{className:"h-12 sm:h-16 border-b border-gray-200 flex items-center justify-center text-[10px] sm:text-xs font-medium text-gray-500",children:[j.toString().padStart(2,"0"),":00"]},j))}),a.jsx("div",{className:"ml-10 sm:ml-14",children:a.jsx("div",{className:"grid grid-cols-7 divide-x divide-gray-200",children:u.map(j=>{const N=y(j),b=x(j),g=om[b]||om.default,h=m(j);h.open==="closed"&&h.close;const w=h.open==="00:00"&&h.close==="23:59";return a.jsxs("div",{className:`relative ${g}`,children:[a.jsxs("div",{className:"text-center py-1 border-b border-gray-200",children:[a.jsx("div",{className:"text-xs font-medium text-gray-600",children:Ne(j,"EEEEE",{locale:He})}),a.jsx("div",{className:"text-sm font-semibold mt-1",children:Ne(j,"d")})]}),sm.map(S=>{const A=v(j,S);return a.jsx("div",{className:`h-12 sm:h-16 relative ${!A&&!w?"bg-gray-50/50":""}`,children:N.map(O=>{var M;const C=O.date instanceof Date?O.date:new Date(O.date),T=C.getHours(),E=C.getMinutes();if(T===S){const $=s===O.id;return a.jsxs("div",{onClick:()=>r==null?void 0:r(O),onMouseEnter:()=>o(O.id),onMouseLeave:()=>o(null),className:`absolute left-0 right-0 p-1 rounded m-0.5 text-xs cursor-pointer transition-colors
                                  transform ${$?"scale-[1.02] shadow-lg":""}
                                  ${O.status==="confirmed"?"bg-emerald-500 hover:bg-emerald-600":O.status==="no_show"?"bg-purple-600 hover:bg-purple-700":O.status==="cancelled_by_customer"?"bg-amber-500 hover:bg-amber-600":O.status==="cancelled"?"bg-rose-500 hover:bg-rose-600":"bg-blue-600 hover:bg-blue-700"} text-white`,style:{top:`${E/60*100}%`,height:`${O.duration/60*100}%`,zIndex:$?20:10},children:[a.jsxs("div",{className:"flex items-center space-x-1",children:[p(C),((M=O.customerDetails)==null?void 0:M.licensePlate)&&a.jsx("span",{className:"font-medium",children:O.customerDetails.licensePlate})]}),$&&O.customerDetails&&a.jsxs("div",{className:"text-xxs mt-0.5 opacity-90",children:[O.customerDetails.firstName," ",O.customerDetails.lastName]})]},O.id)}return null})},S)})]},j.toString())})})})]})]})},m2=({isOpen:e,onClose:t,appointment:r,onStatusChange:n})=>{var p,x,j,N,b;const[i,s]=k.useState(!1),[o,l]=k.useState(null),[c,u]=k.useState(!1),[d,f]=k.useState(()=>{var g,h,w,S,A;return{firstName:((g=r.customerDetails)==null?void 0:g.firstName)||"",lastName:((h=r.customerDetails)==null?void 0:h.lastName)||"",phone:((w=r.customerDetails)==null?void 0:w.phone)||"",email:((S=r.customerDetails)==null?void 0:S.email)||"",licensePlate:((A=r.customerDetails)==null?void 0:A.licensePlate)||"",notes:r.notes||""}});if(P.useEffect(()=>(e?document.body.classList.add("no-scroll"):document.body.classList.remove("no-scroll"),()=>{document.body.classList.remove("no-scroll")}),[e]),!e)return null;const m=async g=>{try{if(s(!0),l(null),g==="completed"&&r.status!=="completed"&&!window.confirm("Oletko varma että haluat merkitä varauksen valmiiksi? Tämä toiminto antaa asiakkaalle kolikot palkkioksi ja sitä ei voi peruuttaa.")){s(!1);return}await Zf(r.id,{...r,status:g}),n(),t()}catch(h){console.error("Error updating appointment:",h),l("Virhe varauksen päivityksessä")}finally{s(!1)}},v=g=>{switch(g){case"confirmed":return"bg-green-100 text-green-800";case"completed":return"bg-blue-100 text-blue-800";case"no_show":return"bg-purple-100 text-purple-800";case"cancelled_by_customer":return"bg-orange-100 text-orange-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-yellow-100 text-yellow-800"}},y=async()=>{try{s(!0),l(null),await Zf(r.id,{...r,customerDetails:{...r.customerDetails,firstName:d.firstName,lastName:d.lastName,phone:d.phone,email:d.email,licensePlate:d.licensePlate},notes:d.notes}),n(),u(!1)}catch(g){console.error("Error updating appointment:",g),l("Virhe varauksen päivityksessä")}finally{s(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-2 sm:p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl w-full max-w-lg flex flex-col max-h-[90vh]",children:[a.jsx("div",{className:"p-4 border-b",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Varauksen tiedot"}),a.jsxs("p",{className:"mt-1 text-sm text-gray-500",children:["Varaus #",r.id.slice(0,8)]})]}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:a.jsx(Me,{className:"w-6 h-6"})})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[a.jsxs("div",{className:"mt-3 relative w-full sm:w-auto",children:[a.jsxs("select",{value:r.status,onChange:g=>m(g.target.value),className:`appearance-none w-full sm:w-auto ${v(r.status)} px-3 py-1.5 pr-8 rounded-lg text-sm font-medium cursor-pointer focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500`,disabled:i,children:[a.jsx("option",{value:"confirmed",children:"Vahvistettu"}),a.jsx("option",{value:"completed",children:"Valmis"}),a.jsx("option",{value:"no_show",children:"Ei saapunut"}),a.jsx("option",{value:"cancelled_by_customer",children:"Asiakas perunut"}),a.jsx("option",{value:"cancelled",children:"Peruttu"})]}),a.jsx(vn,{className:"absolute right-2 top-1/2 transform -translate-y-1/2 w-4 h-4 text-current pointer-events-none"})]}),r.status==="completed"&&a.jsx("div",{className:"mt-2",children:r.coinRewardProcessed?a.jsxs("div",{className:"flex items-center text-green-600 text-sm",children:[a.jsx(Nt,{className:"w-4 h-4 mr-1"}),r.coinRewardAmount>0?a.jsxs("span",{children:["Asiakas sai ",r.coinRewardAmount," kolikkoa"]}):a.jsx("span",{children:"Ei kolikkopalkkiota tälle palvelulle"})]}):a.jsx("div",{className:"flex items-center text-yellow-600 text-sm",children:a.jsx("span",{children:"Kolikkopalkkio odottaa käsittelyä"})})}),a.jsxs("div",{className:"mt-4 space-y-4",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Fe,{className:"h-5 w-5 text-gray-400 mr-3"}),a.jsx("div",{children:a.jsx("p",{className:"font-medium",children:Ne(r.date,"d. MMMM yyyy 'klo' HH:mm",{locale:He})})})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(De,{className:"h-5 w-5 text-gray-400 mr-3"}),a.jsxs("div",{children:[a.jsxs("p",{className:"font-medium",children:["Kesto: ",r.duration||30," min"]}),a.jsxs("p",{className:"text-sm text-gray-500",children:["Hinta: ",r.totalPrice,"€"]})]})]}),c?a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Rekisterinumero"}),a.jsx("input",{type:"text",value:d.licensePlate,onChange:g=>f(h=>({...h,licensePlate:g.target.value.toUpperCase()})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Etunimi"}),a.jsx("input",{type:"text",value:d.firstName,onChange:g=>f(h=>({...h,firstName:g.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Sukunimi"}),a.jsx("input",{type:"text",value:d.lastName,onChange:g=>f(h=>({...h,lastName:g.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Puhelinnumero"}),a.jsx("input",{type:"tel",value:d.phone,onChange:g=>f(h=>({...h,phone:g.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Sähköposti"}),a.jsx("input",{type:"email",value:d.email,onChange:g=>f(h=>({...h,email:g.target.value})),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Lisätiedot"}),a.jsx("textarea",{value:d.notes,onChange:g=>f(h=>({...h,notes:g.target.value})),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Vr,{className:"h-5 w-5 text-gray-400 mr-3"}),a.jsx("div",{children:a.jsx("p",{className:"font-medium",children:((p=r.customerDetails)==null?void 0:p.licensePlate)||"Ei rekisterinumeroa"})})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(bt,{className:"h-5 w-5 text-gray-400 mr-3"}),a.jsx("div",{children:a.jsxs("p",{className:"font-medium",children:[(x=r.customerDetails)==null?void 0:x.firstName," ",(j=r.customerDetails)==null?void 0:j.lastName]})})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Kn,{className:"h-5 w-5 text-gray-400 mr-3"}),a.jsx("div",{children:a.jsx("p",{className:"font-medium",children:((N=r.customerDetails)==null?void 0:N.phone)||"Ei puhelinnumeroa"})})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(rr,{className:"h-5 w-5 text-gray-400 mr-3"}),a.jsx("div",{children:a.jsx("p",{className:"font-medium",children:((b=r.customerDetails)==null?void 0:b.email)||"Ei sähköpostia"})})]}),r.notes&&a.jsx("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg",children:a.jsx("p",{className:"text-sm text-gray-600",children:r.notes})})]})]}),a.jsxs("div",{className:"mt-4 bg-gray-50 rounded-lg p-4",children:[a.jsxs("h4",{className:"font-medium text-gray-900 mb-3 flex items-center",children:[a.jsx(Fo,{className:"w-5 h-5 mr-2 text-gray-500"}),"Maksutiedot"]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"text-gray-600",children:"Palvelun hinta"}),a.jsxs("span",{className:"font-medium",children:[r.totalPrice,"€"]})]}),r.coinsUsed>0&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex justify-between items-center text-yellow-600",children:[a.jsxs("span",{className:"flex items-center",children:[a.jsx(gt,{className:"w-4 h-4 mr-1.5"}),a.jsx("span",{children:"Käytetyt kolikot"})]}),a.jsxs("span",{children:["-",r.coinsUsed," kpl"]})]}),a.jsxs("div",{className:"flex justify-between items-center text-yellow-600",children:[a.jsx("span",{children:"Kolikkoalennus"}),a.jsxs("span",{children:["-",(r.coinsUsed*.5).toFixed(2),"€"]})]}),a.jsx("div",{className:"pt-3 border-t border-gray-200 mt-2",children:a.jsxs("div",{className:"flex justify-between items-center font-medium",children:[a.jsx("span",{children:"Lopullinen hinta"}),a.jsxs("span",{children:[(r.totalPrice-r.coinsUsed*.5).toFixed(2),"€"]})]})})]})]})]})]}),o&&a.jsx("div",{className:"mt-4 bg-red-50 border-l-4 border-red-400 p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(Me,{className:"h-5 w-5 text-red-400"})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-700",children:o})})]})}),a.jsxs("div",{className:"p-4 border-t bg-gray-50",children:[r.status==="confirmed"&&!c&&a.jsx("div",{className:"flex gap-2",children:a.jsx("button",{onClick:()=>u(!0),className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Muokkaa tietoja"})}),c&&a.jsxs("div",{className:"flex gap-2",children:[a.jsx("button",{onClick:()=>u(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Peruuta"}),a.jsx("button",{onClick:y,disabled:i,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:i?"Tallennetaan...":"Tallenna muutokset"})]})]})]})})},h2=()=>{const{currentUser:e}=Ye(),[t,r]=k.useState(null),[n,i]=k.useState([]),[s,o]=k.useState(null),[l,c]=k.useState(!0),[u,d]=k.useState(null),[f,m]=k.useState(new Date),[v,y]=k.useState(0);return k.useEffect(()=>{const p=()=>y(window.scrollY);return window.addEventListener("scroll",p),()=>window.removeEventListener("scroll",p)},[]),k.useEffect(()=>{(async()=>{if(e)try{c(!0);const x=await ba(e.uid);if(x){r(x);const N=(await ni(x.id)).map(b=>({...b,date:new Date(b.date.seconds*1e3)}));i(N)}}catch(x){console.error("Error loading vendor data:",x),d("Virhe ladattaessa tietoja")}finally{c(!1)}})()},[e]),l?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):u||!t?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Virhe!"}),a.jsx("p",{className:"text-gray-600",children:u||"Yritystietoja ei löytynyt"})]})}):a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:`fixed md:relative top-0 left-0 right-0 z-[45] transition-all duration-300 ${v>20?"bg-white/90 backdrop-blur-lg shadow-sm":"bg-white/50 backdrop-blur-sm"}`,children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 py-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h1",{className:`text-2xl font-bold transition-all duration-300 ${v>20?"text-gray-900":"text-gray-800"}`,children:"Varauskalenteri"}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:Ne(f,"MMMM yyyy",{locale:He})})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:()=>m(p=>new Date(p.getFullYear(),p.getMonth()-1)),className:"p-2 hover:bg-gray-100 rounded-full transition-colors ios-btn-active md:hover:bg-gray-50",children:a.jsx(Wn,{className:"w-5 h-5 text-gray-600"})}),a.jsx("button",{onClick:()=>m(new Date),className:"px-3 py-1.5 bg-gray-100 text-gray-700 rounded-full text-sm font-medium hover:bg-gray-200 transition-colors ios-btn-active md:bg-gray-50 md:hover:bg-gray-100",children:"Tänään"}),a.jsx("button",{onClick:()=>m(p=>new Date(p.getFullYear(),p.getMonth()+1)),className:"p-2 hover:bg-gray-100 rounded-full transition-colors ios-btn-active md:hover:bg-gray-50",children:a.jsx(fr,{className:"w-5 h-5 text-gray-600"})})]})]})})}),a.jsx("div",{className:"pt-24 md:pt-6 pb-6 px-4 md:px-6",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[a.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm hover:shadow-md transition-all duration-300 transform hover:-translate-y-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"p-2 bg-blue-50 rounded-xl",children:a.jsx(Fe,{className:"w-6 h-6 text-blue-600"})}),a.jsx("span",{className:"text-2xl font-bold text-blue-600",children:n.filter(p=>p.status==="confirmed").length})]}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Tulevat"})]}),a.jsxs("div",{className:"bg-white rounded-2xl p-4 shadow-sm hover:shadow-md transition-all duration-300 transform hover:-translate-y-1",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"p-2 bg-green-50 rounded-xl",children:a.jsx(De,{className:"w-6 h-6 text-green-600"})}),a.jsx("span",{className:"text-2xl font-bold text-green-600",children:n.filter(p=>p.status==="completed").length})]}),a.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Valmiit"})]})]})})}),a.jsx("div",{className:"px-4 md:px-6",children:a.jsx("div",{className:"max-w-7xl mx-auto",children:a.jsx("div",{className:"bg-white rounded-2xl shadow-sm md:shadow-md overflow-hidden",children:a.jsx(f2,{vendor:t,appointments:n,onAppointmentClick:o})})})}),s&&a.jsx(m2,{isOpen:!!s,onClose:()=>o(null),appointment:s,onStatusChange:async()=>{if(!t)return;const x=(await ni(t.id)).map(j=>({...j,date:new Date(j.date.seconds*1e3)}));i(x)}})]})};function zy(e){var t,r,n="";if(typeof e=="string"||typeof e=="number")n+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(r=zy(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function ve(){for(var e,t,r=0,n="",i=arguments.length;r<i;r++)(e=arguments[r])&&(t=zy(e))&&(n&&(n+=" "),n+=t);return n}var p2=Array.isArray,kt=p2,v2=typeof es=="object"&&es&&es.Object===Object&&es,qy=v2,y2=qy,x2=typeof self=="object"&&self&&self.Object===Object&&self,g2=y2||x2||Function("return this")(),pr=g2,b2=pr,w2=b2.Symbol,Vi=w2,lm=Vi,Wy=Object.prototype,j2=Wy.hasOwnProperty,N2=Wy.toString,Ra=lm?lm.toStringTag:void 0;function k2(e){var t=j2.call(e,Ra),r=e[Ra];try{e[Ra]=void 0;var n=!0}catch{}var i=N2.call(e);return n&&(t?e[Ra]=r:delete e[Ra]),i}var S2=k2,O2=Object.prototype,A2=O2.toString;function P2(e){return A2.call(e)}var E2=P2,cm=Vi,T2=S2,_2=E2,$2="[object Null]",C2="[object Undefined]",um=cm?cm.toStringTag:void 0;function M2(e){return e==null?e===void 0?C2:$2:um&&um in Object(e)?T2(e):_2(e)}var Tr=M2;function D2(e){return e!=null&&typeof e=="object"}var _r=D2,I2=Tr,R2=_r,L2="[object Symbol]";function B2(e){return typeof e=="symbol"||R2(e)&&I2(e)==L2}var wa=B2,F2=kt,U2=wa,V2=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,H2=/^\w*$/;function z2(e,t){if(F2(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||U2(e)?!0:H2.test(e)||!V2.test(e)||t!=null&&e in Object(t)}var wd=z2;function q2(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Wr=q2;const ja=Oe(Wr);var W2=Tr,K2=Wr,Y2="[object AsyncFunction]",G2="[object Function]",X2="[object GeneratorFunction]",Q2="[object Proxy]";function Z2(e){if(!K2(e))return!1;var t=W2(e);return t==G2||t==X2||t==Y2||t==Q2}var jd=Z2;const fe=Oe(jd);var J2=pr,ek=J2["__core-js_shared__"],tk=ek,Yl=tk,dm=function(){var e=/[^.]+$/.exec(Yl&&Yl.keys&&Yl.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function rk(e){return!!dm&&dm in e}var nk=rk,ak=Function.prototype,ik=ak.toString;function sk(e){if(e!=null){try{return ik.call(e)}catch{}try{return e+""}catch{}}return""}var Ky=sk,ok=jd,lk=nk,ck=Wr,uk=Ky,dk=/[\\^$.*+?()[\]{}|]/g,fk=/^\[object .+?Constructor\]$/,mk=Function.prototype,hk=Object.prototype,pk=mk.toString,vk=hk.hasOwnProperty,yk=RegExp("^"+pk.call(vk).replace(dk,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function xk(e){if(!ck(e)||lk(e))return!1;var t=ok(e)?yk:fk;return t.test(uk(e))}var gk=xk;function bk(e,t){return e==null?void 0:e[t]}var wk=bk,jk=gk,Nk=wk;function kk(e,t){var r=Nk(e,t);return jk(r)?r:void 0}var kn=kk,Sk=kn,Ok=Sk(Object,"create"),Vo=Ok,fm=Vo;function Ak(){this.__data__=fm?fm(null):{},this.size=0}var Pk=Ak;function Ek(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var Tk=Ek,_k=Vo,$k="__lodash_hash_undefined__",Ck=Object.prototype,Mk=Ck.hasOwnProperty;function Dk(e){var t=this.__data__;if(_k){var r=t[e];return r===$k?void 0:r}return Mk.call(t,e)?t[e]:void 0}var Ik=Dk,Rk=Vo,Lk=Object.prototype,Bk=Lk.hasOwnProperty;function Fk(e){var t=this.__data__;return Rk?t[e]!==void 0:Bk.call(t,e)}var Uk=Fk,Vk=Vo,Hk="__lodash_hash_undefined__";function zk(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=Vk&&t===void 0?Hk:t,this}var qk=zk,Wk=Pk,Kk=Tk,Yk=Ik,Gk=Uk,Xk=qk;function Na(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Na.prototype.clear=Wk;Na.prototype.delete=Kk;Na.prototype.get=Yk;Na.prototype.has=Gk;Na.prototype.set=Xk;var Qk=Na;function Zk(){this.__data__=[],this.size=0}var Jk=Zk;function eS(e,t){return e===t||e!==e&&t!==t}var Nd=eS,tS=Nd;function rS(e,t){for(var r=e.length;r--;)if(tS(e[r][0],t))return r;return-1}var Ho=rS,nS=Ho,aS=Array.prototype,iS=aS.splice;function sS(e){var t=this.__data__,r=nS(t,e);if(r<0)return!1;var n=t.length-1;return r==n?t.pop():iS.call(t,r,1),--this.size,!0}var oS=sS,lS=Ho;function cS(e){var t=this.__data__,r=lS(t,e);return r<0?void 0:t[r][1]}var uS=cS,dS=Ho;function fS(e){return dS(this.__data__,e)>-1}var mS=fS,hS=Ho;function pS(e,t){var r=this.__data__,n=hS(r,e);return n<0?(++this.size,r.push([e,t])):r[n][1]=t,this}var vS=pS,yS=Jk,xS=oS,gS=uS,bS=mS,wS=vS;function ka(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}ka.prototype.clear=yS;ka.prototype.delete=xS;ka.prototype.get=gS;ka.prototype.has=bS;ka.prototype.set=wS;var zo=ka,jS=kn,NS=pr,kS=jS(NS,"Map"),kd=kS,mm=Qk,SS=zo,OS=kd;function AS(){this.size=0,this.__data__={hash:new mm,map:new(OS||SS),string:new mm}}var PS=AS;function ES(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var TS=ES,_S=TS;function $S(e,t){var r=e.__data__;return _S(t)?r[typeof t=="string"?"string":"hash"]:r.map}var qo=$S,CS=qo;function MS(e){var t=CS(this,e).delete(e);return this.size-=t?1:0,t}var DS=MS,IS=qo;function RS(e){return IS(this,e).get(e)}var LS=RS,BS=qo;function FS(e){return BS(this,e).has(e)}var US=FS,VS=qo;function HS(e,t){var r=VS(this,e),n=r.size;return r.set(e,t),this.size+=r.size==n?0:1,this}var zS=HS,qS=PS,WS=DS,KS=LS,YS=US,GS=zS;function Sa(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var n=e[t];this.set(n[0],n[1])}}Sa.prototype.clear=qS;Sa.prototype.delete=WS;Sa.prototype.get=KS;Sa.prototype.has=YS;Sa.prototype.set=GS;var Sd=Sa,Yy=Sd,XS="Expected a function";function Od(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(XS);var r=function(){var n=arguments,i=t?t.apply(this,n):n[0],s=r.cache;if(s.has(i))return s.get(i);var o=e.apply(this,n);return r.cache=s.set(i,o)||s,o};return r.cache=new(Od.Cache||Yy),r}Od.Cache=Yy;var Gy=Od;const QS=Oe(Gy);var ZS=Gy,JS=500;function eO(e){var t=ZS(e,function(n){return r.size===JS&&r.clear(),n}),r=t.cache;return t}var tO=eO,rO=tO,nO=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,aO=/\\(\\)?/g,iO=rO(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(nO,function(r,n,i,s){t.push(i?s.replace(aO,"$1"):n||r)}),t}),sO=iO;function oO(e,t){for(var r=-1,n=e==null?0:e.length,i=Array(n);++r<n;)i[r]=t(e[r],r,e);return i}var Ad=oO,hm=Vi,lO=Ad,cO=kt,uO=wa,dO=1/0,pm=hm?hm.prototype:void 0,vm=pm?pm.toString:void 0;function Xy(e){if(typeof e=="string")return e;if(cO(e))return lO(e,Xy)+"";if(uO(e))return vm?vm.call(e):"";var t=e+"";return t=="0"&&1/e==-dO?"-0":t}var fO=Xy,mO=fO;function hO(e){return e==null?"":mO(e)}var Qy=hO,pO=kt,vO=wd,yO=sO,xO=Qy;function gO(e,t){return pO(e)?e:vO(e,t)?[e]:yO(xO(e))}var Zy=gO,bO=wa,wO=1/0;function jO(e){if(typeof e=="string"||bO(e))return e;var t=e+"";return t=="0"&&1/e==-wO?"-0":t}var Wo=jO,NO=Zy,kO=Wo;function SO(e,t){t=NO(t,e);for(var r=0,n=t.length;e!=null&&r<n;)e=e[kO(t[r++])];return r&&r==n?e:void 0}var Pd=SO,OO=Pd;function AO(e,t,r){var n=e==null?void 0:OO(e,t);return n===void 0?r:n}var Jy=AO;const $t=Oe(Jy);function PO(e){return e==null}var EO=PO;const he=Oe(EO);var TO=Tr,_O=kt,$O=_r,CO="[object String]";function MO(e){return typeof e=="string"||!_O(e)&&$O(e)&&TO(e)==CO}var DO=MO;const Hi=Oe(DO);var ex={exports:{}},$e={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ed=Symbol.for("react.element"),Td=Symbol.for("react.portal"),Ko=Symbol.for("react.fragment"),Yo=Symbol.for("react.strict_mode"),Go=Symbol.for("react.profiler"),Xo=Symbol.for("react.provider"),Qo=Symbol.for("react.context"),IO=Symbol.for("react.server_context"),Zo=Symbol.for("react.forward_ref"),Jo=Symbol.for("react.suspense"),el=Symbol.for("react.suspense_list"),tl=Symbol.for("react.memo"),rl=Symbol.for("react.lazy"),RO=Symbol.for("react.offscreen"),tx;tx=Symbol.for("react.module.reference");function Vt(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case Ed:switch(e=e.type,e){case Ko:case Go:case Yo:case Jo:case el:return e;default:switch(e=e&&e.$$typeof,e){case IO:case Qo:case Zo:case rl:case tl:case Xo:return e;default:return t}}case Td:return t}}}$e.ContextConsumer=Qo;$e.ContextProvider=Xo;$e.Element=Ed;$e.ForwardRef=Zo;$e.Fragment=Ko;$e.Lazy=rl;$e.Memo=tl;$e.Portal=Td;$e.Profiler=Go;$e.StrictMode=Yo;$e.Suspense=Jo;$e.SuspenseList=el;$e.isAsyncMode=function(){return!1};$e.isConcurrentMode=function(){return!1};$e.isContextConsumer=function(e){return Vt(e)===Qo};$e.isContextProvider=function(e){return Vt(e)===Xo};$e.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===Ed};$e.isForwardRef=function(e){return Vt(e)===Zo};$e.isFragment=function(e){return Vt(e)===Ko};$e.isLazy=function(e){return Vt(e)===rl};$e.isMemo=function(e){return Vt(e)===tl};$e.isPortal=function(e){return Vt(e)===Td};$e.isProfiler=function(e){return Vt(e)===Go};$e.isStrictMode=function(e){return Vt(e)===Yo};$e.isSuspense=function(e){return Vt(e)===Jo};$e.isSuspenseList=function(e){return Vt(e)===el};$e.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Ko||e===Go||e===Yo||e===Jo||e===el||e===RO||typeof e=="object"&&e!==null&&(e.$$typeof===rl||e.$$typeof===tl||e.$$typeof===Xo||e.$$typeof===Qo||e.$$typeof===Zo||e.$$typeof===tx||e.getModuleId!==void 0)};$e.typeOf=Vt;ex.exports=$e;var LO=ex.exports,BO=Tr,FO=_r,UO="[object Number]";function VO(e){return typeof e=="number"||FO(e)&&BO(e)==UO}var rx=VO;const HO=Oe(rx);var zO=rx;function qO(e){return zO(e)&&e!=+e}var WO=qO;const zi=Oe(WO);var vt=function(t){return t===0?0:t>0?1:-1},Ic=function(t){return Hi(t)&&t.indexOf("%")===t.length-1},Y=function(t){return HO(t)&&!zi(t)},rt=function(t){return Y(t)||Hi(t)},KO=0,Oa=function(t){var r=++KO;return"".concat(t||"").concat(r)},yt=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Y(t)&&!Hi(t))return n;var s;if(Ic(t)){var o=t.indexOf("%");s=r*parseFloat(t.slice(0,o))/100}else s=+t;return zi(s)&&(s=n),i&&s>r&&(s=r),s},Rr=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},YO=function(t){if(!Array.isArray(t))return!1;for(var r=t.length,n={},i=0;i<r;i++)if(!n[t[i]])n[t[i]]=!0;else return!0;return!1},Pt=function(t,r){return Y(t)&&Y(r)?function(n){return t+n*(r-t)}:function(){return r}};function Cs(e,t,r){return!e||!e.length?null:e.find(function(n){return n&&(typeof t=="function"?t(n):$t(n,t))===r})}function Hn(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var n in t)if({}.hasOwnProperty.call(t,n)&&!{}.hasOwnProperty.call(e,n))return!1;return!0}function Rc(e){"@babel/helpers - typeof";return Rc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rc(e)}var GO=["viewBox","children"],XO=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],ym=["points","pathLength"],Gl={svg:GO,polygon:ym,polyline:ym},_d=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Ms=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(k.isValidElement(t)&&(n=t.props),!ja(n))return null;var i={};return Object.keys(n).forEach(function(s){_d.includes(s)&&(i[s]=r||function(o){return n[s](n,o)})}),i},QO=function(t,r,n){return function(i){return t(r,n,i),null}},xn=function(t,r,n){if(!ja(t)||Rc(t)!=="object")return null;var i=null;return Object.keys(t).forEach(function(s){var o=t[s];_d.includes(s)&&typeof o=="function"&&(i||(i={}),i[s]=QO(o,r,n))}),i},ZO=["children"],JO=["children"];function xm(e,t){if(e==null)return{};var r=eA(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function eA(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Lc(e){"@babel/helpers - typeof";return Lc=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Lc(e)}var gm={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},Br=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},bm=null,Xl=null,$d=function e(t){if(t===bm&&Array.isArray(Xl))return Xl;var r=[];return k.Children.forEach(t,function(n){he(n)||(LO.isFragment(n)?r=r.concat(e(n.props.children)):r.push(n))}),Xl=r,bm=t,r};function Ct(e,t){var r=[],n=[];return Array.isArray(t)?n=t.map(function(i){return Br(i)}):n=[Br(t)],$d(e).forEach(function(i){var s=$t(i,"type.displayName")||$t(i,"type.name");n.indexOf(s)!==-1&&r.push(i)}),r}function At(e,t){var r=Ct(e,t);return r&&r[0]}var wm=function(t){if(!t||!t.props)return!1;var r=t.props,n=r.width,i=r.height;return!(!Y(n)||n<=0||!Y(i)||i<=0)},tA=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],rA=function(t){return t&&t.type&&Hi(t.type)&&tA.indexOf(t.type)>=0},nA=function(t){return t&&Lc(t)==="object"&&"clipDot"in t},aA=function(t,r,n,i){var s,o=(s=Gl==null?void 0:Gl[i])!==null&&s!==void 0?s:[];return!fe(t)&&(i&&o.includes(r)||XO.includes(r))||n&&_d.includes(r)},se=function(t,r,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(k.isValidElement(t)&&(i=t.props),!ja(i))return null;var s={};return Object.keys(i).forEach(function(o){var l;aA((l=i)===null||l===void 0?void 0:l[o],o,r,n)&&(s[o]=i[o])}),s},Bc=function e(t,r){if(t===r)return!0;var n=k.Children.count(t);if(n!==k.Children.count(r))return!1;if(n===0)return!0;if(n===1)return jm(Array.isArray(t)?t[0]:t,Array.isArray(r)?r[0]:r);for(var i=0;i<n;i++){var s=t[i],o=r[i];if(Array.isArray(s)||Array.isArray(o)){if(!e(s,o))return!1}else if(!jm(s,o))return!1}return!0},jm=function(t,r){if(he(t)&&he(r))return!0;if(!he(t)&&!he(r)){var n=t.props||{},i=n.children,s=xm(n,ZO),o=r.props||{},l=o.children,c=xm(o,JO);return i&&l?Hn(s,c)&&Bc(i,l):!i&&!l?Hn(s,c):!1}return!1},Nm=function(t,r){var n=[],i={};return $d(t).forEach(function(s,o){if(rA(s))n.push(s);else if(s){var l=Br(s.type),c=r[l]||{},u=c.handler,d=c.once;if(u&&(!d||!i[l])){var f=u(s,l,o);n.push(f),i[l]=!0}}}),n},iA=function(t){var r=t&&t.type;return r&&gm[r]?gm[r]:null},sA=function(t,r){return $d(r).indexOf(t)},oA=["children","width","height","viewBox","className","style","title","desc"];function Fc(){return Fc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fc.apply(this,arguments)}function lA(e,t){if(e==null)return{};var r=cA(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function cA(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Uc(e){var t=e.children,r=e.width,n=e.height,i=e.viewBox,s=e.className,o=e.style,l=e.title,c=e.desc,u=lA(e,oA),d=i||{width:r,height:n,x:0,y:0},f=ve("recharts-surface",s);return P.createElement("svg",Fc({},se(u,!0,"svg"),{className:f,width:r,height:n,style:o,viewBox:"".concat(d.x," ").concat(d.y," ").concat(d.width," ").concat(d.height)}),P.createElement("title",null,l),P.createElement("desc",null,c),t)}var uA=["children","className"];function Vc(){return Vc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Vc.apply(this,arguments)}function dA(e,t){if(e==null)return{};var r=fA(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function fA(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var ke=P.forwardRef(function(e,t){var r=e.children,n=e.className,i=dA(e,uA),s=ve("recharts-layer",n);return P.createElement("g",Vc({className:s},se(i,!0),{ref:t}),r)}),qr=function(t,r){for(var n=arguments.length,i=new Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s]};function mA(e,t,r){var n=-1,i=e.length;t<0&&(t=-t>i?0:i+t),r=r>i?i:r,r<0&&(r+=i),i=t>r?0:r-t>>>0,t>>>=0;for(var s=Array(i);++n<i;)s[n]=e[n+t];return s}var hA=mA,pA=hA;function vA(e,t,r){var n=e.length;return r=r===void 0?n:r,!t&&r>=n?e:pA(e,t,r)}var yA=vA,xA="\\ud800-\\udfff",gA="\\u0300-\\u036f",bA="\\ufe20-\\ufe2f",wA="\\u20d0-\\u20ff",jA=gA+bA+wA,NA="\\ufe0e\\ufe0f",kA="\\u200d",SA=RegExp("["+kA+xA+jA+NA+"]");function OA(e){return SA.test(e)}var nx=OA;function AA(e){return e.split("")}var PA=AA,ax="\\ud800-\\udfff",EA="\\u0300-\\u036f",TA="\\ufe20-\\ufe2f",_A="\\u20d0-\\u20ff",$A=EA+TA+_A,CA="\\ufe0e\\ufe0f",MA="["+ax+"]",Hc="["+$A+"]",zc="\\ud83c[\\udffb-\\udfff]",DA="(?:"+Hc+"|"+zc+")",ix="[^"+ax+"]",sx="(?:\\ud83c[\\udde6-\\uddff]){2}",ox="[\\ud800-\\udbff][\\udc00-\\udfff]",IA="\\u200d",lx=DA+"?",cx="["+CA+"]?",RA="(?:"+IA+"(?:"+[ix,sx,ox].join("|")+")"+cx+lx+")*",LA=cx+lx+RA,BA="(?:"+[ix+Hc+"?",Hc,sx,ox,MA].join("|")+")",FA=RegExp(zc+"(?="+zc+")|"+BA+LA,"g");function UA(e){return e.match(FA)||[]}var VA=UA,HA=PA,zA=nx,qA=VA;function WA(e){return zA(e)?qA(e):HA(e)}var KA=WA,YA=yA,GA=nx,XA=KA,QA=Qy;function ZA(e){return function(t){t=QA(t);var r=GA(t)?XA(t):void 0,n=r?r[0]:t.charAt(0),i=r?YA(r,1).join(""):t.slice(1);return n[e]()+i}}var JA=ZA,eP=JA,tP=eP("toUpperCase"),rP=tP;const nl=Oe(rP);function Le(e){return function(){return e}}const ux=Math.cos,Ds=Math.sin,nr=Math.sqrt,Is=Math.PI,al=2*Is,qc=Math.PI,Wc=2*qc,tn=1e-6,nP=Wc-tn;function dx(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function aP(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return dx;const r=10**t;return function(n){this._+=n[0];for(let i=1,s=n.length;i<s;++i)this._+=Math.round(arguments[i]*r)/r+n[i]}}class iP{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?dx:aP(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,n,i){this._append`Q${+t},${+r},${this._x1=+n},${this._y1=+i}`}bezierCurveTo(t,r,n,i,s,o){this._append`C${+t},${+r},${+n},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,r,n,i,s){if(t=+t,r=+r,n=+n,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,l=this._y1,c=n-t,u=i-r,d=o-t,f=l-r,m=d*d+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(m>tn)if(!(Math.abs(f*c-u*d)>tn)||!s)this._append`L${this._x1=t},${this._y1=r}`;else{let v=n-o,y=i-l,p=c*c+u*u,x=v*v+y*y,j=Math.sqrt(p),N=Math.sqrt(m),b=s*Math.tan((qc-Math.acos((p+m-x)/(2*j*N)))/2),g=b/N,h=b/j;Math.abs(g-1)>tn&&this._append`L${t+g*d},${r+g*f}`,this._append`A${s},${s},0,0,${+(f*v>d*y)},${this._x1=t+h*c},${this._y1=r+h*u}`}}arc(t,r,n,i,s,o){if(t=+t,r=+r,n=+n,o=!!o,n<0)throw new Error(`negative radius: ${n}`);let l=n*Math.cos(i),c=n*Math.sin(i),u=t+l,d=r+c,f=1^o,m=o?i-s:s-i;this._x1===null?this._append`M${u},${d}`:(Math.abs(this._x1-u)>tn||Math.abs(this._y1-d)>tn)&&this._append`L${u},${d}`,n&&(m<0&&(m=m%Wc+Wc),m>nP?this._append`A${n},${n},0,1,${f},${t-l},${r-c}A${n},${n},0,1,${f},${this._x1=u},${this._y1=d}`:m>tn&&this._append`A${n},${n},0,${+(m>=qc)},${f},${this._x1=t+n*Math.cos(s)},${this._y1=r+n*Math.sin(s)}`)}rect(t,r,n,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${n=+n}v${+i}h${-n}Z`}toString(){return this._}}function Cd(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const n=Math.floor(r);if(!(n>=0))throw new RangeError(`invalid digits: ${r}`);t=n}return e},()=>new iP(t)}function Md(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function fx(e){this._context=e}fx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function il(e){return new fx(e)}function mx(e){return e[0]}function hx(e){return e[1]}function px(e,t){var r=Le(!0),n=null,i=il,s=null,o=Cd(l);e=typeof e=="function"?e:e===void 0?mx:Le(e),t=typeof t=="function"?t:t===void 0?hx:Le(t);function l(c){var u,d=(c=Md(c)).length,f,m=!1,v;for(n==null&&(s=i(v=o())),u=0;u<=d;++u)!(u<d&&r(f=c[u],u,c))===m&&((m=!m)?s.lineStart():s.lineEnd()),m&&s.point(+e(f,u,c),+t(f,u,c));if(v)return s=null,v+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:Le(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:Le(+c),l):t},l.defined=function(c){return arguments.length?(r=typeof c=="function"?c:Le(!!c),l):r},l.curve=function(c){return arguments.length?(i=c,n!=null&&(s=i(n)),l):i},l.context=function(c){return arguments.length?(c==null?n=s=null:s=i(n=c),l):n},l}function is(e,t,r){var n=null,i=Le(!0),s=null,o=il,l=null,c=Cd(u);e=typeof e=="function"?e:e===void 0?mx:Le(+e),t=typeof t=="function"?t:Le(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?hx:Le(+r);function u(f){var m,v,y,p=(f=Md(f)).length,x,j=!1,N,b=new Array(p),g=new Array(p);for(s==null&&(l=o(N=c())),m=0;m<=p;++m){if(!(m<p&&i(x=f[m],m,f))===j)if(j=!j)v=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),y=m-1;y>=v;--y)l.point(b[y],g[y]);l.lineEnd(),l.areaEnd()}j&&(b[m]=+e(x,m,f),g[m]=+t(x,m,f),l.point(n?+n(x,m,f):b[m],r?+r(x,m,f):g[m]))}if(N)return l=null,N+""||null}function d(){return px().defined(i).curve(o).context(s)}return u.x=function(f){return arguments.length?(e=typeof f=="function"?f:Le(+f),n=null,u):e},u.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Le(+f),u):e},u.x1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:Le(+f),u):n},u.y=function(f){return arguments.length?(t=typeof f=="function"?f:Le(+f),r=null,u):t},u.y0=function(f){return arguments.length?(t=typeof f=="function"?f:Le(+f),u):t},u.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Le(+f),u):r},u.lineX0=u.lineY0=function(){return d().x(e).y(t)},u.lineY1=function(){return d().x(e).y(r)},u.lineX1=function(){return d().x(n).y(t)},u.defined=function(f){return arguments.length?(i=typeof f=="function"?f:Le(!!f),u):i},u.curve=function(f){return arguments.length?(o=f,s!=null&&(l=o(s)),u):o},u.context=function(f){return arguments.length?(f==null?s=l=null:l=o(s=f),u):s},u}class vx{constructor(t,r){this._context=t,this._x=r}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,r){switch(t=+t,r=+r,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,r):this._context.moveTo(t,r);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,r,t,r):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+r)/2,t,this._y0,t,r);break}}this._x0=t,this._y0=r}}function sP(e){return new vx(e,!0)}function oP(e){return new vx(e,!1)}const Dd={draw(e,t){const r=nr(t/Is);e.moveTo(r,0),e.arc(0,0,r,0,al)}},lP={draw(e,t){const r=nr(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},yx=nr(1/3),cP=yx*2,uP={draw(e,t){const r=nr(t/cP),n=r*yx;e.moveTo(0,-r),e.lineTo(n,0),e.lineTo(0,r),e.lineTo(-n,0),e.closePath()}},dP={draw(e,t){const r=nr(t),n=-r/2;e.rect(n,n,r,r)}},fP=.8908130915292852,xx=Ds(Is/10)/Ds(7*Is/10),mP=Ds(al/10)*xx,hP=-ux(al/10)*xx,pP={draw(e,t){const r=nr(t*fP),n=mP*r,i=hP*r;e.moveTo(0,-r),e.lineTo(n,i);for(let s=1;s<5;++s){const o=al*s/5,l=ux(o),c=Ds(o);e.lineTo(c*r,-l*r),e.lineTo(l*n-c*i,c*n+l*i)}e.closePath()}},Ql=nr(3),vP={draw(e,t){const r=-nr(t/(Ql*3));e.moveTo(0,r*2),e.lineTo(-Ql*r,-r),e.lineTo(Ql*r,-r),e.closePath()}},Mt=-.5,Dt=nr(3)/2,Kc=1/nr(12),yP=(Kc/2+1)*3,xP={draw(e,t){const r=nr(t/yP),n=r/2,i=r*Kc,s=n,o=r*Kc+r,l=-s,c=o;e.moveTo(n,i),e.lineTo(s,o),e.lineTo(l,c),e.lineTo(Mt*n-Dt*i,Dt*n+Mt*i),e.lineTo(Mt*s-Dt*o,Dt*s+Mt*o),e.lineTo(Mt*l-Dt*c,Dt*l+Mt*c),e.lineTo(Mt*n+Dt*i,Mt*i-Dt*n),e.lineTo(Mt*s+Dt*o,Mt*o-Dt*s),e.lineTo(Mt*l+Dt*c,Mt*c-Dt*l),e.closePath()}};function gP(e,t){let r=null,n=Cd(i);e=typeof e=="function"?e:Le(e||Dd),t=typeof t=="function"?t:Le(t===void 0?64:+t);function i(){let s;if(r||(r=s=n()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),s)return r=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:Le(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:Le(+s),i):t},i.context=function(s){return arguments.length?(r=s??null,i):r},i}function Rs(){}function Ls(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function gx(e){this._context=e}gx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Ls(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Ls(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function bP(e){return new gx(e)}function bx(e){this._context=e}bx.prototype={areaStart:Rs,areaEnd:Rs,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Ls(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function wP(e){return new bx(e)}function wx(e){this._context=e}wx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,n=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,n):this._context.moveTo(r,n);break;case 3:this._point=4;default:Ls(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function jP(e){return new wx(e)}function jx(e){this._context=e}jx.prototype={areaStart:Rs,areaEnd:Rs,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function NP(e){return new jx(e)}function km(e){return e<0?-1:1}function Sm(e,t,r){var n=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(n||i<0&&-0),o=(r-e._y1)/(i||n<0&&-0),l=(s*i+o*n)/(n+i);return(km(s)+km(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(l))||0}function Om(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function Zl(e,t,r){var n=e._x0,i=e._y0,s=e._x1,o=e._y1,l=(s-n)/3;e._context.bezierCurveTo(n+l,i+l*t,s-l,o-l*r,s,o)}function Bs(e){this._context=e}Bs.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:Zl(this,this._t0,Om(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,Zl(this,Om(this,r=Sm(this,e,t)),r);break;default:Zl(this,this._t0,r=Sm(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function Nx(e){this._context=new kx(e)}(Nx.prototype=Object.create(Bs.prototype)).point=function(e,t){Bs.prototype.point.call(this,t,e)};function kx(e){this._context=e}kx.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,n,i,s){this._context.bezierCurveTo(t,e,n,r,s,i)}};function kP(e){return new Bs(e)}function SP(e){return new Nx(e)}function Sx(e){this._context=e}Sx.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var n=Am(e),i=Am(t),s=0,o=1;o<r;++s,++o)this._context.bezierCurveTo(n[0][s],i[0][s],n[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Am(e){var t,r=e.length-1,n,i=new Array(r),s=new Array(r),o=new Array(r);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,s[r-1]=7,o[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/s[t-1],s[t]-=n,o[t]-=n*o[t-1];for(i[r-1]=o[r-1]/s[r-1],t=r-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function OP(e){return new Sx(e)}function sl(e,t){this._context=e,this._t=t}sl.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function AP(e){return new sl(e,.5)}function PP(e){return new sl(e,0)}function EP(e){return new sl(e,1)}function Yn(e,t){if((o=e.length)>1)for(var r=1,n,i,s=e[t[0]],o,l=s.length;r<o;++r)for(i=s,s=e[t[r]],n=0;n<l;++n)s[n][1]+=s[n][0]=isNaN(i[n][1])?i[n][0]:i[n][1]}function Yc(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function TP(e,t){return e[t]}function _P(e){const t=[];return t.key=e,t}function $P(){var e=Le([]),t=Yc,r=Yn,n=TP;function i(s){var o=Array.from(e.apply(this,arguments),_P),l,c=o.length,u=-1,d;for(const f of s)for(l=0,++u;l<c;++l)(o[l][u]=[0,+n(f,o[l].key,u,s)]).data=f;for(l=0,d=Md(t(o));l<c;++l)o[d[l]].index=l;return r(o,d),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:Le(Array.from(s)),i):e},i.value=function(s){return arguments.length?(n=typeof s=="function"?s:Le(+s),i):n},i.order=function(s){return arguments.length?(t=s==null?Yc:typeof s=="function"?s:Le(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(r=s??Yn,i):r},i}function CP(e,t){if((n=e.length)>0){for(var r,n,i=0,s=e[0].length,o;i<s;++i){for(o=r=0;r<n;++r)o+=e[r][i][1]||0;if(o)for(r=0;r<n;++r)e[r][i][1]/=o}Yn(e,t)}}function MP(e,t){if((i=e.length)>0){for(var r=0,n=e[t[0]],i,s=n.length;r<s;++r){for(var o=0,l=0;o<i;++o)l+=e[o][r][1]||0;n[r][1]+=n[r][0]=-l/2}Yn(e,t)}}function DP(e,t){if(!(!((o=e.length)>0)||!((s=(i=e[t[0]]).length)>0))){for(var r=0,n=1,i,s,o;n<s;++n){for(var l=0,c=0,u=0;l<o;++l){for(var d=e[t[l]],f=d[n][1]||0,m=d[n-1][1]||0,v=(f-m)/2,y=0;y<l;++y){var p=e[t[y]],x=p[n][1]||0,j=p[n-1][1]||0;v+=x-j}c+=f,u+=v*f}i[n-1][1]+=i[n-1][0]=r,c&&(r-=u/c)}i[n-1][1]+=i[n-1][0]=r,Yn(e,t)}}function si(e){"@babel/helpers - typeof";return si=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},si(e)}var IP=["type","size","sizeType"];function Gc(){return Gc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gc.apply(this,arguments)}function Pm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Em(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Pm(Object(r),!0).forEach(function(n){RP(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RP(e,t,r){return t=LP(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LP(e){var t=BP(e,"string");return si(t)=="symbol"?t:t+""}function BP(e,t){if(si(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(si(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FP(e,t){if(e==null)return{};var r=UP(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function UP(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var Ox={symbolCircle:Dd,symbolCross:lP,symbolDiamond:uP,symbolSquare:dP,symbolStar:pP,symbolTriangle:vP,symbolWye:xP},VP=Math.PI/180,HP=function(t){var r="symbol".concat(nl(t));return Ox[r]||Dd},zP=function(t,r,n){if(r==="area")return t;switch(n){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var i=18*VP;return 1.25*t*t*(Math.tan(i)-Math.tan(i*2)*Math.pow(Math.tan(i),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},qP=function(t,r){Ox["symbol".concat(nl(t))]=r},Id=function(t){var r=t.type,n=r===void 0?"circle":r,i=t.size,s=i===void 0?64:i,o=t.sizeType,l=o===void 0?"area":o,c=FP(t,IP),u=Em(Em({},c),{},{type:n,size:s,sizeType:l}),d=function(){var x=HP(n),j=gP().type(x).size(zP(s,l,n));return j()},f=u.className,m=u.cx,v=u.cy,y=se(u,!0);return m===+m&&v===+v&&s===+s?P.createElement("path",Gc({},y,{className:ve("recharts-symbols",f),transform:"translate(".concat(m,", ").concat(v,")"),d:d()})):null};Id.registerSymbol=qP;function Gn(e){"@babel/helpers - typeof";return Gn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gn(e)}function Xc(){return Xc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Xc.apply(this,arguments)}function Tm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function WP(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tm(Object(r),!0).forEach(function(n){oi(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function KP(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function YP(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Px(n.key),n)}}function GP(e,t,r){return t&&YP(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function XP(e,t,r){return t=Fs(t),QP(e,Ax()?Reflect.construct(t,r||[],Fs(e).constructor):t.apply(e,r))}function QP(e,t){if(t&&(Gn(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ZP(e)}function ZP(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ax(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Ax=function(){return!!e})()}function Fs(e){return Fs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fs(e)}function JP(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qc(e,t)}function Qc(e,t){return Qc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Qc(e,t)}function oi(e,t,r){return t=Px(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Px(e){var t=eE(e,"string");return Gn(t)=="symbol"?t:t+""}function eE(e,t){if(Gn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Gn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var It=32,Rd=function(e){function t(){return KP(this,t),XP(this,t,arguments)}return JP(t,e),GP(t,[{key:"renderIcon",value:function(n){var i=this.props.inactiveColor,s=It/2,o=It/6,l=It/3,c=n.inactive?i:n.color;if(n.type==="plainline")return P.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:n.payload.strokeDasharray,x1:0,y1:s,x2:It,y2:s,className:"recharts-legend-icon"});if(n.type==="line")return P.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(s,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(s,`
            H`).concat(It,"M").concat(2*l,",").concat(s,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(s),className:"recharts-legend-icon"});if(n.type==="rect")return P.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(It/8,"h").concat(It,"v").concat(It*3/4,"h").concat(-It,"z"),className:"recharts-legend-icon"});if(P.isValidElement(n.legendIcon)){var u=WP({},n);return delete u.legendIcon,P.cloneElement(n.legendIcon,u)}return P.createElement(Id,{fill:c,cx:s,cy:s,size:It,sizeType:"diameter",type:n.type})}},{key:"renderItems",value:function(){var n=this,i=this.props,s=i.payload,o=i.iconSize,l=i.layout,c=i.formatter,u=i.inactiveColor,d={x:0,y:0,width:It,height:It},f={display:l==="horizontal"?"inline-block":"block",marginRight:10},m={display:"inline-block",verticalAlign:"middle",marginRight:4};return s.map(function(v,y){var p=v.formatter||c,x=ve(oi(oi({"recharts-legend-item":!0},"legend-item-".concat(y),!0),"inactive",v.inactive));if(v.type==="none")return null;var j=fe(v.value)?null:v.value;qr(!fe(v.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var N=v.inactive?u:v.color;return P.createElement("li",Xc({className:x,style:f,key:"legend-item-".concat(y)},xn(n.props,v,y)),P.createElement(Uc,{width:o,height:o,viewBox:d,style:m},n.renderIcon(v)),P.createElement("span",{className:"recharts-legend-item-text",style:{color:N}},p?p(j,v,y):j))})}},{key:"render",value:function(){var n=this.props,i=n.payload,s=n.layout,o=n.align;if(!i||!i.length)return null;var l={padding:0,margin:0,textAlign:s==="horizontal"?o:"left"};return P.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(k.PureComponent);oi(Rd,"displayName","Legend");oi(Rd,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var tE=zo;function rE(){this.__data__=new tE,this.size=0}var nE=rE;function aE(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var iE=aE;function sE(e){return this.__data__.get(e)}var oE=sE;function lE(e){return this.__data__.has(e)}var cE=lE,uE=zo,dE=kd,fE=Sd,mE=200;function hE(e,t){var r=this.__data__;if(r instanceof uE){var n=r.__data__;if(!dE||n.length<mE-1)return n.push([e,t]),this.size=++r.size,this;r=this.__data__=new fE(n)}return r.set(e,t),this.size=r.size,this}var pE=hE,vE=zo,yE=nE,xE=iE,gE=oE,bE=cE,wE=pE;function Aa(e){var t=this.__data__=new vE(e);this.size=t.size}Aa.prototype.clear=yE;Aa.prototype.delete=xE;Aa.prototype.get=gE;Aa.prototype.has=bE;Aa.prototype.set=wE;var Ex=Aa,jE="__lodash_hash_undefined__";function NE(e){return this.__data__.set(e,jE),this}var kE=NE;function SE(e){return this.__data__.has(e)}var OE=SE,AE=Sd,PE=kE,EE=OE;function Us(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new AE;++t<r;)this.add(e[t])}Us.prototype.add=Us.prototype.push=PE;Us.prototype.has=EE;var Tx=Us;function TE(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(t(e[r],r,e))return!0;return!1}var _x=TE;function _E(e,t){return e.has(t)}var $x=_E,$E=Tx,CE=_x,ME=$x,DE=1,IE=2;function RE(e,t,r,n,i,s){var o=r&DE,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var u=s.get(e),d=s.get(t);if(u&&d)return u==t&&d==e;var f=-1,m=!0,v=r&IE?new $E:void 0;for(s.set(e,t),s.set(t,e);++f<l;){var y=e[f],p=t[f];if(n)var x=o?n(p,y,f,t,e,s):n(y,p,f,e,t,s);if(x!==void 0){if(x)continue;m=!1;break}if(v){if(!CE(t,function(j,N){if(!ME(v,N)&&(y===j||i(y,j,r,n,s)))return v.push(N)})){m=!1;break}}else if(!(y===p||i(y,p,r,n,s))){m=!1;break}}return s.delete(e),s.delete(t),m}var Cx=RE,LE=pr,BE=LE.Uint8Array,FE=BE;function UE(e){var t=-1,r=Array(e.size);return e.forEach(function(n,i){r[++t]=[i,n]}),r}var VE=UE;function HE(e){var t=-1,r=Array(e.size);return e.forEach(function(n){r[++t]=n}),r}var Ld=HE,_m=Vi,$m=FE,zE=Nd,qE=Cx,WE=VE,KE=Ld,YE=1,GE=2,XE="[object Boolean]",QE="[object Date]",ZE="[object Error]",JE="[object Map]",eT="[object Number]",tT="[object RegExp]",rT="[object Set]",nT="[object String]",aT="[object Symbol]",iT="[object ArrayBuffer]",sT="[object DataView]",Cm=_m?_m.prototype:void 0,Jl=Cm?Cm.valueOf:void 0;function oT(e,t,r,n,i,s,o){switch(r){case sT:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case iT:return!(e.byteLength!=t.byteLength||!s(new $m(e),new $m(t)));case XE:case QE:case eT:return zE(+e,+t);case ZE:return e.name==t.name&&e.message==t.message;case tT:case nT:return e==t+"";case JE:var l=WE;case rT:var c=n&YE;if(l||(l=KE),e.size!=t.size&&!c)return!1;var u=o.get(e);if(u)return u==t;n|=GE,o.set(e,t);var d=qE(l(e),l(t),n,i,s,o);return o.delete(e),d;case aT:if(Jl)return Jl.call(e)==Jl.call(t)}return!1}var lT=oT;function cT(e,t){for(var r=-1,n=t.length,i=e.length;++r<n;)e[i+r]=t[r];return e}var Mx=cT,uT=Mx,dT=kt;function fT(e,t,r){var n=t(e);return dT(e)?n:uT(n,r(e))}var mT=fT;function hT(e,t){for(var r=-1,n=e==null?0:e.length,i=0,s=[];++r<n;){var o=e[r];t(o,r,e)&&(s[i++]=o)}return s}var pT=hT;function vT(){return[]}var yT=vT,xT=pT,gT=yT,bT=Object.prototype,wT=bT.propertyIsEnumerable,Mm=Object.getOwnPropertySymbols,jT=Mm?function(e){return e==null?[]:(e=Object(e),xT(Mm(e),function(t){return wT.call(e,t)}))}:gT,NT=jT;function kT(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}var ST=kT,OT=Tr,AT=_r,PT="[object Arguments]";function ET(e){return AT(e)&&OT(e)==PT}var TT=ET,Dm=TT,_T=_r,Dx=Object.prototype,$T=Dx.hasOwnProperty,CT=Dx.propertyIsEnumerable,MT=Dm(function(){return arguments}())?Dm:function(e){return _T(e)&&$T.call(e,"callee")&&!CT.call(e,"callee")},Bd=MT,Vs={exports:{}};function DT(){return!1}var IT=DT;Vs.exports;(function(e,t){var r=pr,n=IT,i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===i,l=o?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||n;e.exports=u})(Vs,Vs.exports);var Ix=Vs.exports,RT=9007199254740991,LT=/^(?:0|[1-9]\d*)$/;function BT(e,t){var r=typeof e;return t=t??RT,!!t&&(r=="number"||r!="symbol"&&LT.test(e))&&e>-1&&e%1==0&&e<t}var Fd=BT,FT=9007199254740991;function UT(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=FT}var Ud=UT,VT=Tr,HT=Ud,zT=_r,qT="[object Arguments]",WT="[object Array]",KT="[object Boolean]",YT="[object Date]",GT="[object Error]",XT="[object Function]",QT="[object Map]",ZT="[object Number]",JT="[object Object]",e5="[object RegExp]",t5="[object Set]",r5="[object String]",n5="[object WeakMap]",a5="[object ArrayBuffer]",i5="[object DataView]",s5="[object Float32Array]",o5="[object Float64Array]",l5="[object Int8Array]",c5="[object Int16Array]",u5="[object Int32Array]",d5="[object Uint8Array]",f5="[object Uint8ClampedArray]",m5="[object Uint16Array]",h5="[object Uint32Array]",Ue={};Ue[s5]=Ue[o5]=Ue[l5]=Ue[c5]=Ue[u5]=Ue[d5]=Ue[f5]=Ue[m5]=Ue[h5]=!0;Ue[qT]=Ue[WT]=Ue[a5]=Ue[KT]=Ue[i5]=Ue[YT]=Ue[GT]=Ue[XT]=Ue[QT]=Ue[ZT]=Ue[JT]=Ue[e5]=Ue[t5]=Ue[r5]=Ue[n5]=!1;function p5(e){return zT(e)&&HT(e.length)&&!!Ue[VT(e)]}var v5=p5;function y5(e){return function(t){return e(t)}}var Rx=y5,Hs={exports:{}};Hs.exports;(function(e,t){var r=qy,n=t&&!t.nodeType&&t,i=n&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===n,o=s&&r.process,l=function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(Hs,Hs.exports);var x5=Hs.exports,g5=v5,b5=Rx,Im=x5,Rm=Im&&Im.isTypedArray,w5=Rm?b5(Rm):g5,Lx=w5,j5=ST,N5=Bd,k5=kt,S5=Ix,O5=Fd,A5=Lx,P5=Object.prototype,E5=P5.hasOwnProperty;function T5(e,t){var r=k5(e),n=!r&&N5(e),i=!r&&!n&&S5(e),s=!r&&!n&&!i&&A5(e),o=r||n||i||s,l=o?j5(e.length,String):[],c=l.length;for(var u in e)(t||E5.call(e,u))&&!(o&&(u=="length"||i&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||O5(u,c)))&&l.push(u);return l}var _5=T5,$5=Object.prototype;function C5(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||$5;return e===r}var M5=C5;function D5(e,t){return function(r){return e(t(r))}}var Bx=D5,I5=Bx,R5=I5(Object.keys,Object),L5=R5,B5=M5,F5=L5,U5=Object.prototype,V5=U5.hasOwnProperty;function H5(e){if(!B5(e))return F5(e);var t=[];for(var r in Object(e))V5.call(e,r)&&r!="constructor"&&t.push(r);return t}var z5=H5,q5=jd,W5=Ud;function K5(e){return e!=null&&W5(e.length)&&!q5(e)}var qi=K5,Y5=_5,G5=z5,X5=qi;function Q5(e){return X5(e)?Y5(e):G5(e)}var ol=Q5,Z5=mT,J5=NT,e_=ol;function t_(e){return Z5(e,e_,J5)}var r_=t_,Lm=r_,n_=1,a_=Object.prototype,i_=a_.hasOwnProperty;function s_(e,t,r,n,i,s){var o=r&n_,l=Lm(e),c=l.length,u=Lm(t),d=u.length;if(c!=d&&!o)return!1;for(var f=c;f--;){var m=l[f];if(!(o?m in t:i_.call(t,m)))return!1}var v=s.get(e),y=s.get(t);if(v&&y)return v==t&&y==e;var p=!0;s.set(e,t),s.set(t,e);for(var x=o;++f<c;){m=l[f];var j=e[m],N=t[m];if(n)var b=o?n(N,j,m,t,e,s):n(j,N,m,e,t,s);if(!(b===void 0?j===N||i(j,N,r,n,s):b)){p=!1;break}x||(x=m=="constructor")}if(p&&!x){var g=e.constructor,h=t.constructor;g!=h&&"constructor"in e&&"constructor"in t&&!(typeof g=="function"&&g instanceof g&&typeof h=="function"&&h instanceof h)&&(p=!1)}return s.delete(e),s.delete(t),p}var o_=s_,l_=kn,c_=pr,u_=l_(c_,"DataView"),d_=u_,f_=kn,m_=pr,h_=f_(m_,"Promise"),p_=h_,v_=kn,y_=pr,x_=v_(y_,"Set"),Fx=x_,g_=kn,b_=pr,w_=g_(b_,"WeakMap"),j_=w_,Zc=d_,Jc=kd,eu=p_,tu=Fx,ru=j_,Ux=Tr,Pa=Ky,Bm="[object Map]",N_="[object Object]",Fm="[object Promise]",Um="[object Set]",Vm="[object WeakMap]",Hm="[object DataView]",k_=Pa(Zc),S_=Pa(Jc),O_=Pa(eu),A_=Pa(tu),P_=Pa(ru),rn=Ux;(Zc&&rn(new Zc(new ArrayBuffer(1)))!=Hm||Jc&&rn(new Jc)!=Bm||eu&&rn(eu.resolve())!=Fm||tu&&rn(new tu)!=Um||ru&&rn(new ru)!=Vm)&&(rn=function(e){var t=Ux(e),r=t==N_?e.constructor:void 0,n=r?Pa(r):"";if(n)switch(n){case k_:return Hm;case S_:return Bm;case O_:return Fm;case A_:return Um;case P_:return Vm}return t});var E_=rn,ec=Ex,T_=Cx,__=lT,$_=o_,zm=E_,qm=kt,Wm=Ix,C_=Lx,M_=1,Km="[object Arguments]",Ym="[object Array]",ss="[object Object]",D_=Object.prototype,Gm=D_.hasOwnProperty;function I_(e,t,r,n,i,s){var o=qm(e),l=qm(t),c=o?Ym:zm(e),u=l?Ym:zm(t);c=c==Km?ss:c,u=u==Km?ss:u;var d=c==ss,f=u==ss,m=c==u;if(m&&Wm(e)){if(!Wm(t))return!1;o=!0,d=!1}if(m&&!d)return s||(s=new ec),o||C_(e)?T_(e,t,r,n,i,s):__(e,t,c,r,n,i,s);if(!(r&M_)){var v=d&&Gm.call(e,"__wrapped__"),y=f&&Gm.call(t,"__wrapped__");if(v||y){var p=v?e.value():e,x=y?t.value():t;return s||(s=new ec),i(p,x,r,n,s)}}return m?(s||(s=new ec),$_(e,t,r,n,i,s)):!1}var R_=I_,L_=R_,Xm=_r;function Vx(e,t,r,n,i){return e===t?!0:e==null||t==null||!Xm(e)&&!Xm(t)?e!==e&&t!==t:L_(e,t,r,n,Vx,i)}var Vd=Vx,B_=Ex,F_=Vd,U_=1,V_=2;function H_(e,t,r,n){var i=r.length,s=i,o=!n;if(e==null)return!s;for(e=Object(e);i--;){var l=r[i];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++i<s;){l=r[i];var c=l[0],u=e[c],d=l[1];if(o&&l[2]){if(u===void 0&&!(c in e))return!1}else{var f=new B_;if(n)var m=n(u,d,c,e,t,f);if(!(m===void 0?F_(d,u,U_|V_,n,f):m))return!1}}return!0}var z_=H_,q_=Wr;function W_(e){return e===e&&!q_(e)}var Hx=W_,K_=Hx,Y_=ol;function G_(e){for(var t=Y_(e),r=t.length;r--;){var n=t[r],i=e[n];t[r]=[n,i,K_(i)]}return t}var X_=G_;function Q_(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var zx=Q_,Z_=z_,J_=X_,e$=zx;function t$(e){var t=J_(e);return t.length==1&&t[0][2]?e$(t[0][0],t[0][1]):function(r){return r===e||Z_(r,e,t)}}var r$=t$;function n$(e,t){return e!=null&&t in Object(e)}var a$=n$,i$=Zy,s$=Bd,o$=kt,l$=Fd,c$=Ud,u$=Wo;function d$(e,t,r){t=i$(t,e);for(var n=-1,i=t.length,s=!1;++n<i;){var o=u$(t[n]);if(!(s=e!=null&&r(e,o)))break;e=e[o]}return s||++n!=i?s:(i=e==null?0:e.length,!!i&&c$(i)&&l$(o,i)&&(o$(e)||s$(e)))}var f$=d$,m$=a$,h$=f$;function p$(e,t){return e!=null&&h$(e,t,m$)}var v$=p$,y$=Vd,x$=Jy,g$=v$,b$=wd,w$=Hx,j$=zx,N$=Wo,k$=1,S$=2;function O$(e,t){return b$(e)&&w$(t)?j$(N$(e),t):function(r){var n=x$(r,e);return n===void 0&&n===t?g$(r,e):y$(t,n,k$|S$)}}var A$=O$;function P$(e){return e}var Ea=P$;function E$(e){return function(t){return t==null?void 0:t[e]}}var T$=E$,_$=Pd;function $$(e){return function(t){return _$(t,e)}}var C$=$$,M$=T$,D$=C$,I$=wd,R$=Wo;function L$(e){return I$(e)?M$(R$(e)):D$(e)}var B$=L$,F$=r$,U$=A$,V$=Ea,H$=kt,z$=B$;function q$(e){return typeof e=="function"?e:e==null?V$:typeof e=="object"?H$(e)?U$(e[0],e[1]):F$(e):z$(e)}var vr=q$;function W$(e,t,r,n){for(var i=e.length,s=r+(n?1:-1);n?s--:++s<i;)if(t(e[s],s,e))return s;return-1}var qx=W$;function K$(e){return e!==e}var Y$=K$;function G$(e,t,r){for(var n=r-1,i=e.length;++n<i;)if(e[n]===t)return n;return-1}var X$=G$,Q$=qx,Z$=Y$,J$=X$;function eC(e,t,r){return t===t?J$(e,t,r):Q$(e,Z$,r)}var tC=eC,rC=tC;function nC(e,t){var r=e==null?0:e.length;return!!r&&rC(e,t,0)>-1}var aC=nC;function iC(e,t,r){for(var n=-1,i=e==null?0:e.length;++n<i;)if(r(t,e[n]))return!0;return!1}var sC=iC;function oC(){}var lC=oC,tc=Fx,cC=lC,uC=Ld,dC=1/0,fC=tc&&1/uC(new tc([,-0]))[1]==dC?function(e){return new tc(e)}:cC,mC=fC,hC=Tx,pC=aC,vC=sC,yC=$x,xC=mC,gC=Ld,bC=200;function wC(e,t,r){var n=-1,i=pC,s=e.length,o=!0,l=[],c=l;if(r)o=!1,i=vC;else if(s>=bC){var u=t?null:xC(e);if(u)return gC(u);o=!1,i=yC,c=new hC}else c=t?[]:l;e:for(;++n<s;){var d=e[n],f=t?t(d):d;if(d=r||d!==0?d:0,o&&f===f){for(var m=c.length;m--;)if(c[m]===f)continue e;t&&c.push(f),l.push(d)}else i(c,f,r)||(c!==l&&c.push(f),l.push(d))}return l}var jC=wC,NC=vr,kC=jC;function SC(e,t){return e&&e.length?kC(e,NC(t)):[]}var OC=SC;const Qm=Oe(OC);function Wx(e,t,r){return t===!0?Qm(e,r):fe(t)?Qm(e,t):e}function Xn(e){"@babel/helpers - typeof";return Xn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xn(e)}var AC=["ref"];function Zm(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function gr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Zm(Object(r),!0).forEach(function(n){ll(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zm(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function PC(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jm(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Yx(n.key),n)}}function EC(e,t,r){return t&&Jm(e.prototype,t),r&&Jm(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function TC(e,t,r){return t=zs(t),_C(e,Kx()?Reflect.construct(t,r||[],zs(e).constructor):t.apply(e,r))}function _C(e,t){if(t&&(Xn(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $C(e)}function $C(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kx(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Kx=function(){return!!e})()}function zs(e){return zs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},zs(e)}function CC(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&nu(e,t)}function nu(e,t){return nu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},nu(e,t)}function ll(e,t,r){return t=Yx(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Yx(e){var t=MC(e,"string");return Xn(t)=="symbol"?t:t+""}function MC(e,t){if(Xn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Xn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function DC(e,t){if(e==null)return{};var r=IC(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function IC(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function RC(e){return e.value}function LC(e,t){if(P.isValidElement(e))return P.cloneElement(e,t);if(typeof e=="function")return P.createElement(e,t);t.ref;var r=DC(t,AC);return P.createElement(Rd,r)}var eh=1,Fr=function(e){function t(){var r;PC(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=TC(this,t,[].concat(i)),ll(r,"lastBoundingBox",{width:-1,height:-1}),r}return CC(t,e),EC(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();return n.height=this.wrapperNode.offsetHeight,n.width=this.wrapperNode.offsetWidth,n}return null}},{key:"updateBBox",value:function(){var n=this.props.onBBoxUpdate,i=this.getBBox();i?(Math.abs(i.width-this.lastBoundingBox.width)>eh||Math.abs(i.height-this.lastBoundingBox.height)>eh)&&(this.lastBoundingBox.width=i.width,this.lastBoundingBox.height=i.height,n&&n(i)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,n&&n(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?gr({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(n){var i=this.props,s=i.layout,o=i.align,l=i.verticalAlign,c=i.margin,u=i.chartWidth,d=i.chartHeight,f,m;if(!n||(n.left===void 0||n.left===null)&&(n.right===void 0||n.right===null))if(o==="center"&&s==="vertical"){var v=this.getBBoxSnapshot();f={left:((u||0)-v.width)/2}}else f=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!n||(n.top===void 0||n.top===null)&&(n.bottom===void 0||n.bottom===null))if(l==="middle"){var y=this.getBBoxSnapshot();m={top:((d||0)-y.height)/2}}else m=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return gr(gr({},f),m)}},{key:"render",value:function(){var n=this,i=this.props,s=i.content,o=i.width,l=i.height,c=i.wrapperStyle,u=i.payloadUniqBy,d=i.payload,f=gr(gr({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return P.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:function(v){n.wrapperNode=v}},LC(s,gr(gr({},this.props),{},{payload:Wx(d,u,RC)})))}}],[{key:"getWithHeight",value:function(n,i){var s=gr(gr({},this.defaultProps),n.props),o=s.layout;return o==="vertical"&&Y(n.props.height)?{height:n.props.height}:o==="horizontal"?{width:n.props.width||i}:null}}])}(k.PureComponent);ll(Fr,"displayName","Legend");ll(Fr,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var th=Vi,BC=Bd,FC=kt,rh=th?th.isConcatSpreadable:void 0;function UC(e){return FC(e)||BC(e)||!!(rh&&e&&e[rh])}var VC=UC,HC=Mx,zC=VC;function Gx(e,t,r,n,i){var s=-1,o=e.length;for(r||(r=zC),i||(i=[]);++s<o;){var l=e[s];t>0&&r(l)?t>1?Gx(l,t-1,r,n,i):HC(i,l):n||(i[i.length]=l)}return i}var Xx=Gx;function qC(e){return function(t,r,n){for(var i=-1,s=Object(t),o=n(t),l=o.length;l--;){var c=o[e?l:++i];if(r(s[c],c,s)===!1)break}return t}}var WC=qC,KC=WC,YC=KC(),GC=YC,XC=GC,QC=ol;function ZC(e,t){return e&&XC(e,t,QC)}var Qx=ZC,JC=qi;function e4(e,t){return function(r,n){if(r==null)return r;if(!JC(r))return e(r,n);for(var i=r.length,s=t?i:-1,o=Object(r);(t?s--:++s<i)&&n(o[s],s,o)!==!1;);return r}}var t4=e4,r4=Qx,n4=t4,a4=n4(r4),Hd=a4,i4=Hd,s4=qi;function o4(e,t){var r=-1,n=s4(e)?Array(e.length):[];return i4(e,function(i,s,o){n[++r]=t(i,s,o)}),n}var Zx=o4;function l4(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var c4=l4,nh=wa;function u4(e,t){if(e!==t){var r=e!==void 0,n=e===null,i=e===e,s=nh(e),o=t!==void 0,l=t===null,c=t===t,u=nh(t);if(!l&&!u&&!s&&e>t||s&&o&&c&&!l&&!u||n&&o&&c||!r&&c||!i)return 1;if(!n&&!s&&!u&&e<t||u&&r&&i&&!n&&!s||l&&r&&i||!o&&i||!c)return-1}return 0}var d4=u4,f4=d4;function m4(e,t,r){for(var n=-1,i=e.criteria,s=t.criteria,o=i.length,l=r.length;++n<o;){var c=f4(i[n],s[n]);if(c){if(n>=l)return c;var u=r[n];return c*(u=="desc"?-1:1)}}return e.index-t.index}var h4=m4,rc=Ad,p4=Pd,v4=vr,y4=Zx,x4=c4,g4=Rx,b4=h4,w4=Ea,j4=kt;function N4(e,t,r){t.length?t=rc(t,function(s){return j4(s)?function(o){return p4(o,s.length===1?s[0]:s)}:s}):t=[w4];var n=-1;t=rc(t,g4(v4));var i=y4(e,function(s,o,l){var c=rc(t,function(u){return u(s)});return{criteria:c,index:++n,value:s}});return x4(i,function(s,o){return b4(s,o,r)})}var k4=N4;function S4(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var O4=S4,A4=O4,ah=Math.max;function P4(e,t,r){return t=ah(t===void 0?e.length-1:t,0),function(){for(var n=arguments,i=-1,s=ah(n.length-t,0),o=Array(s);++i<s;)o[i]=n[t+i];i=-1;for(var l=Array(t+1);++i<t;)l[i]=n[i];return l[t]=r(o),A4(e,this,l)}}var E4=P4;function T4(e){return function(){return e}}var _4=T4,$4=kn,C4=function(){try{var e=$4(Object,"defineProperty");return e({},"",{}),e}catch{}}(),Jx=C4,M4=_4,ih=Jx,D4=Ea,I4=ih?function(e,t){return ih(e,"toString",{configurable:!0,enumerable:!1,value:M4(t),writable:!0})}:D4,R4=I4,L4=800,B4=16,F4=Date.now;function U4(e){var t=0,r=0;return function(){var n=F4(),i=B4-(n-r);if(r=n,i>0){if(++t>=L4)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var V4=U4,H4=R4,z4=V4,q4=z4(H4),W4=q4,K4=Ea,Y4=E4,G4=W4;function X4(e,t){return G4(Y4(e,t,K4),e+"")}var Q4=X4,Z4=Nd,J4=qi,e3=Fd,t3=Wr;function r3(e,t,r){if(!t3(r))return!1;var n=typeof t;return(n=="number"?J4(r)&&e3(t,r.length):n=="string"&&t in r)?Z4(r[t],e):!1}var cl=r3,n3=Xx,a3=k4,i3=Q4,sh=cl,s3=i3(function(e,t){if(e==null)return[];var r=t.length;return r>1&&sh(e,t[0],t[1])?t=[]:r>2&&sh(t[0],t[1],t[2])&&(t=[t[0]]),a3(e,n3(t,1),[])}),o3=s3;const zd=Oe(o3);function li(e){"@babel/helpers - typeof";return li=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},li(e)}function au(){return au=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},au.apply(this,arguments)}function l3(e,t){return f3(e)||d3(e,t)||u3(e,t)||c3()}function c3(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function u3(e,t){if(e){if(typeof e=="string")return oh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return oh(e,t)}}function oh(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function d3(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function f3(e){if(Array.isArray(e))return e}function lh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function nc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lh(Object(r),!0).forEach(function(n){m3(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function m3(e,t,r){return t=h3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h3(e){var t=p3(e,"string");return li(t)=="symbol"?t:t+""}function p3(e,t){if(li(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(li(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function v3(e){return Array.isArray(e)&&rt(e[0])&&rt(e[1])?e.join(" ~ "):e}var y3=function(t){var r=t.separator,n=r===void 0?" : ":r,i=t.contentStyle,s=i===void 0?{}:i,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,u=c===void 0?{}:c,d=t.payload,f=t.formatter,m=t.itemSorter,v=t.wrapperClassName,y=t.labelClassName,p=t.label,x=t.labelFormatter,j=t.accessibilityLayer,N=j===void 0?!1:j,b=function(){if(d&&d.length){var E={padding:0,margin:0},M=(m?zd(d,m):d).map(function($,D){if($.type==="none")return null;var F=nc({display:"block",paddingTop:4,paddingBottom:4,color:$.color||"#000"},l),_=$.formatter||f||v3,R=$.value,L=$.name,z=R,V=L;if(_&&z!=null&&V!=null){var q=_(R,L,$,D,d);if(Array.isArray(q)){var J=l3(q,2);z=J[0],V=J[1]}else z=q}return P.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(D),style:F},rt(V)?P.createElement("span",{className:"recharts-tooltip-item-name"},V):null,rt(V)?P.createElement("span",{className:"recharts-tooltip-item-separator"},n):null,P.createElement("span",{className:"recharts-tooltip-item-value"},z),P.createElement("span",{className:"recharts-tooltip-item-unit"},$.unit||""))});return P.createElement("ul",{className:"recharts-tooltip-item-list",style:E},M)}return null},g=nc({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},s),h=nc({margin:0},u),w=!he(p),S=w?p:"",A=ve("recharts-default-tooltip",v),O=ve("recharts-tooltip-label",y);w&&x&&d!==void 0&&d!==null&&(S=x(p,d));var C=N?{role:"status","aria-live":"assertive"}:{};return P.createElement("div",au({className:A,style:g},C),P.createElement("p",{className:O,style:h},P.isValidElement(S)?S:"".concat(S)),b())};function ci(e){"@babel/helpers - typeof";return ci=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ci(e)}function os(e,t,r){return t=x3(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function x3(e){var t=g3(e,"string");return ci(t)=="symbol"?t:t+""}function g3(e,t){if(ci(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ci(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var La="recharts-tooltip-wrapper",b3={visibility:"hidden"};function w3(e){var t=e.coordinate,r=e.translateX,n=e.translateY;return ve(La,os(os(os(os({},"".concat(La,"-right"),Y(r)&&t&&Y(t.x)&&r>=t.x),"".concat(La,"-left"),Y(r)&&t&&Y(t.x)&&r<t.x),"".concat(La,"-bottom"),Y(n)&&t&&Y(t.y)&&n>=t.y),"".concat(La,"-top"),Y(n)&&t&&Y(t.y)&&n<t.y))}function ch(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.key,i=e.offsetTopLeft,s=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,u=e.viewBoxDimension;if(s&&Y(s[n]))return s[n];var d=r[n]-l-i,f=r[n]+i;if(t[n])return o[n]?d:f;if(o[n]){var m=d,v=c[n];return m<v?Math.max(f,c[n]):Math.max(d,c[n])}var y=f+l,p=c[n]+u;return y>p?Math.max(d,c[n]):Math.max(f,c[n])}function j3(e){var t=e.translateX,r=e.translateY,n=e.useTranslate3d;return{transform:n?"translate3d(".concat(t,"px, ").concat(r,"px, 0)"):"translate(".concat(t,"px, ").concat(r,"px)")}}function N3(e){var t=e.allowEscapeViewBox,r=e.coordinate,n=e.offsetTopLeft,i=e.position,s=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,u,d,f;return o.height>0&&o.width>0&&r?(d=ch({allowEscapeViewBox:t,coordinate:r,key:"x",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),f=ch({allowEscapeViewBox:t,coordinate:r,key:"y",offsetTopLeft:n,position:i,reverseDirection:s,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),u=j3({translateX:d,translateY:f,useTranslate3d:l})):u=b3,{cssProperties:u,cssClasses:w3({translateX:d,translateY:f,coordinate:r})}}function Qn(e){"@babel/helpers - typeof";return Qn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qn(e)}function uh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function dh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uh(Object(r),!0).forEach(function(n){su(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function k3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,tg(n.key),n)}}function O3(e,t,r){return t&&S3(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function A3(e,t,r){return t=qs(t),P3(e,eg()?Reflect.construct(t,r||[],qs(e).constructor):t.apply(e,r))}function P3(e,t){if(t&&(Qn(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return E3(e)}function E3(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function eg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eg=function(){return!!e})()}function qs(e){return qs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},qs(e)}function T3(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iu(e,t)}function iu(e,t){return iu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},iu(e,t)}function su(e,t,r){return t=tg(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tg(e){var t=_3(e,"string");return Qn(t)=="symbol"?t:t+""}function _3(e,t){if(Qn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Qn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var fh=1,$3=function(e){function t(){var r;k3(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=A3(this,t,[].concat(i)),su(r,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),su(r,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,u,d;r.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=r.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(u=(d=r.props.coordinate)===null||d===void 0?void 0:d.y)!==null&&u!==void 0?u:0}})}}),r}return T3(t,e),O3(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var n=this.wrapperNode.getBoundingClientRect();(Math.abs(n.width-this.state.lastBoundingBox.width)>fh||Math.abs(n.height-this.state.lastBoundingBox.height)>fh)&&this.setState({lastBoundingBox:{width:n.width,height:n.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var n,i;this.props.active&&this.updateBBox(),this.state.dismissed&&(((n=this.props.coordinate)===null||n===void 0?void 0:n.x)!==this.state.dismissedAtCoordinate.x||((i=this.props.coordinate)===null||i===void 0?void 0:i.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var n=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.children,d=i.coordinate,f=i.hasPayload,m=i.isAnimationActive,v=i.offset,y=i.position,p=i.reverseDirection,x=i.useTranslate3d,j=i.viewBox,N=i.wrapperStyle,b=N3({allowEscapeViewBox:o,coordinate:d,offsetTopLeft:v,position:y,reverseDirection:p,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:j}),g=b.cssClasses,h=b.cssProperties,w=dh(dh({transition:m&&s?"transform ".concat(l,"ms ").concat(c):void 0},h),{},{pointerEvents:"none",visibility:!this.state.dismissed&&s&&f?"visible":"hidden",position:"absolute",top:0,left:0},N);return P.createElement("div",{tabIndex:-1,className:g,style:w,ref:function(A){n.wrapperNode=A}},u)}}])}(k.PureComponent),C3=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},cr={isSsr:C3(),get:function(t){return cr[t]},set:function(t,r){if(typeof t=="string")cr[t]=r;else{var n=Object.keys(t);n&&n.length&&n.forEach(function(i){cr[i]=t[i]})}}};function Zn(e){"@babel/helpers - typeof";return Zn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zn(e)}function mh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function hh(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mh(Object(r),!0).forEach(function(n){qd(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function M3(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D3(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ng(n.key),n)}}function I3(e,t,r){return t&&D3(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function R3(e,t,r){return t=Ws(t),L3(e,rg()?Reflect.construct(t,r||[],Ws(e).constructor):t.apply(e,r))}function L3(e,t){if(t&&(Zn(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return B3(e)}function B3(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rg(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rg=function(){return!!e})()}function Ws(e){return Ws=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ws(e)}function F3(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ou(e,t)}function ou(e,t){return ou=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ou(e,t)}function qd(e,t,r){return t=ng(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ng(e){var t=U3(e,"string");return Zn(t)=="symbol"?t:t+""}function U3(e,t){if(Zn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Zn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function V3(e){return e.dataKey}function H3(e,t){return P.isValidElement(e)?P.cloneElement(e,t):typeof e=="function"?P.createElement(e,t):P.createElement(y3,t)}var Wt=function(e){function t(){return M3(this,t),R3(this,t,arguments)}return F3(t,e),I3(t,[{key:"render",value:function(){var n=this,i=this.props,s=i.active,o=i.allowEscapeViewBox,l=i.animationDuration,c=i.animationEasing,u=i.content,d=i.coordinate,f=i.filterNull,m=i.isAnimationActive,v=i.offset,y=i.payload,p=i.payloadUniqBy,x=i.position,j=i.reverseDirection,N=i.useTranslate3d,b=i.viewBox,g=i.wrapperStyle,h=y??[];f&&h.length&&(h=Wx(y.filter(function(S){return S.value!=null&&(S.hide!==!0||n.props.includeHidden)}),p,V3));var w=h.length>0;return P.createElement($3,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:m,active:s,coordinate:d,hasPayload:w,offset:v,position:x,reverseDirection:j,useTranslate3d:N,viewBox:b,wrapperStyle:g},H3(u,hh(hh({},this.props),{},{payload:h})))}}])}(k.PureComponent);qd(Wt,"displayName","Tooltip");qd(Wt,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!cr.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var z3=pr,q3=function(){return z3.Date.now()},W3=q3,K3=/\s/;function Y3(e){for(var t=e.length;t--&&K3.test(e.charAt(t)););return t}var G3=Y3,X3=G3,Q3=/^\s+/;function Z3(e){return e&&e.slice(0,X3(e)+1).replace(Q3,"")}var J3=Z3,eM=J3,ph=Wr,tM=wa,vh=NaN,rM=/^[-+]0x[0-9a-f]+$/i,nM=/^0b[01]+$/i,aM=/^0o[0-7]+$/i,iM=parseInt;function sM(e){if(typeof e=="number")return e;if(tM(e))return vh;if(ph(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ph(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=eM(e);var r=nM.test(e);return r||aM.test(e)?iM(e.slice(2),r?2:8):rM.test(e)?vh:+e}var ag=sM,oM=Wr,ac=W3,yh=ag,lM="Expected a function",cM=Math.max,uM=Math.min;function dM(e,t,r){var n,i,s,o,l,c,u=0,d=!1,f=!1,m=!0;if(typeof e!="function")throw new TypeError(lM);t=yh(t)||0,oM(r)&&(d=!!r.leading,f="maxWait"in r,s=f?cM(yh(r.maxWait)||0,t):s,m="trailing"in r?!!r.trailing:m);function v(w){var S=n,A=i;return n=i=void 0,u=w,o=e.apply(A,S),o}function y(w){return u=w,l=setTimeout(j,t),d?v(w):o}function p(w){var S=w-c,A=w-u,O=t-S;return f?uM(O,s-A):O}function x(w){var S=w-c,A=w-u;return c===void 0||S>=t||S<0||f&&A>=s}function j(){var w=ac();if(x(w))return N(w);l=setTimeout(j,p(w))}function N(w){return l=void 0,m&&n?v(w):(n=i=void 0,o)}function b(){l!==void 0&&clearTimeout(l),u=0,n=c=i=l=void 0}function g(){return l===void 0?o:N(ac())}function h(){var w=ac(),S=x(w);if(n=arguments,i=this,c=w,S){if(l===void 0)return y(c);if(f)return clearTimeout(l),l=setTimeout(j,t),v(c)}return l===void 0&&(l=setTimeout(j,t)),o}return h.cancel=b,h.flush=g,h}var fM=dM,mM=fM,hM=Wr,pM="Expected a function";function vM(e,t,r){var n=!0,i=!0;if(typeof e!="function")throw new TypeError(pM);return hM(r)&&(n="leading"in r?!!r.leading:n,i="trailing"in r?!!r.trailing:i),mM(e,t,{leading:n,maxWait:t,trailing:i})}var yM=vM;const xM=Oe(yM);var ul=function(t){return null};ul.displayName="Cell";function ui(e){"@babel/helpers - typeof";return ui=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ui(e)}function xh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function lu(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xh(Object(r),!0).forEach(function(n){gM(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xh(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function gM(e,t,r){return t=bM(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function bM(e){var t=wM(e,"string");return ui(t)=="symbol"?t:t+""}function wM(e,t){if(ui(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ui(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tn={widthCache:{},cacheCount:0},jM=2e3,NM={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},gh="recharts_measurement_span";function kM(e){var t=lu({},e);return Object.keys(t).forEach(function(r){t[r]||delete t[r]}),t}var Ya=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||cr.isSsr)return{width:0,height:0};var n=kM(r),i=JSON.stringify({text:t,copyStyle:n});if(Tn.widthCache[i])return Tn.widthCache[i];try{var s=document.getElementById(gh);s||(s=document.createElement("span"),s.setAttribute("id",gh),s.setAttribute("aria-hidden","true"),document.body.appendChild(s));var o=lu(lu({},NM),n);Object.assign(s.style,o),s.textContent="".concat(t);var l=s.getBoundingClientRect(),c={width:l.width,height:l.height};return Tn.widthCache[i]=c,++Tn.cacheCount>jM&&(Tn.cacheCount=0,Tn.widthCache={}),c}catch{return{width:0,height:0}}},SM=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function di(e){"@babel/helpers - typeof";return di=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},di(e)}function Ks(e,t){return EM(e)||PM(e,t)||AM(e,t)||OM()}function OM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function AM(e,t){if(e){if(typeof e=="string")return bh(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return bh(e,t)}}function bh(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function PM(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function EM(e){if(Array.isArray(e))return e}function TM(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wh(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$M(n.key),n)}}function _M(e,t,r){return t&&wh(e.prototype,t),r&&wh(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $M(e){var t=CM(e,"string");return di(t)=="symbol"?t:t+""}function CM(e,t){if(di(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(di(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var jh=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Nh=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,MM=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,DM=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,ig={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},IM=Object.keys(ig),Dn="NaN";function RM(e,t){return e*ig[t]}var ls=function(){function e(t,r){TM(this,e),this.num=t,this.unit=r,this.num=t,this.unit=r,Number.isNaN(t)&&(this.unit=""),r!==""&&!MM.test(r)&&(this.num=NaN,this.unit=""),IM.includes(r)&&(this.num=RM(t,r),this.unit="px")}return _M(e,[{key:"add",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num+r.num,this.unit)}},{key:"subtract",value:function(r){return this.unit!==r.unit?new e(NaN,""):new e(this.num-r.num,this.unit)}},{key:"multiply",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num*r.num,this.unit||r.unit)}},{key:"divide",value:function(r){return this.unit!==""&&r.unit!==""&&this.unit!==r.unit?new e(NaN,""):new e(this.num/r.num,this.unit||r.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(r){var n,i=(n=DM.exec(r))!==null&&n!==void 0?n:[],s=Ks(i,3),o=s[1],l=s[2];return new e(parseFloat(o),l??"")}}])}();function sg(e){if(e.includes(Dn))return Dn;for(var t=e;t.includes("*")||t.includes("/");){var r,n=(r=jh.exec(t))!==null&&r!==void 0?r:[],i=Ks(n,4),s=i[1],o=i[2],l=i[3],c=ls.parse(s??""),u=ls.parse(l??""),d=o==="*"?c.multiply(u):c.divide(u);if(d.isNaN())return Dn;t=t.replace(jh,d.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var f,m=(f=Nh.exec(t))!==null&&f!==void 0?f:[],v=Ks(m,4),y=v[1],p=v[2],x=v[3],j=ls.parse(y??""),N=ls.parse(x??""),b=p==="+"?j.add(N):j.subtract(N);if(b.isNaN())return Dn;t=t.replace(Nh,b.toString())}return t}var kh=/\(([^()]*)\)/;function LM(e){for(var t=e;t.includes("(");){var r=kh.exec(t),n=Ks(r,2),i=n[1];t=t.replace(kh,sg(i))}return t}function BM(e){var t=e.replace(/\s+/g,"");return t=LM(t),t=sg(t),t}function FM(e){try{return BM(e)}catch{return Dn}}function ic(e){var t=FM(e.slice(5,-1));return t===Dn?"":t}var UM=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],VM=["dx","dy","angle","className","breakAll"];function cu(){return cu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cu.apply(this,arguments)}function Sh(e,t){if(e==null)return{};var r=HM(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function HM(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Oh(e,t){return KM(e)||WM(e,t)||qM(e,t)||zM()}function zM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qM(e,t){if(e){if(typeof e=="string")return Ah(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ah(e,t)}}function Ah(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function WM(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function KM(e){if(Array.isArray(e))return e}var og=/[ \f\n\r\t\v\u2028\u2029]+/,lg=function(t){var r=t.children,n=t.breakAll,i=t.style;try{var s=[];he(r)||(n?s=r.toString().split(""):s=r.toString().split(og));var o=s.map(function(c){return{word:c,width:Ya(c,i).width}}),l=n?0:Ya(" ",i).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},YM=function(t,r,n,i,s){var o=t.maxLines,l=t.children,c=t.style,u=t.breakAll,d=Y(o),f=l,m=function(){var D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return D.reduce(function(F,_){var R=_.word,L=_.width,z=F[F.length-1];if(z&&(i==null||s||z.width+L+n<Number(i)))z.words.push(R),z.width+=L+n;else{var V={words:[R],width:L};F.push(V)}return F},[])},v=m(r),y=function(D){return D.reduce(function(F,_){return F.width>_.width?F:_})};if(!d)return v;for(var p="…",x=function(D){var F=f.slice(0,D),_=lg({breakAll:u,style:c,children:F+p}).wordsWithComputedWidth,R=m(_),L=R.length>o||y(R).width>Number(i);return[L,R]},j=0,N=f.length-1,b=0,g;j<=N&&b<=f.length-1;){var h=Math.floor((j+N)/2),w=h-1,S=x(w),A=Oh(S,2),O=A[0],C=A[1],T=x(h),E=Oh(T,1),M=E[0];if(!O&&!M&&(j=h+1),O&&M&&(N=h-1),!O&&M){g=C;break}b++}return g||v},Ph=function(t){var r=he(t)?[]:t.toString().split(og);return[{words:r}]},GM=function(t){var r=t.width,n=t.scaleToFit,i=t.children,s=t.style,o=t.breakAll,l=t.maxLines;if((r||n)&&!cr.isSsr){var c,u,d=lg({breakAll:o,children:i,style:s});if(d){var f=d.wordsWithComputedWidth,m=d.spaceWidth;c=f,u=m}else return Ph(i);return YM({breakAll:o,children:i,maxLines:l,style:s},c,u,r,n)}return Ph(i)},Eh="#808080",gn=function(t){var r=t.x,n=r===void 0?0:r,i=t.y,s=i===void 0?0:i,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,u=c===void 0?"0.71em":c,d=t.scaleToFit,f=d===void 0?!1:d,m=t.textAnchor,v=m===void 0?"start":m,y=t.verticalAnchor,p=y===void 0?"end":y,x=t.fill,j=x===void 0?Eh:x,N=Sh(t,UM),b=k.useMemo(function(){return GM({breakAll:N.breakAll,children:N.children,maxLines:N.maxLines,scaleToFit:f,style:N.style,width:N.width})},[N.breakAll,N.children,N.maxLines,f,N.style,N.width]),g=N.dx,h=N.dy,w=N.angle,S=N.className,A=N.breakAll,O=Sh(N,VM);if(!rt(n)||!rt(s))return null;var C=n+(Y(g)?g:0),T=s+(Y(h)?h:0),E;switch(p){case"start":E=ic("calc(".concat(u,")"));break;case"middle":E=ic("calc(".concat((b.length-1)/2," * -").concat(l," + (").concat(u," / 2))"));break;default:E=ic("calc(".concat(b.length-1," * -").concat(l,")"));break}var M=[];if(f){var $=b[0].width,D=N.width;M.push("scale(".concat((Y(D)?D/$:1)/$,")"))}return w&&M.push("rotate(".concat(w,", ").concat(C,", ").concat(T,")")),M.length&&(O.transform=M.join(" ")),P.createElement("text",cu({},se(O,!0),{x:C,y:T,className:ve("recharts-text",S),textAnchor:v,fill:j.includes("url")?Eh:j}),b.map(function(F,_){var R=F.words.join(A?"":" ");return P.createElement("tspan",{x:C,dy:_===0?E:l,key:"".concat(R,"-").concat(_)},R)}))};function Ur(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function XM(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Wd(e){let t,r,n;e.length!==2?(t=Ur,r=(l,c)=>Ur(e(l),c),n=(l,c)=>e(l)-c):(t=e===Ur||e===XM?e:QM,r=e,n=e);function i(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<0?u=f+1:d=f}while(u<d)}return u}function s(l,c,u=0,d=l.length){if(u<d){if(t(c,c)!==0)return d;do{const f=u+d>>>1;r(l[f],c)<=0?u=f+1:d=f}while(u<d)}return u}function o(l,c,u=0,d=l.length){const f=i(l,c,u,d-1);return f>u&&n(l[f-1],c)>-n(l[f],c)?f-1:f}return{left:i,center:o,right:s}}function QM(){return 0}function cg(e){return e===null?NaN:+e}function*ZM(e,t){for(let r of e)r!=null&&(r=+r)>=r&&(yield r)}const JM=Wd(Ur),Wi=JM.right;Wd(cg).center;class Th extends Map{constructor(t,r=rD){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[n,i]of t)this.set(n,i)}get(t){return super.get(_h(this,t))}has(t){return super.has(_h(this,t))}set(t,r){return super.set(eD(this,t),r)}delete(t){return super.delete(tD(this,t))}}function _h({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):r}function eD({_intern:e,_key:t},r){const n=t(r);return e.has(n)?e.get(n):(e.set(n,r),r)}function tD({_intern:e,_key:t},r){const n=t(r);return e.has(n)&&(r=e.get(n),e.delete(n)),r}function rD(e){return e!==null&&typeof e=="object"?e.valueOf():e}function nD(e=Ur){if(e===Ur)return ug;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const n=e(t,r);return n||n===0?n:(e(r,r)===0)-(e(t,t)===0)}}function ug(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const aD=Math.sqrt(50),iD=Math.sqrt(10),sD=Math.sqrt(2);function Ys(e,t,r){const n=(t-e)/Math.max(0,r),i=Math.floor(Math.log10(n)),s=n/Math.pow(10,i),o=s>=aD?10:s>=iD?5:s>=sD?2:1;let l,c,u;return i<0?(u=Math.pow(10,-i)/o,l=Math.round(e*u),c=Math.round(t*u),l/u<e&&++l,c/u>t&&--c,u=-u):(u=Math.pow(10,i)*o,l=Math.round(e/u),c=Math.round(t/u),l*u<e&&++l,c*u>t&&--c),c<l&&.5<=r&&r<2?Ys(e,t,r*2):[l,c,u]}function uu(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const n=t<e,[i,s,o]=n?Ys(t,e,r):Ys(e,t,r);if(!(s>=i))return[];const l=s-i+1,c=new Array(l);if(n)if(o<0)for(let u=0;u<l;++u)c[u]=(s-u)/-o;else for(let u=0;u<l;++u)c[u]=(s-u)*o;else if(o<0)for(let u=0;u<l;++u)c[u]=(i+u)/-o;else for(let u=0;u<l;++u)c[u]=(i+u)*o;return c}function du(e,t,r){return t=+t,e=+e,r=+r,Ys(e,t,r)[2]}function fu(e,t,r){t=+t,e=+e,r=+r;const n=t<e,i=n?du(t,e,r):du(e,t,r);return(n?-1:1)*(i<0?1/-i:i)}function $h(e,t){let r;for(const n of e)n!=null&&(r<n||r===void 0&&n>=n)&&(r=n);return r}function Ch(e,t){let r;for(const n of e)n!=null&&(r>n||r===void 0&&n>=n)&&(r=n);return r}function dg(e,t,r=0,n=1/0,i){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),n=Math.floor(Math.min(e.length-1,n)),!(r<=t&&t<=n))return e;for(i=i===void 0?ug:nD(i);n>r;){if(n-r>600){const c=n-r+1,u=t-r+1,d=Math.log(c),f=.5*Math.exp(2*d/3),m=.5*Math.sqrt(d*f*(c-f)/c)*(u-c/2<0?-1:1),v=Math.max(r,Math.floor(t-u*f/c+m)),y=Math.min(n,Math.floor(t+(c-u)*f/c+m));dg(e,t,v,y,i)}const s=e[t];let o=r,l=n;for(Ba(e,r,t),i(e[n],s)>0&&Ba(e,r,n);o<l;){for(Ba(e,o,l),++o,--l;i(e[o],s)<0;)++o;for(;i(e[l],s)>0;)--l}i(e[r],s)===0?Ba(e,r,l):(++l,Ba(e,l,n)),l<=t&&(r=l+1),t<=l&&(n=l-1)}return e}function Ba(e,t,r){const n=e[t];e[t]=e[r],e[r]=n}function oD(e,t,r){if(e=Float64Array.from(ZM(e)),!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return Ch(e);if(t>=1)return $h(e);var n,i=(n-1)*t,s=Math.floor(i),o=$h(dg(e,s).subarray(0,s+1)),l=Ch(e.subarray(s+1));return o+(l-o)*(i-s)}}function lD(e,t,r=cg){if(!(!(n=e.length)||isNaN(t=+t))){if(t<=0||n<2)return+r(e[0],0,e);if(t>=1)return+r(e[n-1],n-1,e);var n,i=(n-1)*t,s=Math.floor(i),o=+r(e[s],s,e),l=+r(e[s+1],s+1,e);return o+(l-o)*(i-s)}}function cD(e,t,r){e=+e,t=+t,r=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+r;for(var n=-1,i=Math.max(0,Math.ceil((t-e)/r))|0,s=new Array(i);++n<i;)s[n]=e+n*r;return s}function Ht(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function $r(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const mu=Symbol("implicit");function Kd(){var e=new Th,t=[],r=[],n=mu;function i(s){let o=e.get(s);if(o===void 0){if(n!==mu)return n;e.set(s,o=t.push(s)-1)}return r[o%r.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Th;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(r=Array.from(s),i):r.slice()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return Kd(t,r).unknown(n)},Ht.apply(i,arguments),i}function fi(){var e=Kd().unknown(void 0),t=e.domain,r=e.range,n=0,i=1,s,o,l=!1,c=0,u=0,d=.5;delete e.unknown;function f(){var m=t().length,v=i<n,y=v?i:n,p=v?n:i;s=(p-y)/Math.max(1,m-c+u*2),l&&(s=Math.floor(s)),y+=(p-y-s*(m-c))*d,o=s*(1-c),l&&(y=Math.round(y),o=Math.round(o));var x=cD(m).map(function(j){return y+s*j});return r(v?x.reverse():x)}return e.domain=function(m){return arguments.length?(t(m),f()):t()},e.range=function(m){return arguments.length?([n,i]=m,n=+n,i=+i,f()):[n,i]},e.rangeRound=function(m){return[n,i]=m,n=+n,i=+i,l=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(m){return arguments.length?(l=!!m,f()):l},e.padding=function(m){return arguments.length?(c=Math.min(1,u=+m),f()):c},e.paddingInner=function(m){return arguments.length?(c=Math.min(1,m),f()):c},e.paddingOuter=function(m){return arguments.length?(u=+m,f()):u},e.align=function(m){return arguments.length?(d=Math.max(0,Math.min(1,m)),f()):d},e.copy=function(){return fi(t(),[n,i]).round(l).paddingInner(c).paddingOuter(u).align(d)},Ht.apply(f(),arguments)}function fg(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return fg(t())},e}function Ga(){return fg(fi.apply(null,arguments).paddingInner(1))}function Yd(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function mg(e,t){var r=Object.create(e.prototype);for(var n in t)r[n]=t[n];return r}function Ki(){}var mi=.7,Gs=1/mi,zn="\\s*([+-]?\\d+)\\s*",hi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ur="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",uD=/^#([0-9a-f]{3,8})$/,dD=new RegExp(`^rgb\\(${zn},${zn},${zn}\\)$`),fD=new RegExp(`^rgb\\(${ur},${ur},${ur}\\)$`),mD=new RegExp(`^rgba\\(${zn},${zn},${zn},${hi}\\)$`),hD=new RegExp(`^rgba\\(${ur},${ur},${ur},${hi}\\)$`),pD=new RegExp(`^hsl\\(${hi},${ur},${ur}\\)$`),vD=new RegExp(`^hsla\\(${hi},${ur},${ur},${hi}\\)$`),Mh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Yd(Ki,pi,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Dh,formatHex:Dh,formatHex8:yD,formatHsl:xD,formatRgb:Ih,toString:Ih});function Dh(){return this.rgb().formatHex()}function yD(){return this.rgb().formatHex8()}function xD(){return hg(this).formatHsl()}function Ih(){return this.rgb().formatRgb()}function pi(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=uD.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?Rh(t):r===3?new jt(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?cs(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?cs(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=dD.exec(e))?new jt(t[1],t[2],t[3],1):(t=fD.exec(e))?new jt(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=mD.exec(e))?cs(t[1],t[2],t[3],t[4]):(t=hD.exec(e))?cs(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=pD.exec(e))?Fh(t[1],t[2]/100,t[3]/100,1):(t=vD.exec(e))?Fh(t[1],t[2]/100,t[3]/100,t[4]):Mh.hasOwnProperty(e)?Rh(Mh[e]):e==="transparent"?new jt(NaN,NaN,NaN,0):null}function Rh(e){return new jt(e>>16&255,e>>8&255,e&255,1)}function cs(e,t,r,n){return n<=0&&(e=t=r=NaN),new jt(e,t,r,n)}function gD(e){return e instanceof Ki||(e=pi(e)),e?(e=e.rgb(),new jt(e.r,e.g,e.b,e.opacity)):new jt}function hu(e,t,r,n){return arguments.length===1?gD(e):new jt(e,t,r,n??1)}function jt(e,t,r,n){this.r=+e,this.g=+t,this.b=+r,this.opacity=+n}Yd(jt,hu,mg(Ki,{brighter(e){return e=e==null?Gs:Math.pow(Gs,e),new jt(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?mi:Math.pow(mi,e),new jt(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new jt(fn(this.r),fn(this.g),fn(this.b),Xs(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Lh,formatHex:Lh,formatHex8:bD,formatRgb:Bh,toString:Bh}));function Lh(){return`#${on(this.r)}${on(this.g)}${on(this.b)}`}function bD(){return`#${on(this.r)}${on(this.g)}${on(this.b)}${on((isNaN(this.opacity)?1:this.opacity)*255)}`}function Bh(){const e=Xs(this.opacity);return`${e===1?"rgb(":"rgba("}${fn(this.r)}, ${fn(this.g)}, ${fn(this.b)}${e===1?")":`, ${e})`}`}function Xs(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function fn(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function on(e){return e=fn(e),(e<16?"0":"")+e.toString(16)}function Fh(e,t,r,n){return n<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new Xt(e,t,r,n)}function hg(e){if(e instanceof Xt)return new Xt(e.h,e.s,e.l,e.opacity);if(e instanceof Ki||(e=pi(e)),!e)return new Xt;if(e instanceof Xt)return e;e=e.rgb();var t=e.r/255,r=e.g/255,n=e.b/255,i=Math.min(t,r,n),s=Math.max(t,r,n),o=NaN,l=s-i,c=(s+i)/2;return l?(t===s?o=(r-n)/l+(r<n)*6:r===s?o=(n-t)/l+2:o=(t-r)/l+4,l/=c<.5?s+i:2-s-i,o*=60):l=c>0&&c<1?0:o,new Xt(o,l,c,e.opacity)}function wD(e,t,r,n){return arguments.length===1?hg(e):new Xt(e,t,r,n??1)}function Xt(e,t,r,n){this.h=+e,this.s=+t,this.l=+r,this.opacity=+n}Yd(Xt,wD,mg(Ki,{brighter(e){return e=e==null?Gs:Math.pow(Gs,e),new Xt(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?mi:Math.pow(mi,e),new Xt(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,n=r+(r<.5?r:1-r)*t,i=2*r-n;return new jt(sc(e>=240?e-240:e+120,i,n),sc(e,i,n),sc(e<120?e+240:e-120,i,n),this.opacity)},clamp(){return new Xt(Uh(this.h),us(this.s),us(this.l),Xs(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Xs(this.opacity);return`${e===1?"hsl(":"hsla("}${Uh(this.h)}, ${us(this.s)*100}%, ${us(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Uh(e){return e=(e||0)%360,e<0?e+360:e}function us(e){return Math.max(0,Math.min(1,e||0))}function sc(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const Gd=e=>()=>e;function jD(e,t){return function(r){return e+r*t}}function ND(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(n){return Math.pow(e+n*t,r)}}function kD(e){return(e=+e)==1?pg:function(t,r){return r-t?ND(t,r,e):Gd(isNaN(t)?r:t)}}function pg(e,t){var r=t-e;return r?jD(e,r):Gd(isNaN(e)?t:e)}const Vh=function e(t){var r=kD(t);function n(i,s){var o=r((i=hu(i)).r,(s=hu(s)).r),l=r(i.g,s.g),c=r(i.b,s.b),u=pg(i.opacity,s.opacity);return function(d){return i.r=o(d),i.g=l(d),i.b=c(d),i.opacity=u(d),i+""}}return n.gamma=e,n}(1);function SD(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,n=t.slice(),i;return function(s){for(i=0;i<r;++i)n[i]=e[i]*(1-s)+t[i]*s;return n}}function OD(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function AD(e,t){var r=t?t.length:0,n=e?Math.min(r,e.length):0,i=new Array(n),s=new Array(r),o;for(o=0;o<n;++o)i[o]=Ta(e[o],t[o]);for(;o<r;++o)s[o]=t[o];return function(l){for(o=0;o<n;++o)s[o]=i[o](l);return s}}function PD(e,t){var r=new Date;return e=+e,t=+t,function(n){return r.setTime(e*(1-n)+t*n),r}}function Qs(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function ED(e,t){var r={},n={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?r[i]=Ta(e[i],t[i]):n[i]=t[i];return function(s){for(i in r)n[i]=r[i](s);return n}}var pu=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,oc=new RegExp(pu.source,"g");function TD(e){return function(){return e}}function _D(e){return function(t){return e(t)+""}}function $D(e,t){var r=pu.lastIndex=oc.lastIndex=0,n,i,s,o=-1,l=[],c=[];for(e=e+"",t=t+"";(n=pu.exec(e))&&(i=oc.exec(t));)(s=i.index)>r&&(s=t.slice(r,s),l[o]?l[o]+=s:l[++o]=s),(n=n[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:Qs(n,i)})),r=oc.lastIndex;return r<t.length&&(s=t.slice(r),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?_D(c[0].x):TD(t):(t=c.length,function(u){for(var d=0,f;d<t;++d)l[(f=c[d]).i]=f.x(u);return l.join("")})}function Ta(e,t){var r=typeof t,n;return t==null||r==="boolean"?Gd(t):(r==="number"?Qs:r==="string"?(n=pi(t))?(t=n,Vh):$D:t instanceof pi?Vh:t instanceof Date?PD:OD(t)?SD:Array.isArray(t)?AD:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?ED:Qs)(e,t)}function Xd(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function CD(e,t){t===void 0&&(t=e,e=Ta);for(var r=0,n=t.length-1,i=t[0],s=new Array(n<0?0:n);r<n;)s[r]=e(i,i=t[++r]);return function(o){var l=Math.max(0,Math.min(n-1,Math.floor(o*=n)));return s[l](o-l)}}function MD(e){return function(){return e}}function Zs(e){return+e}var Hh=[0,1];function xt(e){return e}function vu(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:MD(isNaN(t)?NaN:.5)}function DD(e,t){var r;return e>t&&(r=e,e=t,t=r),function(n){return Math.max(e,Math.min(t,n))}}function ID(e,t,r){var n=e[0],i=e[1],s=t[0],o=t[1];return i<n?(n=vu(i,n),s=r(o,s)):(n=vu(n,i),s=r(s,o)),function(l){return s(n(l))}}function RD(e,t,r){var n=Math.min(e.length,t.length)-1,i=new Array(n),s=new Array(n),o=-1;for(e[n]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<n;)i[o]=vu(e[o],e[o+1]),s[o]=r(t[o],t[o+1]);return function(l){var c=Wi(e,l,1,n)-1;return s[c](i[c](l))}}function Yi(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function dl(){var e=Hh,t=Hh,r=Ta,n,i,s,o=xt,l,c,u;function d(){var m=Math.min(e.length,t.length);return o!==xt&&(o=DD(e[0],e[m-1])),l=m>2?RD:ID,c=u=null,f}function f(m){return m==null||isNaN(m=+m)?s:(c||(c=l(e.map(n),t,r)))(n(o(m)))}return f.invert=function(m){return o(i((u||(u=l(t,e.map(n),Qs)))(m)))},f.domain=function(m){return arguments.length?(e=Array.from(m,Zs),d()):e.slice()},f.range=function(m){return arguments.length?(t=Array.from(m),d()):t.slice()},f.rangeRound=function(m){return t=Array.from(m),r=Xd,d()},f.clamp=function(m){return arguments.length?(o=m?!0:xt,d()):o!==xt},f.interpolate=function(m){return arguments.length?(r=m,d()):r},f.unknown=function(m){return arguments.length?(s=m,f):s},function(m,v){return n=m,i=v,d()}}function Qd(){return dl()(xt,xt)}function LD(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Js(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,n=e.slice(0,r);return[n.length>1?n[0]+n.slice(2):n,+e.slice(r+1)]}function Jn(e){return e=Js(Math.abs(e)),e?e[1]:NaN}function BD(e,t){return function(r,n){for(var i=r.length,s=[],o=0,l=e[0],c=0;i>0&&l>0&&(c+l+1>n&&(l=Math.max(1,n-c)),s.push(r.substring(i-=l,i+l)),!((c+=l+1)>n));)l=e[o=(o+1)%e.length];return s.reverse().join(t)}}function FD(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var UD=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function vi(e){if(!(t=UD.exec(e)))throw new Error("invalid format: "+e);var t;return new Zd({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}vi.prototype=Zd.prototype;function Zd(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Zd.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function VD(e){e:for(var t=e.length,r=1,n=-1,i;r<t;++r)switch(e[r]){case".":n=i=r;break;case"0":n===0&&(n=r),i=r;break;default:if(!+e[r])break e;n>0&&(n=0);break}return n>0?e.slice(0,n)+e.slice(i+1):e}var vg;function HD(e,t){var r=Js(e,t);if(!r)return e+"";var n=r[0],i=r[1],s=i-(vg=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+Js(e,Math.max(0,t+s-1))[0]}function zh(e,t){var r=Js(e,t);if(!r)return e+"";var n=r[0],i=r[1];return i<0?"0."+new Array(-i).join("0")+n:n.length>i+1?n.slice(0,i+1)+"."+n.slice(i+1):n+new Array(i-n.length+2).join("0")}const qh={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:LD,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>zh(e*100,t),r:zh,s:HD,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Wh(e){return e}var Kh=Array.prototype.map,Yh=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function zD(e){var t=e.grouping===void 0||e.thousands===void 0?Wh:BD(Kh.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",n=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Wh:FD(Kh.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"−":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(f){f=vi(f);var m=f.fill,v=f.align,y=f.sign,p=f.symbol,x=f.zero,j=f.width,N=f.comma,b=f.precision,g=f.trim,h=f.type;h==="n"?(N=!0,h="g"):qh[h]||(b===void 0&&(b=12),g=!0,h="g"),(x||m==="0"&&v==="=")&&(x=!0,m="0",v="=");var w=p==="$"?r:p==="#"&&/[boxX]/.test(h)?"0"+h.toLowerCase():"",S=p==="$"?n:/[%p]/.test(h)?o:"",A=qh[h],O=/[defgprs%]/.test(h);b=b===void 0?6:/[gprs]/.test(h)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function C(T){var E=w,M=S,$,D,F;if(h==="c")M=A(T)+M,T="";else{T=+T;var _=T<0||1/T<0;if(T=isNaN(T)?c:A(Math.abs(T),b),g&&(T=VD(T)),_&&+T==0&&y!=="+"&&(_=!1),E=(_?y==="("?y:l:y==="-"||y==="("?"":y)+E,M=(h==="s"?Yh[8+vg/3]:"")+M+(_&&y==="("?")":""),O){for($=-1,D=T.length;++$<D;)if(F=T.charCodeAt($),48>F||F>57){M=(F===46?i+T.slice($+1):T.slice($))+M,T=T.slice(0,$);break}}}N&&!x&&(T=t(T,1/0));var R=E.length+T.length+M.length,L=R<j?new Array(j-R+1).join(m):"";switch(N&&x&&(T=t(L+T,L.length?j-M.length:1/0),L=""),v){case"<":T=E+T+M+L;break;case"=":T=E+L+T+M;break;case"^":T=L.slice(0,R=L.length>>1)+E+T+M+L.slice(R);break;default:T=L+E+T+M;break}return s(T)}return C.toString=function(){return f+""},C}function d(f,m){var v=u((f=vi(f),f.type="f",f)),y=Math.max(-8,Math.min(8,Math.floor(Jn(m)/3)))*3,p=Math.pow(10,-y),x=Yh[8+y/3];return function(j){return v(p*j)+x}}return{format:u,formatPrefix:d}}var ds,Jd,yg;qD({thousands:",",grouping:[3],currency:["$",""]});function qD(e){return ds=zD(e),Jd=ds.format,yg=ds.formatPrefix,ds}function WD(e){return Math.max(0,-Jn(Math.abs(e)))}function KD(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Jn(t)/3)))*3-Jn(Math.abs(e)))}function YD(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Jn(t)-Jn(e))+1}function xg(e,t,r,n){var i=fu(e,t,r),s;switch(n=vi(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return n.precision==null&&!isNaN(s=KD(i,o))&&(n.precision=s),yg(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=YD(i,Math.max(Math.abs(e),Math.abs(t))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=WD(i))&&(n.precision=s-(n.type==="%")*2);break}}return Jd(n)}function Kr(e){var t=e.domain;return e.ticks=function(r){var n=t();return uu(n[0],n[n.length-1],r??10)},e.tickFormat=function(r,n){var i=t();return xg(i[0],i[i.length-1],r??10,n)},e.nice=function(r){r==null&&(r=10);var n=t(),i=0,s=n.length-1,o=n[i],l=n[s],c,u,d=10;for(l<o&&(u=o,o=l,l=u,u=i,i=s,s=u);d-- >0;){if(u=du(o,l,r),u===c)return n[i]=o,n[s]=l,t(n);if(u>0)o=Math.floor(o/u)*u,l=Math.ceil(l/u)*u;else if(u<0)o=Math.ceil(o*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function eo(){var e=Qd();return e.copy=function(){return Yi(e,eo())},Ht.apply(e,arguments),Kr(e)}function gg(e){var t;function r(n){return n==null||isNaN(n=+n)?t:n}return r.invert=r,r.domain=r.range=function(n){return arguments.length?(e=Array.from(n,Zs),r):e.slice()},r.unknown=function(n){return arguments.length?(t=n,r):t},r.copy=function(){return gg(e).unknown(t)},e=arguments.length?Array.from(e,Zs):[0,1],Kr(r)}function bg(e,t){e=e.slice();var r=0,n=e.length-1,i=e[r],s=e[n],o;return s<i&&(o=r,r=n,n=o,o=i,i=s,s=o),e[r]=t.floor(i),e[n]=t.ceil(s),e}function Gh(e){return Math.log(e)}function Xh(e){return Math.exp(e)}function GD(e){return-Math.log(-e)}function XD(e){return-Math.exp(-e)}function QD(e){return isFinite(e)?+("1e"+e):e<0?0:e}function ZD(e){return e===10?QD:e===Math.E?Math.exp:t=>Math.pow(e,t)}function JD(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Qh(e){return(t,r)=>-e(-t,r)}function ef(e){const t=e(Gh,Xh),r=t.domain;let n=10,i,s;function o(){return i=JD(n),s=ZD(n),r()[0]<0?(i=Qh(i),s=Qh(s),e(GD,XD)):e(Gh,Xh),t}return t.base=function(l){return arguments.length?(n=+l,o()):n},t.domain=function(l){return arguments.length?(r(l),o()):r()},t.ticks=l=>{const c=r();let u=c[0],d=c[c.length-1];const f=d<u;f&&([u,d]=[d,u]);let m=i(u),v=i(d),y,p;const x=l==null?10:+l;let j=[];if(!(n%1)&&v-m<x){if(m=Math.floor(m),v=Math.ceil(v),u>0){for(;m<=v;++m)for(y=1;y<n;++y)if(p=m<0?y/s(-m):y*s(m),!(p<u)){if(p>d)break;j.push(p)}}else for(;m<=v;++m)for(y=n-1;y>=1;--y)if(p=m>0?y/s(-m):y*s(m),!(p<u)){if(p>d)break;j.push(p)}j.length*2<x&&(j=uu(u,d,x))}else j=uu(m,v,Math.min(v-m,x)).map(s);return f?j.reverse():j},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=n===10?"s":","),typeof c!="function"&&(!(n%1)&&(c=vi(c)).precision==null&&(c.trim=!0),c=Jd(c)),l===1/0)return c;const u=Math.max(1,n*l/t.ticks().length);return d=>{let f=d/s(Math.round(i(d)));return f*n<n-.5&&(f*=n),f<=u?c(d):""}},t.nice=()=>r(bg(r(),{floor:l=>s(Math.floor(i(l))),ceil:l=>s(Math.ceil(i(l)))})),t}function wg(){const e=ef(dl()).domain([1,10]);return e.copy=()=>Yi(e,wg()).base(e.base()),Ht.apply(e,arguments),e}function Zh(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Jh(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function tf(e){var t=1,r=e(Zh(t),Jh(t));return r.constant=function(n){return arguments.length?e(Zh(t=+n),Jh(t)):t},Kr(r)}function jg(){var e=tf(dl());return e.copy=function(){return Yi(e,jg()).constant(e.constant())},Ht.apply(e,arguments)}function ep(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function eI(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function tI(e){return e<0?-e*e:e*e}function rf(e){var t=e(xt,xt),r=1;function n(){return r===1?e(xt,xt):r===.5?e(eI,tI):e(ep(r),ep(1/r))}return t.exponent=function(i){return arguments.length?(r=+i,n()):r},Kr(t)}function nf(){var e=rf(dl());return e.copy=function(){return Yi(e,nf()).exponent(e.exponent())},Ht.apply(e,arguments),e}function rI(){return nf.apply(null,arguments).exponent(.5)}function tp(e){return Math.sign(e)*e*e}function nI(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function Ng(){var e=Qd(),t=[0,1],r=!1,n;function i(s){var o=nI(e(s));return isNaN(o)?n:r?Math.round(o):o}return i.invert=function(s){return e.invert(tp(s))},i.domain=function(s){return arguments.length?(e.domain(s),i):e.domain()},i.range=function(s){return arguments.length?(e.range((t=Array.from(s,Zs)).map(tp)),i):t.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(r=!!s,i):r},i.clamp=function(s){return arguments.length?(e.clamp(s),i):e.clamp()},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return Ng(e.domain(),t).round(r).clamp(e.clamp()).unknown(n)},Ht.apply(i,arguments),Kr(i)}function kg(){var e=[],t=[],r=[],n;function i(){var o=0,l=Math.max(1,t.length);for(r=new Array(l-1);++o<l;)r[o-1]=lD(e,o/l);return s}function s(o){return o==null||isNaN(o=+o)?n:t[Wi(r,o)]}return s.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?r[l-1]:e[0],l<r.length?r[l]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(Ur),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(n=o,s):n},s.quantiles=function(){return r.slice()},s.copy=function(){return kg().domain(e).range(t).unknown(n)},Ht.apply(s,arguments)}function Sg(){var e=0,t=1,r=1,n=[.5],i=[0,1],s;function o(c){return c!=null&&c<=c?i[Wi(n,c,0,r)]:s}function l(){var c=-1;for(n=new Array(r);++c<r;)n[c]=((c+1)*t-(c-r)*e)/(r+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(r=(i=Array.from(c)).length-1,l()):i.slice()},o.invertExtent=function(c){var u=i.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,n[0]]:u>=r?[n[r-1],t]:[n[u-1],n[u]]},o.unknown=function(c){return arguments.length&&(s=c),o},o.thresholds=function(){return n.slice()},o.copy=function(){return Sg().domain([e,t]).range(i).unknown(s)},Ht.apply(Kr(o),arguments)}function Og(){var e=[.5],t=[0,1],r,n=1;function i(s){return s!=null&&s<=s?t[Wi(e,s,0,n)]:r}return i.domain=function(s){return arguments.length?(e=Array.from(s),n=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),n=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Og().domain(e).range(t).unknown(r)},Ht.apply(i,arguments)}const lc=new Date,cc=new Date;function nt(e,t,r,n){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),l=i.ceil(s);return s-o<l-s?o:l},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,l)=>{const c=[];if(s=i.ceil(s),l=l==null?1:Math.floor(l),!(s<o)||!(l>0))return c;let u;do c.push(u=new Date(+s)),t(s,l),e(s);while(u<s&&s<o);return c},i.filter=s=>nt(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!s(o););else for(;--l>=0;)for(;t(o,1),!s(o););}),r&&(i.count=(s,o)=>(lc.setTime(+s),cc.setTime(+o),e(lc),e(cc),Math.floor(r(lc,cc))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(n?o=>n(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const to=nt(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);to.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?nt(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):to);to.range;const wr=1e3,Bt=wr*60,jr=Bt*60,Ar=jr*24,af=Ar*7,rp=Ar*30,uc=Ar*365,ln=nt(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*wr)},(e,t)=>(t-e)/wr,e=>e.getUTCSeconds());ln.range;const sf=nt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*wr)},(e,t)=>{e.setTime(+e+t*Bt)},(e,t)=>(t-e)/Bt,e=>e.getMinutes());sf.range;const of=nt(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Bt)},(e,t)=>(t-e)/Bt,e=>e.getUTCMinutes());of.range;const lf=nt(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*wr-e.getMinutes()*Bt)},(e,t)=>{e.setTime(+e+t*jr)},(e,t)=>(t-e)/jr,e=>e.getHours());lf.range;const cf=nt(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*jr)},(e,t)=>(t-e)/jr,e=>e.getUTCHours());cf.range;const Gi=nt(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Bt)/Ar,e=>e.getDate()-1);Gi.range;const fl=nt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ar,e=>e.getUTCDate()-1);fl.range;const Ag=nt(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Ar,e=>Math.floor(e/Ar));Ag.range;function Sn(e){return nt(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Bt)/af)}const ml=Sn(0),ro=Sn(1),aI=Sn(2),iI=Sn(3),ea=Sn(4),sI=Sn(5),oI=Sn(6);ml.range;ro.range;aI.range;iI.range;ea.range;sI.range;oI.range;function On(e){return nt(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/af)}const hl=On(0),no=On(1),lI=On(2),cI=On(3),ta=On(4),uI=On(5),dI=On(6);hl.range;no.range;lI.range;cI.range;ta.range;uI.range;dI.range;const uf=nt(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());uf.range;const df=nt(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());df.range;const Pr=nt(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Pr.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:nt(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Pr.range;const Er=nt(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Er.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:nt(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});Er.range;function Pg(e,t,r,n,i,s){const o=[[ln,1,wr],[ln,5,5*wr],[ln,15,15*wr],[ln,30,30*wr],[s,1,Bt],[s,5,5*Bt],[s,15,15*Bt],[s,30,30*Bt],[i,1,jr],[i,3,3*jr],[i,6,6*jr],[i,12,12*jr],[n,1,Ar],[n,2,2*Ar],[r,1,af],[t,1,rp],[t,3,3*rp],[e,1,uc]];function l(u,d,f){const m=d<u;m&&([u,d]=[d,u]);const v=f&&typeof f.range=="function"?f:c(u,d,f),y=v?v.range(u,+d+1):[];return m?y.reverse():y}function c(u,d,f){const m=Math.abs(d-u)/f,v=Wd(([,,x])=>x).right(o,m);if(v===o.length)return e.every(fu(u/uc,d/uc,f));if(v===0)return to.every(Math.max(fu(u,d,f),1));const[y,p]=o[m/o[v-1][2]<o[v][2]/m?v-1:v];return y.every(p)}return[l,c]}const[fI,mI]=Pg(Er,df,hl,Ag,cf,of),[hI,pI]=Pg(Pr,uf,ml,Gi,lf,sf);function dc(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function fc(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Fa(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function vI(e){var t=e.dateTime,r=e.date,n=e.time,i=e.periods,s=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,u=Ua(i),d=Va(i),f=Ua(s),m=Va(s),v=Ua(o),y=Va(o),p=Ua(l),x=Va(l),j=Ua(c),N=Va(c),b={a:_,A:R,b:L,B:z,c:null,d:lp,e:lp,f:BI,g:GI,G:QI,H:II,I:RI,j:LI,L:Eg,m:FI,M:UI,p:V,q,Q:dp,s:fp,S:VI,u:HI,U:zI,V:qI,w:WI,W:KI,x:null,X:null,y:YI,Y:XI,Z:ZI,"%":up},g={a:J,A:X,b:ee,B:re,c:null,d:cp,e:cp,f:r6,g:f6,G:h6,H:JI,I:e6,j:t6,L:_g,m:n6,M:a6,p:Pe,q:Ee,Q:dp,s:fp,S:i6,u:s6,U:o6,V:l6,w:c6,W:u6,x:null,X:null,y:d6,Y:m6,Z:p6,"%":up},h={a:C,A:T,b:E,B:M,c:$,d:sp,e:sp,f:$I,g:ip,G:ap,H:op,I:op,j:PI,L:_I,m:AI,M:EI,p:O,q:OI,Q:MI,s:DI,S:TI,u:wI,U:jI,V:NI,w:bI,W:kI,x:D,X:F,y:ip,Y:ap,Z:SI,"%":CI};b.x=w(r,b),b.X=w(n,b),b.c=w(t,b),g.x=w(r,g),g.X=w(n,g),g.c=w(t,g);function w(G,ie){return function(oe){var I=[],te=-1,ue=0,H=G.length,K,de,B;for(oe instanceof Date||(oe=new Date(+oe));++te<H;)G.charCodeAt(te)===37&&(I.push(G.slice(ue,te)),(de=np[K=G.charAt(++te)])!=null?K=G.charAt(++te):de=K==="e"?" ":"0",(B=ie[K])&&(K=B(oe,de)),I.push(K),ue=te+1);return I.push(G.slice(ue,te)),I.join("")}}function S(G,ie){return function(oe){var I=Fa(1900,void 0,1),te=A(I,G,oe+="",0),ue,H;if(te!=oe.length)return null;if("Q"in I)return new Date(I.Q);if("s"in I)return new Date(I.s*1e3+("L"in I?I.L:0));if(ie&&!("Z"in I)&&(I.Z=0),"p"in I&&(I.H=I.H%12+I.p*12),I.m===void 0&&(I.m="q"in I?I.q:0),"V"in I){if(I.V<1||I.V>53)return null;"w"in I||(I.w=1),"Z"in I?(ue=fc(Fa(I.y,0,1)),H=ue.getUTCDay(),ue=H>4||H===0?no.ceil(ue):no(ue),ue=fl.offset(ue,(I.V-1)*7),I.y=ue.getUTCFullYear(),I.m=ue.getUTCMonth(),I.d=ue.getUTCDate()+(I.w+6)%7):(ue=dc(Fa(I.y,0,1)),H=ue.getDay(),ue=H>4||H===0?ro.ceil(ue):ro(ue),ue=Gi.offset(ue,(I.V-1)*7),I.y=ue.getFullYear(),I.m=ue.getMonth(),I.d=ue.getDate()+(I.w+6)%7)}else("W"in I||"U"in I)&&("w"in I||(I.w="u"in I?I.u%7:"W"in I?1:0),H="Z"in I?fc(Fa(I.y,0,1)).getUTCDay():dc(Fa(I.y,0,1)).getDay(),I.m=0,I.d="W"in I?(I.w+6)%7+I.W*7-(H+5)%7:I.w+I.U*7-(H+6)%7);return"Z"in I?(I.H+=I.Z/100|0,I.M+=I.Z%100,fc(I)):dc(I)}}function A(G,ie,oe,I){for(var te=0,ue=ie.length,H=oe.length,K,de;te<ue;){if(I>=H)return-1;if(K=ie.charCodeAt(te++),K===37){if(K=ie.charAt(te++),de=h[K in np?ie.charAt(te++):K],!de||(I=de(G,oe,I))<0)return-1}else if(K!=oe.charCodeAt(I++))return-1}return I}function O(G,ie,oe){var I=u.exec(ie.slice(oe));return I?(G.p=d.get(I[0].toLowerCase()),oe+I[0].length):-1}function C(G,ie,oe){var I=v.exec(ie.slice(oe));return I?(G.w=y.get(I[0].toLowerCase()),oe+I[0].length):-1}function T(G,ie,oe){var I=f.exec(ie.slice(oe));return I?(G.w=m.get(I[0].toLowerCase()),oe+I[0].length):-1}function E(G,ie,oe){var I=j.exec(ie.slice(oe));return I?(G.m=N.get(I[0].toLowerCase()),oe+I[0].length):-1}function M(G,ie,oe){var I=p.exec(ie.slice(oe));return I?(G.m=x.get(I[0].toLowerCase()),oe+I[0].length):-1}function $(G,ie,oe){return A(G,t,ie,oe)}function D(G,ie,oe){return A(G,r,ie,oe)}function F(G,ie,oe){return A(G,n,ie,oe)}function _(G){return o[G.getDay()]}function R(G){return s[G.getDay()]}function L(G){return c[G.getMonth()]}function z(G){return l[G.getMonth()]}function V(G){return i[+(G.getHours()>=12)]}function q(G){return 1+~~(G.getMonth()/3)}function J(G){return o[G.getUTCDay()]}function X(G){return s[G.getUTCDay()]}function ee(G){return c[G.getUTCMonth()]}function re(G){return l[G.getUTCMonth()]}function Pe(G){return i[+(G.getUTCHours()>=12)]}function Ee(G){return 1+~~(G.getUTCMonth()/3)}return{format:function(G){var ie=w(G+="",b);return ie.toString=function(){return G},ie},parse:function(G){var ie=S(G+="",!1);return ie.toString=function(){return G},ie},utcFormat:function(G){var ie=w(G+="",g);return ie.toString=function(){return G},ie},utcParse:function(G){var ie=S(G+="",!0);return ie.toString=function(){return G},ie}}}var np={"-":"",_:" ",0:"0"},st=/^\s*\d+/,yI=/^%/,xI=/[\\^$*+?|[\]().{}]/g;function Se(e,t,r){var n=e<0?"-":"",i=(n?-e:e)+"",s=i.length;return n+(s<r?new Array(r-s+1).join(t)+i:i)}function gI(e){return e.replace(xI,"\\$&")}function Ua(e){return new RegExp("^(?:"+e.map(gI).join("|")+")","i")}function Va(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function bI(e,t,r){var n=st.exec(t.slice(r,r+1));return n?(e.w=+n[0],r+n[0].length):-1}function wI(e,t,r){var n=st.exec(t.slice(r,r+1));return n?(e.u=+n[0],r+n[0].length):-1}function jI(e,t,r){var n=st.exec(t.slice(r,r+2));return n?(e.U=+n[0],r+n[0].length):-1}function NI(e,t,r){var n=st.exec(t.slice(r,r+2));return n?(e.V=+n[0],r+n[0].length):-1}function kI(e,t,r){var n=st.exec(t.slice(r,r+2));return n?(e.W=+n[0],r+n[0].length):-1}function ap(e,t,r){var n=st.exec(t.slice(r,r+4));return n?(e.y=+n[0],r+n[0].length):-1}function ip(e,t,r){var n=st.exec(t.slice(r,r+2));return n?(e.y=+n[0]+(+n[0]>68?1900:2e3),r+n[0].length):-1}function SI(e,t,r){var n=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return n?(e.Z=n[1]?0:-(n[2]+(n[3]||"00")),r+n[0].length):-1}function OI(e,t,r){var n=st.exec(t.slice(r,r+1));return n?(e.q=n[0]*3-3,r+n[0].length):-1}function AI(e,t,r){var n=st.exec(t.slice(r,r+2));return n?(e.m=n[0]-1,r+n[0].length):-1}function sp(e,t,r){var n=st.exec(t.slice(r,r+2));return n?(e.d=+n[0],r+n[0].length):-1}function PI(e,t,r){var n=st.exec(t.slice(r,r+3));return n?(e.m=0,e.d=+n[0],r+n[0].length):-1}function op(e,t,r){var n=st.exec(t.slice(r,r+2));return n?(e.H=+n[0],r+n[0].length):-1}function EI(e,t,r){var n=st.exec(t.slice(r,r+2));return n?(e.M=+n[0],r+n[0].length):-1}function TI(e,t,r){var n=st.exec(t.slice(r,r+2));return n?(e.S=+n[0],r+n[0].length):-1}function _I(e,t,r){var n=st.exec(t.slice(r,r+3));return n?(e.L=+n[0],r+n[0].length):-1}function $I(e,t,r){var n=st.exec(t.slice(r,r+6));return n?(e.L=Math.floor(n[0]/1e3),r+n[0].length):-1}function CI(e,t,r){var n=yI.exec(t.slice(r,r+1));return n?r+n[0].length:-1}function MI(e,t,r){var n=st.exec(t.slice(r));return n?(e.Q=+n[0],r+n[0].length):-1}function DI(e,t,r){var n=st.exec(t.slice(r));return n?(e.s=+n[0],r+n[0].length):-1}function lp(e,t){return Se(e.getDate(),t,2)}function II(e,t){return Se(e.getHours(),t,2)}function RI(e,t){return Se(e.getHours()%12||12,t,2)}function LI(e,t){return Se(1+Gi.count(Pr(e),e),t,3)}function Eg(e,t){return Se(e.getMilliseconds(),t,3)}function BI(e,t){return Eg(e,t)+"000"}function FI(e,t){return Se(e.getMonth()+1,t,2)}function UI(e,t){return Se(e.getMinutes(),t,2)}function VI(e,t){return Se(e.getSeconds(),t,2)}function HI(e){var t=e.getDay();return t===0?7:t}function zI(e,t){return Se(ml.count(Pr(e)-1,e),t,2)}function Tg(e){var t=e.getDay();return t>=4||t===0?ea(e):ea.ceil(e)}function qI(e,t){return e=Tg(e),Se(ea.count(Pr(e),e)+(Pr(e).getDay()===4),t,2)}function WI(e){return e.getDay()}function KI(e,t){return Se(ro.count(Pr(e)-1,e),t,2)}function YI(e,t){return Se(e.getFullYear()%100,t,2)}function GI(e,t){return e=Tg(e),Se(e.getFullYear()%100,t,2)}function XI(e,t){return Se(e.getFullYear()%1e4,t,4)}function QI(e,t){var r=e.getDay();return e=r>=4||r===0?ea(e):ea.ceil(e),Se(e.getFullYear()%1e4,t,4)}function ZI(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Se(t/60|0,"0",2)+Se(t%60,"0",2)}function cp(e,t){return Se(e.getUTCDate(),t,2)}function JI(e,t){return Se(e.getUTCHours(),t,2)}function e6(e,t){return Se(e.getUTCHours()%12||12,t,2)}function t6(e,t){return Se(1+fl.count(Er(e),e),t,3)}function _g(e,t){return Se(e.getUTCMilliseconds(),t,3)}function r6(e,t){return _g(e,t)+"000"}function n6(e,t){return Se(e.getUTCMonth()+1,t,2)}function a6(e,t){return Se(e.getUTCMinutes(),t,2)}function i6(e,t){return Se(e.getUTCSeconds(),t,2)}function s6(e){var t=e.getUTCDay();return t===0?7:t}function o6(e,t){return Se(hl.count(Er(e)-1,e),t,2)}function $g(e){var t=e.getUTCDay();return t>=4||t===0?ta(e):ta.ceil(e)}function l6(e,t){return e=$g(e),Se(ta.count(Er(e),e)+(Er(e).getUTCDay()===4),t,2)}function c6(e){return e.getUTCDay()}function u6(e,t){return Se(no.count(Er(e)-1,e),t,2)}function d6(e,t){return Se(e.getUTCFullYear()%100,t,2)}function f6(e,t){return e=$g(e),Se(e.getUTCFullYear()%100,t,2)}function m6(e,t){return Se(e.getUTCFullYear()%1e4,t,4)}function h6(e,t){var r=e.getUTCDay();return e=r>=4||r===0?ta(e):ta.ceil(e),Se(e.getUTCFullYear()%1e4,t,4)}function p6(){return"+0000"}function up(){return"%"}function dp(e){return+e}function fp(e){return Math.floor(+e/1e3)}var _n,Cg,Mg;v6({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function v6(e){return _n=vI(e),Cg=_n.format,_n.parse,Mg=_n.utcFormat,_n.utcParse,_n}function y6(e){return new Date(e)}function x6(e){return e instanceof Date?+e:+new Date(+e)}function ff(e,t,r,n,i,s,o,l,c,u){var d=Qd(),f=d.invert,m=d.domain,v=u(".%L"),y=u(":%S"),p=u("%I:%M"),x=u("%I %p"),j=u("%a %d"),N=u("%b %d"),b=u("%B"),g=u("%Y");function h(w){return(c(w)<w?v:l(w)<w?y:o(w)<w?p:s(w)<w?x:n(w)<w?i(w)<w?j:N:r(w)<w?b:g)(w)}return d.invert=function(w){return new Date(f(w))},d.domain=function(w){return arguments.length?m(Array.from(w,x6)):m().map(y6)},d.ticks=function(w){var S=m();return e(S[0],S[S.length-1],w??10)},d.tickFormat=function(w,S){return S==null?h:u(S)},d.nice=function(w){var S=m();return(!w||typeof w.range!="function")&&(w=t(S[0],S[S.length-1],w??10)),w?m(bg(S,w)):d},d.copy=function(){return Yi(d,ff(e,t,r,n,i,s,o,l,c,u))},d}function g6(){return Ht.apply(ff(hI,pI,Pr,uf,ml,Gi,lf,sf,ln,Cg).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function b6(){return Ht.apply(ff(fI,mI,Er,df,hl,fl,cf,of,ln,Mg).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function pl(){var e=0,t=1,r,n,i,s,o=xt,l=!1,c;function u(f){return f==null||isNaN(f=+f)?c:o(i===0?.5:(f=(s(f)-r)*i,l?Math.max(0,Math.min(1,f)):f))}u.domain=function(f){return arguments.length?([e,t]=f,r=s(e=+e),n=s(t=+t),i=r===n?0:1/(n-r),u):[e,t]},u.clamp=function(f){return arguments.length?(l=!!f,u):l},u.interpolator=function(f){return arguments.length?(o=f,u):o};function d(f){return function(m){var v,y;return arguments.length?([v,y]=m,o=f(v,y),u):[o(0),o(1)]}}return u.range=d(Ta),u.rangeRound=d(Xd),u.unknown=function(f){return arguments.length?(c=f,u):c},function(f){return s=f,r=f(e),n=f(t),i=r===n?0:1/(n-r),u}}function Yr(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Dg(){var e=Kr(pl()(xt));return e.copy=function(){return Yr(e,Dg())},$r.apply(e,arguments)}function Ig(){var e=ef(pl()).domain([1,10]);return e.copy=function(){return Yr(e,Ig()).base(e.base())},$r.apply(e,arguments)}function Rg(){var e=tf(pl());return e.copy=function(){return Yr(e,Rg()).constant(e.constant())},$r.apply(e,arguments)}function mf(){var e=rf(pl());return e.copy=function(){return Yr(e,mf()).exponent(e.exponent())},$r.apply(e,arguments)}function w6(){return mf.apply(null,arguments).exponent(.5)}function Lg(){var e=[],t=xt;function r(n){if(n!=null&&!isNaN(n=+n))return t((Wi(e,n,1)-1)/(e.length-1))}return r.domain=function(n){if(!arguments.length)return e.slice();e=[];for(let i of n)i!=null&&!isNaN(i=+i)&&e.push(i);return e.sort(Ur),r},r.interpolator=function(n){return arguments.length?(t=n,r):t},r.range=function(){return e.map((n,i)=>t(i/(e.length-1)))},r.quantiles=function(n){return Array.from({length:n+1},(i,s)=>oD(e,s/n))},r.copy=function(){return Lg(t).domain(e)},$r.apply(r,arguments)}function vl(){var e=0,t=.5,r=1,n=1,i,s,o,l,c,u=xt,d,f=!1,m;function v(p){return isNaN(p=+p)?m:(p=.5+((p=+d(p))-s)*(n*p<n*s?l:c),u(f?Math.max(0,Math.min(1,p)):p))}v.domain=function(p){return arguments.length?([e,t,r]=p,i=d(e=+e),s=d(t=+t),o=d(r=+r),l=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),n=s<i?-1:1,v):[e,t,r]},v.clamp=function(p){return arguments.length?(f=!!p,v):f},v.interpolator=function(p){return arguments.length?(u=p,v):u};function y(p){return function(x){var j,N,b;return arguments.length?([j,N,b]=x,u=CD(p,[j,N,b]),v):[u(0),u(.5),u(1)]}}return v.range=y(Ta),v.rangeRound=y(Xd),v.unknown=function(p){return arguments.length?(m=p,v):m},function(p){return d=p,i=p(e),s=p(t),o=p(r),l=i===s?0:.5/(s-i),c=s===o?0:.5/(o-s),n=s<i?-1:1,v}}function Bg(){var e=Kr(vl()(xt));return e.copy=function(){return Yr(e,Bg())},$r.apply(e,arguments)}function Fg(){var e=ef(vl()).domain([.1,1,10]);return e.copy=function(){return Yr(e,Fg()).base(e.base())},$r.apply(e,arguments)}function Ug(){var e=tf(vl());return e.copy=function(){return Yr(e,Ug()).constant(e.constant())},$r.apply(e,arguments)}function hf(){var e=rf(vl());return e.copy=function(){return Yr(e,hf()).exponent(e.exponent())},$r.apply(e,arguments)}function j6(){return hf.apply(null,arguments).exponent(.5)}const mp=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:fi,scaleDiverging:Bg,scaleDivergingLog:Fg,scaleDivergingPow:hf,scaleDivergingSqrt:j6,scaleDivergingSymlog:Ug,scaleIdentity:gg,scaleImplicit:mu,scaleLinear:eo,scaleLog:wg,scaleOrdinal:Kd,scalePoint:Ga,scalePow:nf,scaleQuantile:kg,scaleQuantize:Sg,scaleRadial:Ng,scaleSequential:Dg,scaleSequentialLog:Ig,scaleSequentialPow:mf,scaleSequentialQuantile:Lg,scaleSequentialSqrt:w6,scaleSequentialSymlog:Rg,scaleSqrt:rI,scaleSymlog:jg,scaleThreshold:Og,scaleTime:g6,scaleUtc:b6,tickFormat:xg},Symbol.toStringTag,{value:"Module"}));var N6=wa;function k6(e,t,r){for(var n=-1,i=e.length;++n<i;){var s=e[n],o=t(s);if(o!=null&&(l===void 0?o===o&&!N6(o):r(o,l)))var l=o,c=s}return c}var yl=k6;function S6(e,t){return e>t}var Vg=S6,O6=yl,A6=Vg,P6=Ea;function E6(e){return e&&e.length?O6(e,P6,A6):void 0}var T6=E6;const xl=Oe(T6);function _6(e,t){return e<t}var Hg=_6,$6=yl,C6=Hg,M6=Ea;function D6(e){return e&&e.length?$6(e,M6,C6):void 0}var I6=D6;const gl=Oe(I6);var R6=Ad,L6=vr,B6=Zx,F6=kt;function U6(e,t){var r=F6(e)?R6:B6;return r(e,L6(t))}var V6=U6,H6=Xx,z6=V6;function q6(e,t){return H6(z6(e,t),1)}var W6=q6;const K6=Oe(W6);var Y6=Vd;function G6(e,t){return Y6(e,t)}var X6=G6;const Xi=Oe(X6);var _a=1e9,Q6={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},vf,ze=!0,Ft="[DecimalError] ",mn=Ft+"Invalid argument: ",pf=Ft+"Exponent out of range: ",$a=Math.floor,nn=Math.pow,Z6=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Et,at=1e7,Ve=7,zg=9007199254740991,ao=$a(zg/Ve),Z={};Z.absoluteValue=Z.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Z.comparedTo=Z.cmp=function(e){var t,r,n,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(n=s.d.length,i=e.d.length,t=0,r=n<i?n:i;t<r;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return n===i?0:n>i^s.s<0?1:-1};Z.decimalPlaces=Z.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Ve;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Z.dividedBy=Z.div=function(e){return kr(this,new this.constructor(e))};Z.dividedToIntegerBy=Z.idiv=function(e){var t=this,r=t.constructor;return Ie(kr(t,new r(e),0,1),r.precision)};Z.equals=Z.eq=function(e){return!this.cmp(e)};Z.exponent=function(){return Ze(this)};Z.greaterThan=Z.gt=function(e){return this.cmp(e)>0};Z.greaterThanOrEqualTo=Z.gte=function(e){return this.cmp(e)>=0};Z.isInteger=Z.isint=function(){return this.e>this.d.length-2};Z.isNegative=Z.isneg=function(){return this.s<0};Z.isPositive=Z.ispos=function(){return this.s>0};Z.isZero=function(){return this.s===0};Z.lessThan=Z.lt=function(e){return this.cmp(e)<0};Z.lessThanOrEqualTo=Z.lte=function(e){return this.cmp(e)<1};Z.logarithm=Z.log=function(e){var t,r=this,n=r.constructor,i=n.precision,s=i+5;if(e===void 0)e=new n(10);else if(e=new n(e),e.s<1||e.eq(Et))throw Error(Ft+"NaN");if(r.s<1)throw Error(Ft+(r.s?"NaN":"-Infinity"));return r.eq(Et)?new n(0):(ze=!1,t=kr(yi(r,s),yi(e,s),s),ze=!0,Ie(t,i))};Z.minus=Z.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Kg(t,e):qg(t,(e.s=-e.s,e))};Z.modulo=Z.mod=function(e){var t,r=this,n=r.constructor,i=n.precision;if(e=new n(e),!e.s)throw Error(Ft+"NaN");return r.s?(ze=!1,t=kr(r,e,0,1).times(e),ze=!0,r.minus(t)):Ie(new n(r),i)};Z.naturalExponential=Z.exp=function(){return Wg(this)};Z.naturalLogarithm=Z.ln=function(){return yi(this)};Z.negated=Z.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Z.plus=Z.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?qg(t,e):Kg(t,(e.s=-e.s,e))};Z.precision=Z.sd=function(e){var t,r,n,i=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(mn+e);if(t=Ze(i)+1,n=i.d.length-1,r=n*Ve+1,n=i.d[n],n){for(;n%10==0;n/=10)r--;for(n=i.d[0];n>=10;n/=10)r++}return e&&t>r?t:r};Z.squareRoot=Z.sqrt=function(){var e,t,r,n,i,s,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(Ft+"NaN")}for(e=Ze(l),ze=!1,i=Math.sqrt(+l),i==0||i==1/0?(t=or(l.d),(t.length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=$a((e+1)/2)-(e<0||e%2),i==1/0?t="5e"+e:(t=i.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),n=new c(t)):n=new c(i.toString()),r=c.precision,i=o=r+3;;)if(s=n,n=s.plus(kr(l,s,o+2)).times(.5),or(s.d).slice(0,o)===(t=or(n.d)).slice(0,o)){if(t=t.slice(o-3,o+1),i==o&&t=="4999"){if(Ie(s,r+1,0),s.times(s).eq(l)){n=s;break}}else if(t!="9999")break;o+=4}return ze=!0,Ie(n,r)};Z.times=Z.mul=function(e){var t,r,n,i,s,o,l,c,u,d=this,f=d.constructor,m=d.d,v=(e=new f(e)).d;if(!d.s||!e.s)return new f(0);for(e.s*=d.s,r=d.e+e.e,c=m.length,u=v.length,c<u&&(s=m,m=v,v=s,o=c,c=u,u=o),s=[],o=c+u,n=o;n--;)s.push(0);for(n=u;--n>=0;){for(t=0,i=c+n;i>n;)l=s[i]+v[n]*m[i-n-1]+t,s[i--]=l%at|0,t=l/at|0;s[i]=(s[i]+t)%at|0}for(;!s[--o];)s.pop();return t?++r:s.shift(),e.d=s,e.e=r,ze?Ie(e,f.precision):e};Z.toDecimalPlaces=Z.todp=function(e,t){var r=this,n=r.constructor;return r=new n(r),e===void 0?r:(mr(e,0,_a),t===void 0?t=n.rounding:mr(t,0,8),Ie(r,e+Ze(r)+1,t))};Z.toExponential=function(e,t){var r,n=this,i=n.constructor;return e===void 0?r=bn(n,!0):(mr(e,0,_a),t===void 0?t=i.rounding:mr(t,0,8),n=Ie(new i(n),e+1,t),r=bn(n,!0,e+1)),r};Z.toFixed=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?bn(i):(mr(e,0,_a),t===void 0?t=s.rounding:mr(t,0,8),n=Ie(new s(i),e+Ze(i)+1,t),r=bn(n.abs(),!1,e+Ze(n)+1),i.isneg()&&!i.isZero()?"-"+r:r)};Z.toInteger=Z.toint=function(){var e=this,t=e.constructor;return Ie(new t(e),Ze(e)+1,t.rounding)};Z.toNumber=function(){return+this};Z.toPower=Z.pow=function(e){var t,r,n,i,s,o,l=this,c=l.constructor,u=12,d=+(e=new c(e));if(!e.s)return new c(Et);if(l=new c(l),!l.s){if(e.s<1)throw Error(Ft+"Infinity");return l}if(l.eq(Et))return l;if(n=c.precision,e.eq(Et))return Ie(l,n);if(t=e.e,r=e.d.length-1,o=t>=r,s=l.s,o){if((r=d<0?-d:d)<=zg){for(i=new c(Et),t=Math.ceil(n/Ve+4),ze=!1;r%2&&(i=i.times(l),pp(i.d,t)),r=$a(r/2),r!==0;)l=l.times(l),pp(l.d,t);return ze=!0,e.s<0?new c(Et).div(i):Ie(i,n)}}else if(s<0)throw Error(Ft+"NaN");return s=s<0&&e.d[Math.max(t,r)]&1?-1:1,l.s=1,ze=!1,i=e.times(yi(l,n+u)),ze=!0,i=Wg(i),i.s=s,i};Z.toPrecision=function(e,t){var r,n,i=this,s=i.constructor;return e===void 0?(r=Ze(i),n=bn(i,r<=s.toExpNeg||r>=s.toExpPos)):(mr(e,1,_a),t===void 0?t=s.rounding:mr(t,0,8),i=Ie(new s(i),e,t),r=Ze(i),n=bn(i,e<=r||r<=s.toExpNeg,e)),n};Z.toSignificantDigits=Z.tosd=function(e,t){var r=this,n=r.constructor;return e===void 0?(e=n.precision,t=n.rounding):(mr(e,1,_a),t===void 0?t=n.rounding:mr(t,0,8)),Ie(new n(r),e,t)};Z.toString=Z.valueOf=Z.val=Z.toJSON=Z[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Ze(e),r=e.constructor;return bn(e,t<=r.toExpNeg||t>=r.toExpPos)};function qg(e,t){var r,n,i,s,o,l,c,u,d=e.constructor,f=d.precision;if(!e.s||!t.s)return t.s||(t=new d(e)),ze?Ie(t,f):t;if(c=e.d,u=t.d,o=e.e,i=t.e,c=c.slice(),s=o-i,s){for(s<0?(n=c,s=-s,l=u.length):(n=u,i=o,l=c.length),o=Math.ceil(f/Ve),l=o>l?o+1:l+1,s>l&&(s=l,n.length=1),n.reverse();s--;)n.push(0);n.reverse()}for(l=c.length,s=u.length,l-s<0&&(s=l,n=u,u=c,c=n),r=0;s;)r=(c[--s]=c[s]+u[s]+r)/at|0,c[s]%=at;for(r&&(c.unshift(r),++i),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=i,ze?Ie(t,f):t}function mr(e,t,r){if(e!==~~e||e<t||e>r)throw Error(mn+e)}function or(e){var t,r,n,i=e.length-1,s="",o=e[0];if(i>0){for(s+=o,t=1;t<i;t++)n=e[t]+"",r=Ve-n.length,r&&(s+=Ir(r)),s+=n;o=e[t],n=o+"",r=Ve-n.length,r&&(s+=Ir(r))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var kr=function(){function e(n,i){var s,o=0,l=n.length;for(n=n.slice();l--;)s=n[l]*i+o,n[l]=s%at|0,o=s/at|0;return o&&n.unshift(o),n}function t(n,i,s,o){var l,c;if(s!=o)c=s>o?1:-1;else for(l=c=0;l<s;l++)if(n[l]!=i[l]){c=n[l]>i[l]?1:-1;break}return c}function r(n,i,s){for(var o=0;s--;)n[s]-=o,o=n[s]<i[s]?1:0,n[s]=o*at+n[s]-i[s];for(;!n[0]&&n.length>1;)n.shift()}return function(n,i,s,o){var l,c,u,d,f,m,v,y,p,x,j,N,b,g,h,w,S,A,O=n.constructor,C=n.s==i.s?1:-1,T=n.d,E=i.d;if(!n.s)return new O(n);if(!i.s)throw Error(Ft+"Division by zero");for(c=n.e-i.e,S=E.length,h=T.length,v=new O(C),y=v.d=[],u=0;E[u]==(T[u]||0);)++u;if(E[u]>(T[u]||0)&&--c,s==null?N=s=O.precision:o?N=s+(Ze(n)-Ze(i))+1:N=s,N<0)return new O(0);if(N=N/Ve+2|0,u=0,S==1)for(d=0,E=E[0],N++;(u<h||d)&&N--;u++)b=d*at+(T[u]||0),y[u]=b/E|0,d=b%E|0;else{for(d=at/(E[0]+1)|0,d>1&&(E=e(E,d),T=e(T,d),S=E.length,h=T.length),g=S,p=T.slice(0,S),x=p.length;x<S;)p[x++]=0;A=E.slice(),A.unshift(0),w=E[0],E[1]>=at/2&&++w;do d=0,l=t(E,p,S,x),l<0?(j=p[0],S!=x&&(j=j*at+(p[1]||0)),d=j/w|0,d>1?(d>=at&&(d=at-1),f=e(E,d),m=f.length,x=p.length,l=t(f,p,m,x),l==1&&(d--,r(f,S<m?A:E,m))):(d==0&&(l=d=1),f=E.slice()),m=f.length,m<x&&f.unshift(0),r(p,f,x),l==-1&&(x=p.length,l=t(E,p,S,x),l<1&&(d++,r(p,S<x?A:E,x))),x=p.length):l===0&&(d++,p=[0]),y[u++]=d,l&&p[0]?p[x++]=T[g]||0:(p=[T[g]],x=1);while((g++<h||p[0]!==void 0)&&N--)}return y[0]||y.shift(),v.e=c,Ie(v,o?s+Ze(v)+1:s)}}();function Wg(e,t){var r,n,i,s,o,l,c=0,u=0,d=e.constructor,f=d.precision;if(Ze(e)>16)throw Error(pf+Ze(e));if(!e.s)return new d(Et);for(t==null?(ze=!1,l=f):l=t,o=new d(.03125);e.abs().gte(.1);)e=e.times(o),u+=5;for(n=Math.log(nn(2,u))/Math.LN10*2+5|0,l+=n,r=i=s=new d(Et),d.precision=l;;){if(i=Ie(i.times(e),l),r=r.times(++c),o=s.plus(kr(i,r,l)),or(o.d).slice(0,l)===or(s.d).slice(0,l)){for(;u--;)s=Ie(s.times(s),l);return d.precision=f,t==null?(ze=!0,Ie(s,f)):s}s=o}}function Ze(e){for(var t=e.e*Ve,r=e.d[0];r>=10;r/=10)t++;return t}function mc(e,t,r){if(t>e.LN10.sd())throw ze=!0,r&&(e.precision=r),Error(Ft+"LN10 precision limit exceeded");return Ie(new e(e.LN10),t)}function Ir(e){for(var t="";e--;)t+="0";return t}function yi(e,t){var r,n,i,s,o,l,c,u,d,f=1,m=10,v=e,y=v.d,p=v.constructor,x=p.precision;if(v.s<1)throw Error(Ft+(v.s?"NaN":"-Infinity"));if(v.eq(Et))return new p(0);if(t==null?(ze=!1,u=x):u=t,v.eq(10))return t==null&&(ze=!0),mc(p,u);if(u+=m,p.precision=u,r=or(y),n=r.charAt(0),s=Ze(v),Math.abs(s)<15e14){for(;n<7&&n!=1||n==1&&r.charAt(1)>3;)v=v.times(e),r=or(v.d),n=r.charAt(0),f++;s=Ze(v),n>1?(v=new p("0."+r),s++):v=new p(n+"."+r.slice(1))}else return c=mc(p,u+2,x).times(s+""),v=yi(new p(n+"."+r.slice(1)),u-m).plus(c),p.precision=x,t==null?(ze=!0,Ie(v,x)):v;for(l=o=v=kr(v.minus(Et),v.plus(Et),u),d=Ie(v.times(v),u),i=3;;){if(o=Ie(o.times(d),u),c=l.plus(kr(o,new p(i),u)),or(c.d).slice(0,u)===or(l.d).slice(0,u))return l=l.times(2),s!==0&&(l=l.plus(mc(p,u+2,x).times(s+""))),l=kr(l,new p(f),u),p.precision=x,t==null?(ze=!0,Ie(l,x)):l;l=c,i+=2}}function hp(e,t){var r,n,i;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(n=t.search(/e/i))>0?(r<0&&(r=n),r+=+t.slice(n+1),t=t.substring(0,n)):r<0&&(r=t.length),n=0;t.charCodeAt(n)===48;)++n;for(i=t.length;t.charCodeAt(i-1)===48;)--i;if(t=t.slice(n,i),t){if(i-=n,r=r-n-1,e.e=$a(r/Ve),e.d=[],n=(r+1)%Ve,r<0&&(n+=Ve),n<i){for(n&&e.d.push(+t.slice(0,n)),i-=Ve;n<i;)e.d.push(+t.slice(n,n+=Ve));t=t.slice(n),n=Ve-t.length}else n-=i;for(;n--;)t+="0";if(e.d.push(+t),ze&&(e.e>ao||e.e<-ao))throw Error(pf+r)}else e.s=0,e.e=0,e.d=[0];return e}function Ie(e,t,r){var n,i,s,o,l,c,u,d,f=e.d;for(o=1,s=f[0];s>=10;s/=10)o++;if(n=t-o,n<0)n+=Ve,i=t,u=f[d=0];else{if(d=Math.ceil((n+1)/Ve),s=f.length,d>=s)return e;for(u=s=f[d],o=1;s>=10;s/=10)o++;n%=Ve,i=n-Ve+o}if(r!==void 0&&(s=nn(10,o-i-1),l=u/s%10|0,c=t<0||f[d+1]!==void 0||u%s,c=r<4?(l||c)&&(r==0||r==(e.s<0?3:2)):l>5||l==5&&(r==4||c||r==6&&(n>0?i>0?u/nn(10,o-i):0:f[d-1])%10&1||r==(e.s<0?8:7))),t<1||!f[0])return c?(s=Ze(e),f.length=1,t=t-s-1,f[0]=nn(10,(Ve-t%Ve)%Ve),e.e=$a(-t/Ve)||0):(f.length=1,f[0]=e.e=e.s=0),e;if(n==0?(f.length=d,s=1,d--):(f.length=d+1,s=nn(10,Ve-n),f[d]=i>0?(u/nn(10,o-i)%nn(10,i)|0)*s:0),c)for(;;)if(d==0){(f[0]+=s)==at&&(f[0]=1,++e.e);break}else{if(f[d]+=s,f[d]!=at)break;f[d--]=0,s=1}for(n=f.length;f[--n]===0;)f.pop();if(ze&&(e.e>ao||e.e<-ao))throw Error(pf+Ze(e));return e}function Kg(e,t){var r,n,i,s,o,l,c,u,d,f,m=e.constructor,v=m.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new m(e),ze?Ie(t,v):t;if(c=e.d,f=t.d,n=t.e,u=e.e,c=c.slice(),o=u-n,o){for(d=o<0,d?(r=c,o=-o,l=f.length):(r=f,n=u,l=c.length),i=Math.max(Math.ceil(v/Ve),l)+2,o>i&&(o=i,r.length=1),r.reverse(),i=o;i--;)r.push(0);r.reverse()}else{for(i=c.length,l=f.length,d=i<l,d&&(l=i),i=0;i<l;i++)if(c[i]!=f[i]){d=c[i]<f[i];break}o=0}for(d&&(r=c,c=f,f=r,t.s=-t.s),l=c.length,i=f.length-l;i>0;--i)c[l++]=0;for(i=f.length;i>o;){if(c[--i]<f[i]){for(s=i;s&&c[--s]===0;)c[s]=at-1;--c[s],c[i]+=at}c[i]-=f[i]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--n;return c[0]?(t.d=c,t.e=n,ze?Ie(t,v):t):new m(0)}function bn(e,t,r){var n,i=Ze(e),s=or(e.d),o=s.length;return t?(r&&(n=r-o)>0?s=s.charAt(0)+"."+s.slice(1)+Ir(n):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Ir(-i-1)+s,r&&(n=r-o)>0&&(s+=Ir(n))):i>=o?(s+=Ir(i+1-o),r&&(n=r-i-1)>0&&(s=s+"."+Ir(n))):((n=i+1)<o&&(s=s.slice(0,n)+"."+s.slice(n)),r&&(n=r-o)>0&&(i+1===o&&(s+="."),s+=Ir(n))),e.s<0?"-"+s:s}function pp(e,t){if(e.length>t)return e.length=t,!0}function Yg(e){var t,r,n;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(mn+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return hp(o,s.toString())}else if(typeof s!="string")throw Error(mn+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,Z6.test(s))hp(o,s);else throw Error(mn+s)}if(i.prototype=Z,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Yg,i.config=i.set=J6,e===void 0&&(e={}),e)for(n=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<n.length;)e.hasOwnProperty(r=n[t++])||(e[r]=this[r]);return i.config(e),i}function J6(e){if(!e||typeof e!="object")throw Error(Ft+"Object expected");var t,r,n,i=["precision",1,_a,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if((n=e[r=i[t]])!==void 0)if($a(n)===n&&n>=i[t+1]&&n<=i[t+2])this[r]=n;else throw Error(mn+r+": "+n);if((n=e[r="LN10"])!==void 0)if(n==Math.LN10)this[r]=new this(n);else throw Error(mn+r+": "+n);return this}var vf=Yg(Q6);Et=new vf(1);const Ce=vf;function eR(e){return aR(e)||nR(e)||rR(e)||tR()}function tR(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rR(e,t){if(e){if(typeof e=="string")return yu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yu(e,t)}}function nR(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function aR(e){if(Array.isArray(e))return yu(e)}function yu(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var iR=function(t){return t},Gg={"@@functional/placeholder":!0},Xg=function(t){return t===Gg},vp=function(t){return function r(){return arguments.length===0||arguments.length===1&&Xg(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},sR=function e(t,r){return t===1?r:vp(function(){for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];var o=i.filter(function(l){return l!==Gg}).length;return o>=t?r.apply(void 0,i):e(t-o,vp(function(){for(var l=arguments.length,c=new Array(l),u=0;u<l;u++)c[u]=arguments[u];var d=i.map(function(f){return Xg(f)?c.shift():f});return r.apply(void 0,eR(d).concat(c))}))})},bl=function(t){return sR(t.length,t)},xu=function(t,r){for(var n=[],i=t;i<r;++i)n[i-t]=i;return n},oR=bl(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),lR=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];if(!r.length)return iR;var i=r.reverse(),s=i[0],o=i.slice(1);return function(){return o.reduce(function(l,c){return c(l)},s.apply(void 0,arguments))}},gu=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},Qg=function(t){var r=null,n=null;return function(){for(var i=arguments.length,s=new Array(i),o=0;o<i;o++)s[o]=arguments[o];return r&&s.every(function(l,c){return l===r[c]})||(r=s,n=t.apply(void 0,s)),n}};function cR(e){var t;return e===0?t=1:t=Math.floor(new Ce(e).abs().log(10).toNumber())+1,t}function uR(e,t,r){for(var n=new Ce(e),i=0,s=[];n.lt(t)&&i<1e5;)s.push(n.toNumber()),n=n.add(r),i++;return s}var dR=bl(function(e,t,r){var n=+e,i=+t;return n+r*(i-n)}),fR=bl(function(e,t,r){var n=t-+e;return n=n||1/0,(r-e)/n}),mR=bl(function(e,t,r){var n=t-+e;return n=n||1/0,Math.max(0,Math.min(1,(r-e)/n))});const wl={rangeStep:uR,getDigitCount:cR,interpolateNumber:dR,uninterpolateNumber:fR,uninterpolateTruncation:mR};function bu(e){return vR(e)||pR(e)||Zg(e)||hR()}function hR(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function pR(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function vR(e){if(Array.isArray(e))return wu(e)}function xi(e,t){return gR(e)||xR(e,t)||Zg(e,t)||yR()}function yR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Zg(e,t){if(e){if(typeof e=="string")return wu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return wu(e,t)}}function wu(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xR(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],n=!0,i=!1,s=void 0;try{for(var o=e[Symbol.iterator](),l;!(n=(l=o.next()).done)&&(r.push(l.value),!(t&&r.length===t));n=!0);}catch(c){i=!0,s=c}finally{try{!n&&o.return!=null&&o.return()}finally{if(i)throw s}}return r}}function gR(e){if(Array.isArray(e))return e}function Jg(e){var t=xi(e,2),r=t[0],n=t[1],i=r,s=n;return r>n&&(i=n,s=r),[i,s]}function e0(e,t,r){if(e.lte(0))return new Ce(0);var n=wl.getDigitCount(e.toNumber()),i=new Ce(10).pow(n),s=e.div(i),o=n!==1?.05:.1,l=new Ce(Math.ceil(s.div(o).toNumber())).add(r).mul(o),c=l.mul(i);return t?c:new Ce(Math.ceil(c))}function bR(e,t,r){var n=1,i=new Ce(e);if(!i.isint()&&r){var s=Math.abs(e);s<1?(n=new Ce(10).pow(wl.getDigitCount(e)-1),i=new Ce(Math.floor(i.div(n).toNumber())).mul(n)):s>1&&(i=new Ce(Math.floor(e)))}else e===0?i=new Ce(Math.floor((t-1)/2)):r||(i=new Ce(Math.floor(e)));var o=Math.floor((t-1)/2),l=lR(oR(function(c){return i.add(new Ce(c-o).mul(n)).toNumber()}),xu);return l(0,t)}function t0(e,t,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new Ce(0),tickMin:new Ce(0),tickMax:new Ce(0)};var s=e0(new Ce(t).sub(e).div(r-1),n,i),o;e<=0&&t>=0?o=new Ce(0):(o=new Ce(e).add(t).div(2),o=o.sub(new Ce(o).mod(s)));var l=Math.ceil(o.sub(e).div(s).toNumber()),c=Math.ceil(new Ce(t).sub(o).div(s).toNumber()),u=l+c+1;return u>r?t0(e,t,r,n,i+1):(u<r&&(c=t>0?c+(r-u):c,l=t>0?l:l+(r-u)),{step:s,tickMin:o.sub(new Ce(l).mul(s)),tickMax:o.add(new Ce(c).mul(s))})}function wR(e){var t=xi(e,2),r=t[0],n=t[1],i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),l=Jg([r,n]),c=xi(l,2),u=c[0],d=c[1];if(u===-1/0||d===1/0){var f=d===1/0?[u].concat(bu(xu(0,i-1).map(function(){return 1/0}))):[].concat(bu(xu(0,i-1).map(function(){return-1/0})),[d]);return r>n?gu(f):f}if(u===d)return bR(u,i,s);var m=t0(u,d,o,s),v=m.step,y=m.tickMin,p=m.tickMax,x=wl.rangeStep(y,p.add(new Ce(.1).mul(v)),v);return r>n?gu(x):x}function jR(e,t){var r=xi(e,2),n=r[0],i=r[1],s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Jg([n,i]),l=xi(o,2),c=l[0],u=l[1];if(c===-1/0||u===1/0)return[n,i];if(c===u)return[c];var d=Math.max(t,2),f=e0(new Ce(u).sub(c).div(d-1),s,0),m=[].concat(bu(wl.rangeStep(new Ce(c),new Ce(u).sub(new Ce(.99).mul(f)),f)),[u]);return n>i?gu(m):m}var NR=Qg(wR),kR=Qg(jR),SR="Invariant failed";function wn(e,t){throw new Error(SR)}var OR=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function ra(e){"@babel/helpers - typeof";return ra=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ra(e)}function io(){return io=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},io.apply(this,arguments)}function AR(e,t){return _R(e)||TR(e,t)||ER(e,t)||PR()}function PR(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ER(e,t){if(e){if(typeof e=="string")return yp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return yp(e,t)}}function yp(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function TR(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function _R(e){if(Array.isArray(e))return e}function $R(e,t){if(e==null)return{};var r=CR(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function CR(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function MR(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DR(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,a0(n.key),n)}}function IR(e,t,r){return t&&DR(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function RR(e,t,r){return t=so(t),LR(e,r0()?Reflect.construct(t,r||[],so(e).constructor):t.apply(e,r))}function LR(e,t){if(t&&(ra(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return BR(e)}function BR(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function r0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(r0=function(){return!!e})()}function so(e){return so=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},so(e)}function FR(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ju(e,t)}function ju(e,t){return ju=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ju(e,t)}function n0(e,t,r){return t=a0(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a0(e){var t=UR(e,"string");return ra(t)=="symbol"?t:t+""}function UR(e,t){if(ra(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ra(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qi=function(e){function t(){return MR(this,t),RR(this,t,arguments)}return FR(t,e),IR(t,[{key:"render",value:function(){var n=this.props,i=n.offset,s=n.layout,o=n.width,l=n.dataKey,c=n.data,u=n.dataPointFormatter,d=n.xAxis,f=n.yAxis,m=$R(n,OR),v=se(m,!1);this.props.direction==="x"&&d.type!=="number"&&wn();var y=c.map(function(p){var x=u(p,l),j=x.x,N=x.y,b=x.value,g=x.errorVal;if(!g)return null;var h=[],w,S;if(Array.isArray(g)){var A=AR(g,2);w=A[0],S=A[1]}else w=S=g;if(s==="vertical"){var O=d.scale,C=N+i,T=C+o,E=C-o,M=O(b-w),$=O(b+S);h.push({x1:$,y1:T,x2:$,y2:E}),h.push({x1:M,y1:C,x2:$,y2:C}),h.push({x1:M,y1:T,x2:M,y2:E})}else if(s==="horizontal"){var D=f.scale,F=j+i,_=F-o,R=F+o,L=D(b-w),z=D(b+S);h.push({x1:_,y1:z,x2:R,y2:z}),h.push({x1:F,y1:L,x2:F,y2:z}),h.push({x1:_,y1:L,x2:R,y2:L})}return P.createElement(ke,io({className:"recharts-errorBar",key:"bar-".concat(h.map(function(V){return"".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))},v),h.map(function(V){return P.createElement("line",io({},V,{key:"line-".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))}))});return P.createElement(ke,{className:"recharts-errorBars"},y)}}])}(P.Component);n0(Qi,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});n0(Qi,"displayName","ErrorBar");function gi(e){"@babel/helpers - typeof";return gi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gi(e)}function xp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Qr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xp(Object(r),!0).forEach(function(n){VR(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function VR(e,t,r){return t=HR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function HR(e){var t=zR(e,"string");return gi(t)=="symbol"?t:t+""}function zR(e,t){if(gi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(gi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var i0=function(t){var r=t.children,n=t.formattedGraphicalItems,i=t.legendWidth,s=t.legendContent,o=At(r,Fr);if(!o)return null;var l=Fr.defaultProps,c=l!==void 0?Qr(Qr({},l),o.props):{},u;return o.props&&o.props.payload?u=o.props&&o.props.payload:s==="children"?u=(n||[]).reduce(function(d,f){var m=f.item,v=f.props,y=v.sectors||v.data||[];return d.concat(y.map(function(p){return{type:o.props.iconType||m.props.legendType,value:p.name,color:p.fill,payload:p}}))},[]):u=(n||[]).map(function(d){var f=d.item,m=f.type.defaultProps,v=m!==void 0?Qr(Qr({},m),f.props):{},y=v.dataKey,p=v.name,x=v.legendType,j=v.hide;return{inactive:j,dataKey:y,type:c.iconType||x||"square",color:yf(f),value:p||y,payload:v}}),Qr(Qr(Qr({},c),Fr.getWithHeight(o,i)),{},{payload:u,item:o})};function bi(e){"@babel/helpers - typeof";return bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bi(e)}function gp(e){return YR(e)||KR(e)||WR(e)||qR()}function qR(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function WR(e,t){if(e){if(typeof e=="string")return Nu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Nu(e,t)}}function KR(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function YR(e){if(Array.isArray(e))return Nu(e)}function Nu(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function bp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function We(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bp(Object(r),!0).forEach(function(n){qn(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function qn(e,t,r){return t=GR(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function GR(e){var t=XR(e,"string");return bi(t)=="symbol"?t:t+""}function XR(e,t){if(bi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(bi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tt(e,t,r){return he(e)||he(t)?r:rt(t)?$t(e,t,r):fe(t)?t(e):r}function Xa(e,t,r,n){var i=K6(e,function(l){return tt(l,t)});if(r==="number"){var s=i.filter(function(l){return Y(l)||parseFloat(l)});return s.length?[gl(s),xl(s)]:[1/0,-1/0]}var o=n?i.filter(function(l){return!he(l)}):i;return o.map(function(l){return rt(l)||l instanceof Date?l:""})}var QR=function(t){var r,n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0,s=arguments.length>3?arguments[3]:void 0,o=-1,l=(r=n==null?void 0:n.length)!==null&&r!==void 0?r:0;if(l<=1)return 0;if(s&&s.axisType==="angleAxis"&&Math.abs(Math.abs(s.range[1]-s.range[0])-360)<=1e-6)for(var c=s.range,u=0;u<l;u++){var d=u>0?i[u-1].coordinate:i[l-1].coordinate,f=i[u].coordinate,m=u>=l-1?i[0].coordinate:i[u+1].coordinate,v=void 0;if(vt(f-d)!==vt(m-f)){var y=[];if(vt(m-f)===vt(c[1]-c[0])){v=m;var p=f+c[1]-c[0];y[0]=Math.min(p,(p+d)/2),y[1]=Math.max(p,(p+d)/2)}else{v=d;var x=m+c[1]-c[0];y[0]=Math.min(f,(x+f)/2),y[1]=Math.max(f,(x+f)/2)}var j=[Math.min(f,(v+f)/2),Math.max(f,(v+f)/2)];if(t>j[0]&&t<=j[1]||t>=y[0]&&t<=y[1]){o=i[u].index;break}}else{var N=Math.min(d,m),b=Math.max(d,m);if(t>(N+f)/2&&t<=(b+f)/2){o=i[u].index;break}}}else for(var g=0;g<l;g++)if(g===0&&t<=(n[g].coordinate+n[g+1].coordinate)/2||g>0&&g<l-1&&t>(n[g].coordinate+n[g-1].coordinate)/2&&t<=(n[g].coordinate+n[g+1].coordinate)/2||g===l-1&&t>(n[g].coordinate+n[g-1].coordinate)/2){o=n[g].index;break}return o},yf=function(t){var r,n=t,i=n.type.displayName,s=(r=t.type)!==null&&r!==void 0&&r.defaultProps?We(We({},t.type.defaultProps),t.props):t.props,o=s.stroke,l=s.fill,c;switch(i){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},ZR=function(t){var r=t.barSize,n=t.totalSize,i=t.stackGroups,s=i===void 0?{}:i;if(!s)return{};for(var o={},l=Object.keys(s),c=0,u=l.length;c<u;c++)for(var d=s[l[c]].stackGroups,f=Object.keys(d),m=0,v=f.length;m<v;m++){var y=d[f[m]],p=y.items,x=y.cateAxisId,j=p.filter(function(S){return Br(S.type).indexOf("Bar")>=0});if(j&&j.length){var N=j[0].type.defaultProps,b=N!==void 0?We(We({},N),j[0].props):j[0].props,g=b.barSize,h=b[x];o[h]||(o[h]=[]);var w=he(g)?r:g;o[h].push({item:j[0],stackList:j.slice(1),barSize:he(w)?void 0:yt(w,n,0)})}}return o},JR=function(t){var r=t.barGap,n=t.barCategoryGap,i=t.bandSize,s=t.sizeList,o=s===void 0?[]:s,l=t.maxBarSize,c=o.length;if(c<1)return null;var u=yt(r,i,0,!0),d,f=[];if(o[0].barSize===+o[0].barSize){var m=!1,v=i/c,y=o.reduce(function(g,h){return g+h.barSize||0},0);y+=(c-1)*u,y>=i&&(y-=(c-1)*u,u=0),y>=i&&v>0&&(m=!0,v*=.9,y=c*v);var p=(i-y)/2>>0,x={offset:p-u,size:0};d=o.reduce(function(g,h){var w={item:h.item,position:{offset:x.offset+x.size+u,size:m?v:h.barSize}},S=[].concat(gp(g),[w]);return x=S[S.length-1].position,h.stackList&&h.stackList.length&&h.stackList.forEach(function(A){S.push({item:A,position:x})}),S},f)}else{var j=yt(n,i,0,!0);i-2*j-(c-1)*u<=0&&(u=0);var N=(i-2*j-(c-1)*u)/c;N>1&&(N>>=0);var b=l===+l?Math.min(N,l):N;d=o.reduce(function(g,h,w){var S=[].concat(gp(g),[{item:h.item,position:{offset:j+(N+u)*w+(N-b)/2,size:b}}]);return h.stackList&&h.stackList.length&&h.stackList.forEach(function(A){S.push({item:A,position:S[S.length-1].position})}),S},f)}return d},eL=function(t,r,n,i){var s=n.children,o=n.width,l=n.margin,c=o-(l.left||0)-(l.right||0),u=i0({children:s,legendWidth:c});if(u){var d=i||{},f=d.width,m=d.height,v=u.align,y=u.verticalAlign,p=u.layout;if((p==="vertical"||p==="horizontal"&&y==="middle")&&v!=="center"&&Y(t[v]))return We(We({},t),{},qn({},v,t[v]+(f||0)));if((p==="horizontal"||p==="vertical"&&v==="center")&&y!=="middle"&&Y(t[y]))return We(We({},t),{},qn({},y,t[y]+(m||0)))}return t},tL=function(t,r,n){return he(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||n==="x"?r==="xAxis":n==="y"?r==="yAxis":!0},s0=function(t,r,n,i,s){var o=r.props.children,l=Ct(o,Qi).filter(function(u){return tL(i,s,u.props.direction)});if(l&&l.length){var c=l.map(function(u){return u.props.dataKey});return t.reduce(function(u,d){var f=tt(d,n);if(he(f))return u;var m=Array.isArray(f)?[gl(f),xl(f)]:[f,f],v=c.reduce(function(y,p){var x=tt(d,p,0),j=m[0]-Math.abs(Array.isArray(x)?x[0]:x),N=m[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(j,y[0]),Math.max(N,y[1])]},[1/0,-1/0]);return[Math.min(v[0],u[0]),Math.max(v[1],u[1])]},[1/0,-1/0])}return null},rL=function(t,r,n,i,s){var o=r.map(function(l){return s0(t,l,n,s,i)}).filter(function(l){return!he(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},o0=function(t,r,n,i,s){var o=r.map(function(c){var u=c.props.dataKey;return n==="number"&&u&&s0(t,c,u,i)||Xa(t,u,n,s)});if(n==="number")return o.reduce(function(c,u){return[Math.min(c[0],u[0]),Math.max(c[1],u[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,u){for(var d=0,f=u.length;d<f;d++)l[u[d]]||(l[u[d]]=!0,c.push(u[d]));return c},[])},l0=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},c0=function(t,r,n,i){if(i)return t.map(function(c){return c.coordinate});var s,o,l=t.map(function(c){return c.coordinate===r&&(s=!0),c.coordinate===n&&(o=!0),c.coordinate});return s||l.push(r),o||l.push(n),l},Nr=function(t,r,n){if(!t)return null;var i=t.scale,s=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?i.bandwidth()/2:2,u=(r||n)&&o==="category"&&i.bandwidth?i.bandwidth()/c:0;if(u=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?vt(l[0]-l[1])*2*u:u,r&&(t.ticks||t.niceTicks)){var d=(t.ticks||t.niceTicks).map(function(f){var m=s?s.indexOf(f):f;return{coordinate:i(m)+u,value:f,offset:u}});return d.filter(function(f){return!zi(f.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(f,m){return{coordinate:i(f)+u,value:f,index:m,offset:u}}):i.ticks&&!n?i.ticks(t.tickCount).map(function(f){return{coordinate:i(f)+u,value:f,offset:u}}):i.domain().map(function(f,m){return{coordinate:i(f)+u,value:s?s[f]:f,index:m,offset:u}})},hc=new WeakMap,fs=function(t,r){if(typeof r!="function")return t;hc.has(t)||hc.set(t,new WeakMap);var n=hc.get(t);if(n.has(r))return n.get(r);var i=function(){t.apply(void 0,arguments),r.apply(void 0,arguments)};return n.set(r,i),i},u0=function(t,r,n){var i=t.scale,s=t.type,o=t.layout,l=t.axisType;if(i==="auto")return o==="radial"&&l==="radiusAxis"?{scale:fi(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:eo(),realScaleType:"linear"}:s==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!n)?{scale:Ga(),realScaleType:"point"}:s==="category"?{scale:fi(),realScaleType:"band"}:{scale:eo(),realScaleType:"linear"};if(Hi(i)){var c="scale".concat(nl(i));return{scale:(mp[c]||Ga)(),realScaleType:mp[c]?c:"point"}}return fe(i)?{scale:i}:{scale:Ga(),realScaleType:"point"}},wp=1e-4,d0=function(t){var r=t.domain();if(!(!r||r.length<=2)){var n=r.length,i=t.range(),s=Math.min(i[0],i[1])-wp,o=Math.max(i[0],i[1])+wp,l=t(r[0]),c=t(r[n-1]);(l<s||l>o||c<s||c>o)&&t.domain([r[0],r[n-1]])}},nL=function(t,r){if(!t)return null;for(var n=0,i=t.length;n<i;n++)if(t[n].item===r)return t[n].position;return null},aL=function(t,r){if(!r||r.length!==2||!Y(r[0])||!Y(r[1]))return t;var n=Math.min(r[0],r[1]),i=Math.max(r[0],r[1]),s=[t[0],t[1]];return(!Y(t[0])||t[0]<n)&&(s[0]=n),(!Y(t[1])||t[1]>i)&&(s[1]=i),s[0]>i&&(s[0]=i),s[1]<n&&(s[1]=n),s},iL=function(t){var r=t.length;if(!(r<=0))for(var n=0,i=t[0].length;n<i;++n)for(var s=0,o=0,l=0;l<r;++l){var c=zi(t[l][n][1])?t[l][n][0]:t[l][n][1];c>=0?(t[l][n][0]=s,t[l][n][1]=s+c,s=t[l][n][1]):(t[l][n][0]=o,t[l][n][1]=o+c,o=t[l][n][1])}},sL=function(t){var r=t.length;if(!(r<=0))for(var n=0,i=t[0].length;n<i;++n)for(var s=0,o=0;o<r;++o){var l=zi(t[o][n][1])?t[o][n][0]:t[o][n][1];l>=0?(t[o][n][0]=s,t[o][n][1]=s+l,s=t[o][n][1]):(t[o][n][0]=0,t[o][n][1]=0)}},oL={sign:iL,expand:CP,none:Yn,silhouette:MP,wiggle:DP,positive:sL},lL=function(t,r,n){var i=r.map(function(l){return l.props.dataKey}),s=oL[n],o=$P().keys(i).value(function(l,c){return+tt(l,c,0)}).order(Yc).offset(s);return o(t)},cL=function(t,r,n,i,s,o){if(!t)return null;var l=o?r.reverse():r,c={},u=l.reduce(function(f,m){var v,y=(v=m.type)!==null&&v!==void 0&&v.defaultProps?We(We({},m.type.defaultProps),m.props):m.props,p=y.stackId,x=y.hide;if(x)return f;var j=y[n],N=f[j]||{hasStack:!1,stackGroups:{}};if(rt(p)){var b=N.stackGroups[p]||{numericAxisId:n,cateAxisId:i,items:[]};b.items.push(m),N.hasStack=!0,N.stackGroups[p]=b}else N.stackGroups[Oa("_stackId_")]={numericAxisId:n,cateAxisId:i,items:[m]};return We(We({},f),{},qn({},j,N))},c),d={};return Object.keys(u).reduce(function(f,m){var v=u[m];if(v.hasStack){var y={};v.stackGroups=Object.keys(v.stackGroups).reduce(function(p,x){var j=v.stackGroups[x];return We(We({},p),{},qn({},x,{numericAxisId:n,cateAxisId:i,items:j.items,stackedData:lL(t,j.items,s)}))},y)}return We(We({},f),{},qn({},m,v))},d)},f0=function(t,r){var n=r.realScaleType,i=r.type,s=r.tickCount,o=r.originalDomain,l=r.allowDecimals,c=n||r.scale;if(c!=="auto"&&c!=="linear")return null;if(s&&i==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var u=t.domain();if(!u.length)return null;var d=NR(u,s,l);return t.domain([gl(d),xl(d)]),{niceTicks:d}}if(s&&i==="number"){var f=t.domain(),m=kR(f,s,l);return{niceTicks:m}}return null};function jp(e){var t=e.axis,r=e.ticks,n=e.bandSize,i=e.entry,s=e.index,o=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!he(i[t.dataKey])){var l=Cs(r,"value",i[t.dataKey]);if(l)return l.coordinate+n/2}return r[s]?r[s].coordinate+n/2:null}var c=tt(i,he(o)?t.dataKey:o);return he(c)?null:t.scale(c)}var Np=function(t){var r=t.axis,n=t.ticks,i=t.offset,s=t.bandSize,o=t.entry,l=t.index;if(r.type==="category")return n[l]?n[l].coordinate+i:null;var c=tt(o,r.dataKey,r.domain[l]);return he(c)?null:r.scale(c)-s/2+i},uL=function(t){var r=t.numericAxis,n=r.scale.domain();if(r.type==="number"){var i=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]);return i<=0&&s>=0?0:s<0?s:i}return n[0]},dL=function(t,r){var n,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?We(We({},t.type.defaultProps),t.props):t.props,s=i.stackId;if(rt(s)){var o=r[s];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},fL=function(t){return t.reduce(function(r,n){return[gl(n.concat([r[0]]).filter(Y)),xl(n.concat([r[1]]).filter(Y))]},[1/0,-1/0])},m0=function(t,r,n){return Object.keys(t).reduce(function(i,s){var o=t[s],l=o.stackedData,c=l.reduce(function(u,d){var f=fL(d.slice(r,n+1));return[Math.min(u[0],f[0]),Math.max(u[1],f[1])]},[1/0,-1/0]);return[Math.min(c[0],i[0]),Math.max(c[1],i[1])]},[1/0,-1/0]).map(function(i){return i===1/0||i===-1/0?0:i})},kp=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Sp=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,ku=function(t,r,n){if(fe(t))return t(r,n);if(!Array.isArray(t))return r;var i=[];if(Y(t[0]))i[0]=n?t[0]:Math.min(t[0],r[0]);else if(kp.test(t[0])){var s=+kp.exec(t[0])[1];i[0]=r[0]-s}else fe(t[0])?i[0]=t[0](r[0]):i[0]=r[0];if(Y(t[1]))i[1]=n?t[1]:Math.max(t[1],r[1]);else if(Sp.test(t[1])){var o=+Sp.exec(t[1])[1];i[1]=r[1]+o}else fe(t[1])?i[1]=t[1](r[1]):i[1]=r[1];return i},oo=function(t,r,n){if(t&&t.scale&&t.scale.bandwidth){var i=t.scale.bandwidth();if(!n||i>0)return i}if(t&&r&&r.length>=2){for(var s=zd(r,function(f){return f.coordinate}),o=1/0,l=1,c=s.length;l<c;l++){var u=s[l],d=s[l-1];o=Math.min((u.coordinate||0)-(d.coordinate||0),o)}return o===1/0?0:o}return n?void 0:0},Op=function(t,r,n){return!t||!t.length||Xi(t,$t(n,"type.defaultProps.domain"))?r:t},h0=function(t,r){var n=t.type.defaultProps?We(We({},t.type.defaultProps),t.props):t.props,i=n.dataKey,s=n.name,o=n.unit,l=n.formatter,c=n.tooltipType,u=n.chartType,d=n.hide;return We(We({},se(t,!1)),{},{dataKey:i,unit:o,formatter:l,name:s||i,color:yf(t),value:tt(r,i),type:c,payload:r,chartType:u,hide:d})};function wi(e){"@babel/helpers - typeof";return wi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wi(e)}function Ap(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function br(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ap(Object(r),!0).forEach(function(n){p0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ap(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function p0(e,t,r){return t=mL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mL(e){var t=hL(e,"string");return wi(t)=="symbol"?t:t+""}function hL(e,t){if(wi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(wi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function pL(e,t){return gL(e)||xL(e,t)||yL(e,t)||vL()}function vL(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yL(e,t){if(e){if(typeof e=="string")return Pp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Pp(e,t)}}function Pp(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function xL(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function gL(e){if(Array.isArray(e))return e}var lo=Math.PI/180,bL=function(t){return t*180/Math.PI},Be=function(t,r,n,i){return{x:t+Math.cos(-lo*i)*n,y:r+Math.sin(-lo*i)*n}},v0=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(n.left||0)-(n.right||0)),Math.abs(r-(n.top||0)-(n.bottom||0)))/2},wL=function(t,r,n,i,s){var o=t.width,l=t.height,c=t.startAngle,u=t.endAngle,d=yt(t.cx,o,o/2),f=yt(t.cy,l,l/2),m=v0(o,l,n),v=yt(t.innerRadius,m,0),y=yt(t.outerRadius,m,m*.8),p=Object.keys(r);return p.reduce(function(x,j){var N=r[j],b=N.domain,g=N.reversed,h;if(he(N.range))i==="angleAxis"?h=[c,u]:i==="radiusAxis"&&(h=[v,y]),g&&(h=[h[1],h[0]]);else{h=N.range;var w=h,S=pL(w,2);c=S[0],u=S[1]}var A=u0(N,s),O=A.realScaleType,C=A.scale;C.domain(b).range(h),d0(C);var T=f0(C,br(br({},N),{},{realScaleType:O})),E=br(br(br({},N),T),{},{range:h,radius:y,realScaleType:O,scale:C,cx:d,cy:f,innerRadius:v,outerRadius:y,startAngle:c,endAngle:u});return br(br({},x),{},p0({},j,E))},{})},jL=function(t,r){var n=t.x,i=t.y,s=r.x,o=r.y;return Math.sqrt(Math.pow(n-s,2)+Math.pow(i-o,2))},NL=function(t,r){var n=t.x,i=t.y,s=r.cx,o=r.cy,l=jL({x:n,y:i},{x:s,y:o});if(l<=0)return{radius:l};var c=(n-s)/l,u=Math.acos(c);return i>o&&(u=2*Math.PI-u),{radius:l,angle:bL(u),angleInRadian:u}},kL=function(t){var r=t.startAngle,n=t.endAngle,i=Math.floor(r/360),s=Math.floor(n/360),o=Math.min(i,s);return{startAngle:r-o*360,endAngle:n-o*360}},SL=function(t,r){var n=r.startAngle,i=r.endAngle,s=Math.floor(n/360),o=Math.floor(i/360),l=Math.min(s,o);return t+l*360},Ep=function(t,r){var n=t.x,i=t.y,s=NL({x:n,y:i},r),o=s.radius,l=s.angle,c=r.innerRadius,u=r.outerRadius;if(o<c||o>u)return!1;if(o===0)return!0;var d=kL(r),f=d.startAngle,m=d.endAngle,v=l,y;if(f<=m){for(;v>m;)v-=360;for(;v<f;)v+=360;y=v>=f&&v<=m}else{for(;v>f;)v-=360;for(;v<m;)v+=360;y=v>=m&&v<=f}return y?br(br({},r),{},{radius:o,angle:SL(v,r)}):null},y0=function(t){return!k.isValidElement(t)&&!fe(t)&&typeof t!="boolean"?t.className:""};function ji(e){"@babel/helpers - typeof";return ji=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ji(e)}var OL=["offset"];function AL(e){return _L(e)||TL(e)||EL(e)||PL()}function PL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function EL(e,t){if(e){if(typeof e=="string")return Su(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Su(e,t)}}function TL(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _L(e){if(Array.isArray(e))return Su(e)}function Su(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function $L(e,t){if(e==null)return{};var r=CL(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function CL(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function Tp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function et(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Tp(Object(r),!0).forEach(function(n){ML(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ML(e,t,r){return t=DL(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function DL(e){var t=IL(e,"string");return ji(t)=="symbol"?t:t+""}function IL(e,t){if(ji(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ji(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ni(){return Ni=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ni.apply(this,arguments)}var RL=function(t){var r=t.value,n=t.formatter,i=he(t.children)?r:t.children;return fe(n)?n(i):i},LL=function(t,r){var n=vt(r-t),i=Math.min(Math.abs(r-t),360);return n*i},BL=function(t,r,n){var i=t.position,s=t.viewBox,o=t.offset,l=t.className,c=s,u=c.cx,d=c.cy,f=c.innerRadius,m=c.outerRadius,v=c.startAngle,y=c.endAngle,p=c.clockWise,x=(f+m)/2,j=LL(v,y),N=j>=0?1:-1,b,g;i==="insideStart"?(b=v+N*o,g=p):i==="insideEnd"?(b=y-N*o,g=!p):i==="end"&&(b=y+N*o,g=p),g=j<=0?g:!g;var h=Be(u,d,x,b),w=Be(u,d,x,b+(g?1:-1)*359),S="M".concat(h.x,",").concat(h.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(g?0:1,`,
    `).concat(w.x,",").concat(w.y),A=he(t.id)?Oa("recharts-radial-line-"):t.id;return P.createElement("text",Ni({},n,{dominantBaseline:"central",className:ve("recharts-radial-bar-label",l)}),P.createElement("defs",null,P.createElement("path",{id:A,d:S})),P.createElement("textPath",{xlinkHref:"#".concat(A)},r))},FL=function(t){var r=t.viewBox,n=t.offset,i=t.position,s=r,o=s.cx,l=s.cy,c=s.innerRadius,u=s.outerRadius,d=s.startAngle,f=s.endAngle,m=(d+f)/2;if(i==="outside"){var v=Be(o,l,u+n,m),y=v.x,p=v.y;return{x:y,y:p,textAnchor:y>=o?"start":"end",verticalAnchor:"middle"}}if(i==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(i==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(i==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var x=(c+u)/2,j=Be(o,l,x,m),N=j.x,b=j.y;return{x:N,y:b,textAnchor:"middle",verticalAnchor:"middle"}},UL=function(t){var r=t.viewBox,n=t.parentViewBox,i=t.offset,s=t.position,o=r,l=o.x,c=o.y,u=o.width,d=o.height,f=d>=0?1:-1,m=f*i,v=f>0?"end":"start",y=f>0?"start":"end",p=u>=0?1:-1,x=p*i,j=p>0?"end":"start",N=p>0?"start":"end";if(s==="top"){var b={x:l+u/2,y:c-f*i,textAnchor:"middle",verticalAnchor:v};return et(et({},b),n?{height:Math.max(c-n.y,0),width:u}:{})}if(s==="bottom"){var g={x:l+u/2,y:c+d+m,textAnchor:"middle",verticalAnchor:y};return et(et({},g),n?{height:Math.max(n.y+n.height-(c+d),0),width:u}:{})}if(s==="left"){var h={x:l-x,y:c+d/2,textAnchor:j,verticalAnchor:"middle"};return et(et({},h),n?{width:Math.max(h.x-n.x,0),height:d}:{})}if(s==="right"){var w={x:l+u+x,y:c+d/2,textAnchor:N,verticalAnchor:"middle"};return et(et({},w),n?{width:Math.max(n.x+n.width-w.x,0),height:d}:{})}var S=n?{width:u,height:d}:{};return s==="insideLeft"?et({x:l+x,y:c+d/2,textAnchor:N,verticalAnchor:"middle"},S):s==="insideRight"?et({x:l+u-x,y:c+d/2,textAnchor:j,verticalAnchor:"middle"},S):s==="insideTop"?et({x:l+u/2,y:c+m,textAnchor:"middle",verticalAnchor:y},S):s==="insideBottom"?et({x:l+u/2,y:c+d-m,textAnchor:"middle",verticalAnchor:v},S):s==="insideTopLeft"?et({x:l+x,y:c+m,textAnchor:N,verticalAnchor:y},S):s==="insideTopRight"?et({x:l+u-x,y:c+m,textAnchor:j,verticalAnchor:y},S):s==="insideBottomLeft"?et({x:l+x,y:c+d-m,textAnchor:N,verticalAnchor:v},S):s==="insideBottomRight"?et({x:l+u-x,y:c+d-m,textAnchor:j,verticalAnchor:v},S):ja(s)&&(Y(s.x)||Ic(s.x))&&(Y(s.y)||Ic(s.y))?et({x:l+yt(s.x,u),y:c+yt(s.y,d),textAnchor:"end",verticalAnchor:"end"},S):et({x:l+u/2,y:c+d/2,textAnchor:"middle",verticalAnchor:"middle"},S)},VL=function(t){return"cx"in t&&Y(t.cx)};function it(e){var t=e.offset,r=t===void 0?5:t,n=$L(e,OL),i=et({offset:r},n),s=i.viewBox,o=i.position,l=i.value,c=i.children,u=i.content,d=i.className,f=d===void 0?"":d,m=i.textBreakAll;if(!s||he(l)&&he(c)&&!k.isValidElement(u)&&!fe(u))return null;if(k.isValidElement(u))return k.cloneElement(u,i);var v;if(fe(u)){if(v=k.createElement(u,i),k.isValidElement(v))return v}else v=RL(i);var y=VL(s),p=se(i,!0);if(y&&(o==="insideStart"||o==="insideEnd"||o==="end"))return BL(i,v,p);var x=y?FL(i):UL(i);return P.createElement(gn,Ni({className:ve("recharts-label",f)},p,x,{breakAll:m}),v)}it.displayName="Label";var x0=function(t){var r=t.cx,n=t.cy,i=t.angle,s=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,u=t.innerRadius,d=t.outerRadius,f=t.x,m=t.y,v=t.top,y=t.left,p=t.width,x=t.height,j=t.clockWise,N=t.labelViewBox;if(N)return N;if(Y(p)&&Y(x)){if(Y(f)&&Y(m))return{x:f,y:m,width:p,height:x};if(Y(v)&&Y(y))return{x:v,y,width:p,height:x}}return Y(f)&&Y(m)?{x:f,y:m,width:0,height:0}:Y(r)&&Y(n)?{cx:r,cy:n,startAngle:s||i||0,endAngle:o||i||0,innerRadius:u||0,outerRadius:d||c||l||0,clockWise:j}:t.viewBox?t.viewBox:{}},HL=function(t,r){return t?t===!0?P.createElement(it,{key:"label-implicit",viewBox:r}):rt(t)?P.createElement(it,{key:"label-implicit",viewBox:r,value:t}):k.isValidElement(t)?t.type===it?k.cloneElement(t,{key:"label-implicit",viewBox:r}):P.createElement(it,{key:"label-implicit",content:t,viewBox:r}):fe(t)?P.createElement(it,{key:"label-implicit",content:t,viewBox:r}):ja(t)?P.createElement(it,Ni({viewBox:r},t,{key:"label-implicit"})):null:null},zL=function(t,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&n&&!t.label)return null;var i=t.children,s=x0(t),o=Ct(i,it).map(function(c,u){return k.cloneElement(c,{viewBox:r||s,key:"label-".concat(u)})});if(!n)return o;var l=HL(t.label,r||s);return[l].concat(AL(o))};it.parseViewBox=x0;it.renderCallByParent=zL;function qL(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var WL=qL;const KL=Oe(WL);function ki(e){"@babel/helpers - typeof";return ki=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ki(e)}var YL=["valueAccessor"],GL=["data","dataKey","clockWise","id","textBreakAll"];function XL(e){return e8(e)||JL(e)||ZL(e)||QL()}function QL(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZL(e,t){if(e){if(typeof e=="string")return Ou(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ou(e,t)}}function JL(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function e8(e){if(Array.isArray(e))return Ou(e)}function Ou(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function co(){return co=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},co.apply(this,arguments)}function _p(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function $p(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_p(Object(r),!0).forEach(function(n){t8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_p(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function t8(e,t,r){return t=r8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r8(e){var t=n8(e,"string");return ki(t)=="symbol"?t:t+""}function n8(e,t){if(ki(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ki(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Cp(e,t){if(e==null)return{};var r=a8(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function a8(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var i8=function(t){return Array.isArray(t.value)?KL(t.value):t.value};function Sr(e){var t=e.valueAccessor,r=t===void 0?i8:t,n=Cp(e,YL),i=n.data,s=n.dataKey,o=n.clockWise,l=n.id,c=n.textBreakAll,u=Cp(n,GL);return!i||!i.length?null:P.createElement(ke,{className:"recharts-label-list"},i.map(function(d,f){var m=he(s)?r(d,f):tt(d&&d.payload,s),v=he(l)?{}:{id:"".concat(l,"-").concat(f)};return P.createElement(it,co({},se(d,!0),u,v,{parentViewBox:d.parentViewBox,value:m,textBreakAll:c,viewBox:it.parseViewBox(he(o)?d:$p($p({},d),{},{clockWise:o})),key:"label-".concat(f),index:f}))}))}Sr.displayName="LabelList";function s8(e,t){return e?e===!0?P.createElement(Sr,{key:"labelList-implicit",data:t}):P.isValidElement(e)||fe(e)?P.createElement(Sr,{key:"labelList-implicit",data:t,content:e}):ja(e)?P.createElement(Sr,co({data:t},e,{key:"labelList-implicit"})):null:null}function o8(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var n=e.children,i=Ct(n,Sr).map(function(o,l){return k.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!r)return i;var s=s8(e.label,t);return[s].concat(XL(i))}Sr.renderCallByParent=o8;function Si(e){"@babel/helpers - typeof";return Si=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Si(e)}function Au(){return Au=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Au.apply(this,arguments)}function Mp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Dp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Mp(Object(r),!0).forEach(function(n){l8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Mp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function l8(e,t,r){return t=c8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c8(e){var t=u8(e,"string");return Si(t)=="symbol"?t:t+""}function u8(e,t){if(Si(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Si(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var d8=function(t,r){var n=vt(r-t),i=Math.min(Math.abs(r-t),359.999);return n*i},ms=function(t){var r=t.cx,n=t.cy,i=t.radius,s=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,u=t.cornerIsExternal,d=c*(l?1:-1)+i,f=Math.asin(c/d)/lo,m=u?s:s+o*f,v=Be(r,n,d,m),y=Be(r,n,i,m),p=u?s-o*f:s,x=Be(r,n,d*Math.cos(f*lo),p);return{center:v,circleTangency:y,lineTangency:x,theta:f}},g0=function(t){var r=t.cx,n=t.cy,i=t.innerRadius,s=t.outerRadius,o=t.startAngle,l=t.endAngle,c=d8(o,l),u=o+c,d=Be(r,n,s,o),f=Be(r,n,s,u),m="M ".concat(d.x,",").concat(d.y,`
    A `).concat(s,",").concat(s,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>u),`,
    `).concat(f.x,",").concat(f.y,`
  `);if(i>0){var v=Be(r,n,i,o),y=Be(r,n,i,u);m+="L ".concat(y.x,",").concat(y.y,`
            A `).concat(i,",").concat(i,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=u),`,
            `).concat(v.x,",").concat(v.y," Z")}else m+="L ".concat(r,",").concat(n," Z");return m},f8=function(t){var r=t.cx,n=t.cy,i=t.innerRadius,s=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,u=t.startAngle,d=t.endAngle,f=vt(d-u),m=ms({cx:r,cy:n,radius:s,angle:u,sign:f,cornerRadius:o,cornerIsExternal:c}),v=m.circleTangency,y=m.lineTangency,p=m.theta,x=ms({cx:r,cy:n,radius:s,angle:d,sign:-f,cornerRadius:o,cornerIsExternal:c}),j=x.circleTangency,N=x.lineTangency,b=x.theta,g=c?Math.abs(u-d):Math.abs(u-d)-p-b;if(g<0)return l?"M ".concat(y.x,",").concat(y.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):g0({cx:r,cy:n,innerRadius:i,outerRadius:s,startAngle:u,endAngle:d});var h="M ".concat(y.x,",").concat(y.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(v.x,",").concat(v.y,`
    A`).concat(s,",").concat(s,",0,").concat(+(g>180),",").concat(+(f<0),",").concat(j.x,",").concat(j.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(N.x,",").concat(N.y,`
  `);if(i>0){var w=ms({cx:r,cy:n,radius:i,angle:u,sign:f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),S=w.circleTangency,A=w.lineTangency,O=w.theta,C=ms({cx:r,cy:n,radius:i,angle:d,sign:-f,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),T=C.circleTangency,E=C.lineTangency,M=C.theta,$=c?Math.abs(u-d):Math.abs(u-d)-O-M;if($<0&&o===0)return"".concat(h,"L").concat(r,",").concat(n,"Z");h+="L".concat(E.x,",").concat(E.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(T.x,",").concat(T.y,`
      A`).concat(i,",").concat(i,",0,").concat(+($>180),",").concat(+(f>0),",").concat(S.x,",").concat(S.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(f<0),",").concat(A.x,",").concat(A.y,"Z")}else h+="L".concat(r,",").concat(n,"Z");return h},m8={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},b0=function(t){var r=Dp(Dp({},m8),t),n=r.cx,i=r.cy,s=r.innerRadius,o=r.outerRadius,l=r.cornerRadius,c=r.forceCornerRadius,u=r.cornerIsExternal,d=r.startAngle,f=r.endAngle,m=r.className;if(o<s||d===f)return null;var v=ve("recharts-sector",m),y=o-s,p=yt(l,y,0,!0),x;return p>0&&Math.abs(d-f)<360?x=f8({cx:n,cy:i,innerRadius:s,outerRadius:o,cornerRadius:Math.min(p,y/2),forceCornerRadius:c,cornerIsExternal:u,startAngle:d,endAngle:f}):x=g0({cx:n,cy:i,innerRadius:s,outerRadius:o,startAngle:d,endAngle:f}),P.createElement("path",Au({},se(r,!0),{className:v,d:x,role:"img"}))};function Oi(e){"@babel/helpers - typeof";return Oi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oi(e)}function Pu(){return Pu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Pu.apply(this,arguments)}function Ip(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Rp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Ip(Object(r),!0).forEach(function(n){h8(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ip(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function h8(e,t,r){return t=p8(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p8(e){var t=v8(e,"string");return Oi(t)=="symbol"?t:t+""}function v8(e,t){if(Oi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Oi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Lp={curveBasisClosed:wP,curveBasisOpen:jP,curveBasis:bP,curveBumpX:sP,curveBumpY:oP,curveLinearClosed:NP,curveLinear:il,curveMonotoneX:kP,curveMonotoneY:SP,curveNatural:OP,curveStep:AP,curveStepAfter:EP,curveStepBefore:PP},hs=function(t){return t.x===+t.x&&t.y===+t.y},Ha=function(t){return t.x},za=function(t){return t.y},y8=function(t,r){if(fe(t))return t;var n="curve".concat(nl(t));return(n==="curveMonotone"||n==="curveBump")&&r?Lp["".concat(n).concat(r==="vertical"?"Y":"X")]:Lp[n]||il},x8=function(t){var r=t.type,n=r===void 0?"linear":r,i=t.points,s=i===void 0?[]:i,o=t.baseLine,l=t.layout,c=t.connectNulls,u=c===void 0?!1:c,d=y8(n,l),f=u?s.filter(function(p){return hs(p)}):s,m;if(Array.isArray(o)){var v=u?o.filter(function(p){return hs(p)}):o,y=f.map(function(p,x){return Rp(Rp({},p),{},{base:v[x]})});return l==="vertical"?m=is().y(za).x1(Ha).x0(function(p){return p.base.x}):m=is().x(Ha).y1(za).y0(function(p){return p.base.y}),m.defined(hs).curve(d),m(y)}return l==="vertical"&&Y(o)?m=is().y(za).x1(Ha).x0(o):Y(o)?m=is().x(Ha).y1(za).y0(o):m=px().x(Ha).y(za),m.defined(hs).curve(d),m(f)},uo=function(t){var r=t.className,n=t.points,i=t.path,s=t.pathRef;if((!n||!n.length)&&!i)return null;var o=n&&n.length?x8(t):i;return P.createElement("path",Pu({},se(t,!1),Ms(t),{className:ve("recharts-curve",r),d:o,ref:s}))},w0={exports:{}},g8="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",b8=g8,w8=b8;function j0(){}function N0(){}N0.resetWarningCache=j0;var j8=function(){function e(n,i,s,o,l,c){if(c!==w8){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:N0,resetWarningCache:j0};return r.PropTypes=r,r};w0.exports=j8();var N8=w0.exports;const Ae=Oe(N8);var k8=Object.getOwnPropertyNames,S8=Object.getOwnPropertySymbols,O8=Object.prototype.hasOwnProperty;function Bp(e,t){return function(n,i,s){return e(n,i,s)&&t(n,i,s)}}function ps(e){return function(r,n,i){if(!r||!n||typeof r!="object"||typeof n!="object")return e(r,n,i);var s=i.cache,o=s.get(r),l=s.get(n);if(o&&l)return o===n&&l===r;s.set(r,n),s.set(n,r);var c=e(r,n,i);return s.delete(r),s.delete(n),c}}function Fp(e){return k8(e).concat(S8(e))}var A8=Object.hasOwn||function(e,t){return O8.call(e,t)};function An(e,t){return e===t||!e&&!t&&e!==e&&t!==t}var P8="__v",E8="__o",T8="_owner",Up=Object.getOwnPropertyDescriptor,Vp=Object.keys;function _8(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function $8(e,t){return An(e.getTime(),t.getTime())}function C8(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function M8(e,t){return e===t}function Hp(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var i=new Array(n),s=e.entries(),o,l,c=0;(o=s.next())&&!o.done;){for(var u=t.entries(),d=!1,f=0;(l=u.next())&&!l.done;){if(i[f]){f++;continue}var m=o.value,v=l.value;if(r.equals(m[0],v[0],c,f,e,t,r)&&r.equals(m[1],v[1],m[0],v[0],e,t,r)){d=i[f]=!0;break}f++}if(!d)return!1;c++}return!0}var D8=An;function I8(e,t,r){var n=Vp(e),i=n.length;if(Vp(t).length!==i)return!1;for(;i-- >0;)if(!k0(e,t,r,n[i]))return!1;return!0}function qa(e,t,r){var n=Fp(e),i=n.length;if(Fp(t).length!==i)return!1;for(var s,o,l;i-- >0;)if(s=n[i],!k0(e,t,r,s)||(o=Up(e,s),l=Up(t,s),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function R8(e,t){return An(e.valueOf(),t.valueOf())}function L8(e,t){return e.source===t.source&&e.flags===t.flags}function zp(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var i=new Array(n),s=e.values(),o,l;(o=s.next())&&!o.done;){for(var c=t.values(),u=!1,d=0;(l=c.next())&&!l.done;){if(!i[d]&&r.equals(o.value,l.value,o.value,l.value,e,t,r)){u=i[d]=!0;break}d++}if(!u)return!1}return!0}function B8(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function F8(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function k0(e,t,r,n){return(n===T8||n===E8||n===P8)&&(e.$$typeof||t.$$typeof)?!0:A8(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var U8="[object Arguments]",V8="[object Boolean]",H8="[object Date]",z8="[object Error]",q8="[object Map]",W8="[object Number]",K8="[object Object]",Y8="[object RegExp]",G8="[object Set]",X8="[object String]",Q8="[object URL]",Z8=Array.isArray,qp=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,Wp=Object.assign,J8=Object.prototype.toString.call.bind(Object.prototype.toString);function e7(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,i=e.areFunctionsEqual,s=e.areMapsEqual,o=e.areNumbersEqual,l=e.areObjectsEqual,c=e.arePrimitiveWrappersEqual,u=e.areRegExpsEqual,d=e.areSetsEqual,f=e.areTypedArraysEqual,m=e.areUrlsEqual;return function(y,p,x){if(y===p)return!0;if(y==null||p==null)return!1;var j=typeof y;if(j!==typeof p)return!1;if(j!=="object")return j==="number"?o(y,p,x):j==="function"?i(y,p,x):!1;var N=y.constructor;if(N!==p.constructor)return!1;if(N===Object)return l(y,p,x);if(Z8(y))return t(y,p,x);if(qp!=null&&qp(y))return f(y,p,x);if(N===Date)return r(y,p,x);if(N===RegExp)return u(y,p,x);if(N===Map)return s(y,p,x);if(N===Set)return d(y,p,x);var b=J8(y);return b===H8?r(y,p,x):b===Y8?u(y,p,x):b===q8?s(y,p,x):b===G8?d(y,p,x):b===K8?typeof y.then!="function"&&typeof p.then!="function"&&l(y,p,x):b===Q8?m(y,p,x):b===z8?n(y,p,x):b===U8?l(y,p,x):b===V8||b===W8||b===X8?c(y,p,x):!1}}function t7(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,i={areArraysEqual:n?qa:_8,areDatesEqual:$8,areErrorsEqual:C8,areFunctionsEqual:M8,areMapsEqual:n?Bp(Hp,qa):Hp,areNumbersEqual:D8,areObjectsEqual:n?qa:I8,arePrimitiveWrappersEqual:R8,areRegExpsEqual:L8,areSetsEqual:n?Bp(zp,qa):zp,areTypedArraysEqual:n?qa:B8,areUrlsEqual:F8};if(r&&(i=Wp({},i,r(i))),t){var s=ps(i.areArraysEqual),o=ps(i.areMapsEqual),l=ps(i.areObjectsEqual),c=ps(i.areSetsEqual);i=Wp({},i,{areArraysEqual:s,areMapsEqual:o,areObjectsEqual:l,areSetsEqual:c})}return i}function r7(e){return function(t,r,n,i,s,o,l){return e(t,r,l)}}function n7(e){var t=e.circular,r=e.comparator,n=e.createState,i=e.equals,s=e.strict;if(n)return function(c,u){var d=n(),f=d.cache,m=f===void 0?t?new WeakMap:void 0:f,v=d.meta;return r(c,u,{cache:m,equals:i,meta:v,strict:s})};if(t)return function(c,u){return r(c,u,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};var o={cache:void 0,equals:i,meta:void 0,strict:s};return function(c,u){return r(c,u,o)}}var a7=Gr();Gr({strict:!0});Gr({circular:!0});Gr({circular:!0,strict:!0});Gr({createInternalComparator:function(){return An}});Gr({strict:!0,createInternalComparator:function(){return An}});Gr({circular:!0,createInternalComparator:function(){return An}});Gr({circular:!0,createInternalComparator:function(){return An},strict:!0});function Gr(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,n=e.createInternalComparator,i=e.createState,s=e.strict,o=s===void 0?!1:s,l=t7(e),c=e7(l),u=n?n(c):r7(c);return n7({circular:r,comparator:c,createState:i,equals:u,strict:o})}function i7(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function Kp(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,n=function i(s){r<0&&(r=s),s-r>t?(e(s),r=-1):i7(i)};requestAnimationFrame(n)}function Eu(e){"@babel/helpers - typeof";return Eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Eu(e)}function s7(e){return u7(e)||c7(e)||l7(e)||o7()}function o7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function l7(e,t){if(e){if(typeof e=="string")return Yp(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Yp(e,t)}}function Yp(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function c7(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function u7(e){if(Array.isArray(e))return e}function d7(){var e={},t=function(){return null},r=!1,n=function i(s){if(!r){if(Array.isArray(s)){if(!s.length)return;var o=s,l=s7(o),c=l[0],u=l.slice(1);if(typeof c=="number"){Kp(i.bind(null,u),c);return}i(c),Kp(i.bind(null,u));return}Eu(s)==="object"&&(e=s,t(e)),typeof s=="function"&&s()}};return{stop:function(){r=!0},start:function(s){r=!1,n(s)},subscribe:function(s){return t=s,function(){t=function(){return null}}}}}function Ai(e){"@babel/helpers - typeof";return Ai=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ai(e)}function Gp(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Xp(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Gp(Object(r),!0).forEach(function(n){S0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Gp(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function S0(e,t,r){return t=f7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f7(e){var t=m7(e,"string");return Ai(t)==="symbol"?t:String(t)}function m7(e,t){if(Ai(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ai(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var h7=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(n,i){return n.filter(function(s){return i.includes(s)})})},p7=function(t){return t},v7=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Qa=function(t,r){return Object.keys(r).reduce(function(n,i){return Xp(Xp({},n),{},S0({},i,t(i,r[i])))},{})},Qp=function(t,r,n){return t.map(function(i){return"".concat(v7(i)," ").concat(r,"ms ").concat(n)}).join(",")};function y7(e,t){return b7(e)||g7(e,t)||O0(e,t)||x7()}function x7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function g7(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function b7(e){if(Array.isArray(e))return e}function w7(e){return k7(e)||N7(e)||O0(e)||j7()}function j7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function O0(e,t){if(e){if(typeof e=="string")return Tu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Tu(e,t)}}function N7(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function k7(e){if(Array.isArray(e))return Tu(e)}function Tu(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var fo=1e-4,A0=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},P0=function(t,r){return t.map(function(n,i){return n*Math.pow(r,i)}).reduce(function(n,i){return n+i})},Zp=function(t,r){return function(n){var i=A0(t,r);return P0(i,n)}},S7=function(t,r){return function(n){var i=A0(t,r),s=[].concat(w7(i.map(function(o,l){return o*l}).slice(1)),[0]);return P0(s,n)}},Jp=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0],s=r[1],o=r[2],l=r[3];if(r.length===1)switch(r[0]){case"linear":i=0,s=0,o=1,l=1;break;case"ease":i=.25,s=.1,o=.25,l=1;break;case"ease-in":i=.42,s=0,o=1,l=1;break;case"ease-out":i=.42,s=0,o=.58,l=1;break;case"ease-in-out":i=0,s=0,o=.58,l=1;break;default:{var c=r[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var u=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),d=y7(u,4);i=d[0],s=d[1],o=d[2],l=d[3]}}}var f=Zp(i,o),m=Zp(s,l),v=S7(i,o),y=function(j){return j>1?1:j<0?0:j},p=function(j){for(var N=j>1?1:j,b=N,g=0;g<8;++g){var h=f(b)-N,w=v(b);if(Math.abs(h-N)<fo||w<fo)return m(b);b=y(b-h/w)}return m(b)};return p.isStepper=!1,p},O7=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,n=r===void 0?100:r,i=t.damping,s=i===void 0?8:i,o=t.dt,l=o===void 0?17:o,c=function(d,f,m){var v=-(d-f)*n,y=m*s,p=m+(v-y)*l/1e3,x=m*l/1e3+d;return Math.abs(x-f)<fo&&Math.abs(p)<fo?[f,0]:[x,p]};return c.isStepper=!0,c.dt=l,c},A7=function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];var i=r[0];if(typeof i=="string")switch(i){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Jp(i);case"spring":return O7();default:if(i.split("(")[0]==="cubic-bezier")return Jp(i)}return typeof i=="function"?i:null};function Pi(e){"@babel/helpers - typeof";return Pi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pi(e)}function ev(e){return T7(e)||E7(e)||E0(e)||P7()}function P7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E7(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function T7(e){if(Array.isArray(e))return $u(e)}function tv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function lt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tv(Object(r),!0).forEach(function(n){_u(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function _u(e,t,r){return t=_7(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _7(e){var t=$7(e,"string");return Pi(t)==="symbol"?t:String(t)}function $7(e,t){if(Pi(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Pi(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function C7(e,t){return I7(e)||D7(e,t)||E0(e,t)||M7()}function M7(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function E0(e,t){if(e){if(typeof e=="string")return $u(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $u(e,t)}}function $u(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function D7(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function I7(e){if(Array.isArray(e))return e}var mo=function(t,r,n){return t+(r-t)*n},Cu=function(t){var r=t.from,n=t.to;return r!==n},R7=function e(t,r,n){var i=Qa(function(s,o){if(Cu(o)){var l=t(o.from,o.to,o.velocity),c=C7(l,2),u=c[0],d=c[1];return lt(lt({},o),{},{from:u,velocity:d})}return o},r);return n<1?Qa(function(s,o){return Cu(o)?lt(lt({},o),{},{velocity:mo(o.velocity,i[s].velocity,n),from:mo(o.from,i[s].from,n)}):o},r):e(t,i,n-1)};const L7=function(e,t,r,n,i){var s=h7(e,t),o=s.reduce(function(x,j){return lt(lt({},x),{},_u({},j,[e[j],t[j]]))},{}),l=s.reduce(function(x,j){return lt(lt({},x),{},_u({},j,{from:e[j],velocity:0,to:t[j]}))},{}),c=-1,u,d,f=function(){return null},m=function(){return Qa(function(j,N){return N.from},l)},v=function(){return!Object.values(l).filter(Cu).length},y=function(j){u||(u=j);var N=j-u,b=N/r.dt;l=R7(r,l,b),i(lt(lt(lt({},e),t),m())),u=j,v()||(c=requestAnimationFrame(f))},p=function(j){d||(d=j);var N=(j-d)/n,b=Qa(function(h,w){return mo.apply(void 0,ev(w).concat([r(N)]))},o);if(i(lt(lt(lt({},e),t),b)),N<1)c=requestAnimationFrame(f);else{var g=Qa(function(h,w){return mo.apply(void 0,ev(w).concat([r(1)]))},o);i(lt(lt(lt({},e),t),g))}};return f=r.isStepper?y:p,function(){return requestAnimationFrame(f),function(){cancelAnimationFrame(c)}}};function na(e){"@babel/helpers - typeof";return na=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},na(e)}var B7=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function F7(e,t){if(e==null)return{};var r=U7(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function U7(e,t){if(e==null)return{};var r={},n=Object.keys(e),i,s;for(s=0;s<n.length;s++)i=n[s],!(t.indexOf(i)>=0)&&(r[i]=e[i]);return r}function pc(e){return q7(e)||z7(e)||H7(e)||V7()}function V7(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function H7(e,t){if(e){if(typeof e=="string")return Mu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Mu(e,t)}}function z7(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function q7(e){if(Array.isArray(e))return Mu(e)}function Mu(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function rv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rv(Object(r),!0).forEach(function(n){Ka(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Ka(e,t,r){return t=T0(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W7(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K7(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,T0(n.key),n)}}function Y7(e,t,r){return t&&K7(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function T0(e){var t=G7(e,"string");return na(t)==="symbol"?t:String(t)}function G7(e,t){if(na(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(na(n)!=="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function X7(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Du(e,t)}function Du(e,t){return Du=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Du(e,t)}function Q7(e){var t=Z7();return function(){var n=ho(e),i;if(t){var s=ho(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return Iu(this,i)}}function Iu(e,t){if(t&&(na(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ru(e)}function Ru(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z7(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ho(e){return ho=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},ho(e)}var hr=function(e){X7(r,e);var t=Q7(r);function r(n,i){var s;W7(this,r),s=t.call(this,n,i);var o=s.props,l=o.isActive,c=o.attributeName,u=o.from,d=o.to,f=o.steps,m=o.children,v=o.duration;if(s.handleStyleChange=s.handleStyleChange.bind(Ru(s)),s.changeStyle=s.changeStyle.bind(Ru(s)),!l||v<=0)return s.state={style:{}},typeof m=="function"&&(s.state={style:d}),Iu(s);if(f&&f.length)s.state={style:f[0].style};else if(u){if(typeof m=="function")return s.state={style:u},Iu(s);s.state={style:c?Ka({},c,u):u}}else s.state={style:{}};return s}return Y7(r,[{key:"componentDidMount",value:function(){var i=this.props,s=i.isActive,o=i.canBegin;this.mounted=!0,!(!s||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(i){var s=this.props,o=s.isActive,l=s.canBegin,c=s.attributeName,u=s.shouldReAnimate,d=s.to,f=s.from,m=this.state.style;if(l){if(!o){var v={style:c?Ka({},c,d):d};this.state&&m&&(c&&m[c]!==d||!c&&m!==d)&&this.setState(v);return}if(!(a7(i.to,d)&&i.canBegin&&i.isActive)){var y=!i.canBegin||!i.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var p=y||u?f:i.to;if(this.state&&m){var x={style:c?Ka({},c,p):p};(c&&m[c]!==p||!c&&m!==p)&&this.setState(x)}this.runAnimation(zt(zt({},this.props),{},{from:p,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var i=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),i&&i()}},{key:"handleStyleChange",value:function(i){this.changeStyle(i)}},{key:"changeStyle",value:function(i){this.mounted&&this.setState({style:i})}},{key:"runJSAnimation",value:function(i){var s=this,o=i.from,l=i.to,c=i.duration,u=i.easing,d=i.begin,f=i.onAnimationEnd,m=i.onAnimationStart,v=L7(o,l,A7(u),c,this.changeStyle),y=function(){s.stopJSAnimation=v()};this.manager.start([m,d,y,c,f])}},{key:"runStepAnimation",value:function(i){var s=this,o=i.steps,l=i.begin,c=i.onAnimationStart,u=o[0],d=u.style,f=u.duration,m=f===void 0?0:f,v=function(p,x,j){if(j===0)return p;var N=x.duration,b=x.easing,g=b===void 0?"ease":b,h=x.style,w=x.properties,S=x.onAnimationEnd,A=j>0?o[j-1]:x,O=w||Object.keys(h);if(typeof g=="function"||g==="spring")return[].concat(pc(p),[s.runJSAnimation.bind(s,{from:A.style,to:h,duration:N,easing:g}),N]);var C=Qp(O,N,g),T=zt(zt(zt({},A.style),h),{},{transition:C});return[].concat(pc(p),[T,N,S]).filter(p7)};return this.manager.start([c].concat(pc(o.reduce(v,[d,Math.max(m,l)])),[i.onAnimationEnd]))}},{key:"runAnimation",value:function(i){this.manager||(this.manager=d7());var s=i.begin,o=i.duration,l=i.attributeName,c=i.to,u=i.easing,d=i.onAnimationStart,f=i.onAnimationEnd,m=i.steps,v=i.children,y=this.manager;if(this.unSubscribe=y.subscribe(this.handleStyleChange),typeof u=="function"||typeof v=="function"||u==="spring"){this.runJSAnimation(i);return}if(m.length>1){this.runStepAnimation(i);return}var p=l?Ka({},l,c):c,x=Qp(Object.keys(p),o,u);y.start([d,s,zt(zt({},p),{},{transition:x}),o,f])}},{key:"render",value:function(){var i=this.props,s=i.children;i.begin;var o=i.duration;i.attributeName,i.easing;var l=i.isActive;i.steps,i.from,i.to,i.canBegin,i.onAnimationEnd,i.shouldReAnimate,i.onAnimationReStart;var c=F7(i,B7),u=k.Children.count(s),d=this.state.style;if(typeof s=="function")return s(d);if(!l||u===0||o<=0)return s;var f=function(v){var y=v.props,p=y.style,x=p===void 0?{}:p,j=y.className,N=k.cloneElement(v,zt(zt({},c),{},{style:zt(zt({},x),d),className:j}));return N};return u===1?f(k.Children.only(s)):P.createElement("div",null,k.Children.map(s,function(m){return f(m)}))}}]),r}(k.PureComponent);hr.displayName="Animate";hr.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};hr.propTypes={from:Ae.oneOfType([Ae.object,Ae.string]),to:Ae.oneOfType([Ae.object,Ae.string]),attributeName:Ae.string,duration:Ae.number,begin:Ae.number,easing:Ae.oneOfType([Ae.string,Ae.func]),steps:Ae.arrayOf(Ae.shape({duration:Ae.number.isRequired,style:Ae.object.isRequired,easing:Ae.oneOfType([Ae.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ae.func]),properties:Ae.arrayOf("string"),onAnimationEnd:Ae.func})),children:Ae.oneOfType([Ae.node,Ae.func]),isActive:Ae.bool,canBegin:Ae.bool,onAnimationEnd:Ae.func,shouldReAnimate:Ae.bool,onAnimationStart:Ae.func,onAnimationReStart:Ae.func};function Ei(e){"@babel/helpers - typeof";return Ei=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ei(e)}function po(){return po=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},po.apply(this,arguments)}function J7(e,t){return n9(e)||r9(e,t)||t9(e,t)||e9()}function e9(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function t9(e,t){if(e){if(typeof e=="string")return nv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return nv(e,t)}}function nv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function r9(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function n9(e){if(Array.isArray(e))return e}function av(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function iv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?av(Object(r),!0).forEach(function(n){a9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):av(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function a9(e,t,r){return t=i9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i9(e){var t=s9(e,"string");return Ei(t)=="symbol"?t:t+""}function s9(e,t){if(Ei(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ei(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sv=function(t,r,n,i,s){var o=Math.min(Math.abs(n)/2,Math.abs(i)/2),l=i>=0?1:-1,c=n>=0?1:-1,u=i>=0&&n>=0||i<0&&n<0?1:0,d;if(o>0&&s instanceof Array){for(var f=[0,0,0,0],m=0,v=4;m<v;m++)f[m]=s[m]>o?o:s[m];d="M".concat(t,",").concat(r+l*f[0]),f[0]>0&&(d+="A ".concat(f[0],",").concat(f[0],",0,0,").concat(u,",").concat(t+c*f[0],",").concat(r)),d+="L ".concat(t+n-c*f[1],",").concat(r),f[1]>0&&(d+="A ".concat(f[1],",").concat(f[1],",0,0,").concat(u,`,
        `).concat(t+n,",").concat(r+l*f[1])),d+="L ".concat(t+n,",").concat(r+i-l*f[2]),f[2]>0&&(d+="A ".concat(f[2],",").concat(f[2],",0,0,").concat(u,`,
        `).concat(t+n-c*f[2],",").concat(r+i)),d+="L ".concat(t+c*f[3],",").concat(r+i),f[3]>0&&(d+="A ".concat(f[3],",").concat(f[3],",0,0,").concat(u,`,
        `).concat(t,",").concat(r+i-l*f[3])),d+="Z"}else if(o>0&&s===+s&&s>0){var y=Math.min(o,s);d="M ".concat(t,",").concat(r+l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+c*y,",").concat(r,`
            L `).concat(t+n-c*y,",").concat(r,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+n,",").concat(r+l*y,`
            L `).concat(t+n,",").concat(r+i-l*y,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t+n-c*y,",").concat(r+i,`
            L `).concat(t+c*y,",").concat(r+i,`
            A `).concat(y,",").concat(y,",0,0,").concat(u,",").concat(t,",").concat(r+i-l*y," Z")}else d="M ".concat(t,",").concat(r," h ").concat(n," v ").concat(i," h ").concat(-n," Z");return d},o9=function(t,r){if(!t||!r)return!1;var n=t.x,i=t.y,s=r.x,o=r.y,l=r.width,c=r.height;if(Math.abs(l)>0&&Math.abs(c)>0){var u=Math.min(s,s+l),d=Math.max(s,s+l),f=Math.min(o,o+c),m=Math.max(o,o+c);return n>=u&&n<=d&&i>=f&&i<=m}return!1},l9={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},xf=function(t){var r=iv(iv({},l9),t),n=k.useRef(),i=k.useState(-1),s=J7(i,2),o=s[0],l=s[1];k.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var g=n.current.getTotalLength();g&&l(g)}catch{}},[]);var c=r.x,u=r.y,d=r.width,f=r.height,m=r.radius,v=r.className,y=r.animationEasing,p=r.animationDuration,x=r.animationBegin,j=r.isAnimationActive,N=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||d===0||f===0)return null;var b=ve("recharts-rectangle",v);return N?P.createElement(hr,{canBegin:o>0,from:{width:d,height:f,x:c,y:u},to:{width:d,height:f,x:c,y:u},duration:p,animationEasing:y,isActive:N},function(g){var h=g.width,w=g.height,S=g.x,A=g.y;return P.createElement(hr,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:p,isActive:j,easing:y},P.createElement("path",po({},se(r,!0),{className:b,d:sv(S,A,h,w,m),ref:n})))}):P.createElement("path",po({},se(r,!0),{className:b,d:sv(c,u,d,f,m)}))},c9=["points","className","baseLinePoints","connectNulls"];function In(){return In=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},In.apply(this,arguments)}function u9(e,t){if(e==null)return{};var r=d9(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function d9(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ov(e){return p9(e)||h9(e)||m9(e)||f9()}function f9(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function m9(e,t){if(e){if(typeof e=="string")return Lu(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Lu(e,t)}}function h9(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function p9(e){if(Array.isArray(e))return Lu(e)}function Lu(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var lv=function(t){return t&&t.x===+t.x&&t.y===+t.y},v9=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=[[]];return t.forEach(function(n){lv(n)?r[r.length-1].push(n):r[r.length-1].length>0&&r.push([])}),lv(t[0])&&r[r.length-1].push(t[0]),r[r.length-1].length<=0&&(r=r.slice(0,-1)),r},Za=function(t,r){var n=v9(t);r&&(n=[n.reduce(function(s,o){return[].concat(ov(s),ov(o))},[])]);var i=n.map(function(s){return s.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return n.length===1?"".concat(i,"Z"):i},y9=function(t,r,n){var i=Za(t,n);return"".concat(i.slice(-1)==="Z"?i.slice(0,-1):i,"L").concat(Za(r.reverse(),n).slice(1))},x9=function(t){var r=t.points,n=t.className,i=t.baseLinePoints,s=t.connectNulls,o=u9(t,c9);if(!r||!r.length)return null;var l=ve("recharts-polygon",n);if(i&&i.length){var c=o.stroke&&o.stroke!=="none",u=y9(r,i,s);return P.createElement("g",{className:l},P.createElement("path",In({},se(o,!0),{fill:u.slice(-1)==="Z"?o.fill:"none",stroke:"none",d:u})),c?P.createElement("path",In({},se(o,!0),{fill:"none",d:Za(r,s)})):null,c?P.createElement("path",In({},se(o,!0),{fill:"none",d:Za(i,s)})):null)}var d=Za(r,s);return P.createElement("path",In({},se(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",className:l,d}))};function Bu(){return Bu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bu.apply(this,arguments)}var jl=function(t){var r=t.cx,n=t.cy,i=t.r,s=t.className,o=ve("recharts-dot",s);return r===+r&&n===+n&&i===+i?P.createElement("circle",Bu({},se(t,!1),Ms(t),{className:o,cx:r,cy:n,r:i})):null};function Ti(e){"@babel/helpers - typeof";return Ti=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ti(e)}var g9=["x","y","top","left","width","height","className"];function Fu(){return Fu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Fu.apply(this,arguments)}function cv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function b9(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?cv(Object(r),!0).forEach(function(n){w9(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):cv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function w9(e,t,r){return t=j9(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function j9(e){var t=N9(e,"string");return Ti(t)=="symbol"?t:t+""}function N9(e,t){if(Ti(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ti(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function k9(e,t){if(e==null)return{};var r=S9(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function S9(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var O9=function(t,r,n,i,s,o){return"M".concat(t,",").concat(s,"v").concat(i,"M").concat(o,",").concat(r,"h").concat(n)},A9=function(t){var r=t.x,n=r===void 0?0:r,i=t.y,s=i===void 0?0:i,o=t.top,l=o===void 0?0:o,c=t.left,u=c===void 0?0:c,d=t.width,f=d===void 0?0:d,m=t.height,v=m===void 0?0:m,y=t.className,p=k9(t,g9),x=b9({x:n,y:s,top:l,left:u,width:f,height:v},p);return!Y(n)||!Y(s)||!Y(f)||!Y(v)||!Y(l)||!Y(u)?null:P.createElement("path",Fu({},se(x,!0),{className:ve("recharts-cross",y),d:O9(n,s,f,v,l,u)}))},P9=yl,E9=Vg,T9=vr;function _9(e,t){return e&&e.length?P9(e,T9(t),E9):void 0}var $9=_9;const C9=Oe($9);var M9=yl,D9=vr,I9=Hg;function R9(e,t){return e&&e.length?M9(e,D9(t),I9):void 0}var L9=R9;const B9=Oe(L9);var F9=["cx","cy","angle","ticks","axisLine"],U9=["ticks","tick","angle","tickFormatter","stroke"];function aa(e){"@babel/helpers - typeof";return aa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},aa(e)}function Ja(){return Ja=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ja.apply(this,arguments)}function uv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Zr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uv(Object(r),!0).forEach(function(n){Nl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function dv(e,t){if(e==null)return{};var r=V9(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function V9(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function H9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,$0(n.key),n)}}function z9(e,t,r){return t&&fv(e.prototype,t),r&&fv(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function q9(e,t,r){return t=vo(t),W9(e,_0()?Reflect.construct(t,r||[],vo(e).constructor):t.apply(e,r))}function W9(e,t){if(t&&(aa(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K9(e)}function K9(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_0=function(){return!!e})()}function vo(e){return vo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},vo(e)}function Y9(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uu(e,t)}function Uu(e,t){return Uu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Uu(e,t)}function Nl(e,t,r){return t=$0(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $0(e){var t=G9(e,"string");return aa(t)=="symbol"?t:t+""}function G9(e,t){if(aa(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(aa(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kl=function(e){function t(){return H9(this,t),q9(this,t,arguments)}return Y9(t,e),z9(t,[{key:"getTickValueCoord",value:function(n){var i=n.coordinate,s=this.props,o=s.angle,l=s.cx,c=s.cy;return Be(l,c,i,o)}},{key:"getTickTextAnchor",value:function(){var n=this.props.orientation,i;switch(n){case"left":i="end";break;case"right":i="start";break;default:i="middle";break}return i}},{key:"getViewBox",value:function(){var n=this.props,i=n.cx,s=n.cy,o=n.angle,l=n.ticks,c=C9(l,function(d){return d.coordinate||0}),u=B9(l,function(d){return d.coordinate||0});return{cx:i,cy:s,startAngle:o,endAngle:o,innerRadius:u.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,s=n.cy,o=n.angle,l=n.ticks,c=n.axisLine,u=dv(n,F9),d=l.reduce(function(y,p){return[Math.min(y[0],p.coordinate),Math.max(y[1],p.coordinate)]},[1/0,-1/0]),f=Be(i,s,d[0],o),m=Be(i,s,d[1],o),v=Zr(Zr(Zr({},se(u,!1)),{},{fill:"none"},se(c,!1)),{},{x1:f.x,y1:f.y,x2:m.x,y2:m.y});return P.createElement("line",Ja({className:"recharts-polar-radius-axis-line"},v))}},{key:"renderTicks",value:function(){var n=this,i=this.props,s=i.ticks,o=i.tick,l=i.angle,c=i.tickFormatter,u=i.stroke,d=dv(i,U9),f=this.getTickTextAnchor(),m=se(d,!1),v=se(o,!1),y=s.map(function(p,x){var j=n.getTickValueCoord(p),N=Zr(Zr(Zr(Zr({textAnchor:f,transform:"rotate(".concat(90-l,", ").concat(j.x,", ").concat(j.y,")")},m),{},{stroke:"none",fill:u},v),{},{index:x},j),{},{payload:p});return P.createElement(ke,Ja({className:ve("recharts-polar-radius-axis-tick",y0(o)),key:"tick-".concat(p.coordinate)},xn(n.props,p,x)),t.renderTickItem(o,N,c?c(p.value,x):p.value))});return P.createElement(ke,{className:"recharts-polar-radius-axis-ticks"},y)}},{key:"render",value:function(){var n=this.props,i=n.ticks,s=n.axisLine,o=n.tick;return!i||!i.length?null:P.createElement(ke,{className:ve("recharts-polar-radius-axis",this.props.className)},s&&this.renderAxisLine(),o&&this.renderTicks(),it.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(n,i,s){var o;return P.isValidElement(n)?o=P.cloneElement(n,i):fe(n)?o=n(i):o=P.createElement(gn,Ja({},i,{className:"recharts-polar-radius-axis-tick-value"}),s),o}}])}(k.PureComponent);Nl(kl,"displayName","PolarRadiusAxis");Nl(kl,"axisType","radiusAxis");Nl(kl,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function ia(e){"@babel/helpers - typeof";return ia=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ia(e)}function sn(){return sn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},sn.apply(this,arguments)}function mv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Jr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?mv(Object(r),!0).forEach(function(n){Sl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function X9(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,M0(n.key),n)}}function Q9(e,t,r){return t&&hv(e.prototype,t),r&&hv(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Z9(e,t,r){return t=yo(t),J9(e,C0()?Reflect.construct(t,r||[],yo(e).constructor):t.apply(e,r))}function J9(e,t){if(t&&(ia(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eB(e)}function eB(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(C0=function(){return!!e})()}function yo(e){return yo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},yo(e)}function tB(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vu(e,t)}function Vu(e,t){return Vu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Vu(e,t)}function Sl(e,t,r){return t=M0(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function M0(e){var t=rB(e,"string");return ia(t)=="symbol"?t:t+""}function rB(e,t){if(ia(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ia(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nB=Math.PI/180,pv=1e-5,Ol=function(e){function t(){return X9(this,t),Z9(this,t,arguments)}return tB(t,e),Q9(t,[{key:"getTickLineCoord",value:function(n){var i=this.props,s=i.cx,o=i.cy,l=i.radius,c=i.orientation,u=i.tickSize,d=u||8,f=Be(s,o,l,n.coordinate),m=Be(s,o,l+(c==="inner"?-1:1)*d,n.coordinate);return{x1:f.x,y1:f.y,x2:m.x,y2:m.y}}},{key:"getTickTextAnchor",value:function(n){var i=this.props.orientation,s=Math.cos(-n.coordinate*nB),o;return s>pv?o=i==="outer"?"start":"end":s<-pv?o=i==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.cx,s=n.cy,o=n.radius,l=n.axisLine,c=n.axisLineType,u=Jr(Jr({},se(this.props,!1)),{},{fill:"none"},se(l,!1));if(c==="circle")return P.createElement(jl,sn({className:"recharts-polar-angle-axis-line"},u,{cx:i,cy:s,r:o}));var d=this.props.ticks,f=d.map(function(m){return Be(i,s,o,m.coordinate)});return P.createElement(x9,sn({className:"recharts-polar-angle-axis-line"},u,{points:f}))}},{key:"renderTicks",value:function(){var n=this,i=this.props,s=i.ticks,o=i.tick,l=i.tickLine,c=i.tickFormatter,u=i.stroke,d=se(this.props,!1),f=se(o,!1),m=Jr(Jr({},d),{},{fill:"none"},se(l,!1)),v=s.map(function(y,p){var x=n.getTickLineCoord(y),j=n.getTickTextAnchor(y),N=Jr(Jr(Jr({textAnchor:j},d),{},{stroke:"none",fill:u},f),{},{index:p,payload:y,x:x.x2,y:x.y2});return P.createElement(ke,sn({className:ve("recharts-polar-angle-axis-tick",y0(o)),key:"tick-".concat(y.coordinate)},xn(n.props,y,p)),l&&P.createElement("line",sn({className:"recharts-polar-angle-axis-tick-line"},m,x)),o&&t.renderTickItem(o,N,c?c(y.value,p):y.value))});return P.createElement(ke,{className:"recharts-polar-angle-axis-ticks"},v)}},{key:"render",value:function(){var n=this.props,i=n.ticks,s=n.radius,o=n.axisLine;return s<=0||!i||!i.length?null:P.createElement(ke,{className:ve("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(n,i,s){var o;return P.isValidElement(n)?o=P.cloneElement(n,i):fe(n)?o=n(i):o=P.createElement(gn,sn({},i,{className:"recharts-polar-angle-axis-tick-value"}),s),o}}])}(k.PureComponent);Sl(Ol,"displayName","PolarAngleAxis");Sl(Ol,"axisType","angleAxis");Sl(Ol,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var aB=Bx,iB=aB(Object.getPrototypeOf,Object),sB=iB,oB=Tr,lB=sB,cB=_r,uB="[object Object]",dB=Function.prototype,fB=Object.prototype,D0=dB.toString,mB=fB.hasOwnProperty,hB=D0.call(Object);function pB(e){if(!cB(e)||oB(e)!=uB)return!1;var t=lB(e);if(t===null)return!0;var r=mB.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&D0.call(r)==hB}var vB=pB;const yB=Oe(vB);var xB=Tr,gB=_r,bB="[object Boolean]";function wB(e){return e===!0||e===!1||gB(e)&&xB(e)==bB}var jB=wB;const NB=Oe(jB);function _i(e){"@babel/helpers - typeof";return _i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_i(e)}function xo(){return xo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},xo.apply(this,arguments)}function kB(e,t){return PB(e)||AB(e,t)||OB(e,t)||SB()}function SB(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OB(e,t){if(e){if(typeof e=="string")return vv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return vv(e,t)}}function vv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function AB(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function PB(e){if(Array.isArray(e))return e}function yv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function xv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yv(Object(r),!0).forEach(function(n){EB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function EB(e,t,r){return t=TB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function TB(e){var t=_B(e,"string");return _i(t)=="symbol"?t:t+""}function _B(e,t){if(_i(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(_i(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gv=function(t,r,n,i,s){var o=n-i,l;return l="M ".concat(t,",").concat(r),l+="L ".concat(t+n,",").concat(r),l+="L ".concat(t+n-o/2,",").concat(r+s),l+="L ".concat(t+n-o/2-i,",").concat(r+s),l+="L ".concat(t,",").concat(r," Z"),l},$B={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},CB=function(t){var r=xv(xv({},$B),t),n=k.useRef(),i=k.useState(-1),s=kB(i,2),o=s[0],l=s[1];k.useEffect(function(){if(n.current&&n.current.getTotalLength)try{var b=n.current.getTotalLength();b&&l(b)}catch{}},[]);var c=r.x,u=r.y,d=r.upperWidth,f=r.lowerWidth,m=r.height,v=r.className,y=r.animationEasing,p=r.animationDuration,x=r.animationBegin,j=r.isUpdateAnimationActive;if(c!==+c||u!==+u||d!==+d||f!==+f||m!==+m||d===0&&f===0||m===0)return null;var N=ve("recharts-trapezoid",v);return j?P.createElement(hr,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:m,x:c,y:u},to:{upperWidth:d,lowerWidth:f,height:m,x:c,y:u},duration:p,animationEasing:y,isActive:j},function(b){var g=b.upperWidth,h=b.lowerWidth,w=b.height,S=b.x,A=b.y;return P.createElement(hr,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:p,easing:y},P.createElement("path",xo({},se(r,!0),{className:N,d:gv(S,A,g,h,w),ref:n})))}):P.createElement("g",null,P.createElement("path",xo({},se(r,!0),{className:N,d:gv(c,u,d,f,m)})))},MB=["option","shapeType","propTransformer","activeClassName","isActive"];function $i(e){"@babel/helpers - typeof";return $i=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$i(e)}function DB(e,t){if(e==null)return{};var r=IB(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function IB(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function bv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function go(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bv(Object(r),!0).forEach(function(n){RB(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function RB(e,t,r){return t=LB(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function LB(e){var t=BB(e,"string");return $i(t)=="symbol"?t:t+""}function BB(e,t){if($i(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if($i(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function FB(e,t){return go(go({},t),e)}function UB(e,t){return e==="symbols"}function wv(e){var t=e.shapeType,r=e.elementProps;switch(t){case"rectangle":return P.createElement(xf,r);case"trapezoid":return P.createElement(CB,r);case"sector":return P.createElement(b0,r);case"symbols":if(UB(t))return P.createElement(Id,r);break;default:return null}}function VB(e){return k.isValidElement(e)?e.props:e}function I0(e){var t=e.option,r=e.shapeType,n=e.propTransformer,i=n===void 0?FB:n,s=e.activeClassName,o=s===void 0?"recharts-active-shape":s,l=e.isActive,c=DB(e,MB),u;if(k.isValidElement(t))u=k.cloneElement(t,go(go({},c),VB(t)));else if(fe(t))u=t(c);else if(yB(t)&&!NB(t)){var d=i(t,c);u=P.createElement(wv,{shapeType:r,elementProps:d})}else{var f=c;u=P.createElement(wv,{shapeType:r,elementProps:f})}return l?P.createElement(ke,{className:o},u):u}function Al(e,t){return t!=null&&"trapezoids"in e.props}function Pl(e,t){return t!=null&&"sectors"in e.props}function Ci(e,t){return t!=null&&"points"in e.props}function HB(e,t){var r,n,i=e.x===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.x)||e.x===t.x,s=e.y===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.y)||e.y===t.y;return i&&s}function zB(e,t){var r=e.endAngle===t.endAngle,n=e.startAngle===t.startAngle;return r&&n}function qB(e,t){var r=e.x===t.x,n=e.y===t.y,i=e.z===t.z;return r&&n&&i}function WB(e,t){var r;return Al(e,t)?r=HB:Pl(e,t)?r=zB:Ci(e,t)&&(r=qB),r}function KB(e,t){var r;return Al(e,t)?r="trapezoids":Pl(e,t)?r="sectors":Ci(e,t)&&(r="points"),r}function YB(e,t){if(Al(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}if(Pl(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}return Ci(e,t)?t.payload:{}}function GB(e){var t=e.activeTooltipItem,r=e.graphicalItem,n=e.itemData,i=KB(r,t),s=YB(r,t),o=n.filter(function(c,u){var d=Xi(s,c),f=r.props[i].filter(function(y){var p=WB(r,t);return p(y,t)}),m=r.props[i].indexOf(f[f.length-1]),v=u===m;return d&&v}),l=n.indexOf(o[o.length-1]);return l}var Ns;function sa(e){"@babel/helpers - typeof";return sa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sa(e)}function Rn(){return Rn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Rn.apply(this,arguments)}function jv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Re(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?jv(Object(r),!0).forEach(function(n){Lt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):jv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function XB(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Nv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,L0(n.key),n)}}function QB(e,t,r){return t&&Nv(e.prototype,t),r&&Nv(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ZB(e,t,r){return t=bo(t),JB(e,R0()?Reflect.construct(t,r||[],bo(e).constructor):t.apply(e,r))}function JB(e,t){if(t&&(sa(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eF(e)}function eF(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(R0=function(){return!!e})()}function bo(e){return bo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},bo(e)}function tF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hu(e,t)}function Hu(e,t){return Hu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Hu(e,t)}function Lt(e,t,r){return t=L0(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function L0(e){var t=rF(e,"string");return sa(t)=="symbol"?t:t+""}function rF(e,t){if(sa(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(sa(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cr=function(e){function t(r){var n;return XB(this,t),n=ZB(this,t,[r]),Lt(n,"pieRef",null),Lt(n,"sectorRefs",[]),Lt(n,"id",Oa("recharts-pie-")),Lt(n,"handleAnimationEnd",function(){var i=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),fe(i)&&i()}),Lt(n,"handleAnimationStart",function(){var i=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),fe(i)&&i()}),n.state={isAnimationFinished:!r.isAnimationActive,prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,sectorToFocus:0},n}return tF(t,e),QB(t,[{key:"isActiveIndex",value:function(n){var i=this.props.activeIndex;return Array.isArray(i)?i.indexOf(n)!==-1:n===i}},{key:"hasActiveIndex",value:function(){var n=this.props.activeIndex;return Array.isArray(n)?n.length!==0:n||n===0}},{key:"renderLabels",value:function(n){var i=this.props.isAnimationActive;if(i&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.label,l=s.labelLine,c=s.dataKey,u=s.valueKey,d=se(this.props,!1),f=se(o,!1),m=se(l,!1),v=o&&o.offsetRadius||20,y=n.map(function(p,x){var j=(p.startAngle+p.endAngle)/2,N=Be(p.cx,p.cy,p.outerRadius+v,j),b=Re(Re(Re(Re({},d),p),{},{stroke:"none"},f),{},{index:x,textAnchor:t.getTextAnchor(N.x,p.cx)},N),g=Re(Re(Re(Re({},d),p),{},{fill:"none",stroke:p.fill},m),{},{index:x,points:[Be(p.cx,p.cy,p.outerRadius,j),N]}),h=c;return he(c)&&he(u)?h="value":he(c)&&(h=u),P.createElement(ke,{key:"label-".concat(p.startAngle,"-").concat(p.endAngle,"-").concat(p.midAngle,"-").concat(x)},l&&t.renderLabelLineItem(l,g,"line"),t.renderLabelItem(o,b,tt(p,h)))});return P.createElement(ke,{className:"recharts-pie-labels"},y)}},{key:"renderSectorsStatically",value:function(n){var i=this,s=this.props,o=s.activeShape,l=s.blendStroke,c=s.inactiveShape;return n.map(function(u,d){if((u==null?void 0:u.startAngle)===0&&(u==null?void 0:u.endAngle)===0&&n.length!==1)return null;var f=i.isActiveIndex(d),m=c&&i.hasActiveIndex()?c:null,v=f?o:m,y=Re(Re({},u),{},{stroke:l?u.fill:u.stroke,tabIndex:-1});return P.createElement(ke,Rn({ref:function(x){x&&!i.sectorRefs.includes(x)&&i.sectorRefs.push(x)},tabIndex:-1,className:"recharts-pie-sector"},xn(i.props,u,d),{key:"sector-".concat(u==null?void 0:u.startAngle,"-").concat(u==null?void 0:u.endAngle,"-").concat(u.midAngle,"-").concat(d)}),P.createElement(I0,Rn({option:v,isActive:f,shapeType:"sector"},y)))})}},{key:"renderSectorsWithAnimation",value:function(){var n=this,i=this.props,s=i.sectors,o=i.isAnimationActive,l=i.animationBegin,c=i.animationDuration,u=i.animationEasing,d=i.animationId,f=this.state,m=f.prevSectors,v=f.prevIsAnimationActive;return P.createElement(hr,{begin:l,duration:c,isActive:o,easing:u,from:{t:0},to:{t:1},key:"pie-".concat(d,"-").concat(v),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(y){var p=y.t,x=[],j=s&&s[0],N=j.startAngle;return s.forEach(function(b,g){var h=m&&m[g],w=g>0?$t(b,"paddingAngle",0):0;if(h){var S=Pt(h.endAngle-h.startAngle,b.endAngle-b.startAngle),A=Re(Re({},b),{},{startAngle:N+w,endAngle:N+S(p)+w});x.push(A),N=A.endAngle}else{var O=b.endAngle,C=b.startAngle,T=Pt(0,O-C),E=T(p),M=Re(Re({},b),{},{startAngle:N+w,endAngle:N+E+w});x.push(M),N=M.endAngle}}),P.createElement(ke,null,n.renderSectorsStatically(x))})}},{key:"attachKeyboardHandlers",value:function(n){var i=this;n.onkeydown=function(s){if(!s.altKey)switch(s.key){case"ArrowLeft":{var o=++i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[o].focus(),i.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--i.state.sectorToFocus<0?i.sectorRefs.length-1:i.state.sectorToFocus%i.sectorRefs.length;i.sectorRefs[l].focus(),i.setState({sectorToFocus:l});break}case"Escape":{i.sectorRefs[i.state.sectorToFocus].blur(),i.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var n=this.props,i=n.sectors,s=n.isAnimationActive,o=this.state.prevSectors;return s&&i&&i.length&&(!o||!Xi(o,i))?this.renderSectorsWithAnimation():this.renderSectorsStatically(i)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var n=this,i=this.props,s=i.hide,o=i.sectors,l=i.className,c=i.label,u=i.cx,d=i.cy,f=i.innerRadius,m=i.outerRadius,v=i.isAnimationActive,y=this.state.isAnimationFinished;if(s||!o||!o.length||!Y(u)||!Y(d)||!Y(f)||!Y(m))return null;var p=ve("recharts-pie",l);return P.createElement(ke,{tabIndex:this.props.rootTabIndex,className:p,ref:function(j){n.pieRef=j}},this.renderSectors(),c&&this.renderLabels(o),it.renderCallByParent(this.props,null,!1),(!v||y)&&Sr.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return i.prevIsAnimationActive!==n.isAnimationActive?{prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:[],isAnimationFinished:!0}:n.isAnimationActive&&n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curSectors:n.sectors,prevSectors:i.curSectors,isAnimationFinished:!0}:n.sectors!==i.curSectors?{curSectors:n.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(n,i){return n>i?"start":n<i?"end":"middle"}},{key:"renderLabelLineItem",value:function(n,i,s){if(P.isValidElement(n))return P.cloneElement(n,i);if(fe(n))return n(i);var o=ve("recharts-pie-label-line",typeof n!="boolean"?n.className:"");return P.createElement(uo,Rn({},i,{key:s,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(n,i,s){if(P.isValidElement(n))return P.cloneElement(n,i);var o=s;if(fe(n)&&(o=n(i),P.isValidElement(o)))return o;var l=ve("recharts-pie-label-text",typeof n!="boolean"&&!fe(n)?n.className:"");return P.createElement(gn,Rn({},i,{alignmentBaseline:"middle",className:l}),o)}}])}(k.PureComponent);Ns=Cr;Lt(Cr,"displayName","Pie");Lt(Cr,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!cr.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});Lt(Cr,"parseDeltaAngle",function(e,t){var r=vt(t-e),n=Math.min(Math.abs(t-e),360);return r*n});Lt(Cr,"getRealPieData",function(e){var t=e.data,r=e.children,n=se(e,!1),i=Ct(r,ul);return t&&t.length?t.map(function(s,o){return Re(Re(Re({payload:s},n),s),i&&i[o]&&i[o].props)}):i&&i.length?i.map(function(s){return Re(Re({},n),s.props)}):[]});Lt(Cr,"parseCoordinateOfPie",function(e,t){var r=t.top,n=t.left,i=t.width,s=t.height,o=v0(i,s),l=n+yt(e.cx,i,i/2),c=r+yt(e.cy,s,s/2),u=yt(e.innerRadius,o,0),d=yt(e.outerRadius,o,o*.8),f=e.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:l,cy:c,innerRadius:u,outerRadius:d,maxRadius:f}});Lt(Cr,"getComposedData",function(e){var t=e.item,r=e.offset,n=t.type.defaultProps!==void 0?Re(Re({},t.type.defaultProps),t.props):t.props,i=Ns.getRealPieData(n);if(!i||!i.length)return null;var s=n.cornerRadius,o=n.startAngle,l=n.endAngle,c=n.paddingAngle,u=n.dataKey,d=n.nameKey,f=n.valueKey,m=n.tooltipType,v=Math.abs(n.minAngle),y=Ns.parseCoordinateOfPie(n,r),p=Ns.parseDeltaAngle(o,l),x=Math.abs(p),j=u;he(u)&&he(f)?(qr(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j="value"):he(u)&&(qr(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),j=f);var N=i.filter(function(A){return tt(A,j,0)!==0}).length,b=(x>=360?N:N-1)*c,g=x-N*v-b,h=i.reduce(function(A,O){var C=tt(O,j,0);return A+(Y(C)?C:0)},0),w;if(h>0){var S;w=i.map(function(A,O){var C=tt(A,j,0),T=tt(A,d,O),E=(Y(C)?C:0)/h,M;O?M=S.endAngle+vt(p)*c*(C!==0?1:0):M=o;var $=M+vt(p)*((C!==0?v:0)+E*g),D=(M+$)/2,F=(y.innerRadius+y.outerRadius)/2,_=[{name:T,value:C,payload:A,dataKey:j,type:m}],R=Be(y.cx,y.cy,F,D);return S=Re(Re(Re({percent:E,cornerRadius:s,name:T,tooltipPayload:_,midAngle:D,middleRadius:F,tooltipPosition:R},A),y),{},{value:tt(A,j),startAngle:M,endAngle:$,payload:A,paddingAngle:vt(p)*c}),S})}return Re(Re({},y),{},{sectors:w,data:i})});var nF=Math.ceil,aF=Math.max;function iF(e,t,r,n){for(var i=-1,s=aF(nF((t-e)/(r||1)),0),o=Array(s);s--;)o[n?s:++i]=e,e+=r;return o}var sF=iF,oF=ag,kv=1/0,lF=17976931348623157e292;function cF(e){if(!e)return e===0?e:0;if(e=oF(e),e===kv||e===-kv){var t=e<0?-1:1;return t*lF}return e===e?e:0}var B0=cF,uF=sF,dF=cl,vc=B0;function fF(e){return function(t,r,n){return n&&typeof n!="number"&&dF(t,r,n)&&(r=n=void 0),t=vc(t),r===void 0?(r=t,t=0):r=vc(r),n=n===void 0?t<r?1:-1:vc(n),uF(t,r,n,e)}}var mF=fF,hF=mF,pF=hF(),vF=pF;const wo=Oe(vF);function Mi(e){"@babel/helpers - typeof";return Mi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mi(e)}function Sv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ov(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Sv(Object(r),!0).forEach(function(n){F0(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Sv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function F0(e,t,r){return t=yF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function yF(e){var t=xF(e,"string");return Mi(t)=="symbol"?t:t+""}function xF(e,t){if(Mi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Mi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gF=["Webkit","Moz","O","ms"],bF=function(t,r){var n=t.replace(/(\w)/,function(s){return s.toUpperCase()}),i=gF.reduce(function(s,o){return Ov(Ov({},s),{},F0({},o+n,r))},{});return i[t]=r,i};function oa(e){"@babel/helpers - typeof";return oa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oa(e)}function jo(){return jo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},jo.apply(this,arguments)}function Av(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function yc(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Av(Object(r),!0).forEach(function(n){Ot(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Av(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function wF(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Pv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,V0(n.key),n)}}function jF(e,t,r){return t&&Pv(e.prototype,t),r&&Pv(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function NF(e,t,r){return t=No(t),kF(e,U0()?Reflect.construct(t,r||[],No(e).constructor):t.apply(e,r))}function kF(e,t){if(t&&(oa(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return SF(e)}function SF(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(U0=function(){return!!e})()}function No(e){return No=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},No(e)}function OF(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zu(e,t)}function zu(e,t){return zu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},zu(e,t)}function Ot(e,t,r){return t=V0(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V0(e){var t=AF(e,"string");return oa(t)=="symbol"?t:t+""}function AF(e,t){if(oa(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(oa(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var PF=function(t){var r=t.data,n=t.startIndex,i=t.endIndex,s=t.x,o=t.width,l=t.travellerWidth;if(!r||!r.length)return{};var c=r.length,u=Ga().domain(wo(0,c)).range([s,s+o-l]),d=u.domain().map(function(f){return u(f)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:u(n),endX:u(i),scale:u,scaleValues:d}},Ev=function(t){return t.changedTouches&&!!t.changedTouches.length},la=function(e){function t(r){var n;return wF(this,t),n=NF(this,t,[r]),Ot(n,"handleDrag",function(i){n.leaveTimer&&(clearTimeout(n.leaveTimer),n.leaveTimer=null),n.state.isTravellerMoving?n.handleTravellerMove(i):n.state.isSlideMoving&&n.handleSlideDrag(i)}),Ot(n,"handleTouchMove",function(i){i.changedTouches!=null&&i.changedTouches.length>0&&n.handleDrag(i.changedTouches[0])}),Ot(n,"handleDragEnd",function(){n.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var i=n.props,s=i.endIndex,o=i.onDragEnd,l=i.startIndex;o==null||o({endIndex:s,startIndex:l})}),n.detachDragEndListener()}),Ot(n,"handleLeaveWrapper",function(){(n.state.isTravellerMoving||n.state.isSlideMoving)&&(n.leaveTimer=window.setTimeout(n.handleDragEnd,n.props.leaveTimeOut))}),Ot(n,"handleEnterSlideOrTraveller",function(){n.setState({isTextActive:!0})}),Ot(n,"handleLeaveSlideOrTraveller",function(){n.setState({isTextActive:!1})}),Ot(n,"handleSlideDragStart",function(i){var s=Ev(i)?i.changedTouches[0]:i;n.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:s.pageX}),n.attachDragEndListener()}),n.travellerDragStartHandlers={startX:n.handleTravellerDragStart.bind(n,"startX"),endX:n.handleTravellerDragStart.bind(n,"endX")},n.state={},n}return OF(t,e),jF(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(n){var i=n.startX,s=n.endX,o=this.state.scaleValues,l=this.props,c=l.gap,u=l.data,d=u.length-1,f=Math.min(i,s),m=Math.max(i,s),v=t.getIndexInRange(o,f),y=t.getIndexInRange(o,m);return{startIndex:v-v%c,endIndex:y===d?d:y-y%c}}},{key:"getTextOfTick",value:function(n){var i=this.props,s=i.data,o=i.tickFormatter,l=i.dataKey,c=tt(s[n],l,n);return fe(o)?o(c,n):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(n){var i=this.state,s=i.slideMoveStartX,o=i.startX,l=i.endX,c=this.props,u=c.x,d=c.width,f=c.travellerWidth,m=c.startIndex,v=c.endIndex,y=c.onChange,p=n.pageX-s;p>0?p=Math.min(p,u+d-f-l,u+d-f-o):p<0&&(p=Math.max(p,u-o,u-l));var x=this.getIndex({startX:o+p,endX:l+p});(x.startIndex!==m||x.endIndex!==v)&&y&&y(x),this.setState({startX:o+p,endX:l+p,slideMoveStartX:n.pageX})}},{key:"handleTravellerDragStart",value:function(n,i){var s=Ev(i)?i.changedTouches[0]:i;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:n,brushMoveStartX:s.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(n){var i=this.state,s=i.brushMoveStartX,o=i.movingTravellerId,l=i.endX,c=i.startX,u=this.state[o],d=this.props,f=d.x,m=d.width,v=d.travellerWidth,y=d.onChange,p=d.gap,x=d.data,j={startX:this.state.startX,endX:this.state.endX},N=n.pageX-s;N>0?N=Math.min(N,f+m-v-u):N<0&&(N=Math.max(N,f-u)),j[o]=u+N;var b=this.getIndex(j),g=b.startIndex,h=b.endIndex,w=function(){var A=x.length-1;return o==="startX"&&(l>c?g%p===0:h%p===0)||l<c&&h===A||o==="endX"&&(l>c?h%p===0:g%p===0)||l>c&&h===A};this.setState(Ot(Ot({},o,u+N),"brushMoveStartX",n.pageX),function(){y&&w()&&y(b)})}},{key:"handleTravellerMoveKeyboard",value:function(n,i){var s=this,o=this.state,l=o.scaleValues,c=o.startX,u=o.endX,d=this.state[i],f=l.indexOf(d);if(f!==-1){var m=f+n;if(!(m===-1||m>=l.length)){var v=l[m];i==="startX"&&v>=u||i==="endX"&&v<=c||this.setState(Ot({},i,v),function(){s.props.onChange(s.getIndex({startX:s.state.startX,endX:s.state.endX}))})}}}},{key:"renderBackground",value:function(){var n=this.props,i=n.x,s=n.y,o=n.width,l=n.height,c=n.fill,u=n.stroke;return P.createElement("rect",{stroke:u,fill:c,x:i,y:s,width:o,height:l})}},{key:"renderPanorama",value:function(){var n=this.props,i=n.x,s=n.y,o=n.width,l=n.height,c=n.data,u=n.children,d=n.padding,f=k.Children.only(u);return f?P.cloneElement(f,{x:i,y:s,width:o,height:l,margin:d,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(n,i){var s,o,l=this,c=this.props,u=c.y,d=c.travellerWidth,f=c.height,m=c.traveller,v=c.ariaLabel,y=c.data,p=c.startIndex,x=c.endIndex,j=Math.max(n,this.props.x),N=yc(yc({},se(this.props,!1)),{},{x:j,y:u,width:d,height:f}),b=v||"Min value: ".concat((s=y[p])===null||s===void 0?void 0:s.name,", Max value: ").concat((o=y[x])===null||o===void 0?void 0:o.name);return P.createElement(ke,{tabIndex:0,role:"slider","aria-label":b,"aria-valuenow":n,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[i],onTouchStart:this.travellerDragStartHandlers[i],onKeyDown:function(h){["ArrowLeft","ArrowRight"].includes(h.key)&&(h.preventDefault(),h.stopPropagation(),l.handleTravellerMoveKeyboard(h.key==="ArrowRight"?1:-1,i))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(m,N))}},{key:"renderSlide",value:function(n,i){var s=this.props,o=s.y,l=s.height,c=s.stroke,u=s.travellerWidth,d=Math.min(n,i)+u,f=Math.max(Math.abs(i-n)-u,0);return P.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:d,y:o,width:f,height:l})}},{key:"renderText",value:function(){var n=this.props,i=n.startIndex,s=n.endIndex,o=n.y,l=n.height,c=n.travellerWidth,u=n.stroke,d=this.state,f=d.startX,m=d.endX,v=5,y={pointerEvents:"none",fill:u};return P.createElement(ke,{className:"recharts-brush-texts"},P.createElement(gn,jo({textAnchor:"end",verticalAnchor:"middle",x:Math.min(f,m)-v,y:o+l/2},y),this.getTextOfTick(i)),P.createElement(gn,jo({textAnchor:"start",verticalAnchor:"middle",x:Math.max(f,m)+c+v,y:o+l/2},y),this.getTextOfTick(s)))}},{key:"render",value:function(){var n=this.props,i=n.data,s=n.className,o=n.children,l=n.x,c=n.y,u=n.width,d=n.height,f=n.alwaysShowText,m=this.state,v=m.startX,y=m.endX,p=m.isTextActive,x=m.isSlideMoving,j=m.isTravellerMoving,N=m.isTravellerFocused;if(!i||!i.length||!Y(l)||!Y(c)||!Y(u)||!Y(d)||u<=0||d<=0)return null;var b=ve("recharts-brush",s),g=P.Children.count(o)===1,h=bF("userSelect","none");return P.createElement(ke,{className:b,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:h},this.renderBackground(),g&&this.renderPanorama(),this.renderSlide(v,y),this.renderTravellerLayer(v,"startX"),this.renderTravellerLayer(y,"endX"),(p||x||j||N||f)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(n){var i=n.x,s=n.y,o=n.width,l=n.height,c=n.stroke,u=Math.floor(s+l/2)-1;return P.createElement(P.Fragment,null,P.createElement("rect",{x:i,y:s,width:o,height:l,fill:c,stroke:"none"}),P.createElement("line",{x1:i+1,y1:u,x2:i+o-1,y2:u,fill:"none",stroke:"#fff"}),P.createElement("line",{x1:i+1,y1:u+2,x2:i+o-1,y2:u+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(n,i){var s;return P.isValidElement(n)?s=P.cloneElement(n,i):fe(n)?s=n(i):s=t.renderDefaultTraveller(i),s}},{key:"getDerivedStateFromProps",value:function(n,i){var s=n.data,o=n.width,l=n.x,c=n.travellerWidth,u=n.updateId,d=n.startIndex,f=n.endIndex;if(s!==i.prevData||u!==i.prevUpdateId)return yc({prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o},s&&s.length?PF({data:s,width:o,x:l,travellerWidth:c,startIndex:d,endIndex:f}):{scale:null,scaleValues:null});if(i.scale&&(o!==i.prevWidth||l!==i.prevX||c!==i.prevTravellerWidth)){i.scale.range([l,l+o-c]);var m=i.scale.domain().map(function(v){return i.scale(v)});return{prevData:s,prevTravellerWidth:c,prevUpdateId:u,prevX:l,prevWidth:o,startX:i.scale(n.startIndex),endX:i.scale(n.endIndex),scaleValues:m}}return null}},{key:"getIndexInRange",value:function(n,i){for(var s=n.length,o=0,l=s-1;l-o>1;){var c=Math.floor((o+l)/2);n[c]>i?l=c:o=c}return i>=n[l]?l:o}}])}(k.PureComponent);Ot(la,"displayName","Brush");Ot(la,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var EF=Hd;function TF(e,t){var r;return EF(e,function(n,i,s){return r=t(n,i,s),!r}),!!r}var _F=TF,$F=_x,CF=vr,MF=_F,DF=kt,IF=cl;function RF(e,t,r){var n=DF(e)?$F:MF;return r&&IF(e,t,r)&&(t=void 0),n(e,CF(t))}var LF=RF;const BF=Oe(LF);var dr=function(t,r){var n=t.alwaysShow,i=t.ifOverflow;return n&&(i="extendDomain"),i===r},Tv=Jx;function FF(e,t,r){t=="__proto__"&&Tv?Tv(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var UF=FF,VF=UF,HF=Qx,zF=vr;function qF(e,t){var r={};return t=zF(t),HF(e,function(n,i,s){VF(r,i,t(n,i,s))}),r}var WF=qF;const KF=Oe(WF);function YF(e,t){for(var r=-1,n=e==null?0:e.length;++r<n;)if(!t(e[r],r,e))return!1;return!0}var GF=YF,XF=Hd;function QF(e,t){var r=!0;return XF(e,function(n,i,s){return r=!!t(n,i,s),r}),r}var ZF=QF,JF=GF,eU=ZF,tU=vr,rU=kt,nU=cl;function aU(e,t,r){var n=rU(e)?JF:eU;return r&&nU(e,t,r)&&(t=void 0),n(e,tU(t))}var iU=aU;const H0=Oe(iU);var sU=["x","y"];function Di(e){"@babel/helpers - typeof";return Di=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Di(e)}function qu(){return qu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},qu.apply(this,arguments)}function _v(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Wa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_v(Object(r),!0).forEach(function(n){oU(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_v(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oU(e,t,r){return t=lU(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lU(e){var t=cU(e,"string");return Di(t)=="symbol"?t:t+""}function cU(e,t){if(Di(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Di(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uU(e,t){if(e==null)return{};var r=dU(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function dU(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function fU(e,t){var r=e.x,n=e.y,i=uU(e,sU),s="".concat(r),o=parseInt(s,10),l="".concat(n),c=parseInt(l,10),u="".concat(t.height||i.height),d=parseInt(u,10),f="".concat(t.width||i.width),m=parseInt(f,10);return Wa(Wa(Wa(Wa(Wa({},t),i),o?{x:o}:{}),c?{y:c}:{}),{},{height:d,width:m,name:t.name,radius:t.radius})}function $v(e){return P.createElement(I0,qu({shapeType:"rectangle",propTransformer:fU,activeClassName:"recharts-active-bar"},e))}var mU=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(n,i){if(typeof t=="number")return t;var s=typeof n=="number";return s?t(n,i):(s||wn(),r)}},hU=["value","background"],z0;function ca(e){"@babel/helpers - typeof";return ca=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ca(e)}function pU(e,t){if(e==null)return{};var r=vU(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function vU(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ko(){return ko=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ko.apply(this,arguments)}function Cv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Ge(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Cv(Object(r),!0).forEach(function(n){Lr(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function yU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Mv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,W0(n.key),n)}}function xU(e,t,r){return t&&Mv(e.prototype,t),r&&Mv(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function gU(e,t,r){return t=So(t),bU(e,q0()?Reflect.construct(t,r||[],So(e).constructor):t.apply(e,r))}function bU(e,t){if(t&&(ca(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wU(e)}function wU(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q0(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(q0=function(){return!!e})()}function So(e){return So=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},So(e)}function jU(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Wu(e,t)}function Wu(e,t){return Wu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Wu(e,t)}function Lr(e,t,r){return t=W0(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function W0(e){var t=NU(e,"string");return ca(t)=="symbol"?t:t+""}function NU(e,t){if(ca(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ca(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zi=function(e){function t(){var r;yU(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=gU(this,t,[].concat(i)),Lr(r,"state",{isAnimationFinished:!1}),Lr(r,"id",Oa("recharts-bar-")),Lr(r,"handleAnimationEnd",function(){var o=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),o&&o()}),Lr(r,"handleAnimationStart",function(){var o=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),o&&o()}),r}return jU(t,e),xU(t,[{key:"renderRectanglesStatically",value:function(n){var i=this,s=this.props,o=s.shape,l=s.dataKey,c=s.activeIndex,u=s.activeBar,d=se(this.props,!1);return n&&n.map(function(f,m){var v=m===c,y=v?u:o,p=Ge(Ge(Ge({},d),f),{},{isActive:v,option:y,index:m,dataKey:l,onAnimationStart:i.handleAnimationStart,onAnimationEnd:i.handleAnimationEnd});return P.createElement(ke,ko({className:"recharts-bar-rectangle"},xn(i.props,f,m),{key:"rectangle-".concat(f==null?void 0:f.x,"-").concat(f==null?void 0:f.y,"-").concat(f==null?void 0:f.value)}),P.createElement($v,p))})}},{key:"renderRectanglesWithAnimation",value:function(){var n=this,i=this.props,s=i.data,o=i.layout,l=i.isAnimationActive,c=i.animationBegin,u=i.animationDuration,d=i.animationEasing,f=i.animationId,m=this.state.prevData;return P.createElement(hr,{begin:c,duration:u,isActive:l,easing:d,from:{t:0},to:{t:1},key:"bar-".concat(f),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(v){var y=v.t,p=s.map(function(x,j){var N=m&&m[j];if(N){var b=Pt(N.x,x.x),g=Pt(N.y,x.y),h=Pt(N.width,x.width),w=Pt(N.height,x.height);return Ge(Ge({},x),{},{x:b(y),y:g(y),width:h(y),height:w(y)})}if(o==="horizontal"){var S=Pt(0,x.height),A=S(y);return Ge(Ge({},x),{},{y:x.y+x.height-A,height:A})}var O=Pt(0,x.width),C=O(y);return Ge(Ge({},x),{},{width:C})});return P.createElement(ke,null,n.renderRectanglesStatically(p))})}},{key:"renderRectangles",value:function(){var n=this.props,i=n.data,s=n.isAnimationActive,o=this.state.prevData;return s&&i&&i.length&&(!o||!Xi(o,i))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(i)}},{key:"renderBackground",value:function(){var n=this,i=this.props,s=i.data,o=i.dataKey,l=i.activeIndex,c=se(this.props.background,!1);return s.map(function(u,d){u.value;var f=u.background,m=pU(u,hU);if(!f)return null;var v=Ge(Ge(Ge(Ge(Ge({},m),{},{fill:"#eee"},f),c),xn(n.props,u,d)),{},{onAnimationStart:n.handleAnimationStart,onAnimationEnd:n.handleAnimationEnd,dataKey:o,index:d,className:"recharts-bar-background-rectangle"});return P.createElement($v,ko({key:"background-bar-".concat(d),option:n.props.background,isActive:d===l},v))})}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.data,l=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,f=Ct(d,Qi);if(!f)return null;var m=u==="vertical"?o[0].height/2:o[0].width/2,v=function(x,j){var N=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:N,errorVal:tt(x,j)}},y={clipPath:n?"url(#clipPath-".concat(i,")"):null};return P.createElement(ke,y,f.map(function(p){return P.cloneElement(p,{key:"error-bar-".concat(i,"-").concat(p.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,offset:m,dataPointFormatter:v})}))}},{key:"render",value:function(){var n=this.props,i=n.hide,s=n.data,o=n.className,l=n.xAxis,c=n.yAxis,u=n.left,d=n.top,f=n.width,m=n.height,v=n.isAnimationActive,y=n.background,p=n.id;if(i||!s||!s.length)return null;var x=this.state.isAnimationFinished,j=ve("recharts-bar",o),N=l&&l.allowDataOverflow,b=c&&c.allowDataOverflow,g=N||b,h=he(p)?this.id:p;return P.createElement(ke,{className:j},N||b?P.createElement("defs",null,P.createElement("clipPath",{id:"clipPath-".concat(h)},P.createElement("rect",{x:N?u:u-f/2,y:b?d:d-m/2,width:N?f:f*2,height:b?m:m*2}))):null,P.createElement(ke,{className:"recharts-bar-rectangles",clipPath:g?"url(#clipPath-".concat(h,")"):null},y?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(g,h),(!v||x)&&Sr.renderCallByParent(this.props,s))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curData:n.data,prevData:i.curData}:n.data!==i.curData?{curData:n.data}:null}}])}(k.PureComponent);z0=Zi;Lr(Zi,"displayName","Bar");Lr(Zi,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!cr.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Lr(Zi,"getComposedData",function(e){var t=e.props,r=e.item,n=e.barPosition,i=e.bandSize,s=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,u=e.stackedData,d=e.dataStartIndex,f=e.displayedData,m=e.offset,v=nL(n,r);if(!v)return null;var y=t.layout,p=r.type.defaultProps,x=p!==void 0?Ge(Ge({},p),r.props):r.props,j=x.dataKey,N=x.children,b=x.minPointSize,g=y==="horizontal"?o:s,h=u?g.scale.domain():null,w=uL({numericAxis:g}),S=Ct(N,ul),A=f.map(function(O,C){var T,E,M,$,D,F;u?T=aL(u[d+C],h):(T=tt(O,j),Array.isArray(T)||(T=[w,T]));var _=mU(b,z0.defaultProps.minPointSize)(T[1],C);if(y==="horizontal"){var R,L=[o.scale(T[0]),o.scale(T[1])],z=L[0],V=L[1];E=Np({axis:s,ticks:l,bandSize:i,offset:v.offset,entry:O,index:C}),M=(R=V??z)!==null&&R!==void 0?R:void 0,$=v.size;var q=z-V;if(D=Number.isNaN(q)?0:q,F={x:E,y:o.y,width:$,height:o.height},Math.abs(_)>0&&Math.abs(D)<Math.abs(_)){var J=vt(D||_)*(Math.abs(_)-Math.abs(D));M-=J,D+=J}}else{var X=[s.scale(T[0]),s.scale(T[1])],ee=X[0],re=X[1];if(E=ee,M=Np({axis:o,ticks:c,bandSize:i,offset:v.offset,entry:O,index:C}),$=re-ee,D=v.size,F={x:s.x,y:M,width:s.width,height:D},Math.abs(_)>0&&Math.abs($)<Math.abs(_)){var Pe=vt($||_)*(Math.abs(_)-Math.abs($));$+=Pe}}return Ge(Ge(Ge({},O),{},{x:E,y:M,width:$,height:D,value:u?T:T[1],payload:O,background:F},S&&S[C]&&S[C].props),{},{tooltipPayload:[h0(r,O)],tooltipPosition:{x:E+$/2,y:M+D/2}})});return Ge({data:A,layout:y},m)});function Ii(e){"@babel/helpers - typeof";return Ii=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ii(e)}function kU(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Dv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,K0(n.key),n)}}function SU(e,t,r){return t&&Dv(e.prototype,t),r&&Dv(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Iv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Kt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Iv(Object(r),!0).forEach(function(n){El(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Iv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function El(e,t,r){return t=K0(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K0(e){var t=OU(e,"string");return Ii(t)=="symbol"?t:t+""}function OU(e,t){if(Ii(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ii(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var AU=function(t,r,n,i,s){var o=t.width,l=t.height,c=t.layout,u=t.children,d=Object.keys(r),f={left:n.left,leftMirror:n.left,right:o-n.right,rightMirror:o-n.right,top:n.top,topMirror:n.top,bottom:l-n.bottom,bottomMirror:l-n.bottom},m=!!At(u,Zi);return d.reduce(function(v,y){var p=r[y],x=p.orientation,j=p.domain,N=p.padding,b=N===void 0?{}:N,g=p.mirror,h=p.reversed,w="".concat(x).concat(g?"Mirror":""),S,A,O,C,T;if(p.type==="number"&&(p.padding==="gap"||p.padding==="no-gap")){var E=j[1]-j[0],M=1/0,$=p.categoricalDomain.sort();if($.forEach(function(X,ee){ee>0&&(M=Math.min((X||0)-($[ee-1]||0),M))}),Number.isFinite(M)){var D=M/E,F=p.layout==="vertical"?n.height:n.width;if(p.padding==="gap"&&(S=D*F/2),p.padding==="no-gap"){var _=yt(t.barCategoryGap,D*F),R=D*F/2;S=R-_-(R-_)/F*_}}}i==="xAxis"?A=[n.left+(b.left||0)+(S||0),n.left+n.width-(b.right||0)-(S||0)]:i==="yAxis"?A=c==="horizontal"?[n.top+n.height-(b.bottom||0),n.top+(b.top||0)]:[n.top+(b.top||0)+(S||0),n.top+n.height-(b.bottom||0)-(S||0)]:A=p.range,h&&(A=[A[1],A[0]]);var L=u0(p,s,m),z=L.scale,V=L.realScaleType;z.domain(j).range(A),d0(z);var q=f0(z,Kt(Kt({},p),{},{realScaleType:V}));i==="xAxis"?(T=x==="top"&&!g||x==="bottom"&&g,O=n.left,C=f[w]-T*p.height):i==="yAxis"&&(T=x==="left"&&!g||x==="right"&&g,O=f[w]-T*p.width,C=n.top);var J=Kt(Kt(Kt({},p),q),{},{realScaleType:V,x:O,y:C,scale:z,width:i==="xAxis"?n.width:p.width,height:i==="yAxis"?n.height:p.height});return J.bandSize=oo(J,q),!p.hide&&i==="xAxis"?f[w]+=(T?-1:1)*J.height:p.hide||(f[w]+=(T?-1:1)*J.width),Kt(Kt({},v),{},El({},y,J))},{})},Y0=function(t,r){var n=t.x,i=t.y,s=r.x,o=r.y;return{x:Math.min(n,s),y:Math.min(i,o),width:Math.abs(s-n),height:Math.abs(o-i)}},PU=function(t){var r=t.x1,n=t.y1,i=t.x2,s=t.y2;return Y0({x:r,y:n},{x:i,y:s})},G0=function(){function e(t){kU(this,e),this.scale=t}return SU(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=n.bandAware,s=n.position;if(r!==void 0){if(s)switch(s){case"start":return this.scale(r);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(r)+l}default:return this.scale(r)}if(i){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+c}return this.scale(r)}}},{key:"isInRange",value:function(r){var n=this.range(),i=n[0],s=n[n.length-1];return i<=s?r>=i&&r<=s:r>=s&&r<=i}}],[{key:"create",value:function(r){return new e(r)}}])}();El(G0,"EPS",1e-4);var gf=function(t){var r=Object.keys(t).reduce(function(n,i){return Kt(Kt({},n),{},El({},i,G0.create(t[i])))},{});return Kt(Kt({},r),{},{apply:function(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=s.bandAware,l=s.position;return KF(i,function(c,u){return r[u].apply(c,{bandAware:o,position:l})})},isInRange:function(i){return H0(i,function(s,o){return r[o].isInRange(s)})}})};function EU(e){return(e%180+180)%180}var TU=function(t){var r=t.width,n=t.height,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=EU(i),o=s*Math.PI/180,l=Math.atan(n/r),c=o>l&&o<Math.PI-l?n/Math.sin(o):r/Math.cos(o);return Math.abs(c)},_U=vr,$U=qi,CU=ol;function MU(e){return function(t,r,n){var i=Object(t);if(!$U(t)){var s=_U(r);t=CU(t),r=function(l){return s(i[l],l,i)}}var o=e(t,r,n);return o>-1?i[s?t[o]:o]:void 0}}var DU=MU,IU=B0;function RU(e){var t=IU(e),r=t%1;return t===t?r?t-r:t:0}var LU=RU,BU=qx,FU=vr,UU=LU,VU=Math.max;function HU(e,t,r){var n=e==null?0:e.length;if(!n)return-1;var i=r==null?0:UU(r);return i<0&&(i=VU(n+i,0)),BU(e,FU(t),i)}var zU=HU,qU=DU,WU=zU,KU=qU(WU),YU=KU;const GU=Oe(YU);var XU=QS(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),bf=k.createContext(void 0),wf=k.createContext(void 0),X0=k.createContext(void 0),Q0=k.createContext({}),Z0=k.createContext(void 0),J0=k.createContext(0),eb=k.createContext(0),Rv=function(t){var r=t.state,n=r.xAxisMap,i=r.yAxisMap,s=r.offset,o=t.clipPathId,l=t.children,c=t.width,u=t.height,d=XU(s);return P.createElement(bf.Provider,{value:n},P.createElement(wf.Provider,{value:i},P.createElement(Q0.Provider,{value:s},P.createElement(X0.Provider,{value:d},P.createElement(Z0.Provider,{value:o},P.createElement(J0.Provider,{value:u},P.createElement(eb.Provider,{value:c},l)))))))},QU=function(){return k.useContext(Z0)},tb=function(t){var r=k.useContext(bf);r==null&&wn();var n=r[t];return n==null&&wn(),n},ZU=function(){var t=k.useContext(bf);return Rr(t)},JU=function(){var t=k.useContext(wf),r=GU(t,function(n){return H0(n.domain,Number.isFinite)});return r||Rr(t)},rb=function(t){var r=k.useContext(wf);r==null&&wn();var n=r[t];return n==null&&wn(),n},eV=function(){var t=k.useContext(X0);return t},tV=function(){return k.useContext(Q0)},jf=function(){return k.useContext(eb)},Nf=function(){return k.useContext(J0)};function ua(e){"@babel/helpers - typeof";return ua=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ua(e)}function rV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ab(n.key),n)}}function aV(e,t,r){return t&&nV(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function iV(e,t,r){return t=Oo(t),sV(e,nb()?Reflect.construct(t,r||[],Oo(e).constructor):t.apply(e,r))}function sV(e,t){if(t&&(ua(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oV(e)}function oV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(nb=function(){return!!e})()}function Oo(e){return Oo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Oo(e)}function lV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ku(e,t)}function Ku(e,t){return Ku=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Ku(e,t)}function Lv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Bv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Lv(Object(r),!0).forEach(function(n){kf(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Lv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function kf(e,t,r){return t=ab(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ab(e){var t=cV(e,"string");return ua(t)=="symbol"?t:t+""}function cV(e,t){if(ua(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ua(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uV(e,t){return hV(e)||mV(e,t)||fV(e,t)||dV()}function dV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fV(e,t){if(e){if(typeof e=="string")return Fv(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Fv(e,t)}}function Fv(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function mV(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function hV(e){if(Array.isArray(e))return e}function Yu(){return Yu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Yu.apply(this,arguments)}var pV=function(t,r){var n;return P.isValidElement(t)?n=P.cloneElement(t,r):fe(t)?n=t(r):n=P.createElement("line",Yu({},r,{className:"recharts-reference-line-line"})),n},vV=function(t,r,n,i,s,o,l,c,u){var d=s.x,f=s.y,m=s.width,v=s.height;if(n){var y=u.y,p=t.y.apply(y,{position:o});if(dr(u,"discard")&&!t.y.isInRange(p))return null;var x=[{x:d+m,y:p},{x:d,y:p}];return c==="left"?x.reverse():x}if(r){var j=u.x,N=t.x.apply(j,{position:o});if(dr(u,"discard")&&!t.x.isInRange(N))return null;var b=[{x:N,y:f+v},{x:N,y:f}];return l==="top"?b.reverse():b}if(i){var g=u.segment,h=g.map(function(w){return t.apply(w,{position:o})});return dr(u,"discard")&&BF(h,function(w){return!t.isInRange(w)})?null:h}return null};function yV(e){var t=e.x,r=e.y,n=e.segment,i=e.xAxisId,s=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,u=QU(),d=tb(i),f=rb(s),m=eV();if(!u||!m)return null;qr(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var v=gf({x:d.scale,y:f.scale}),y=rt(t),p=rt(r),x=n&&n.length===2,j=vV(v,y,p,x,m,e.position,d.orientation,f.orientation,e);if(!j)return null;var N=uV(j,2),b=N[0],g=b.x,h=b.y,w=N[1],S=w.x,A=w.y,O=dr(e,"hidden")?"url(#".concat(u,")"):void 0,C=Bv(Bv({clipPath:O},se(e,!0)),{},{x1:g,y1:h,x2:S,y2:A});return P.createElement(ke,{className:ve("recharts-reference-line",l)},pV(o,C),it.renderCallByParent(e,PU({x1:g,y1:h,x2:S,y2:A})))}var Sf=function(e){function t(){return rV(this,t),iV(this,t,arguments)}return lV(t,e),aV(t,[{key:"render",value:function(){return P.createElement(yV,this.props)}}])}(P.Component);kf(Sf,"displayName","ReferenceLine");kf(Sf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Gu(){return Gu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Gu.apply(this,arguments)}function da(e){"@babel/helpers - typeof";return da=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},da(e)}function Uv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function Vv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Uv(Object(r),!0).forEach(function(n){Tl(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Uv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,sb(n.key),n)}}function bV(e,t,r){return t&&gV(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function wV(e,t,r){return t=Ao(t),jV(e,ib()?Reflect.construct(t,r||[],Ao(e).constructor):t.apply(e,r))}function jV(e,t){if(t&&(da(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return NV(e)}function NV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ib(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ib=function(){return!!e})()}function Ao(e){return Ao=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ao(e)}function kV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xu(e,t)}function Xu(e,t){return Xu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Xu(e,t)}function Tl(e,t,r){return t=sb(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sb(e){var t=SV(e,"string");return da(t)=="symbol"?t:t+""}function SV(e,t){if(da(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(da(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var OV=function(t){var r=t.x,n=t.y,i=t.xAxis,s=t.yAxis,o=gf({x:i.scale,y:s.scale}),l=o.apply({x:r,y:n},{bandAware:!0});return dr(t,"discard")&&!o.isInRange(l)?null:l},_l=function(e){function t(){return xV(this,t),wV(this,t,arguments)}return kV(t,e),bV(t,[{key:"render",value:function(){var n=this.props,i=n.x,s=n.y,o=n.r,l=n.alwaysShow,c=n.clipPathId,u=rt(i),d=rt(s);if(qr(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!u||!d)return null;var f=OV(this.props);if(!f)return null;var m=f.x,v=f.y,y=this.props,p=y.shape,x=y.className,j=dr(this.props,"hidden")?"url(#".concat(c,")"):void 0,N=Vv(Vv({clipPath:j},se(this.props,!0)),{},{cx:m,cy:v});return P.createElement(ke,{className:ve("recharts-reference-dot",x)},t.renderDot(p,N),it.renderCallByParent(this.props,{x:m-o,y:v-o,width:2*o,height:2*o}))}}])}(P.Component);Tl(_l,"displayName","ReferenceDot");Tl(_l,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});Tl(_l,"renderDot",function(e,t){var r;return P.isValidElement(e)?r=P.cloneElement(e,t):fe(e)?r=e(t):r=P.createElement(jl,Gu({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r});function Qu(){return Qu=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Qu.apply(this,arguments)}function fa(e){"@babel/helpers - typeof";return fa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fa(e)}function Hv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function zv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Hv(Object(r),!0).forEach(function(n){$l(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Hv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function AV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function PV(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,lb(n.key),n)}}function EV(e,t,r){return t&&PV(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function TV(e,t,r){return t=Po(t),_V(e,ob()?Reflect.construct(t,r||[],Po(e).constructor):t.apply(e,r))}function _V(e,t){if(t&&(fa(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $V(e)}function $V(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ob(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ob=function(){return!!e})()}function Po(e){return Po=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Po(e)}function CV(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zu(e,t)}function Zu(e,t){return Zu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Zu(e,t)}function $l(e,t,r){return t=lb(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lb(e){var t=MV(e,"string");return fa(t)=="symbol"?t:t+""}function MV(e,t){if(fa(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(fa(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var DV=function(t,r,n,i,s){var o=s.x1,l=s.x2,c=s.y1,u=s.y2,d=s.xAxis,f=s.yAxis;if(!d||!f)return null;var m=gf({x:d.scale,y:f.scale}),v={x:t?m.x.apply(o,{position:"start"}):m.x.rangeMin,y:n?m.y.apply(c,{position:"start"}):m.y.rangeMin},y={x:r?m.x.apply(l,{position:"end"}):m.x.rangeMax,y:i?m.y.apply(u,{position:"end"}):m.y.rangeMax};return dr(s,"discard")&&(!m.isInRange(v)||!m.isInRange(y))?null:Y0(v,y)},Cl=function(e){function t(){return AV(this,t),TV(this,t,arguments)}return CV(t,e),EV(t,[{key:"render",value:function(){var n=this.props,i=n.x1,s=n.x2,o=n.y1,l=n.y2,c=n.className,u=n.alwaysShow,d=n.clipPathId;qr(u===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=rt(i),m=rt(s),v=rt(o),y=rt(l),p=this.props.shape;if(!f&&!m&&!v&&!y&&!p)return null;var x=DV(f,m,v,y,this.props);if(!x&&!p)return null;var j=dr(this.props,"hidden")?"url(#".concat(d,")"):void 0;return P.createElement(ke,{className:ve("recharts-reference-area",c)},t.renderRect(p,zv(zv({clipPath:j},se(this.props,!0)),x)),it.renderCallByParent(this.props,x))}}])}(P.Component);$l(Cl,"displayName","ReferenceArea");$l(Cl,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});$l(Cl,"renderRect",function(e,t){var r;return P.isValidElement(e)?r=P.cloneElement(e,t):fe(e)?r=e(t):r=P.createElement(xf,Qu({},t,{className:"recharts-reference-area-rect"})),r});function cb(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var n=[],i=0;i<e.length;i+=t)n.push(e[i]);return n}function IV(e,t,r){var n={width:e.width+t.width,height:e.height+t.height};return TU(n,r)}function RV(e,t,r){var n=r==="width",i=e.x,s=e.y,o=e.width,l=e.height;return t===1?{start:n?i:s,end:n?i+o:s+l}:{start:n?i+o:s+l,end:n?i:s}}function Eo(e,t,r,n,i){if(e*t<e*n||e*t>e*i)return!1;var s=r();return e*(t-e*s/2-n)>=0&&e*(t+e*s/2-i)<=0}function LV(e,t){return cb(e,t+1)}function BV(e,t,r,n,i){for(var s=(n||[]).slice(),o=t.start,l=t.end,c=0,u=1,d=o,f=function(){var y=n==null?void 0:n[c];if(y===void 0)return{v:cb(n,u)};var p=c,x,j=function(){return x===void 0&&(x=r(y,p)),x},N=y.coordinate,b=c===0||Eo(e,N,j,d,l);b||(c=0,d=o,u+=1),b&&(d=N+e*(j()/2+i),c+=u)},m;u<=s.length;)if(m=f(),m)return m.v;return[]}function Ri(e){"@babel/helpers - typeof";return Ri=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ri(e)}function qv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ut(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?qv(Object(r),!0).forEach(function(n){FV(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function FV(e,t,r){return t=UV(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function UV(e){var t=VV(e,"string");return Ri(t)=="symbol"?t:t+""}function VV(e,t){if(Ri(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Ri(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function HV(e,t,r,n,i){for(var s=(n||[]).slice(),o=s.length,l=t.start,c=t.end,u=function(m){var v=s[m],y,p=function(){return y===void 0&&(y=r(v,m)),y};if(m===o-1){var x=e*(v.coordinate+e*p()/2-c);s[m]=v=ut(ut({},v),{},{tickCoord:x>0?v.coordinate-x*e:v.coordinate})}else s[m]=v=ut(ut({},v),{},{tickCoord:v.coordinate});var j=Eo(e,v.tickCoord,p,l,c);j&&(c=v.tickCoord-e*(p()/2+i),s[m]=ut(ut({},v),{},{isShow:!0}))},d=o-1;d>=0;d--)u(d);return s}function zV(e,t,r,n,i,s){var o=(n||[]).slice(),l=o.length,c=t.start,u=t.end;if(s){var d=n[l-1],f=r(d,l-1),m=e*(d.coordinate+e*f/2-u);o[l-1]=d=ut(ut({},d),{},{tickCoord:m>0?d.coordinate-m*e:d.coordinate});var v=Eo(e,d.tickCoord,function(){return f},c,u);v&&(u=d.tickCoord-e*(f/2+i),o[l-1]=ut(ut({},d),{},{isShow:!0}))}for(var y=s?l-1:l,p=function(N){var b=o[N],g,h=function(){return g===void 0&&(g=r(b,N)),g};if(N===0){var w=e*(b.coordinate-e*h()/2-c);o[N]=b=ut(ut({},b),{},{tickCoord:w<0?b.coordinate-w*e:b.coordinate})}else o[N]=b=ut(ut({},b),{},{tickCoord:b.coordinate});var S=Eo(e,b.tickCoord,h,c,u);S&&(c=b.tickCoord+e*(h()/2+i),o[N]=ut(ut({},b),{},{isShow:!0}))},x=0;x<y;x++)p(x);return o}function Of(e,t,r){var n=e.tick,i=e.ticks,s=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,u=e.tickFormatter,d=e.unit,f=e.angle;if(!i||!i.length||!n)return[];if(Y(c)||cr.isSsr)return LV(i,typeof c=="number"&&Y(c)?c:0);var m=[],v=l==="top"||l==="bottom"?"width":"height",y=d&&v==="width"?Ya(d,{fontSize:t,letterSpacing:r}):{width:0,height:0},p=function(b,g){var h=fe(u)?u(b.value,g):b.value;return v==="width"?IV(Ya(h,{fontSize:t,letterSpacing:r}),y,f):Ya(h,{fontSize:t,letterSpacing:r})[v]},x=i.length>=2?vt(i[1].coordinate-i[0].coordinate):1,j=RV(s,x,v);return c==="equidistantPreserveStart"?BV(x,j,p,i,o):(c==="preserveStart"||c==="preserveStartEnd"?m=zV(x,j,p,i,o,c==="preserveStartEnd"):m=HV(x,j,p,i,o),m.filter(function(N){return N.isShow}))}var qV=["viewBox"],WV=["viewBox"],KV=["ticks"];function ma(e){"@babel/helpers - typeof";return ma=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ma(e)}function Ln(){return Ln=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Ln.apply(this,arguments)}function Wv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ht(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Wv(Object(r),!0).forEach(function(n){Af(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function xc(e,t){if(e==null)return{};var r=YV(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function YV(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function GV(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,db(n.key),n)}}function XV(e,t,r){return t&&Kv(e.prototype,t),r&&Kv(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function QV(e,t,r){return t=To(t),ZV(e,ub()?Reflect.construct(t,r||[],To(e).constructor):t.apply(e,r))}function ZV(e,t){if(t&&(ma(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return JV(e)}function JV(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ub(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ub=function(){return!!e})()}function To(e){return To=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},To(e)}function eH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ju(e,t)}function Ju(e,t){return Ju=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},Ju(e,t)}function Af(e,t,r){return t=db(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function db(e){var t=tH(e,"string");return ma(t)=="symbol"?t:t+""}function tH(e,t){if(ma(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ma(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ca=function(e){function t(r){var n;return GV(this,t),n=QV(this,t,[r]),n.state={fontSize:"",letterSpacing:""},n}return eH(t,e),XV(t,[{key:"shouldComponentUpdate",value:function(n,i){var s=n.viewBox,o=xc(n,qV),l=this.props,c=l.viewBox,u=xc(l,WV);return!Hn(s,c)||!Hn(o,u)||!Hn(i,this.state)}},{key:"componentDidMount",value:function(){var n=this.layerReference;if(n){var i=n.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];i&&this.setState({fontSize:window.getComputedStyle(i).fontSize,letterSpacing:window.getComputedStyle(i).letterSpacing})}}},{key:"getTickLineCoord",value:function(n){var i=this.props,s=i.x,o=i.y,l=i.width,c=i.height,u=i.orientation,d=i.tickSize,f=i.mirror,m=i.tickMargin,v,y,p,x,j,N,b=f?-1:1,g=n.tickSize||d,h=Y(n.tickCoord)?n.tickCoord:n.coordinate;switch(u){case"top":v=y=n.coordinate,x=o+ +!f*c,p=x-b*g,N=p-b*m,j=h;break;case"left":p=x=n.coordinate,y=s+ +!f*l,v=y-b*g,j=v-b*m,N=h;break;case"right":p=x=n.coordinate,y=s+ +f*l,v=y+b*g,j=v+b*m,N=h;break;default:v=y=n.coordinate,x=o+ +f*c,p=x+b*g,N=p+b*m,j=h;break}return{line:{x1:v,y1:p,x2:y,y2:x},tick:{x:j,y:N}}}},{key:"getTickTextAnchor",value:function(){var n=this.props,i=n.orientation,s=n.mirror,o;switch(i){case"left":o=s?"start":"end";break;case"right":o=s?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var n=this.props,i=n.orientation,s=n.mirror,o="end";switch(i){case"left":case"right":o="middle";break;case"top":o=s?"start":"end";break;default:o=s?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var n=this.props,i=n.x,s=n.y,o=n.width,l=n.height,c=n.orientation,u=n.mirror,d=n.axisLine,f=ht(ht(ht({},se(this.props,!1)),se(d,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var m=+(c==="top"&&!u||c==="bottom"&&u);f=ht(ht({},f),{},{x1:i,y1:s+m*l,x2:i+o,y2:s+m*l})}else{var v=+(c==="left"&&!u||c==="right"&&u);f=ht(ht({},f),{},{x1:i+v*o,y1:s,x2:i+v*o,y2:s+l})}return P.createElement("line",Ln({},f,{className:ve("recharts-cartesian-axis-line",$t(d,"className"))}))}},{key:"renderTicks",value:function(n,i,s){var o=this,l=this.props,c=l.tickLine,u=l.stroke,d=l.tick,f=l.tickFormatter,m=l.unit,v=Of(ht(ht({},this.props),{},{ticks:n}),i,s),y=this.getTickTextAnchor(),p=this.getTickVerticalAnchor(),x=se(this.props,!1),j=se(d,!1),N=ht(ht({},x),{},{fill:"none"},se(c,!1)),b=v.map(function(g,h){var w=o.getTickLineCoord(g),S=w.line,A=w.tick,O=ht(ht(ht(ht({textAnchor:y,verticalAnchor:p},x),{},{stroke:"none",fill:u},j),A),{},{index:h,payload:g,visibleTicksCount:v.length,tickFormatter:f});return P.createElement(ke,Ln({className:"recharts-cartesian-axis-tick",key:"tick-".concat(g.value,"-").concat(g.coordinate,"-").concat(g.tickCoord)},xn(o.props,g,h)),c&&P.createElement("line",Ln({},N,S,{className:ve("recharts-cartesian-axis-tick-line",$t(c,"className"))})),d&&t.renderTickItem(d,O,"".concat(fe(f)?f(g.value,h):g.value).concat(m||"")))});return P.createElement("g",{className:"recharts-cartesian-axis-ticks"},b)}},{key:"render",value:function(){var n=this,i=this.props,s=i.axisLine,o=i.width,l=i.height,c=i.ticksGenerator,u=i.className,d=i.hide;if(d)return null;var f=this.props,m=f.ticks,v=xc(f,KV),y=m;return fe(c)&&(y=m&&m.length>0?c(this.props):c(v)),o<=0||l<=0||!y||!y.length?null:P.createElement(ke,{className:ve("recharts-cartesian-axis",u),ref:function(x){n.layerReference=x}},s&&this.renderAxisLine(),this.renderTicks(y,this.state.fontSize,this.state.letterSpacing),it.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(n,i,s){var o;return P.isValidElement(n)?o=P.cloneElement(n,i):fe(n)?o=n(i):o=P.createElement(gn,Ln({},i,{className:"recharts-cartesian-axis-tick-value"}),s),o}}])}(k.Component);Af(Ca,"displayName","CartesianAxis");Af(Ca,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var rH=["x1","y1","x2","y2","key"],nH=["offset"];function jn(e){"@babel/helpers - typeof";return jn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jn(e)}function Yv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function ft(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Yv(Object(r),!0).forEach(function(n){aH(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Yv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function aH(e,t,r){return t=iH(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function iH(e){var t=sH(e,"string");return jn(t)=="symbol"?t:t+""}function sH(e,t){if(jn(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(jn(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cn(){return cn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},cn.apply(this,arguments)}function Gv(e,t){if(e==null)return{};var r=oH(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function oH(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}var lH=function(t){var r=t.fill;if(!r||r==="none")return null;var n=t.fillOpacity,i=t.x,s=t.y,o=t.width,l=t.height,c=t.ry;return P.createElement("rect",{x:i,y:s,ry:c,width:o,height:l,stroke:"none",fill:r,fillOpacity:n,className:"recharts-cartesian-grid-bg"})};function fb(e,t){var r;if(P.isValidElement(e))r=P.cloneElement(e,t);else if(fe(e))r=e(t);else{var n=t.x1,i=t.y1,s=t.x2,o=t.y2,l=t.key,c=Gv(t,rH),u=se(c,!1);u.offset;var d=Gv(u,nH);r=P.createElement("line",cn({},d,{x1:n,y1:i,x2:s,y2:o,fill:"none",key:l}))}return r}function cH(e){var t=e.x,r=e.width,n=e.horizontal,i=n===void 0?!0:n,s=e.horizontalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(l,c){var u=ft(ft({},e),{},{x1:t,y1:l,x2:t+r,y2:l,key:"line-".concat(c),index:c});return fb(i,u)});return P.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function uH(e){var t=e.y,r=e.height,n=e.vertical,i=n===void 0?!0:n,s=e.verticalPoints;if(!i||!s||!s.length)return null;var o=s.map(function(l,c){var u=ft(ft({},e),{},{x1:l,y1:t,x2:l,y2:t+r,key:"line-".concat(c),index:c});return fb(i,u)});return P.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function dH(e){var t=e.horizontalFill,r=e.fillOpacity,n=e.x,i=e.y,s=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,u=c===void 0?!0:c;if(!u||!t||!t.length)return null;var d=l.map(function(m){return Math.round(m+i-i)}).sort(function(m,v){return m-v});i!==d[0]&&d.unshift(0);var f=d.map(function(m,v){var y=!d[v+1],p=y?i+o-m:d[v+1]-m;if(p<=0)return null;var x=v%t.length;return P.createElement("rect",{key:"react-".concat(v),y:m,x:n,height:p,width:s,stroke:"none",fill:t[x],fillOpacity:r,className:"recharts-cartesian-grid-bg"})});return P.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},f)}function fH(e){var t=e.vertical,r=t===void 0?!0:t,n=e.verticalFill,i=e.fillOpacity,s=e.x,o=e.y,l=e.width,c=e.height,u=e.verticalPoints;if(!r||!n||!n.length)return null;var d=u.map(function(m){return Math.round(m+s-s)}).sort(function(m,v){return m-v});s!==d[0]&&d.unshift(0);var f=d.map(function(m,v){var y=!d[v+1],p=y?s+l-m:d[v+1]-m;if(p<=0)return null;var x=v%n.length;return P.createElement("rect",{key:"react-".concat(v),x:m,y:o,width:p,height:c,stroke:"none",fill:n[x],fillOpacity:i,className:"recharts-cartesian-grid-bg"})});return P.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},f)}var mH=function(t,r){var n=t.xAxis,i=t.width,s=t.height,o=t.offset;return c0(Of(ft(ft(ft({},Ca.defaultProps),n),{},{ticks:Nr(n,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.left,o.left+o.width,r)},hH=function(t,r){var n=t.yAxis,i=t.width,s=t.height,o=t.offset;return c0(Of(ft(ft(ft({},Ca.defaultProps),n),{},{ticks:Nr(n,!0),viewBox:{x:0,y:0,width:i,height:s}})),o.top,o.top+o.height,r)},$n={horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function mb(e){var t,r,n,i,s,o,l=jf(),c=Nf(),u=tV(),d=ft(ft({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:$n.stroke,fill:(r=e.fill)!==null&&r!==void 0?r:$n.fill,horizontal:(n=e.horizontal)!==null&&n!==void 0?n:$n.horizontal,horizontalFill:(i=e.horizontalFill)!==null&&i!==void 0?i:$n.horizontalFill,vertical:(s=e.vertical)!==null&&s!==void 0?s:$n.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:$n.verticalFill,x:Y(e.x)?e.x:u.left,y:Y(e.y)?e.y:u.top,width:Y(e.width)?e.width:u.width,height:Y(e.height)?e.height:u.height}),f=d.x,m=d.y,v=d.width,y=d.height,p=d.syncWithTicks,x=d.horizontalValues,j=d.verticalValues,N=ZU(),b=JU();if(!Y(v)||v<=0||!Y(y)||y<=0||!Y(f)||f!==+f||!Y(m)||m!==+m)return null;var g=d.verticalCoordinatesGenerator||mH,h=d.horizontalCoordinatesGenerator||hH,w=d.horizontalPoints,S=d.verticalPoints;if((!w||!w.length)&&fe(h)){var A=x&&x.length,O=h({yAxis:b?ft(ft({},b),{},{ticks:A?x:b.ticks}):void 0,width:l,height:c,offset:u},A?!0:p);qr(Array.isArray(O),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(jn(O),"]")),Array.isArray(O)&&(w=O)}if((!S||!S.length)&&fe(g)){var C=j&&j.length,T=g({xAxis:N?ft(ft({},N),{},{ticks:C?j:N.ticks}):void 0,width:l,height:c,offset:u},C?!0:p);qr(Array.isArray(T),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(jn(T),"]")),Array.isArray(T)&&(S=T)}return P.createElement("g",{className:"recharts-cartesian-grid"},P.createElement(lH,{fill:d.fill,fillOpacity:d.fillOpacity,x:d.x,y:d.y,width:d.width,height:d.height,ry:d.ry}),P.createElement(cH,cn({},d,{offset:u,horizontalPoints:w,xAxis:N,yAxis:b})),P.createElement(uH,cn({},d,{offset:u,verticalPoints:S,xAxis:N,yAxis:b})),P.createElement(dH,cn({},d,{horizontalPoints:w})),P.createElement(fH,cn({},d,{verticalPoints:S})))}mb.displayName="CartesianGrid";var pH=["type","layout","connectNulls","ref"],vH=["key"];function ha(e){"@babel/helpers - typeof";return ha=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ha(e)}function Xv(e,t){if(e==null)return{};var r=yH(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function yH(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function ei(){return ei=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ei.apply(this,arguments)}function Qv(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Qv(Object(r),!0).forEach(function(n){Yt(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Qv(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function Cn(e){return wH(e)||bH(e)||gH(e)||xH()}function xH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gH(e,t){if(e){if(typeof e=="string")return ed(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ed(e,t)}}function bH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wH(e){if(Array.isArray(e))return ed(e)}function ed(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function jH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zv(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,pb(n.key),n)}}function NH(e,t,r){return t&&Zv(e.prototype,t),r&&Zv(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function kH(e,t,r){return t=_o(t),SH(e,hb()?Reflect.construct(t,r||[],_o(e).constructor):t.apply(e,r))}function SH(e,t){if(t&&(ha(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return OH(e)}function OH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(hb=function(){return!!e})()}function _o(e){return _o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},_o(e)}function AH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&td(e,t)}function td(e,t){return td=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},td(e,t)}function Yt(e,t,r){return t=pb(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function pb(e){var t=PH(e,"string");return ha(t)=="symbol"?t:t+""}function PH(e,t){if(ha(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ha(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ji=function(e){function t(){var r;jH(this,t);for(var n=arguments.length,i=new Array(n),s=0;s<n;s++)i[s]=arguments[s];return r=kH(this,t,[].concat(i)),Yt(r,"state",{isAnimationFinished:!0,totalLength:0}),Yt(r,"generateSimpleStrokeDasharray",function(o,l){return"".concat(l,"px ").concat(o-l,"px")}),Yt(r,"getStrokeDasharray",function(o,l,c){var u=c.reduce(function(j,N){return j+N});if(!u)return r.generateSimpleStrokeDasharray(l,o);for(var d=Math.floor(o/u),f=o%u,m=l-o,v=[],y=0,p=0;y<c.length;p+=c[y],++y)if(p+c[y]>f){v=[].concat(Cn(c.slice(0,y)),[f-p]);break}var x=v.length%2===0?[0,m]:[m];return[].concat(Cn(t.repeat(c,d)),Cn(v),x).map(function(j){return"".concat(j,"px")}).join(", ")}),Yt(r,"id",Oa("recharts-line-")),Yt(r,"pathRef",function(o){r.mainCurve=o}),Yt(r,"handleAnimationEnd",function(){r.setState({isAnimationFinished:!0}),r.props.onAnimationEnd&&r.props.onAnimationEnd()}),Yt(r,"handleAnimationStart",function(){r.setState({isAnimationFinished:!1}),r.props.onAnimationStart&&r.props.onAnimationStart()}),r}return AH(t,e),NH(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();this.setState({totalLength:n})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var n=this.getTotalLength();n!==this.state.totalLength&&this.setState({totalLength:n})}}},{key:"getTotalLength",value:function(){var n=this.mainCurve;try{return n&&n.getTotalLength&&n.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(n,i){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var s=this.props,o=s.points,l=s.xAxis,c=s.yAxis,u=s.layout,d=s.children,f=Ct(d,Qi);if(!f)return null;var m=function(p,x){return{x:p.x,y:p.y,value:p.value,errorVal:tt(p.payload,x)}},v={clipPath:n?"url(#clipPath-".concat(i,")"):null};return P.createElement(ke,v,f.map(function(y){return P.cloneElement(y,{key:"bar-".concat(y.props.dataKey),data:o,xAxis:l,yAxis:c,layout:u,dataPointFormatter:m})}))}},{key:"renderDots",value:function(n,i,s){var o=this.props.isAnimationActive;if(o&&!this.state.isAnimationFinished)return null;var l=this.props,c=l.dot,u=l.points,d=l.dataKey,f=se(this.props,!1),m=se(c,!0),v=u.map(function(p,x){var j=St(St(St({key:"dot-".concat(x),r:3},f),m),{},{value:p.value,dataKey:d,cx:p.x,cy:p.y,index:x,payload:p.payload});return t.renderDotItem(c,j)}),y={clipPath:n?"url(#clipPath-".concat(i?"":"dots-").concat(s,")"):null};return P.createElement(ke,ei({className:"recharts-line-dots",key:"dots"},y),v)}},{key:"renderCurveStatically",value:function(n,i,s,o){var l=this.props,c=l.type,u=l.layout,d=l.connectNulls;l.ref;var f=Xv(l,pH),m=St(St(St({},se(f,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:i?"url(#clipPath-".concat(s,")"):null,points:n},o),{},{type:c,layout:u,connectNulls:d});return P.createElement(uo,ei({},m,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(n,i){var s=this,o=this.props,l=o.points,c=o.strokeDasharray,u=o.isAnimationActive,d=o.animationBegin,f=o.animationDuration,m=o.animationEasing,v=o.animationId,y=o.animateNewValues,p=o.width,x=o.height,j=this.state,N=j.prevPoints,b=j.totalLength;return P.createElement(hr,{begin:d,duration:f,isActive:u,easing:m,from:{t:0},to:{t:1},key:"line-".concat(v),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(g){var h=g.t;if(N){var w=N.length/l.length,S=l.map(function(E,M){var $=Math.floor(M*w);if(N[$]){var D=N[$],F=Pt(D.x,E.x),_=Pt(D.y,E.y);return St(St({},E),{},{x:F(h),y:_(h)})}if(y){var R=Pt(p*2,E.x),L=Pt(x/2,E.y);return St(St({},E),{},{x:R(h),y:L(h)})}return St(St({},E),{},{x:E.x,y:E.y})});return s.renderCurveStatically(S,n,i)}var A=Pt(0,b),O=A(h),C;if(c){var T="".concat(c).split(/[,\s]+/gim).map(function(E){return parseFloat(E)});C=s.getStrokeDasharray(O,b,T)}else C=s.generateSimpleStrokeDasharray(b,O);return s.renderCurveStatically(l,n,i,{strokeDasharray:C})})}},{key:"renderCurve",value:function(n,i){var s=this.props,o=s.points,l=s.isAnimationActive,c=this.state,u=c.prevPoints,d=c.totalLength;return l&&o&&o.length&&(!u&&d>0||!Xi(u,o))?this.renderCurveWithAnimation(n,i):this.renderCurveStatically(o,n,i)}},{key:"render",value:function(){var n,i=this.props,s=i.hide,o=i.dot,l=i.points,c=i.className,u=i.xAxis,d=i.yAxis,f=i.top,m=i.left,v=i.width,y=i.height,p=i.isAnimationActive,x=i.id;if(s||!l||!l.length)return null;var j=this.state.isAnimationFinished,N=l.length===1,b=ve("recharts-line",c),g=u&&u.allowDataOverflow,h=d&&d.allowDataOverflow,w=g||h,S=he(x)?this.id:x,A=(n=se(o,!1))!==null&&n!==void 0?n:{r:3,strokeWidth:2},O=A.r,C=O===void 0?3:O,T=A.strokeWidth,E=T===void 0?2:T,M=nA(o)?o:{},$=M.clipDot,D=$===void 0?!0:$,F=C*2+E;return P.createElement(ke,{className:b},g||h?P.createElement("defs",null,P.createElement("clipPath",{id:"clipPath-".concat(S)},P.createElement("rect",{x:g?m:m-v/2,y:h?f:f-y/2,width:g?v:v*2,height:h?y:y*2})),!D&&P.createElement("clipPath",{id:"clipPath-dots-".concat(S)},P.createElement("rect",{x:m-F/2,y:f-F/2,width:v+F,height:y+F}))):null,!N&&this.renderCurve(w,S),this.renderErrorBar(w,S),(N||o)&&this.renderDots(w,D,S),(!p||j)&&Sr.renderCallByParent(this.props,l))}}],[{key:"getDerivedStateFromProps",value:function(n,i){return n.animationId!==i.prevAnimationId?{prevAnimationId:n.animationId,curPoints:n.points,prevPoints:i.curPoints}:n.points!==i.curPoints?{curPoints:n.points}:null}},{key:"repeat",value:function(n,i){for(var s=n.length%2!==0?[].concat(Cn(n),[0]):n,o=[],l=0;l<i;++l)o=[].concat(Cn(o),Cn(s));return o}},{key:"renderDotItem",value:function(n,i){var s;if(P.isValidElement(n))s=P.cloneElement(n,i);else if(fe(n))s=n(i);else{var o=i.key,l=Xv(i,vH),c=ve("recharts-line-dot",typeof n!="boolean"?n.className:"");s=P.createElement(jl,ei({key:o},l,{className:c}))}return s}}])}(k.PureComponent);Yt(Ji,"displayName","Line");Yt(Ji,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!cr.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});Yt(Ji,"getComposedData",function(e){var t=e.props,r=e.xAxis,n=e.yAxis,i=e.xAxisTicks,s=e.yAxisTicks,o=e.dataKey,l=e.bandSize,c=e.displayedData,u=e.offset,d=t.layout,f=c.map(function(m,v){var y=tt(m,o);return d==="horizontal"?{x:jp({axis:r,ticks:i,bandSize:l,entry:m,index:v}),y:he(y)?null:n.scale(y),value:y,payload:m}:{x:he(y)?null:r.scale(y),y:jp({axis:n,ticks:s,bandSize:l,entry:m,index:v}),value:y,payload:m}});return St({points:f,layout:d},u)});function pa(e){"@babel/helpers - typeof";return pa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pa(e)}function EH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TH(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,xb(n.key),n)}}function _H(e,t,r){return t&&TH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $H(e,t,r){return t=$o(t),CH(e,vb()?Reflect.construct(t,r||[],$o(e).constructor):t.apply(e,r))}function CH(e,t){if(t&&(pa(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return MH(e)}function MH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(vb=function(){return!!e})()}function $o(e){return $o=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$o(e)}function DH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&rd(e,t)}function rd(e,t){return rd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},rd(e,t)}function yb(e,t,r){return t=xb(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xb(e){var t=IH(e,"string");return pa(t)=="symbol"?t:t+""}function IH(e,t){if(pa(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(pa(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function nd(){return nd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},nd.apply(this,arguments)}function RH(e){var t=e.xAxisId,r=jf(),n=Nf(),i=tb(t);return i==null?null:P.createElement(Ca,nd({},i,{className:ve("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:r,height:n},ticksGenerator:function(o){return Nr(o,!0)}}))}var Ml=function(e){function t(){return EH(this,t),$H(this,t,arguments)}return DH(t,e),_H(t,[{key:"render",value:function(){return P.createElement(RH,this.props)}}])}(P.Component);yb(Ml,"displayName","XAxis");yb(Ml,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function va(e){"@babel/helpers - typeof";return va=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},va(e)}function LH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BH(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,wb(n.key),n)}}function FH(e,t,r){return t&&BH(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function UH(e,t,r){return t=Co(t),VH(e,gb()?Reflect.construct(t,r||[],Co(e).constructor):t.apply(e,r))}function VH(e,t){if(t&&(va(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return HH(e)}function HH(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(gb=function(){return!!e})()}function Co(e){return Co=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Co(e)}function zH(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ad(e,t)}function ad(e,t){return ad=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ad(e,t)}function bb(e,t,r){return t=wb(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function wb(e){var t=qH(e,"string");return va(t)=="symbol"?t:t+""}function qH(e,t){if(va(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(va(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function id(){return id=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},id.apply(this,arguments)}var WH=function(t){var r=t.yAxisId,n=jf(),i=Nf(),s=rb(r);return s==null?null:P.createElement(Ca,id({},s,{className:ve("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:i},ticksGenerator:function(l){return Nr(l,!0)}}))},Dl=function(e){function t(){return LH(this,t),UH(this,t,arguments)}return zH(t,e),FH(t,[{key:"render",value:function(){return P.createElement(WH,this.props)}}])}(P.Component);bb(Dl,"displayName","YAxis");bb(Dl,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function Jv(e){return XH(e)||GH(e)||YH(e)||KH()}function KH(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function YH(e,t){if(e){if(typeof e=="string")return sd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sd(e,t)}}function GH(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function XH(e){if(Array.isArray(e))return sd(e)}function sd(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var od=function(t,r,n,i,s){var o=Ct(t,Sf),l=Ct(t,_l),c=[].concat(Jv(o),Jv(l)),u=Ct(t,Cl),d="".concat(i,"Id"),f=i[0],m=r;if(c.length&&(m=c.reduce(function(p,x){if(x.props[d]===n&&dr(x.props,"extendDomain")&&Y(x.props[f])){var j=x.props[f];return[Math.min(p[0],j),Math.max(p[1],j)]}return p},m)),u.length){var v="".concat(f,"1"),y="".concat(f,"2");m=u.reduce(function(p,x){if(x.props[d]===n&&dr(x.props,"extendDomain")&&Y(x.props[v])&&Y(x.props[y])){var j=x.props[v],N=x.props[y];return[Math.min(p[0],j,N),Math.max(p[1],j,N)]}return p},m)}return s&&s.length&&(m=s.reduce(function(p,x){return Y(x)?[Math.min(p[0],x),Math.max(p[1],x)]:p},m)),m},jb={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(r=!1));function i(c,u,d){this.fn=c,this.context=u,this.once=d||!1}function s(c,u,d,f,m){if(typeof d!="function")throw new TypeError("The listener must be a function");var v=new i(d,f||c,m),y=r?r+u:u;return c._events[y]?c._events[y].fn?c._events[y]=[c._events[y],v]:c._events[y].push(v):(c._events[y]=v,c._eventsCount++),c}function o(c,u){--c._eventsCount===0?c._events=new n:delete c._events[u]}function l(){this._events=new n,this._eventsCount=0}l.prototype.eventNames=function(){var u=[],d,f;if(this._eventsCount===0)return u;for(f in d=this._events)t.call(d,f)&&u.push(r?f.slice(1):f);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(d)):u},l.prototype.listeners=function(u){var d=r?r+u:u,f=this._events[d];if(!f)return[];if(f.fn)return[f.fn];for(var m=0,v=f.length,y=new Array(v);m<v;m++)y[m]=f[m].fn;return y},l.prototype.listenerCount=function(u){var d=r?r+u:u,f=this._events[d];return f?f.fn?1:f.length:0},l.prototype.emit=function(u,d,f,m,v,y){var p=r?r+u:u;if(!this._events[p])return!1;var x=this._events[p],j=arguments.length,N,b;if(x.fn){switch(x.once&&this.removeListener(u,x.fn,void 0,!0),j){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,d),!0;case 3:return x.fn.call(x.context,d,f),!0;case 4:return x.fn.call(x.context,d,f,m),!0;case 5:return x.fn.call(x.context,d,f,m,v),!0;case 6:return x.fn.call(x.context,d,f,m,v,y),!0}for(b=1,N=new Array(j-1);b<j;b++)N[b-1]=arguments[b];x.fn.apply(x.context,N)}else{var g=x.length,h;for(b=0;b<g;b++)switch(x[b].once&&this.removeListener(u,x[b].fn,void 0,!0),j){case 1:x[b].fn.call(x[b].context);break;case 2:x[b].fn.call(x[b].context,d);break;case 3:x[b].fn.call(x[b].context,d,f);break;case 4:x[b].fn.call(x[b].context,d,f,m);break;default:if(!N)for(h=1,N=new Array(j-1);h<j;h++)N[h-1]=arguments[h];x[b].fn.apply(x[b].context,N)}}return!0},l.prototype.on=function(u,d,f){return s(this,u,d,f,!1)},l.prototype.once=function(u,d,f){return s(this,u,d,f,!0)},l.prototype.removeListener=function(u,d,f,m){var v=r?r+u:u;if(!this._events[v])return this;if(!d)return o(this,v),this;var y=this._events[v];if(y.fn)y.fn===d&&(!m||y.once)&&(!f||y.context===f)&&o(this,v);else{for(var p=0,x=[],j=y.length;p<j;p++)(y[p].fn!==d||m&&!y[p].once||f&&y[p].context!==f)&&x.push(y[p]);x.length?this._events[v]=x.length===1?x[0]:x:o(this,v)}return this},l.prototype.removeAllListeners=function(u){var d;return u?(d=r?r+u:u,this._events[d]&&o(this,d)):(this._events=new n,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=r,l.EventEmitter=l,e.exports=l})(jb);var QH=jb.exports;const ZH=Oe(QH);var gc=new ZH,bc="recharts.syncMouseEvents";function Li(e){"@babel/helpers - typeof";return Li=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Li(e)}function JH(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ez(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Nb(n.key),n)}}function tz(e,t,r){return t&&ez(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function wc(e,t,r){return t=Nb(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Nb(e){var t=rz(e,"string");return Li(t)=="symbol"?t:t+""}function rz(e,t){if(Li(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t);if(Li(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var nz=function(){function e(){JH(this,e),wc(this,"activeIndex",0),wc(this,"coordinateList",[]),wc(this,"layout","horizontal")}return tz(e,[{key:"setDetails",value:function(r){var n,i=r.coordinateList,s=i===void 0?null:i,o=r.container,l=o===void 0?null:o,c=r.layout,u=c===void 0?null:c,d=r.offset,f=d===void 0?null:d,m=r.mouseHandlerCallback,v=m===void 0?null:m;this.coordinateList=(n=s??this.coordinateList)!==null&&n!==void 0?n:[],this.container=l??this.container,this.layout=u??this.layout,this.offset=f??this.offset,this.mouseHandlerCallback=v??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){if(this.coordinateList.length!==0)switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(r){this.activeIndex=r}},{key:"spoofMouse",value:function(){var r,n;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var i=this.container.getBoundingClientRect(),s=i.x,o=i.y,l=i.height,c=this.coordinateList[this.activeIndex].coordinate,u=((r=window)===null||r===void 0?void 0:r.scrollX)||0,d=((n=window)===null||n===void 0?void 0:n.scrollY)||0,f=s+c+u,m=o+this.offset.top+l/2+d;this.mouseHandlerCallback({pageX:f,pageY:m})}}}])}();function az(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var n=e==null?void 0:e[0],i=e==null?void 0:e[1];if(n&&i&&Y(n)&&Y(i))return!0}return!1}function iz(e,t,r,n){var i=n/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-i:r.left+.5,y:e==="horizontal"?r.top+.5:t.y-i,width:e==="horizontal"?n:r.width-1,height:e==="horizontal"?r.height-1:n}}function kb(e){var t=e.cx,r=e.cy,n=e.radius,i=e.startAngle,s=e.endAngle,o=Be(t,r,n,i),l=Be(t,r,n,s);return{points:[o,l],cx:t,cy:r,radius:n,startAngle:i,endAngle:s}}function sz(e,t,r){var n,i,s,o;if(e==="horizontal")n=t.x,s=n,i=r.top,o=r.top+r.height;else if(e==="vertical")i=t.y,o=i,n=r.left,s=r.left+r.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,u=t.innerRadius,d=t.outerRadius,f=t.angle,m=Be(l,c,u,f),v=Be(l,c,d,f);n=m.x,i=m.y,s=v.x,o=v.y}else return kb(t);return[{x:n,y:i},{x:s,y:o}]}function Bi(e){"@babel/helpers - typeof";return Bi=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Bi(e)}function ey(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function vs(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ey(Object(r),!0).forEach(function(n){oz(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ey(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function oz(e,t,r){return t=lz(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lz(e){var t=cz(e,"string");return Bi(t)=="symbol"?t:t+""}function cz(e,t){if(Bi(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(Bi(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function uz(e){var t,r,n=e.element,i=e.tooltipEventType,s=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,u=e.activeTooltipIndex,d=e.tooltipAxisBandSize,f=e.layout,m=e.chartName,v=(t=n.props.cursor)!==null&&t!==void 0?t:(r=n.type.defaultProps)===null||r===void 0?void 0:r.cursor;if(!n||!v||!s||!o||m!=="ScatterChart"&&i!=="axis")return null;var y,p=uo;if(m==="ScatterChart")y=o,p=A9;else if(m==="BarChart")y=iz(f,o,c,d),p=xf;else if(f==="radial"){var x=kb(o),j=x.cx,N=x.cy,b=x.radius,g=x.startAngle,h=x.endAngle;y={cx:j,cy:N,startAngle:g,endAngle:h,innerRadius:b,outerRadius:b},p=b0}else y={points:sz(f,o,c)},p=uo;var w=vs(vs(vs(vs({stroke:"#ccc",pointerEvents:"none"},c),y),se(v,!1)),{},{payload:l,payloadIndex:u,className:ve("recharts-tooltip-cursor",v.className)});return k.isValidElement(v)?k.cloneElement(v,w):k.createElement(p,w)}var dz=["item"],fz=["children","className","width","height","style","compact","title","desc"];function ya(e){"@babel/helpers - typeof";return ya=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ya(e)}function Bn(){return Bn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},Bn.apply(this,arguments)}function ty(e,t){return pz(e)||hz(e,t)||Ob(e,t)||mz()}function mz(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hz(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var n,i,s,o,l=[],c=!0,u=!1;try{if(s=(r=r.call(e)).next,t!==0)for(;!(c=(n=s.call(r)).done)&&(l.push(n.value),l.length!==t);c=!0);}catch(d){u=!0,i=d}finally{try{if(!c&&r.return!=null&&(o=r.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function pz(e){if(Array.isArray(e))return e}function ry(e,t){if(e==null)return{};var r=vz(e,t),n,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)n=s[i],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function vz(e,t){if(e==null)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}function yz(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xz(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,Ab(n.key),n)}}function gz(e,t,r){return t&&xz(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function bz(e,t,r){return t=Mo(t),wz(e,Sb()?Reflect.construct(t,r||[],Mo(e).constructor):t.apply(e,r))}function wz(e,t){if(t&&(ya(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return jz(e)}function jz(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sb(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Sb=function(){return!!e})()}function Mo(e){return Mo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Mo(e)}function Nz(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ld(e,t)}function ld(e,t){return ld=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},ld(e,t)}function xa(e){return Oz(e)||Sz(e)||Ob(e)||kz()}function kz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ob(e,t){if(e){if(typeof e=="string")return cd(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cd(e,t)}}function Sz(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Oz(e){if(Array.isArray(e))return cd(e)}function cd(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function ny(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ny(Object(r),!0).forEach(function(n){ce(e,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ny(Object(r)).forEach(function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))})}return e}function ce(e,t,r){return t=Ab(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ab(e){var t=Az(e,"string");return ya(t)=="symbol"?t:t+""}function Az(e,t){if(ya(e)!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var n=r.call(e,t||"default");if(ya(n)!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pz={xAxis:["bottom","top"],yAxis:["left","right"]},Ez={width:"100%",height:"100%"},Pb={x:0,y:0};function ys(e){return e}var Tz=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},_z=function(t,r,n,i){var s=r.find(function(d){return d&&d.index===n});if(s){if(t==="horizontal")return{x:s.coordinate,y:i.y};if(t==="vertical")return{x:i.x,y:s.coordinate};if(t==="centric"){var o=s.coordinate,l=i.radius;return U(U(U({},i),Be(i.cx,i.cy,l,o)),{},{angle:o,radius:l})}var c=s.coordinate,u=i.angle;return U(U(U({},i),Be(i.cx,i.cy,c,u)),{},{angle:u,radius:c})}return Pb},Il=function(t,r){var n=r.graphicalItems,i=r.dataStartIndex,s=r.dataEndIndex,o=(n??[]).reduce(function(l,c){var u=c.props.data;return u&&u.length?[].concat(xa(l),xa(u)):l},[]);return o.length>0?o:t&&t.length&&Y(i)&&Y(s)?t.slice(i,s+1):[]};function Eb(e){return e==="number"?[0,"auto"]:void 0}var ud=function(t,r,n,i){var s=t.graphicalItems,o=t.tooltipAxis,l=Il(r,t);return n<0||!s||!s.length||n>=l.length?null:s.reduce(function(c,u){var d,f=(d=u.props.data)!==null&&d!==void 0?d:r;f&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=n&&(f=f.slice(t.dataStartIndex,t.dataEndIndex+1));var m;if(o.dataKey&&!o.allowDuplicatedCategory){var v=f===void 0?l:f;m=Cs(v,o.dataKey,i)}else m=f&&f[n]||l[n];return m?[].concat(xa(c),[h0(u,m)]):c},[])},ay=function(t,r,n,i){var s=i||{x:t.chartX,y:t.chartY},o=Tz(s,n),l=t.orderedTooltipTicks,c=t.tooltipAxis,u=t.tooltipTicks,d=QR(o,l,u,c);if(d>=0&&u){var f=u[d]&&u[d].value,m=ud(t,r,d,f),v=_z(n,l,d,s);return{activeTooltipIndex:d,activeLabel:f,activePayload:m,activeCoordinate:v}}return null},$z=function(t,r){var n=r.axes,i=r.graphicalItems,s=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,m=t.stackOffset,v=l0(d,s);return n.reduce(function(y,p){var x,j=p.type.defaultProps!==void 0?U(U({},p.type.defaultProps),p.props):p.props,N=j.type,b=j.dataKey,g=j.allowDataOverflow,h=j.allowDuplicatedCategory,w=j.scale,S=j.ticks,A=j.includeHidden,O=j[o];if(y[O])return y;var C=Il(t.data,{graphicalItems:i.filter(function(q){var J,X=o in q.props?q.props[o]:(J=q.type.defaultProps)===null||J===void 0?void 0:J[o];return X===O}),dataStartIndex:c,dataEndIndex:u}),T=C.length,E,M,$;az(j.domain,g,N)&&(E=ku(j.domain,null,g),v&&(N==="number"||w!=="auto")&&($=Xa(C,b,"category")));var D=Eb(N);if(!E||E.length===0){var F,_=(F=j.domain)!==null&&F!==void 0?F:D;if(b){if(E=Xa(C,b,N),N==="category"&&v){var R=YO(E);h&&R?(M=E,E=wo(0,T)):h||(E=Op(_,E,p).reduce(function(q,J){return q.indexOf(J)>=0?q:[].concat(xa(q),[J])},[]))}else if(N==="category")h?E=E.filter(function(q){return q!==""&&!he(q)}):E=Op(_,E,p).reduce(function(q,J){return q.indexOf(J)>=0||J===""||he(J)?q:[].concat(xa(q),[J])},[]);else if(N==="number"){var L=rL(C,i.filter(function(q){var J,X,ee=o in q.props?q.props[o]:(J=q.type.defaultProps)===null||J===void 0?void 0:J[o],re="hide"in q.props?q.props.hide:(X=q.type.defaultProps)===null||X===void 0?void 0:X.hide;return ee===O&&(A||!re)}),b,s,d);L&&(E=L)}v&&(N==="number"||w!=="auto")&&($=Xa(C,b,"category"))}else v?E=wo(0,T):l&&l[O]&&l[O].hasStack&&N==="number"?E=m==="expand"?[0,1]:m0(l[O].stackGroups,c,u):E=o0(C,i.filter(function(q){var J=o in q.props?q.props[o]:q.type.defaultProps[o],X="hide"in q.props?q.props.hide:q.type.defaultProps.hide;return J===O&&(A||!X)}),N,d,!0);if(N==="number")E=od(f,E,O,s,S),_&&(E=ku(_,E,g));else if(N==="category"&&_){var z=_,V=E.every(function(q){return z.indexOf(q)>=0});V&&(E=z)}}return U(U({},y),{},ce({},O,U(U({},j),{},{axisType:s,domain:E,categoricalDomain:$,duplicateDomain:M,originalDomain:(x=j.domain)!==null&&x!==void 0?x:D,isCategorical:v,layout:d})))},{})},Cz=function(t,r){var n=r.graphicalItems,i=r.Axis,s=r.axisType,o=r.axisIdKey,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.layout,f=t.children,m=Il(t.data,{graphicalItems:n,dataStartIndex:c,dataEndIndex:u}),v=m.length,y=l0(d,s),p=-1;return n.reduce(function(x,j){var N=j.type.defaultProps!==void 0?U(U({},j.type.defaultProps),j.props):j.props,b=N[o],g=Eb("number");if(!x[b]){p++;var h;return y?h=wo(0,v):l&&l[b]&&l[b].hasStack?(h=m0(l[b].stackGroups,c,u),h=od(f,h,b,s)):(h=ku(g,o0(m,n.filter(function(w){var S,A,O=o in w.props?w.props[o]:(S=w.type.defaultProps)===null||S===void 0?void 0:S[o],C="hide"in w.props?w.props.hide:(A=w.type.defaultProps)===null||A===void 0?void 0:A.hide;return O===b&&!C}),"number",d),i.defaultProps.allowDataOverflow),h=od(f,h,b,s)),U(U({},x),{},ce({},b,U(U({axisType:s},i.defaultProps),{},{hide:!0,orientation:$t(Pz,"".concat(s,".").concat(p%2),null),domain:h,originalDomain:g,isCategorical:y,layout:d})))}return x},{})},Mz=function(t,r){var n=r.axisType,i=n===void 0?"xAxis":n,s=r.AxisComp,o=r.graphicalItems,l=r.stackGroups,c=r.dataStartIndex,u=r.dataEndIndex,d=t.children,f="".concat(i,"Id"),m=Ct(d,s),v={};return m&&m.length?v=$z(t,{axes:m,graphicalItems:o,axisType:i,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u}):o&&o.length&&(v=Cz(t,{Axis:s,graphicalItems:o,axisType:i,axisIdKey:f,stackGroups:l,dataStartIndex:c,dataEndIndex:u})),v},Dz=function(t){var r=Rr(t),n=Nr(r,!1,!0);return{tooltipTicks:n,orderedTooltipTicks:zd(n,function(i){return i.coordinate}),tooltipAxis:r,tooltipAxisBandSize:oo(r,n)}},iy=function(t){var r=t.children,n=t.defaultShowTooltip,i=At(r,la),s=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),i&&i.props&&(i.props.startIndex>=0&&(s=i.props.startIndex),i.props.endIndex>=0&&(o=i.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:s,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!n}},Iz=function(t){return!t||!t.length?!1:t.some(function(r){var n=Br(r&&r.type);return n&&n.indexOf("Bar")>=0})},sy=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Rz=function(t,r){var n=t.props,i=t.graphicalItems,s=t.xAxisMap,o=s===void 0?{}:s,l=t.yAxisMap,c=l===void 0?{}:l,u=n.width,d=n.height,f=n.children,m=n.margin||{},v=At(f,la),y=At(f,Fr),p=Object.keys(c).reduce(function(h,w){var S=c[w],A=S.orientation;return!S.mirror&&!S.hide?U(U({},h),{},ce({},A,h[A]+S.width)):h},{left:m.left||0,right:m.right||0}),x=Object.keys(o).reduce(function(h,w){var S=o[w],A=S.orientation;return!S.mirror&&!S.hide?U(U({},h),{},ce({},A,$t(h,"".concat(A))+S.height)):h},{top:m.top||0,bottom:m.bottom||0}),j=U(U({},x),p),N=j.bottom;v&&(j.bottom+=v.props.height||la.defaultProps.height),y&&r&&(j=eL(j,i,n,r));var b=u-j.left-j.right,g=d-j.top-j.bottom;return U(U({brushBottom:N},j),{},{width:Math.max(b,0),height:Math.max(g,0)})},Lz=function(t,r){if(r==="xAxis")return t[r].width;if(r==="yAxis")return t[r].height},Tb=function(t){var r=t.chartName,n=t.GraphicalChild,i=t.defaultTooltipEventType,s=i===void 0?"axis":i,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,u=t.legendContent,d=t.formatAxisMap,f=t.defaultProps,m=function(j,N){var b=N.graphicalItems,g=N.stackGroups,h=N.offset,w=N.updateId,S=N.dataStartIndex,A=N.dataEndIndex,O=j.barSize,C=j.layout,T=j.barGap,E=j.barCategoryGap,M=j.maxBarSize,$=sy(C),D=$.numericAxisName,F=$.cateAxisName,_=Iz(b),R=[];return b.forEach(function(L,z){var V=Il(j.data,{graphicalItems:[L],dataStartIndex:S,dataEndIndex:A}),q=L.type.defaultProps!==void 0?U(U({},L.type.defaultProps),L.props):L.props,J=q.dataKey,X=q.maxBarSize,ee=q["".concat(D,"Id")],re=q["".concat(F,"Id")],Pe={},Ee=c.reduce(function(we,xe){var Te=N["".concat(xe.axisType,"Map")],wt=q["".concat(xe.axisType,"Id")];Te&&Te[wt]||xe.axisType==="zAxis"||wn();var ar=Te[wt];return U(U({},we),{},ce(ce({},xe.axisType,ar),"".concat(xe.axisType,"Ticks"),Nr(ar)))},Pe),G=Ee[F],ie=Ee["".concat(F,"Ticks")],oe=g&&g[ee]&&g[ee].hasStack&&dL(L,g[ee].stackGroups),I=Br(L.type).indexOf("Bar")>=0,te=oo(G,ie),ue=[],H=_&&ZR({barSize:O,stackGroups:g,totalSize:Lz(Ee,F)});if(I){var K,de,B=he(X)?M:X,ne=(K=(de=oo(G,ie,!0))!==null&&de!==void 0?de:B)!==null&&K!==void 0?K:0;ue=JR({barGap:T,barCategoryGap:E,bandSize:ne!==te?ne:te,sizeList:H[re],maxBarSize:B}),ne!==te&&(ue=ue.map(function(we){return U(U({},we),{},{position:U(U({},we.position),{},{offset:we.position.offset-ne/2})})}))}var je=L&&L.type&&L.type.getComposedData;je&&R.push({props:U(U({},je(U(U({},Ee),{},{displayedData:V,props:j,dataKey:J,item:L,bandSize:te,barPosition:ue,offset:h,stackedData:oe,layout:C,dataStartIndex:S,dataEndIndex:A}))),{},ce(ce(ce({key:L.key||"item-".concat(z)},D,Ee[D]),F,Ee[F]),"animationId",w)),childIndex:sA(L,j.children),item:L})}),R},v=function(j,N){var b=j.props,g=j.dataStartIndex,h=j.dataEndIndex,w=j.updateId;if(!wm({props:b}))return null;var S=b.children,A=b.layout,O=b.stackOffset,C=b.data,T=b.reverseStackOrder,E=sy(A),M=E.numericAxisName,$=E.cateAxisName,D=Ct(S,n),F=cL(C,D,"".concat(M,"Id"),"".concat($,"Id"),O,T),_=c.reduce(function(q,J){var X="".concat(J.axisType,"Map");return U(U({},q),{},ce({},X,Mz(b,U(U({},J),{},{graphicalItems:D,stackGroups:J.axisType===M&&F,dataStartIndex:g,dataEndIndex:h}))))},{}),R=Rz(U(U({},_),{},{props:b,graphicalItems:D}),N==null?void 0:N.legendBBox);Object.keys(_).forEach(function(q){_[q]=d(b,_[q],R,q.replace("Map",""),r)});var L=_["".concat($,"Map")],z=Dz(L),V=m(b,U(U({},_),{},{dataStartIndex:g,dataEndIndex:h,updateId:w,graphicalItems:D,stackGroups:F,offset:R}));return U(U({formattedGraphicalItems:V,graphicalItems:D,offset:R,stackGroups:F},z),_)},y=function(x){function j(N){var b,g,h;return yz(this,j),h=bz(this,j,[N]),ce(h,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),ce(h,"accessibilityManager",new nz),ce(h,"handleLegendBBoxUpdate",function(w){if(w){var S=h.state,A=S.dataStartIndex,O=S.dataEndIndex,C=S.updateId;h.setState(U({legendBBox:w},v({props:h.props,dataStartIndex:A,dataEndIndex:O,updateId:C},U(U({},h.state),{},{legendBBox:w}))))}}),ce(h,"handleReceiveSyncEvent",function(w,S,A){if(h.props.syncId===w){if(A===h.eventEmitterSymbol&&typeof h.props.syncMethod!="function")return;h.applySyncEvent(S)}}),ce(h,"handleBrushChange",function(w){var S=w.startIndex,A=w.endIndex;if(S!==h.state.dataStartIndex||A!==h.state.dataEndIndex){var O=h.state.updateId;h.setState(function(){return U({dataStartIndex:S,dataEndIndex:A},v({props:h.props,dataStartIndex:S,dataEndIndex:A,updateId:O},h.state))}),h.triggerSyncEvent({dataStartIndex:S,dataEndIndex:A})}}),ce(h,"handleMouseEnter",function(w){var S=h.getMouseInfo(w);if(S){var A=U(U({},S),{},{isTooltipActive:!0});h.setState(A),h.triggerSyncEvent(A);var O=h.props.onMouseEnter;fe(O)&&O(A,w)}}),ce(h,"triggeredAfterMouseMove",function(w){var S=h.getMouseInfo(w),A=S?U(U({},S),{},{isTooltipActive:!0}):{isTooltipActive:!1};h.setState(A),h.triggerSyncEvent(A);var O=h.props.onMouseMove;fe(O)&&O(A,w)}),ce(h,"handleItemMouseEnter",function(w){h.setState(function(){return{isTooltipActive:!0,activeItem:w,activePayload:w.tooltipPayload,activeCoordinate:w.tooltipPosition||{x:w.cx,y:w.cy}}})}),ce(h,"handleItemMouseLeave",function(){h.setState(function(){return{isTooltipActive:!1}})}),ce(h,"handleMouseMove",function(w){w.persist(),h.throttleTriggeredAfterMouseMove(w)}),ce(h,"handleMouseLeave",function(w){h.throttleTriggeredAfterMouseMove.cancel();var S={isTooltipActive:!1};h.setState(S),h.triggerSyncEvent(S);var A=h.props.onMouseLeave;fe(A)&&A(S,w)}),ce(h,"handleOuterEvent",function(w){var S=iA(w),A=$t(h.props,"".concat(S));if(S&&fe(A)){var O,C;/.*touch.*/i.test(S)?C=h.getMouseInfo(w.changedTouches[0]):C=h.getMouseInfo(w),A((O=C)!==null&&O!==void 0?O:{},w)}}),ce(h,"handleClick",function(w){var S=h.getMouseInfo(w);if(S){var A=U(U({},S),{},{isTooltipActive:!0});h.setState(A),h.triggerSyncEvent(A);var O=h.props.onClick;fe(O)&&O(A,w)}}),ce(h,"handleMouseDown",function(w){var S=h.props.onMouseDown;if(fe(S)){var A=h.getMouseInfo(w);S(A,w)}}),ce(h,"handleMouseUp",function(w){var S=h.props.onMouseUp;if(fe(S)){var A=h.getMouseInfo(w);S(A,w)}}),ce(h,"handleTouchMove",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&h.throttleTriggeredAfterMouseMove(w.changedTouches[0])}),ce(h,"handleTouchStart",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&h.handleMouseDown(w.changedTouches[0])}),ce(h,"handleTouchEnd",function(w){w.changedTouches!=null&&w.changedTouches.length>0&&h.handleMouseUp(w.changedTouches[0])}),ce(h,"handleDoubleClick",function(w){var S=h.props.onDoubleClick;if(fe(S)){var A=h.getMouseInfo(w);S(A,w)}}),ce(h,"handleContextMenu",function(w){var S=h.props.onContextMenu;if(fe(S)){var A=h.getMouseInfo(w);S(A,w)}}),ce(h,"triggerSyncEvent",function(w){h.props.syncId!==void 0&&gc.emit(bc,h.props.syncId,w,h.eventEmitterSymbol)}),ce(h,"applySyncEvent",function(w){var S=h.props,A=S.layout,O=S.syncMethod,C=h.state.updateId,T=w.dataStartIndex,E=w.dataEndIndex;if(w.dataStartIndex!==void 0||w.dataEndIndex!==void 0)h.setState(U({dataStartIndex:T,dataEndIndex:E},v({props:h.props,dataStartIndex:T,dataEndIndex:E,updateId:C},h.state)));else if(w.activeTooltipIndex!==void 0){var M=w.chartX,$=w.chartY,D=w.activeTooltipIndex,F=h.state,_=F.offset,R=F.tooltipTicks;if(!_)return;if(typeof O=="function")D=O(R,w);else if(O==="value"){D=-1;for(var L=0;L<R.length;L++)if(R[L].value===w.activeLabel){D=L;break}}var z=U(U({},_),{},{x:_.left,y:_.top}),V=Math.min(M,z.x+z.width),q=Math.min($,z.y+z.height),J=R[D]&&R[D].value,X=ud(h.state,h.props.data,D),ee=R[D]?{x:A==="horizontal"?R[D].coordinate:V,y:A==="horizontal"?q:R[D].coordinate}:Pb;h.setState(U(U({},w),{},{activeLabel:J,activeCoordinate:ee,activePayload:X,activeTooltipIndex:D}))}else h.setState(w)}),ce(h,"renderCursor",function(w){var S,A=h.state,O=A.isTooltipActive,C=A.activeCoordinate,T=A.activePayload,E=A.offset,M=A.activeTooltipIndex,$=A.tooltipAxisBandSize,D=h.getTooltipEventType(),F=(S=w.props.active)!==null&&S!==void 0?S:O,_=h.props.layout,R=w.key||"_recharts-cursor";return P.createElement(uz,{key:R,activeCoordinate:C,activePayload:T,activeTooltipIndex:M,chartName:r,element:w,isActive:F,layout:_,offset:E,tooltipAxisBandSize:$,tooltipEventType:D})}),ce(h,"renderPolarAxis",function(w,S,A){var O=$t(w,"type.axisType"),C=$t(h.state,"".concat(O,"Map")),T=w.type.defaultProps,E=T!==void 0?U(U({},T),w.props):w.props,M=C&&C[E["".concat(O,"Id")]];return k.cloneElement(w,U(U({},M),{},{className:ve(O,M.className),key:w.key||"".concat(S,"-").concat(A),ticks:Nr(M,!0)}))}),ce(h,"renderPolarGrid",function(w){var S=w.props,A=S.radialLines,O=S.polarAngles,C=S.polarRadius,T=h.state,E=T.radiusAxisMap,M=T.angleAxisMap,$=Rr(E),D=Rr(M),F=D.cx,_=D.cy,R=D.innerRadius,L=D.outerRadius;return k.cloneElement(w,{polarAngles:Array.isArray(O)?O:Nr(D,!0).map(function(z){return z.coordinate}),polarRadius:Array.isArray(C)?C:Nr($,!0).map(function(z){return z.coordinate}),cx:F,cy:_,innerRadius:R,outerRadius:L,key:w.key||"polar-grid",radialLines:A})}),ce(h,"renderLegend",function(){var w=h.state.formattedGraphicalItems,S=h.props,A=S.children,O=S.width,C=S.height,T=h.props.margin||{},E=O-(T.left||0)-(T.right||0),M=i0({children:A,formattedGraphicalItems:w,legendWidth:E,legendContent:u});if(!M)return null;var $=M.item,D=ry(M,dz);return k.cloneElement($,U(U({},D),{},{chartWidth:O,chartHeight:C,margin:T,onBBoxUpdate:h.handleLegendBBoxUpdate}))}),ce(h,"renderTooltip",function(){var w,S=h.props,A=S.children,O=S.accessibilityLayer,C=At(A,Wt);if(!C)return null;var T=h.state,E=T.isTooltipActive,M=T.activeCoordinate,$=T.activePayload,D=T.activeLabel,F=T.offset,_=(w=C.props.active)!==null&&w!==void 0?w:E;return k.cloneElement(C,{viewBox:U(U({},F),{},{x:F.left,y:F.top}),active:_,label:D,payload:_?$:[],coordinate:M,accessibilityLayer:O})}),ce(h,"renderBrush",function(w){var S=h.props,A=S.margin,O=S.data,C=h.state,T=C.offset,E=C.dataStartIndex,M=C.dataEndIndex,$=C.updateId;return k.cloneElement(w,{key:w.key||"_recharts-brush",onChange:fs(h.handleBrushChange,w.props.onChange),data:O,x:Y(w.props.x)?w.props.x:T.left,y:Y(w.props.y)?w.props.y:T.top+T.height+T.brushBottom-(A.bottom||0),width:Y(w.props.width)?w.props.width:T.width,startIndex:E,endIndex:M,updateId:"brush-".concat($)})}),ce(h,"renderReferenceElement",function(w,S,A){if(!w)return null;var O=h,C=O.clipPathId,T=h.state,E=T.xAxisMap,M=T.yAxisMap,$=T.offset,D=w.type.defaultProps||{},F=w.props,_=F.xAxisId,R=_===void 0?D.xAxisId:_,L=F.yAxisId,z=L===void 0?D.yAxisId:L;return k.cloneElement(w,{key:w.key||"".concat(S,"-").concat(A),xAxis:E[R],yAxis:M[z],viewBox:{x:$.left,y:$.top,width:$.width,height:$.height},clipPathId:C})}),ce(h,"renderActivePoints",function(w){var S=w.item,A=w.activePoint,O=w.basePoint,C=w.childIndex,T=w.isRange,E=[],M=S.props.key,$=S.item.type.defaultProps!==void 0?U(U({},S.item.type.defaultProps),S.item.props):S.item.props,D=$.activeDot,F=$.dataKey,_=U(U({index:C,dataKey:F,cx:A.x,cy:A.y,r:4,fill:yf(S.item),strokeWidth:2,stroke:"#fff",payload:A.payload,value:A.value},se(D,!1)),Ms(D));return E.push(j.renderActiveDot(D,_,"".concat(M,"-activePoint-").concat(C))),O?E.push(j.renderActiveDot(D,U(U({},_),{},{cx:O.x,cy:O.y}),"".concat(M,"-basePoint-").concat(C))):T&&E.push(null),E}),ce(h,"renderGraphicChild",function(w,S,A){var O=h.filterFormatItem(w,S,A);if(!O)return null;var C=h.getTooltipEventType(),T=h.state,E=T.isTooltipActive,M=T.tooltipAxis,$=T.activeTooltipIndex,D=T.activeLabel,F=h.props.children,_=At(F,Wt),R=O.props,L=R.points,z=R.isRange,V=R.baseLine,q=O.item.type.defaultProps!==void 0?U(U({},O.item.type.defaultProps),O.item.props):O.item.props,J=q.activeDot,X=q.hide,ee=q.activeBar,re=q.activeShape,Pe=!!(!X&&E&&_&&(J||ee||re)),Ee={};C!=="axis"&&_&&_.props.trigger==="click"?Ee={onClick:fs(h.handleItemMouseEnter,w.props.onClick)}:C!=="axis"&&(Ee={onMouseLeave:fs(h.handleItemMouseLeave,w.props.onMouseLeave),onMouseEnter:fs(h.handleItemMouseEnter,w.props.onMouseEnter)});var G=k.cloneElement(w,U(U({},O.props),Ee));function ie(xe){return typeof M.dataKey=="function"?M.dataKey(xe.payload):null}if(Pe)if($>=0){var oe,I;if(M.dataKey&&!M.allowDuplicatedCategory){var te=typeof M.dataKey=="function"?ie:"payload.".concat(M.dataKey.toString());oe=Cs(L,te,D),I=z&&V&&Cs(V,te,D)}else oe=L==null?void 0:L[$],I=z&&V&&V[$];if(re||ee){var ue=w.props.activeIndex!==void 0?w.props.activeIndex:$;return[k.cloneElement(w,U(U(U({},O.props),Ee),{},{activeIndex:ue})),null,null]}if(!he(oe))return[G].concat(xa(h.renderActivePoints({item:O,activePoint:oe,basePoint:I,childIndex:$,isRange:z})))}else{var H,K=(H=h.getItemByXY(h.state.activeCoordinate))!==null&&H!==void 0?H:{graphicalItem:G},de=K.graphicalItem,B=de.item,ne=B===void 0?w:B,je=de.childIndex,we=U(U(U({},O.props),Ee),{},{activeIndex:je});return[k.cloneElement(ne,we),null,null]}return z?[G,null,null]:[G,null]}),ce(h,"renderCustomized",function(w,S,A){return k.cloneElement(w,U(U({key:"recharts-customized-".concat(A)},h.props),h.state))}),ce(h,"renderMap",{CartesianGrid:{handler:ys,once:!0},ReferenceArea:{handler:h.renderReferenceElement},ReferenceLine:{handler:ys},ReferenceDot:{handler:h.renderReferenceElement},XAxis:{handler:ys},YAxis:{handler:ys},Brush:{handler:h.renderBrush,once:!0},Bar:{handler:h.renderGraphicChild},Line:{handler:h.renderGraphicChild},Area:{handler:h.renderGraphicChild},Radar:{handler:h.renderGraphicChild},RadialBar:{handler:h.renderGraphicChild},Scatter:{handler:h.renderGraphicChild},Pie:{handler:h.renderGraphicChild},Funnel:{handler:h.renderGraphicChild},Tooltip:{handler:h.renderCursor,once:!0},PolarGrid:{handler:h.renderPolarGrid,once:!0},PolarAngleAxis:{handler:h.renderPolarAxis},PolarRadiusAxis:{handler:h.renderPolarAxis},Customized:{handler:h.renderCustomized}}),h.clipPathId="".concat((b=N.id)!==null&&b!==void 0?b:Oa("recharts"),"-clip"),h.throttleTriggeredAfterMouseMove=xM(h.triggeredAfterMouseMove,(g=N.throttleDelay)!==null&&g!==void 0?g:1e3/60),h.state={},h}return Nz(j,x),gz(j,[{key:"componentDidMount",value:function(){var b,g;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(b=this.props.margin.left)!==null&&b!==void 0?b:0,top:(g=this.props.margin.top)!==null&&g!==void 0?g:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var b=this.props,g=b.children,h=b.data,w=b.height,S=b.layout,A=At(g,Wt);if(A){var O=A.props.defaultIndex;if(!(typeof O!="number"||O<0||O>this.state.tooltipTicks.length-1)){var C=this.state.tooltipTicks[O]&&this.state.tooltipTicks[O].value,T=ud(this.state,h,O,C),E=this.state.tooltipTicks[O].coordinate,M=(this.state.offset.top+w)/2,$=S==="horizontal",D=$?{x:E,y:M}:{y:E,x:M},F=this.state.formattedGraphicalItems.find(function(R){var L=R.item;return L.type.name==="Scatter"});F&&(D=U(U({},D),F.props.points[O].tooltipPosition),T=F.props.points[O].tooltipPayload);var _={activeTooltipIndex:O,isTooltipActive:!0,activeLabel:C,activePayload:T,activeCoordinate:D};this.setState(_),this.renderCursor(A),this.accessibilityManager.setIndex(O)}}}},{key:"getSnapshotBeforeUpdate",value:function(b,g){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==g.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==b.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==b.margin){var h,w;this.accessibilityManager.setDetails({offset:{left:(h=this.props.margin.left)!==null&&h!==void 0?h:0,top:(w=this.props.margin.top)!==null&&w!==void 0?w:0}})}return null}},{key:"componentDidUpdate",value:function(b){Bc([At(b.children,Wt)],[At(this.props.children,Wt)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var b=At(this.props.children,Wt);if(b&&typeof b.props.shared=="boolean"){var g=b.props.shared?"axis":"item";return l.indexOf(g)>=0?g:s}return s}},{key:"getMouseInfo",value:function(b){if(!this.container)return null;var g=this.container,h=g.getBoundingClientRect(),w=SM(h),S={chartX:Math.round(b.pageX-w.left),chartY:Math.round(b.pageY-w.top)},A=h.width/g.offsetWidth||1,O=this.inRange(S.chartX,S.chartY,A);if(!O)return null;var C=this.state,T=C.xAxisMap,E=C.yAxisMap,M=this.getTooltipEventType();if(M!=="axis"&&T&&E){var $=Rr(T).scale,D=Rr(E).scale,F=$&&$.invert?$.invert(S.chartX):null,_=D&&D.invert?D.invert(S.chartY):null;return U(U({},S),{},{xValue:F,yValue:_})}var R=ay(this.state,this.props.data,this.props.layout,O);return R?U(U({},S),R):null}},{key:"inRange",value:function(b,g){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,w=this.props.layout,S=b/h,A=g/h;if(w==="horizontal"||w==="vertical"){var O=this.state.offset,C=S>=O.left&&S<=O.left+O.width&&A>=O.top&&A<=O.top+O.height;return C?{x:S,y:A}:null}var T=this.state,E=T.angleAxisMap,M=T.radiusAxisMap;if(E&&M){var $=Rr(E);return Ep({x:S,y:A},$)}return null}},{key:"parseEventsOfWrapper",value:function(){var b=this.props.children,g=this.getTooltipEventType(),h=At(b,Wt),w={};h&&g==="axis"&&(h.props.trigger==="click"?w={onClick:this.handleClick}:w={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var S=Ms(this.props,this.handleOuterEvent);return U(U({},S),w)}},{key:"addListener",value:function(){gc.on(bc,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){gc.removeListener(bc,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(b,g,h){for(var w=this.state.formattedGraphicalItems,S=0,A=w.length;S<A;S++){var O=w[S];if(O.item===b||O.props.key===b.key||g===Br(O.item.type)&&h===O.childIndex)return O}return null}},{key:"renderClipPath",value:function(){var b=this.clipPathId,g=this.state.offset,h=g.left,w=g.top,S=g.height,A=g.width;return P.createElement("defs",null,P.createElement("clipPath",{id:b},P.createElement("rect",{x:h,y:w,height:S,width:A})))}},{key:"getXScales",value:function(){var b=this.state.xAxisMap;return b?Object.entries(b).reduce(function(g,h){var w=ty(h,2),S=w[0],A=w[1];return U(U({},g),{},ce({},S,A.scale))},{}):null}},{key:"getYScales",value:function(){var b=this.state.yAxisMap;return b?Object.entries(b).reduce(function(g,h){var w=ty(h,2),S=w[0],A=w[1];return U(U({},g),{},ce({},S,A.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(b){var g;return(g=this.state.xAxisMap)===null||g===void 0||(g=g[b])===null||g===void 0?void 0:g.scale}},{key:"getYScaleByAxisId",value:function(b){var g;return(g=this.state.yAxisMap)===null||g===void 0||(g=g[b])===null||g===void 0?void 0:g.scale}},{key:"getItemByXY",value:function(b){var g=this.state,h=g.formattedGraphicalItems,w=g.activeItem;if(h&&h.length)for(var S=0,A=h.length;S<A;S++){var O=h[S],C=O.props,T=O.item,E=T.type.defaultProps!==void 0?U(U({},T.type.defaultProps),T.props):T.props,M=Br(T.type);if(M==="Bar"){var $=(C.data||[]).find(function(R){return o9(b,R)});if($)return{graphicalItem:O,payload:$}}else if(M==="RadialBar"){var D=(C.data||[]).find(function(R){return Ep(b,R)});if(D)return{graphicalItem:O,payload:D}}else if(Al(O,w)||Pl(O,w)||Ci(O,w)){var F=GB({graphicalItem:O,activeTooltipItem:w,itemData:E.data}),_=E.activeIndex===void 0?F:E.activeIndex;return{graphicalItem:U(U({},O),{},{childIndex:_}),payload:Ci(O,w)?E.data[F]:O.props.data[F]}}}return null}},{key:"render",value:function(){var b=this;if(!wm(this))return null;var g=this.props,h=g.children,w=g.className,S=g.width,A=g.height,O=g.style,C=g.compact,T=g.title,E=g.desc,M=ry(g,fz),$=se(M,!1);if(C)return P.createElement(Rv,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},P.createElement(Uc,Bn({},$,{width:S,height:A,title:T,desc:E}),this.renderClipPath(),Nm(h,this.renderMap)));if(this.props.accessibilityLayer){var D,F;$.tabIndex=(D=this.props.tabIndex)!==null&&D!==void 0?D:0,$.role=(F=this.props.role)!==null&&F!==void 0?F:"application",$.onKeyDown=function(R){b.accessibilityManager.keyboardEvent(R)},$.onFocus=function(){b.accessibilityManager.focus()}}var _=this.parseEventsOfWrapper();return P.createElement(Rv,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},P.createElement("div",Bn({className:ve("recharts-wrapper",w),style:U({position:"relative",cursor:"default",width:S,height:A},O)},_,{ref:function(L){b.container=L}}),P.createElement(Uc,Bn({},$,{width:S,height:A,title:T,desc:E,style:Ez}),this.renderClipPath(),Nm(h,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(k.Component);ce(y,"displayName",r),ce(y,"defaultProps",U({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},f)),ce(y,"getDerivedStateFromProps",function(x,j){var N=x.dataKey,b=x.data,g=x.children,h=x.width,w=x.height,S=x.layout,A=x.stackOffset,O=x.margin,C=j.dataStartIndex,T=j.dataEndIndex;if(j.updateId===void 0){var E=iy(x);return U(U(U({},E),{},{updateId:0},v(U(U({props:x},E),{},{updateId:0}),j)),{},{prevDataKey:N,prevData:b,prevWidth:h,prevHeight:w,prevLayout:S,prevStackOffset:A,prevMargin:O,prevChildren:g})}if(N!==j.prevDataKey||b!==j.prevData||h!==j.prevWidth||w!==j.prevHeight||S!==j.prevLayout||A!==j.prevStackOffset||!Hn(O,j.prevMargin)){var M=iy(x),$={chartX:j.chartX,chartY:j.chartY,isTooltipActive:j.isTooltipActive},D=U(U({},ay(j,b,S)),{},{updateId:j.updateId+1}),F=U(U(U({},M),$),D);return U(U(U({},F),v(U({props:x},F),j)),{},{prevDataKey:N,prevData:b,prevWidth:h,prevHeight:w,prevLayout:S,prevStackOffset:A,prevMargin:O,prevChildren:g})}if(!Bc(g,j.prevChildren)){var _,R,L,z,V=At(g,la),q=V&&(_=(R=V.props)===null||R===void 0?void 0:R.startIndex)!==null&&_!==void 0?_:C,J=V&&(L=(z=V.props)===null||z===void 0?void 0:z.endIndex)!==null&&L!==void 0?L:T,X=q!==C||J!==T,ee=!he(b),re=ee&&!X?j.updateId:j.updateId+1;return U(U({updateId:re},v(U(U({props:x},j),{},{updateId:re,dataStartIndex:q,dataEndIndex:J}),j)),{},{prevChildren:g,dataStartIndex:q,dataEndIndex:J})}return null}),ce(y,"renderActiveDot",function(x,j,N){var b;return k.isValidElement(x)?b=k.cloneElement(x,j):fe(x)?b=x(j):b=P.createElement(jl,j),P.createElement(ke,{className:"recharts-active-dot",key:N},b)});var p=k.forwardRef(function(j,N){return P.createElement(y,Bn({},j,{ref:N}))});return p.displayName=y.displayName,p},Bz=Tb({chartName:"LineChart",GraphicalChild:Ji,axisComponents:[{axisType:"xAxis",AxisComp:Ml},{axisType:"yAxis",AxisComp:Dl}],formatAxisMap:AU}),Fz=Tb({chartName:"PieChart",GraphicalChild:Cr,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Ol},{axisType:"radiusAxis",AxisComp:kl}],formatAxisMap:wL,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const oy=["#0088FE","#00C49F","#FFBB28","#FF8042"],Uz=()=>{const[e,t]=k.useState("month"),[r,n]=k.useState({appointments:[],transactions:[],vendors:[]}),[i,s]=k.useState(!0),[o,l]=k.useState(null);k.useEffect(()=>{(async()=>{try{s(!0),l(null);const y=new Date;let p=new Date;e==="week"?p.setDate(y.getDate()-7):e==="month"?p.setMonth(y.getMonth()-1):p.setFullYear(y.getFullYear()-1);const x=ye(le(W,"appointments"),me("date",">=",Ke.fromDate(p)),me("date","<=",Ke.fromDate(y))),N=(await ge(x)).docs.map(h=>({id:h.id,...h.data()})),g=(await ge(le(W,"vendors"))).docs.map(h=>({id:h.id,...h.data()}));n({appointments:N,transactions:[],vendors:g})}catch(y){console.error("Error loading report data:",y),l("Virhe raporttien latauksessa")}finally{s(!1)}})()},[e]);const c=()=>{const v=r.appointments.reduce((x,j)=>x+j.totalPrice,0),y=r.appointments.filter(x=>x.status==="completed"),p=y.length>0?v/y.length:0;return{totalRevenue:v,averageTicket:p,appointmentCount:y.length}},u=()=>{const v=new Map;return r.appointments.forEach(y=>{const x=new Date(y.date.seconds*1e3).toISOString().split("T")[0];v.set(x,(v.get(x)||0)+y.totalPrice)}),Array.from(v.entries()).map(([y,p])=>({date:y,revenue:p}))},d=()=>{const v=new Map;return r.appointments.forEach(y=>{v.set(y.serviceId,(v.get(y.serviceId)||0)+1)}),Array.from(v.entries()).map(([y,p])=>({name:y,value:p}))},f=()=>{const v=c(),y={timeframe:e,metrics:v,appointments:r.appointments,vendors:r.vendors},p=new Blob([JSON.stringify(y,null,2)],{type:"application/json"}),x=URL.createObjectURL(p),j=document.createElement("a");j.href=x,j.download=`report-${e}-${new Date().toISOString()}.json`,document.body.appendChild(j),j.click(),document.body.removeChild(j),URL.revokeObjectURL(x)};if(i)return a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});if(o)return a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:a.jsx("div",{className:"flex",children:a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-700",children:o})})})});const m=c();return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Fe,{className:"h-5 w-5 text-gray-500"}),a.jsxs("select",{value:e,onChange:v=>t(v.target.value),className:"rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[a.jsx("option",{value:"week",children:"Viimeinen viikko"}),a.jsx("option",{value:"month",children:"Viimeinen kuukausi"}),a.jsx("option",{value:"year",children:"Viimeinen vuosi"})]})]}),a.jsxs("button",{onClick:f,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[a.jsx(By,{className:"h-4 w-4 mr-2"}),"Lataa raportti"]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Liikevaihto"}),a.jsxs("p",{className:"text-2xl font-bold",children:[m.totalRevenue.toFixed(2),"€"]})]}),a.jsx("div",{className:"p-3 bg-green-100 rounded-full",children:a.jsx(Ly,{className:"h-6 w-6 text-green-600"})})]}),a.jsxs("div",{className:"mt-4 flex items-center text-green-600",children:[a.jsx(ws,{className:"h-4 w-4 mr-1"}),a.jsxs("span",{className:"text-sm",children:["+12.5% edellisestä ",e==="week"?"viikosta":e==="month"?"kuukaudesta":"vuodesta"]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Keskiostos"}),a.jsxs("p",{className:"text-2xl font-bold",children:[m.averageTicket.toFixed(2),"€"]})]}),a.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:a.jsx(js,{className:"h-6 w-6 text-blue-600"})})]}),a.jsxs("div",{className:"mt-4 flex items-center text-red-600",children:[a.jsx(Dy,{className:"h-4 w-4 mr-1"}),a.jsxs("span",{className:"text-sm",children:["-2.3% edellisestä ",e==="week"?"viikosta":e==="month"?"kuukaudesta":"vuodesta"]})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"text-sm text-gray-500",children:"Varaukset"}),a.jsx("p",{className:"text-2xl font-bold",children:m.appointmentCount})]}),a.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:a.jsx(Fe,{className:"h-6 w-6 text-purple-600"})})]}),a.jsxs("div",{className:"mt-4 flex items-center text-green-600",children:[a.jsx(ws,{className:"h-4 w-4 mr-1"}),a.jsxs("span",{className:"text-sm",children:["+8.1% edellisestä ",e==="week"?"viikosta":e==="month"?"kuukaudesta":"vuodesta"]})]})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Liikevaihto"}),a.jsx("div",{className:"h-80",children:a.jsxs(Bz,{width:500,height:300,data:u(),margin:{top:5,right:30,left:20,bottom:5},children:[a.jsx(mb,{strokeDasharray:"3 3"}),a.jsx(Ml,{dataKey:"date"}),a.jsx(Dl,{}),a.jsx(Wt,{}),a.jsx(Fr,{}),a.jsx(Ji,{type:"monotone",dataKey:"revenue",stroke:"#8884d8"})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Palvelujakauma"}),a.jsx("div",{className:"h-80",children:a.jsxs(Fz,{width:400,height:300,children:[a.jsx(Cr,{data:d(),cx:200,cy:150,labelLine:!1,outerRadius:80,fill:"#8884d8",dataKey:"value",children:d().map((v,y)=>a.jsx(ul,{fill:oy[y%oy.length]},`cell-${y}`))}),a.jsx(Wt,{}),a.jsx(Fr,{})]})})]})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsx("div",{className:"p-6",children:a.jsx("h3",{className:"text-lg font-semibold",children:"Yritysten suorituskyky"})}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Yritys"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Varaukset"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Liikevaihto"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Arvosana"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Trendi"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.vendors.map(v=>{var x;const y=r.appointments.filter(j=>j.vendorId===v.id),p=y.reduce((j,N)=>j+N.totalPrice,0);return a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:v.logoImage?a.jsx("img",{className:"h-10 w-10 rounded-full",src:v.logoImage,alt:v.businessName}):a.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:a.jsx(_t,{className:"h-6 w-6 text-gray-500"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:v.businessName}),a.jsx("div",{className:"text-sm text-gray-500",children:v.city})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:y.length}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[p.toFixed(2),"€"]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(mt,{className:"h-5 w-5 text-yellow-400"}),a.jsx("span",{className:"ml-1 text-sm text-gray-900",children:((x=v.rating)==null?void 0:x.toFixed(1))||"-"})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center text-green-600",children:[a.jsx(ws,{className:"h-4 w-4 mr-1"}),a.jsx("span",{className:"text-sm",children:"+5.2%"})]})})]},v.id)})})]})})]})]})},Vz=({isOpen:e,onClose:t,vendor:r,onVerify:n,onBan:i})=>{const[s,o]=k.useState([]),[l,c]=k.useState([]),[u,d]=k.useState(null),[f,m]=k.useState(!0),[v,y]=k.useState("info"),[p,x]=k.useState(new Date),[j,N]=k.useState(0),[b,g]=k.useState([]);return k.useEffect(()=>{e&&(async()=>{try{m(!0);const[w,S,A]=await Promise.all([pn(r.id),ni(r.id),er(r.userId)]);o(w),c(S),d(A)}catch(w){console.error("Error loading vendor data:",w)}finally{m(!1)}})()},[e,r.id]),k.useEffect(()=>{const h=Oy(p),w=ky(p),S=l.filter(O=>{const C=O.date instanceof Date?O.date:new Date(O.date.seconds*1e3);return C>=h&&C<=w}),A=S.reduce((O,C)=>O+C.totalPrice,0);g(S),N(A)},[p,l]),e?a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:a.jsx("div",{className:"bg-white rounded-xl w-full max-w-4xl max-h-[90vh] overflow-hidden",children:a.jsxs("div",{className:"flex flex-col h-full",children:[a.jsx("div",{className:"p-6 border-b",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"w-16 h-16 rounded-xl overflow-hidden bg-gray-100",children:r.logoImage?a.jsx("img",{src:r.logoImage,alt:r.businessName,className:"w-full h-full object-cover"}):a.jsx("div",{className:"w-full h-full flex items-center justify-center",children:a.jsx(_t,{className:"w-8 h-8 text-gray-400"})})}),a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:r.businessName}),a.jsxs("p",{className:"text-gray-500",children:["Y-tunnus: ",r.businessId]})]})]}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:a.jsx(Me,{className:"w-6 h-6"})})]})}),a.jsx("div",{className:"border-b",children:a.jsxs("nav",{className:"flex -mb-px",children:[a.jsxs("button",{onClick:()=>y("info"),className:`py-4 px-6 inline-flex items-center border-b-2 font-medium text-sm
                  ${v==="info"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(_t,{className:"w-5 h-5 mr-2"}),"Tiedot"]}),a.jsxs("button",{onClick:()=>y("logs"),className:`py-4 px-6 inline-flex items-center border-b-2 font-medium text-sm
                  ${v==="logs"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(dN,{className:"w-5 h-5 mr-2"}),"Tapahtumat"]}),a.jsxs("button",{onClick:()=>y("income"),className:`py-4 px-6 inline-flex items-center border-b-2 font-medium text-sm
                  ${v==="income"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(Ly,{className:"w-5 h-5 mr-2"}),"Tulot"]})]})}),a.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[v==="info"&&a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Perustiedot"}),a.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(pt,{className:"w-5 h-5 text-gray-400 mr-3"}),a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:r.address}),a.jsxs("p",{className:"text-sm text-gray-500",children:[r.postalCode," ",r.city]})]})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(Kn,{className:"w-5 h-5 text-gray-400 mr-3"}),a.jsx("p",{children:r.phone})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(rr,{className:"w-5 h-5 text-gray-400 mr-3"}),a.jsx("p",{children:r.email})]}),r.website&&a.jsxs("div",{className:"flex items-center",children:[a.jsx(Es,{className:"w-5 h-5 text-gray-400 mr-3"}),a.jsx("a",{href:r.website,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-800",children:r.website})]})]}),a.jsx("h3",{className:"text-lg font-semibold pt-4",children:"Aukioloajat"}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:a.jsx("div",{className:"space-y-2",children:Object.entries(r.operatingHours).map(([h,w])=>a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsx("span",{className:"capitalize",children:Ne(new Date(2024,0,1),"EEEE",{locale:He})}),a.jsx("span",{className:"text-gray-600",children:w.open==="closed"&&w.close==="closed"?"Suljettu":w.open==="00:00"&&w.close==="23:59"?"24h":`${w.open} - ${w.close}`})]},h))})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-semibold",children:"Tilastot"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Fe,{className:"w-5 h-5 text-blue-600 mr-2"}),a.jsx("span",{className:"text-gray-600",children:"Varaukset"})]}),a.jsx("span",{className:"text-2xl font-bold",children:l.length})]})}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(mt,{className:"w-5 h-5 text-yellow-500 mr-2"}),a.jsx("span",{className:"text-gray-600",children:"Arvosana"})]}),a.jsx("span",{className:"text-2xl font-bold",children:r.rating||"-"})]})})]}),a.jsxs("h3",{className:"text-lg font-semibold pt-4",children:["Palvelut (",s.length,")"]}),a.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:a.jsxs("div",{className:"space-y-3",children:[s.map(h=>a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("p",{className:"font-medium",children:h.name}),a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(De,{className:"w-4 h-4 mr-1"}),a.jsxs("span",{children:[h.duration," min"]})]})]}),a.jsxs("span",{className:"font-medium",children:[h.price,"€"]})]},h.id)),s.length===0&&a.jsxs("div",{className:"text-center py-4 text-gray-500",children:[a.jsx(dt,{className:"w-8 h-8 mx-auto mb-2"}),a.jsx("p",{children:"Ei palveluita"})]})]})})]})]}),v==="logs"&&a.jsx("div",{className:"flow-root",children:u&&a.jsxs("ul",{role:"list",className:"-mb-8",children:[a.jsx("li",{children:a.jsxs("div",{className:"relative pb-8",children:[a.jsx("span",{className:"absolute left-5 top-5 -ml-px h-full w-0.5 bg-gray-200"}),a.jsxs("div",{className:"relative flex items-start space-x-3",children:[a.jsx("div",{className:"relative",children:a.jsx("div",{className:"h-10 w-10 rounded-full bg-blue-50 flex items-center justify-center ring-8 ring-white",children:a.jsx(_t,{className:"w-5 h-5 text-blue-500"})})}),a.jsx("div",{className:"min-w-0 flex-1 py-3",children:a.jsx("div",{className:"text-sm leading-8 text-gray-500",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium text-gray-900",children:"Yritys rekisteröity"}),a.jsx("time",{className:"flex-shrink-0 whitespace-nowrap",children:Ne(new Date(r.createdAt.seconds*1e3),"d.M.yyyy 'klo' HH:mm",{locale:He})})]})})})]})]})}),r.verified&&a.jsx("li",{children:a.jsxs("div",{className:"relative pb-8",children:[a.jsx("span",{className:"absolute left-5 top-5 -ml-px h-full w-0.5 bg-gray-200"}),a.jsxs("div",{className:"relative flex items-start space-x-3",children:[a.jsx("div",{className:"relative",children:a.jsx("div",{className:"h-10 w-10 rounded-full bg-green-50 flex items-center justify-center ring-8 ring-white",children:a.jsx(Nt,{className:"w-5 h-5 text-green-500"})})}),a.jsx("div",{className:"min-w-0 flex-1 py-3",children:a.jsx("div",{className:"text-sm leading-8 text-gray-500",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium text-gray-900",children:"Yritys vahvistettu"}),a.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Vahvistettu"})]})})})]})]})}),l.map(h=>a.jsx("li",{children:a.jsxs("div",{className:"relative pb-8",children:[a.jsx("span",{className:"absolute left-5 top-5 -ml-px h-full w-0.5 bg-gray-200"}),a.jsxs("div",{className:"relative flex items-start space-x-3",children:[a.jsx("div",{className:"relative",children:a.jsx("div",{className:"h-10 w-10 rounded-full bg-purple-50 flex items-center justify-center ring-8 ring-white",children:a.jsx(Fe,{className:"w-5 h-5 text-purple-500"})})}),a.jsx("div",{className:"min-w-0 flex-1 py-3",children:a.jsxs("div",{className:"text-sm leading-8 text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("span",{className:"font-medium text-gray-900",children:["Varaus #",h.id.slice(0,8)]}),a.jsx("time",{className:"flex-shrink-0 whitespace-nowrap",children:Ne(h.date instanceof Date?h.date:new Date(h.date.seconds*1e3),"d.M.yyyy 'klo' HH:mm",{locale:He})})]}),a.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${h.status==="confirmed"?"bg-green-100 text-green-800":h.status==="completed"?"bg-blue-100 text-blue-800":h.status==="cancelled"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:h.status==="confirmed"?"Vahvistettu":h.status==="completed"?"Valmis":h.status==="cancelled"?"Peruttu":h.status}),h.feedback&&a.jsxs("div",{className:"flex items-center text-yellow-500",children:[a.jsx(mt,{className:"w-4 h-4 fill-current"}),a.jsx("span",{className:"ml-1 text-sm",children:h.feedback.rating})]})]}),a.jsxs("span",{className:"font-medium",children:[h.totalPrice,"€"]})]})]})})]})]})},h.id))]})}),v==="income"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("button",{onClick:()=>x(h=>Ec(h,1)),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(vn,{className:"w-5 h-5 rotate-90"})}),a.jsx("h3",{className:"text-lg font-medium",children:Ne(p,"MMMM yyyy",{locale:He})}),a.jsx("button",{onClick:()=>x(h=>Ec(h,-1)),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(vn,{className:"w-5 h-5 -rotate-90"})})]}),a.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:a.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Tulot yhteensä"}),a.jsxs("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:[j.toFixed(2),"€"]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-gray-500",children:"Varaukset"}),a.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:b.length})]})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow-sm border overflow-hidden",children:[a.jsx("div",{className:"px-4 py-5 sm:px-6",children:a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Kuukauden varaukset"})}),a.jsx("div",{className:"border-t border-gray-200",children:a.jsxs("ul",{role:"list",className:"divide-y divide-gray-200",children:[b.map(h=>a.jsx("li",{className:"px-4 py-4 sm:px-6",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex flex-col",children:[a.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[h.customerDetails.firstName," ",h.customerDetails.lastName]}),a.jsx("p",{className:"text-sm text-gray-500",children:Ne(h.date instanceof Date?h.date:new Date(h.date.seconds*1e3),"d.M.yyyy 'klo' HH:mm",{locale:He})})]}),a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full mr-4 ${h.status==="confirmed"?"bg-green-100 text-green-800":h.status==="completed"?"bg-blue-100 text-blue-800":h.status==="cancelled"?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`,children:h.status==="confirmed"?"Vahvistettu":h.status==="completed"?"Valmis":h.status==="cancelled"?"Peruttu":h.status}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[h.totalPrice.toFixed(2),"€"]})]})]})},h.id)),b.length===0&&a.jsx("li",{className:"px-4 py-8 text-center text-gray-500",children:"Ei varauksia tässä kuussa"})]})})]})]})]}),a.jsx("div",{className:"p-6 border-t bg-gray-50",children:a.jsxs("div",{className:"flex justify-between items-center",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${r.verified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:r.verified?"Vahvistettu":"Odottaa vahvistusta"}),a.jsx("span",{className:"mx-2 text-gray-300",children:"•"}),a.jsxs("span",{className:"text-sm text-gray-500",children:["Liittynyt ",Ne(new Date(r.createdAt.seconds*1e3),"d.M.yyyy")]})]}),a.jsxs("div",{className:"flex space-x-3",children:[!r.verified&&a.jsxs("button",{onClick:()=>n(r.id),className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[a.jsx(Nt,{className:"w-4 h-4 mr-2"}),"Vahvista"]}),a.jsxs("button",{onClick:()=>i(r.userId),className:"flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:[a.jsx(ai,{className:"w-4 h-4 mr-2"}),"Estä"]})]})]})})]})})}):null},Hz=()=>{var y;const[e,t]=k.useState([]),[r,n]=k.useState(!0),[i,s]=k.useState(null),[o,l]=k.useState(null),[c,u]=k.useState(""),[d,f]=k.useState(!1);k.useEffect(()=>{(async()=>{try{n(!0);const x=await ql();t(x)}catch(x){console.error("Error loading tickets:",x),s("Virhe tukipyyntöjen latauksessa")}finally{n(!1)}})()},[]);const m=async()=>{if(!(!o||!c.trim()))try{f(!0),await Q1(o.id,{userId:"admin",userRole:"admin",message:c});const p=await ql();t(p),u("");const x=p.find(j=>j.id===o.id);x&&l(x)}catch(p){console.error("Error sending response:",p),s("Virhe vastauksen lähetyksessä")}finally{f(!1)}},v=async()=>{if(o)try{await Z1(o.id);const p=await ql();t(p);const x=p.find(j=>j.id===o.id);x&&l(x)}catch(p){console.error("Error closing ticket:",p),s("Virhe tukipyynnön sulkemisessa")}};return r?a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx(Je,{className:"w-8 h-8 text-blue-600 animate-spin"})}):i?a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-lg",children:a.jsxs("div",{className:"flex",children:[a.jsx(Me,{className:"h-5 w-5 text-red-400"}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-700",children:i})})]})}):a.jsx("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 divide-x divide-gray-200",children:[a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Tukipyynnöt"}),a.jsxs("div",{className:"space-y-4",children:[e.map(p=>a.jsxs("div",{onClick:()=>l(p),className:`p-4 rounded-lg cursor-pointer transition-all
                  ${(o==null?void 0:o.id)===p.id?"bg-blue-50 ring-2 ring-blue-500":"bg-gray-50 hover:bg-gray-100"}`,children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsxs("div",{className:"flex items-center",children:[p.userRole==="vendor"?a.jsx(_t,{className:"w-4 h-4 text-blue-600"}):a.jsx(bt,{className:"w-4 h-4 text-green-600"}),a.jsx("span",{className:"ml-2 text-sm font-medium",children:p.userRole==="vendor"?"Yritys":"Asiakas"})]}),a.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium
                    ${p.status==="open"?"bg-green-100 text-green-800":"bg-gray-100 text-gray-800"}`,children:p.status==="open"?"Avoin":"Suljettu"})]}),a.jsx("h4",{className:"font-medium mb-1",children:p.subject}),a.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:p.message}),a.jsxs("div",{className:"flex items-center mt-2 text-xs text-gray-500",children:[a.jsx(De,{className:"w-3 h-3 mr-1"}),Ne(new Date(p.createdAt.seconds*1e3),"d.M.yyyy 'klo' HH:mm",{locale:He})]})]},p.id)),e.length===0&&a.jsxs("div",{className:"text-center py-8 text-gray-500",children:[a.jsx(Or,{className:"w-12 h-12 mx-auto mb-3"}),a.jsx("p",{children:"Ei tukipyyntöjä"})]})]})]}),a.jsx("div",{className:"p-6",children:o?a.jsxs("div",{className:"h-full flex flex-col",children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("h3",{className:"text-lg font-semibold",children:o.subject}),a.jsx("button",{onClick:v,disabled:o.status==="closed",className:`px-3 py-1 rounded-lg text-sm font-medium
                      ${o.status==="open"?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-100 text-gray-400 cursor-not-allowed"}`,children:o.status==="open"?"Sulje tukipyyntö":"Suljettu"})]}),a.jsxs("div",{className:"flex items-center mt-2 text-sm text-gray-500",children:[a.jsx(De,{className:"w-4 h-4 mr-1"}),Ne(new Date(o.createdAt.seconds*1e3),"d.M.yyyy 'klo' HH:mm",{locale:He})]})]}),a.jsxs("div",{className:"flex-1 overflow-y-auto mb-4",children:[a.jsx("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:a.jsx("p",{className:"text-gray-900",children:o.message})}),(y=o.responses)==null?void 0:y.map((p,x)=>a.jsx("div",{className:`mb-4 flex ${p.userRole==="admin"?"justify-end":""}`,children:a.jsxs("div",{className:`rounded-lg p-4 max-w-[80%] ${p.userRole==="admin"?"bg-blue-50 text-blue-900":"bg-gray-50 text-gray-900"}`,children:[a.jsxs("div",{className:"flex items-center mb-2",children:[p.userRole==="admin"?a.jsx(_t,{className:"w-4 h-4 text-blue-600"}):a.jsx(bt,{className:"w-4 h-4 text-gray-600"}),a.jsx("span",{className:"ml-2 text-xs font-medium",children:p.userRole==="admin"?"Ylläpito":"Asiakas"})]}),a.jsx("p",{className:"text-sm",children:p.message}),a.jsx("div",{className:"mt-2 text-xs text-gray-500",children:Ne(new Date(p.createdAt.seconds*1e3),"d.M.yyyy 'klo' HH:mm",{locale:He})})]})},p.id))]}),o.status==="open"&&a.jsx("div",{className:"mt-auto",children:a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("input",{type:"text",value:c,onChange:p=>u(p.target.value),placeholder:"Kirjoita vastaus...",className:"flex-1 rounded-lg border-gray-300 focus:border-blue-500 focus:ring-blue-500"}),a.jsx("button",{onClick:m,disabled:!c.trim()||d,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:d?a.jsx(Je,{className:"w-5 h-5 animate-spin"}):a.jsx(_s,{className:"w-5 h-5"})})]})})]}):a.jsx("div",{className:"h-full flex items-center justify-center text-gray-500",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Or,{className:"w-12 h-12 mx-auto mb-3"}),a.jsx("p",{children:"Valitse tukipyyntö"})]})})})]})})},zz=({isOpen:e,onClose:t,user:r,appointments:n=[]})=>{var l;if(!e)return null;const i=[{type:"account",date:r.createdAt,description:"Tili luotu",icon:a.jsx(bt,{className:"w-5 h-5 text-blue-500"})},...(((l=r.wallet)==null?void 0:l.transactions)||[]).map(c=>({type:"transaction",date:c.timestamp,description:c.description,amount:c.amount,transactionType:c.type,icon:a.jsx(gt,{className:"w-5 h-5 text-yellow-500"})})),...n.map(c=>({type:"appointment",date:c.date,description:`Varaus #${c.id.slice(0,8)}`,status:c.status,price:c.totalPrice,icon:a.jsx(Fe,{className:"w-5 h-5 text-green-500"})}))].sort((c,u)=>{const d=c.date instanceof Date?c.date:new Date(c.date.seconds*1e3);return(u.date instanceof Date?u.date:new Date(u.date.seconds*1e3)).getTime()-d.getTime()}),s=c=>{switch(c){case"confirmed":return"bg-green-100 text-green-800";case"completed":return"bg-blue-100 text-blue-800";case"cancelled":return"bg-red-100 text-red-800";case"no_show":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},o=c=>{switch(c){case"confirmed":return"Vahvistettu";case"completed":return"Valmis";case"cancelled":return"Peruttu";case"no_show":return"Ei saapunut";default:return c}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[a.jsx("div",{className:"p-6 border-b",children:a.jsxs("div",{className:"flex justify-between items-start",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Tilin tapahtumat"}),a.jsxs("p",{className:"mt-1 text-gray-500",children:[r.role==="vendor"?"Yritys":"Asiakas",": ",r.email]})]}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 p-2 hover:bg-gray-100 rounded-full transition-colors",children:a.jsx(Me,{className:"w-6 h-6"})})]})}),a.jsx("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:a.jsx("div",{className:"flow-root",children:a.jsx("ul",{role:"list",className:"-mb-8",children:i.map((c,u)=>a.jsx("li",{children:a.jsxs("div",{className:"relative pb-8",children:[u!==i.length-1?a.jsx("span",{className:"absolute left-5 top-5 -ml-px h-full w-0.5 bg-gray-200","aria-hidden":"true"}):null,a.jsxs("div",{className:"relative flex items-start space-x-3",children:[a.jsx("div",{className:"relative",children:a.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-50 flex items-center justify-center ring-8 ring-white",children:c.icon})}),a.jsx("div",{className:"min-w-0 flex-1 py-3",children:a.jsxs("div",{className:"text-sm leading-8 text-gray-500",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"font-medium text-gray-900",children:c.description}),a.jsx("time",{className:"flex-shrink-0 whitespace-nowrap",children:Ne(c.date instanceof Date?c.date:new Date(c.date.seconds*1e3),"d.M.yyyy 'klo' HH:mm",{locale:He})})]}),"transactionType"in c&&a.jsx("div",{className:"mt-2 flex items-center justify-between",children:a.jsxs("span",{className:`text-sm ${c.transactionType==="credit"?"text-green-600":"text-red-600"}`,children:[c.transactionType==="credit"?"+":"-",c.amount," kolikkoa"]})}),"status"in c&&a.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[a.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${s(c.status)}`,children:o(c.status)}),a.jsxs("span",{className:"font-medium",children:[c.price,"€"]})]})]})})]})]})},u))})})})]})})},qz=({isOpen:e,onClose:t,user:r,onCoinsUpdated:n})=>{const[i,s]=k.useState(""),[o,l]=k.useState(""),[c,u]=k.useState("add"),[d,f]=k.useState(!1),[m,v]=k.useState(null);if(!e)return null;const y=async p=>{if(p.preventDefault(),!i||!o){v("Täytä kaikki kentät");return}const x=parseInt(i);if(isNaN(x)||x<=0){v("Virheellinen määrä");return}if(c==="remove"&&x>r.wallet.coins){v("Käyttäjällä ei ole tarpeeksi kolikoita");return}try{f(!0),v(null),await L1(r.id,c==="add"?x:-x,`${c==="add"?"Lisätty":"Vähennetty"} ylläpidon toimesta: ${o}`),n(),t()}catch(j){console.error("Error updating coins:",j),v("Virhe kolikoiden päivityksessä")}finally{f(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:a.jsx("div",{className:"bg-white rounded-xl w-full max-w-md overflow-hidden",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(gt,{className:"w-6 h-6 text-yellow-500 mr-2"}),a.jsx("h2",{className:"text-xl font-bold",children:"Hallitse kolikoita"})]}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700",children:a.jsx(Me,{className:"w-6 h-6"})})]}),a.jsx("div",{className:"mb-6",children:a.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500 mb-2",children:[a.jsx("span",{children:"Nykyinen saldo"}),a.jsxs("span",{className:"font-medium text-gray-900",children:[r.wallet.coins," kolikkoa"]})]})}),a.jsxs("form",{onSubmit:y,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Toiminto"}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("button",{type:"button",onClick:()=>u("add"),className:`p-3 rounded-lg flex items-center justify-center transition-all
                    ${c==="add"?"bg-green-100 text-green-700 ring-2 ring-green-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(lr,{className:"w-5 h-5 mr-2"}),"Lisää"]}),a.jsxs("button",{type:"button",onClick:()=>u("remove"),className:`p-3 rounded-lg flex items-center justify-center transition-all
                    ${c==="remove"?"bg-red-100 text-red-700 ring-2 ring-red-500":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[a.jsx(tm,{className:"w-5 h-5 mr-2"}),"Vähennä"]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Määrä"}),a.jsx("input",{type:"number",min:"1",value:i,onChange:p=>s(p.target.value),className:`block w-full rounded-lg border-gray-300 shadow-sm
                  focus:border-blue-500 focus:ring-blue-500`,placeholder:"Syötä määrä",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Kuvaus"}),a.jsx("input",{type:"text",value:o,onChange:p=>l(p.target.value),className:`block w-full rounded-lg border-gray-300 shadow-sm
                  focus:border-blue-500 focus:ring-blue-500`,placeholder:"Syötä kuvaus",required:!0})]}),m&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:a.jsxs("div",{className:"flex",children:[a.jsx(tr,{className:"h-5 w-5 text-red-400"}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-700",children:m})})]})}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:"Peruuta"}),a.jsx("button",{type:"submit",disabled:d,className:`px-4 py-2 rounded-lg text-white font-medium flex items-center
                  ${c==="add"?"bg-green-600 hover:bg-green-700":"bg-red-600 hover:bg-red-700"} disabled:opacity-50`,children:d?a.jsxs(a.Fragment,{children:[a.jsx(Je,{className:"animate-spin h-5 w-5 mr-2"}),"Käsitellään..."]}):a.jsxs(a.Fragment,{children:[c==="add"?a.jsx(lr,{className:"w-5 h-5 mr-2"}):a.jsx(tm,{className:"w-5 h-5 mr-2"}),c==="add"?"Lisää kolikot":"Vähennä kolikot"]})})]})]})]})})})},Wz=()=>{const[e,t]=k.useState({activeUsers:0,newUsersToday:0,totalUsers:0,totalAppointments:0,appointmentsToday:0,pendingAppointments:0,completionRate:0,averageResponseTime:0,errorRate:0,uptime:100,totalRevenue:0,revenueToday:0,averageRating:0,securityIncidents:0}),[r,n]=k.useState(!0),[i,s]=k.useState(null),[o,l]=k.useState(new Date);return k.useEffect(()=>{const c=async()=>{try{n(!0),s(null);const d=new Date;d.setDate(d.getDate()-1);const f=new Date;f.setHours(0,0,0,0);const m=ye(le(W,"users"),me("lastLogin",">=",Ke.fromDate(d))),y=(await ge(m)).size,p=ye(le(W,"users"),me("createdAt",">=",Ke.fromDate(f))),j=(await ge(p)).size,b=(await ge(le(W,"users"))).size,g=ye(le(W,"appointments"),Xe("date","desc"),Tt(100)),w=(await ge(g)).docs.map(L=>({...L.data()})),S=w.filter(L=>new Date(L.date.seconds*1e3)>=f),A=w.reduce((L,z)=>L+z.totalPrice,0),O=S.reduce((L,z)=>L+z.totalPrice,0),C=w.filter(L=>L.status==="pending").length,T=w.filter(L=>{var z;return(z=L.feedback)==null?void 0:z.rating}),E=T.length>0?T.reduce((L,z)=>{var V;return L+(((V=z.feedback)==null?void 0:V.rating)||0)},0)/T.length:0,$=w.filter(L=>L.status==="completed").length/w.length*100,D=w.map(L=>{const z=new Date(L.createdAt.seconds*1e3);return new Date(L.updatedAt.seconds*1e3).getTime()-z.getTime()}),F=D.reduce((L,z)=>L+z,0)/D.length,R=w.filter(L=>L.status==="cancelled"||L.status==="no_show").length/w.length*100;t({activeUsers:y,newUsersToday:j,totalUsers:b,totalAppointments:w.length,appointmentsToday:S.length,pendingAppointments:C,completionRate:$,averageResponseTime:F/1e3,errorRate:R,uptime:99.99,totalRevenue:A,revenueToday:O,averageRating:E,securityIncidents:0}),l(new Date)}catch(d){console.error("Error calculating metrics:",d),s("Virhe mittareiden laskennassa")}finally{n(!1)}};c();const u=setInterval(c,6e4);return()=>clearInterval(u)},[]),r?a.jsx("div",{className:"animate-pulse",children:a.jsx("div",{className:"h-64 bg-gray-200 rounded-lg"})}):i?a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded-lg",children:a.jsxs("div",{className:"flex",children:[a.jsx(Cc,{className:"h-6 w-6 text-red-400"}),a.jsxs("div",{className:"ml-3",children:[a.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Virhe järjestelmän tilan seurannassa"}),a.jsx("p",{className:"mt-2 text-sm text-red-700",children:i})]})]})}):a.jsx("div",{className:"space-y-6",children:a.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden",children:[a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx($c,{className:"h-6 w-6 text-green-500 mr-2"}),a.jsx("h2",{className:"text-xl font-bold",children:"Järjestelmän tila"})]}),a.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[a.jsx(De,{className:"h-4 w-4 mr-1"}),"Päivitetty: ",o.toLocaleTimeString()]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(yn,{className:"h-5 w-5 text-purple-600"}),a.jsx("span",{className:"ml-2 text-sm font-medium text-purple-900",children:"Käyttäjät"})]}),a.jsx(js,{className:"h-5 w-5 text-purple-600"})]}),a.jsxs("div",{className:"mt-2 space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-purple-700",children:"Aktiiviset"}),a.jsx("span",{className:"font-medium text-purple-900",children:e.activeUsers})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-purple-700",children:"Uudet tänään"}),a.jsx("span",{className:"font-medium text-purple-900",children:e.newUsersToday})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-purple-700",children:"Yhteensä"}),a.jsx("span",{className:"font-medium text-purple-900",children:e.totalUsers})]})]})]}),a.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Fe,{className:"h-5 w-5 text-blue-600"}),a.jsx("span",{className:"ml-2 text-sm font-medium text-blue-900",children:"Varaukset"})]}),a.jsx(js,{className:"h-5 w-5 text-blue-600"})]}),a.jsxs("div",{className:"mt-2 space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-blue-700",children:"Tänään"}),a.jsx("span",{className:"font-medium text-blue-900",children:e.appointmentsToday})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-blue-700",children:"Odottavat"}),a.jsx("span",{className:"font-medium text-blue-900",children:e.pendingAppointments})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-blue-700",children:"Yhteensä"}),a.jsx("span",{className:"font-medium text-blue-900",children:e.totalAppointments})]})]})]}),a.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Fo,{className:"h-5 w-5 text-green-600"}),a.jsx("span",{className:"ml-2 text-sm font-medium text-green-900",children:"Tulot"})]}),a.jsx(js,{className:"h-5 w-5 text-green-600"})]}),a.jsxs("div",{className:"mt-2 space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-green-700",children:"Tänään"}),a.jsxs("span",{className:"font-medium text-green-900",children:[e.revenueToday.toFixed(2),"€"]})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-green-700",children:"Yhteensä"}),a.jsxs("span",{className:"font-medium text-green-900",children:[e.totalRevenue.toFixed(2),"€"]})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-green-700",children:"Keskiarvo"}),a.jsxs("span",{className:"font-medium text-green-900",children:[(e.totalRevenue/e.totalAppointments||0).toFixed(2),"€"]})]})]})]}),a.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(jN,{className:"h-5 w-5 text-yellow-600"}),a.jsx("span",{className:"ml-2 text-sm font-medium text-yellow-900",children:"Turvallisuus"})]}),a.jsx(Hr,{className:"h-5 w-5 text-yellow-600"})]}),a.jsxs("div",{className:"mt-2 space-y-2",children:[a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-yellow-700",children:"Häiriöt"}),a.jsx("span",{className:"font-medium text-yellow-900",children:e.securityIncidents})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-yellow-700",children:"Käytettävyys"}),a.jsxs("span",{className:"font-medium text-yellow-900",children:[e.uptime,"%"]})]}),a.jsxs("div",{className:"flex items-center justify-between text-sm",children:[a.jsx("span",{className:"text-yellow-700",children:"Tyytyväisyys"}),a.jsxs("div",{className:"flex items-center",children:[a.jsx(mt,{className:"w-4 h-4 text-yellow-500 fill-current"}),a.jsx("span",{className:"ml-1 font-medium text-yellow-900",children:e.averageRating.toFixed(1)})]})]})]})]})]})]}),a.jsx("div",{className:"border-t border-gray-200",children:a.jsxs("div",{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-medium mb-4",children:"Suorituskyky"}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(wN,{className:"h-5 w-5 text-green-600"}),a.jsx("span",{className:"ml-2 text-sm font-medium text-green-900",children:"Palvelin"})]}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[e.uptime,"% käytettävyys"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:a.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-500",style:{width:`${e.uptime}%`}})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(oN,{className:"h-5 w-5 text-blue-600"}),a.jsx("span",{className:"ml-2 text-sm font-medium text-blue-900",children:"Tietokanta"})]}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[e.averageResponseTime.toFixed(2),"s vasteaika"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:a.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(e.averageResponseTime/5*100,100)}%`}})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Hr,{className:"h-5 w-5 text-green-600"}),a.jsx("span",{className:"ml-2 text-sm font-medium text-green-900",children:"Varausten onnistuminen"})]}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[e.completionRate.toFixed(1),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:a.jsx("div",{className:"bg-green-600 h-2 rounded-full transition-all duration-500",style:{width:`${e.completionRate}%`}})})]}),a.jsxs("div",{children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Cc,{className:`h-5 w-5 ${e.errorRate>10?"text-red-600":"text-yellow-600"}`}),a.jsx("span",{className:"ml-2 text-sm font-medium text-gray-900",children:"Virhemäärä"})]}),a.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[e.errorRate.toFixed(1),"%"]})]}),a.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-500 ${e.errorRate>10?"bg-red-600":"bg-yellow-600"}`,style:{width:`${e.errorRate}%`}})})]})]})]})})]})})},Kz=()=>{const{currentUser:e}=Ye(),[t,r]=k.useState([]),[n,i]=k.useState([]),[s,o]=k.useState(!0),[l,c]=k.useState(null),[u,d]=k.useState(!1);k.useState(null);const[f,m]=k.useState({status:"all",priority:"all",category:"all",searchQuery:""}),[v,y]=k.useState({title:"",description:"",assignedTo:"",priority:"medium",category:"system",dueDate:new Date});k.useEffect(()=>{(async()=>{try{o(!0),c(null);const h=ye(le(W,"tasks"),Xe("createdAt","desc")),S=(await ge(h)).docs.map(A=>{const O=A.data();return{id:A.id,...O,dueDate:O.dueDate?new Date(O.dueDate.seconds*1e3):new Date,createdAt:O.createdAt?new Date(O.createdAt.seconds*1e3):new Date,updatedAt:O.updatedAt?new Date(O.updatedAt.seconds*1e3):new Date}});r(S),i(S)}catch(h){console.error("Error loading tasks:",h),c("Tehtävien lataus epäonnistui.")}finally{o(!1)}})()},[]),k.useEffect(()=>{let g=[...t];if(f.status!=="all"&&(g=g.filter(h=>h.status===f.status)),f.priority!=="all"&&(g=g.filter(h=>h.priority===f.priority)),f.category!=="all"&&(g=g.filter(h=>h.category===f.category)),f.searchQuery){const h=f.searchQuery.toLowerCase();g=g.filter(w=>w.title.toLowerCase().includes(h)||w.description.toLowerCase().includes(h))}i(g)},[f,t]);const p=async()=>{if(e)try{o(!0);const g={...v,status:"pending",assignedBy:e.uid,createdAt:be(),updatedAt:be(),dueDate:Ke.fromDate(v.dueDate)},w={id:(await Zb(le(W,"tasks"),g)).id,...g,createdAt:new Date,updatedAt:new Date};r(S=>[w,...S]),y({title:"",description:"",assignedTo:"",priority:"medium",category:"system",dueDate:new Date}),d(!1)}catch(g){console.error("Error creating task:",g),c("Tehtävän luonti epäonnistui.")}finally{o(!1)}},x=async(g,h)=>{try{o(!0);const w=pe(W,"tasks",g);await Qe(w,{status:h,updatedAt:be()}),r(S=>S.map(A=>A.id===g?{...A,status:h,updatedAt:new Date}:A))}catch(w){console.error("Error updating task:",w),c("Tehtävän päivitys epäonnistui.")}finally{o(!1)}},j=async g=>{try{o(!0);const h=pe(W,"tasks",g);await Io(h),r(w=>w.filter(S=>S.id!==g))}catch(h){console.error("Error deleting task:",h),c("Tehtävän poisto epäonnistui.")}finally{o(!1)}},N=g=>{switch(g){case"low":return"bg-green-100 text-green-800";case"medium":return"bg-blue-100 text-blue-800";case"high":return"bg-orange-100 text-orange-800";case"critical":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},b=g=>{switch(g){case"vendor":return a.jsx(Ps,{className:"h-4 w-4"});case"customer":return a.jsx(yn,{className:"h-4 w-4"});case"appointment":return a.jsx(Fe,{className:"h-4 w-4"});case"support":return a.jsx(rr,{className:"h-4 w-4"});case"system":return a.jsx(tr,{className:"h-4 w-4"});default:return a.jsx(pN,{className:"h-4 w-4"})}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Tehtävien hallinta"}),a.jsxs("button",{onClick:()=>d(!0),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[a.jsx(lr,{className:"h-4 w-4 mr-2"}),"Uusi tehtävä"]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(zr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Etsi tehtäviä...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:f.searchQuery,onChange:g=>m({...f,searchQuery:g.target.value})})]}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("select",{value:f.status,onChange:g=>m({...f,status:g.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"Kaikki tilat"}),a.jsx("option",{value:"pending",children:"Odottaa"}),a.jsx("option",{value:"in_progress",children:"Käynnissä"}),a.jsx("option",{value:"completed",children:"Valmis"}),a.jsx("option",{value:"cancelled",children:"Peruttu"})]}),a.jsxs("select",{value:f.priority,onChange:g=>m({...f,priority:g.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"Kaikki prioriteetit"}),a.jsx("option",{value:"low",children:"Matala"}),a.jsx("option",{value:"medium",children:"Keskitaso"}),a.jsx("option",{value:"high",children:"Korkea"}),a.jsx("option",{value:"critical",children:"Kriittinen"})]}),a.jsxs("select",{value:f.category,onChange:g=>m({...f,category:g.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"Kaikki kategoriat"}),a.jsx("option",{value:"vendor",children:"Yritykset"}),a.jsx("option",{value:"customer",children:"Asiakkaat"}),a.jsx("option",{value:"appointment",children:"Varaukset"}),a.jsx("option",{value:"support",children:"Tuki"}),a.jsx("option",{value:"system",children:"Järjestelmä"})]})]})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("h3",{className:"text-lg font-semibold",children:["Tehtävälista (",n.length,")"]})}),s&&t.length===0?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):l?a.jsx("div",{className:"px-6 py-4 text-center text-red-500",children:l}):n.length===0?a.jsx("div",{className:"px-6 py-4 text-center text-gray-500",children:"Ei tehtäviä."}):a.jsx("div",{children:n.map(g=>a.jsx("div",{className:"px-6 py-4 border-b border-gray-200 hover:bg-gray-50",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{className:"flex items-start space-x-3",children:[a.jsx("div",{className:"pt-1",children:g.status==="completed"?a.jsx(Hr,{className:"h-5 w-5 text-green-500"}):a.jsx("div",{className:`h-5 w-5 rounded-full border-2 ${g.priority==="critical"?"border-red-500":g.priority==="high"?"border-orange-500":g.priority==="medium"?"border-blue-500":"border-green-500"}`})}),a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-gray-900",children:g.title}),a.jsx("p",{className:"text-sm text-gray-500 mt-1",children:g.description}),a.jsxs("div",{className:"flex items-center mt-2 space-x-2",children:[a.jsxs("div",{className:`px-2 py-1 inline-flex items-center text-xs font-medium rounded-full ${N(g.priority)}`,children:[g.priority==="low"&&"Matala",g.priority==="medium"&&"Keskitaso",g.priority==="high"&&"Korkea",g.priority==="critical"&&"Kriittinen"]}),a.jsxs("div",{className:"px-2.5 py-1 inline-flex items-center text-xs font-medium rounded-full bg-gray-100 text-gray-800",children:[b(g.category),a.jsxs("span",{className:"ml-1",children:[g.category==="vendor"&&"Yritys",g.category==="customer"&&"Asiakas",g.category==="appointment"&&"Varaus",g.category==="support"&&"Tuki",g.category==="system"&&"Järjestelmä"]})]}),a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(De,{className:"h-3 w-3 mr-1"}),g.dueDate.toLocaleDateString()]})]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[g.status!=="completed"&&a.jsx("button",{onClick:()=>x(g.id,"completed"),className:"p-2 text-green-600 hover:bg-green-50 rounded-full",children:a.jsx(Hr,{className:"h-5 w-5"})}),g.status==="pending"&&a.jsx("button",{onClick:()=>x(g.id,"in_progress"),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-full",children:a.jsx(De,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>j(g.id),className:"p-2 text-red-600 hover:bg-red-50 rounded-full",children:a.jsx(gd,{className:"h-5 w-5"})})]})]})},g.id))})]}),u&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Uusi tehtävä"}),a.jsx("button",{onClick:()=>d(!1),className:"text-gray-500 hover:text-gray-700 p-1",children:a.jsx(Me,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Otsikko"}),a.jsx("input",{type:"text",value:v.title,onChange:g=>y({...v,title:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tehtävän otsikko"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kuvaus"}),a.jsx("textarea",{value:v.description,onChange:g=>y({...v,description:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Tehtävän kuvaus",rows:3})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Vastuuhenkilö"}),a.jsx("input",{type:"text",value:v.assignedTo,onChange:g=>y({...v,assignedTo:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Sähköposti tai käyttäjätunnus"})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Prioriteetti"}),a.jsxs("select",{value:v.priority,onChange:g=>y({...v,priority:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"low",children:"Matala"}),a.jsx("option",{value:"medium",children:"Keskitaso"}),a.jsx("option",{value:"high",children:"Korkea"}),a.jsx("option",{value:"critical",children:"Kriittinen"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Kategoria"}),a.jsxs("select",{value:v.category,onChange:g=>y({...v,category:g.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"vendor",children:"Yritys"}),a.jsx("option",{value:"customer",children:"Asiakas"}),a.jsx("option",{value:"appointment",children:"Varaus"}),a.jsx("option",{value:"support",children:"Tuki"}),a.jsx("option",{value:"system",children:"Järjestelmä"})]})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Määräaika"}),a.jsx("input",{type:"date",value:v.dueDate.toISOString().split("T")[0],onChange:g=>y({...v,dueDate:g.target.value?new Date(g.target.value):new Date}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:"Peruuta"}),a.jsx("button",{onClick:p,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",disabled:!v.title||s,children:s?"Käsitellään...":"Luo tehtävä"})]})]})})]})},Yz=()=>{const{currentUser:e}=Ye(),[t,r]=k.useState([]),[n,i]=k.useState([]),[s,o]=k.useState(!0),[l,c]=k.useState(null),[u,d]=k.useState({read:"all",type:"all",priority:"all"}),[f,m]=k.useState(!1);k.useEffect(()=>{if(!e)return;const g=(async()=>{try{o(!0),c(null);const h=ye(le(W,"notifications"),me("userId","in",[e.uid,"admin","all"]),Xe("createdAt","desc"),Tt(100));return kc(h,S=>{const A=S.docs.map(O=>{const C=O.data();return{id:O.id,...C,createdAt:C.createdAt?new Date(C.createdAt.seconds*1e3):new Date}});r(A),v(A),o(!1)},S=>{console.error("Error in notification listener:",S),c("Virhe ilmoitusten latauksessa. Yritä päivittää sivu."),o(!1)})}catch(h){console.error("Error loading notifications:",h),c("Ilmoituksia ei voitu ladata."),o(!1)}})();return()=>{typeof g=="function"&&g()}},[e]),k.useEffect(()=>{v(t)},[u,t]);const v=b=>{let g=[...b];if(u.read!=="all"){const h=u.read==="read";g=g.filter(w=>w.read===h)}u.type!=="all"&&(g=g.filter(h=>h.type===u.type)),u.priority!=="all"&&(g=g.filter(h=>h.priority===u.priority)),i(g)},y=async()=>{if(e)try{m(!0);const b=ye(le(W,"notifications"),me("userId","in",[e.uid,"admin","all"]),Xe("createdAt","desc"),Tt(100)),h=(await ge(b)).docs.map(w=>{const S=w.data();return{id:w.id,...S,createdAt:S.createdAt?new Date(S.createdAt.seconds*1e3):new Date}});r(h),v(h)}catch(b){console.error("Error refreshing notifications:",b),c("Virhe ilmoitusten päivityksessä.")}finally{m(!1)}},p=async b=>{try{const g=pe(W,"notifications",b);await Qe(g,{read:!0,updatedAt:be()}),r(h=>h.map(w=>w.id===b?{...w,read:!0}:w))}catch(g){console.error("Error marking notification as read:",g),c("Virhe ilmoituksen merkitsemisessä luetuksi.")}},x=async()=>{try{const b=n.filter(g=>!g.read).map(g=>g.id);if(b.length===0)return;for(const g of b){const h=pe(W,"notifications",g);await Qe(h,{read:!0,updatedAt:be()})}r(g=>g.map(h=>b.includes(h.id)?{...h,read:!0}:h))}catch(b){console.error("Error marking all notifications as read:",b),c("Virhe ilmoitusten merkitsemisessä luetuiksi.")}},j=(b,g)=>{const w=(()=>{switch(g){case"critical":return"text-red-600";case"high":return"text-orange-600";case"medium":return"text-blue-600";default:return"text-gray-600"}})();switch(b){case"appointment":return a.jsx(Fe,{className:`h-6 w-6 ${w}`});case"user":return a.jsx(bt,{className:`h-6 w-6 ${w}`});case"vendor":return a.jsx(Ps,{className:`h-6 w-6 ${w}`});case"support":return a.jsx(Or,{className:`h-6 w-6 ${w}`});case"payment":return a.jsx(tr,{className:`h-6 w-6 ${w}`});case"alert":return a.jsx(Cc,{className:`h-6 w-6 ${w}`});case"system":default:return a.jsx(yd,{className:`h-6 w-6 ${w}`})}},N=(b,g)=>{if(b)return"bg-white";switch(g){case"critical":return"bg-red-50";case"high":return"bg-orange-50";case"medium":return"bg-blue-50";default:return"bg-gray-50"}};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Ilmoituskeskus"}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("button",{onClick:x,className:"flex items-center px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200",children:[a.jsx(yN,{className:"h-4 w-4 mr-2"}),"Merkitse kaikki luetuiksi"]}),a.jsx("button",{onClick:y,className:`flex items-center p-2 rounded-full hover:bg-gray-100 ${f?"animate-spin":""}`,children:a.jsx(Uy,{className:"h-5 w-5 text-gray-600"})})]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:a.jsxs("div",{className:"flex flex-wrap gap-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Iy,{className:"h-5 w-5 text-gray-500"}),a.jsxs("select",{value:u.read,onChange:b=>d({...u,read:b.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"Kaikki"}),a.jsx("option",{value:"unread",children:"Lukemattomat"}),a.jsx("option",{value:"read",children:"Luetut"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Fe,{className:"h-5 w-5 text-gray-500"}),a.jsxs("select",{value:u.type,onChange:b=>d({...u,type:b.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"Kaikki tyypit"}),a.jsx("option",{value:"appointment",children:"Varaukset"}),a.jsx("option",{value:"user",children:"Käyttäjät"}),a.jsx("option",{value:"vendor",children:"Yritykset"}),a.jsx("option",{value:"support",children:"Tuki"}),a.jsx("option",{value:"payment",children:"Maksut"}),a.jsx("option",{value:"system",children:"Järjestelmä"}),a.jsx("option",{value:"alert",children:"Hälytykset"})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(tr,{className:"h-5 w-5 text-gray-500"}),a.jsxs("select",{value:u.priority,onChange:b=>d({...u,priority:b.target.value}),className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"Kaikki prioriteetit"}),a.jsx("option",{value:"critical",children:"Kriittinen"}),a.jsx("option",{value:"high",children:"Korkea"}),a.jsx("option",{value:"medium",children:"Keskitaso"}),a.jsx("option",{value:"low",children:"Matala"})]})]})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsxs("h3",{className:"text-lg font-semibold",children:["Ilmoitukset (",n.length,")"]})}),s&&t.length===0?a.jsx("div",{className:"flex justify-center items-center h-64",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):l?a.jsx("div",{className:"px-6 py-4 text-center text-red-500",children:l}):n.length===0?a.jsx("div",{className:"px-6 py-4 text-center text-gray-500",children:"Ei ilmoituksia."}):a.jsx("div",{className:"divide-y divide-gray-200",children:n.map(b=>a.jsx("div",{className:`px-6 py-4 hover:bg-gray-50 ${N(b.read,b.priority)}`,children:a.jsxs("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"flex-shrink-0",children:j(b.type,b.priority)}),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("p",{className:`text-sm font-medium ${b.read?"text-gray-900":"text-gray-900 font-semibold"}`,children:b.title}),a.jsxs("div",{className:"flex items-center text-xs text-gray-500",children:[a.jsx(De,{className:"h-3 w-3 mr-1"}),new Date(b.createdAt).toLocaleDateString()," ",new Date(b.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),a.jsx("p",{className:"mt-1 text-sm text-gray-600 line-clamp-2",children:b.message}),a.jsxs("div",{className:"mt-2 flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:`px-2 py-1 inline-flex items-center text-xs font-medium rounded-full
                          ${b.priority==="critical"?"bg-red-100 text-red-800":b.priority==="high"?"bg-orange-100 text-orange-800":b.priority==="medium"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`,children:[b.priority==="critical"&&"Kriittinen",b.priority==="high"&&"Korkea",b.priority==="medium"&&"Keskitaso",b.priority==="low"&&"Matala"]}),a.jsxs("span",{className:"px-2 py-1 inline-flex items-center text-xs font-medium rounded-full bg-gray-100 text-gray-800",children:[b.type==="appointment"&&"Varaus",b.type==="user"&&"Käyttäjä",b.type==="vendor"&&"Yritys",b.type==="support"&&"Tuki",b.type==="payment"&&"Maksu",b.type==="system"&&"Järjestelmä",b.type==="alert"&&"Hälytys"]})]}),a.jsxs("div",{className:"flex space-x-2",children:[!b.read&&a.jsx("button",{onClick:()=>p(b.id),className:"text-blue-600 hover:text-blue-900 p-1 hover:bg-blue-50 rounded",children:a.jsx(Nt,{className:"h-4 w-4"})}),b.link&&a.jsx("a",{href:b.link,className:"text-gray-600 hover:text-gray-900 p-1 hover:bg-gray-50 rounded",children:a.jsx(fr,{className:"h-4 w-4"})})]})]})]})]})},b.id))})]})]})},Gz=()=>{const[e,t]=k.useState([]),[r,n]=k.useState(!0),[i,s]=k.useState(null),[o,l]=k.useState(null),[c,u]=k.useState(!0),[d,f]=k.useState({entity:"all",action:"all",period:"7d",searchQuery:""}),[m,v]=k.useState(null),y=50;k.useEffect(()=>{p(!0)},[d]);const p=async(h=!1)=>{try{n(!0),s(null);const w=new Date;let S=new Date;d.period==="24h"?S.setDate(w.getDate()-1):d.period==="7d"?S.setDate(w.getDate()-7):d.period==="30d"?S.setDate(w.getDate()-30):d.period==="90d"&&S.setDate(w.getDate()-90);let A=ye(le(W,"auditLogs"),me("timestamp",">=",Ke.fromDate(S)),Xe("timestamp","desc"),Tt(y));d.entity!=="all"&&(A=ye(le(W,"auditLogs"),me("entity","==",d.entity),me("timestamp",">=",Ke.fromDate(S)),Xe("timestamp","desc"),Tt(y))),!h&&o&&(A=ye(le(W,"auditLogs"),me("timestamp",">=",Ke.fromDate(S)),Xe("timestamp","desc"),Ef(o),Tt(y)),d.entity!=="all"&&(A=ye(le(W,"auditLogs"),me("entity","==",d.entity),me("timestamp",">=",Ke.fromDate(S)),Xe("timestamp","desc"),Ef(o),Tt(y))));const O=await ge(A);O.docs.length<y?u(!1):(u(!0),l(O.docs[O.docs.length-1]));let T=O.docs.map(E=>{const M=E.data();return{id:E.id,...M,timestamp:M.timestamp?new Date(M.timestamp.seconds*1e3):new Date}});if(d.action!=="all"&&(T=T.filter(E=>E.action===d.action)),d.searchQuery){const E=d.searchQuery.toLowerCase();T=T.filter(M=>{var $,D,F,_,R;return(($=M.userEmail)==null?void 0:$.toLowerCase().includes(E))||((D=M.userName)==null?void 0:D.toLowerCase().includes(E))||((F=M.userId)==null?void 0:F.toLowerCase().includes(E))||((_=M.entityId)==null?void 0:_.toLowerCase().includes(E))||((R=M.action)==null?void 0:R.toLowerCase().includes(E))})}t(h?T:E=>[...E,...T])}catch(w){console.error("Error loading audit logs:",w),s("Lokien lataus epäonnistui.")}finally{n(!1)}},x=()=>{!r&&c&&p(!1)},j=h=>{switch(h){case"user":return a.jsx(yn,{className:"h-4 w-4"});case"vendor":return a.jsx(_t,{className:"h-4 w-4"});case"appointment":return a.jsx(Fe,{className:"h-4 w-4"});case"service":return a.jsx(Vy,{className:"h-4 w-4"});case"payment":return a.jsx(Fo,{className:"h-4 w-4"});case"support":return a.jsx(Or,{className:"h-4 w-4"});case"system":return a.jsx(yd,{className:"h-4 w-4"});default:return a.jsx(tr,{className:"h-4 w-4"})}},N=h=>h.includes("create")||h.includes("add")?a.jsx(lr,{className:"h-4 w-4"}):h.includes("update")||h.includes("edit")?a.jsx(xd,{className:"h-4 w-4"}):h.includes("delete")||h.includes("remove")?a.jsx(gd,{className:"h-4 w-4"}):h.includes("login")?a.jsx(vd,{className:"h-4 w-4"}):h.includes("logout")?a.jsx(ii,{className:"h-4 w-4"}):h.includes("view")?a.jsx(As,{className:"h-4 w-4"}):h.includes("approve")||h.includes("confirm")?a.jsx(Hr,{className:"h-4 w-4"}):h.includes("reject")||h.includes("cancel")?a.jsx(Me,{className:"h-4 w-4"}):a.jsx(bN,{className:"h-4 w-4"}),b=h=>{let w="";h.action.includes("create")?w="luonut":h.action.includes("update")?w="päivittänyt":h.action.includes("delete")?w="poistanut":h.action.includes("login")?w="kirjautunut sisään":h.action.includes("logout")?w="kirjautunut ulos":h.action.includes("view")?w="tarkastellut":h.action.includes("approve")?w="hyväksynyt":h.action.includes("reject")?w="hylännyt":w=h.action;let S="";switch(h.entity){case"user":S="käyttäjän";break;case"vendor":S="yrityksen";break;case"appointment":S="varauksen";break;case"service":S="palvelun";break;case"payment":S="maksun";break;case"support":S="tukipyynnön";break;case"system":S="järjestelmän";break;default:S=""}return`${w} ${S} ${h.entityId?`#${h.entityId.slice(0,6)}`:""}`},g=()=>{const h=e.map(O=>({id:O.id,timestamp:O.timestamp.toISOString(),userId:O.userId,userEmail:O.userEmail,userName:O.userName,action:O.action,entity:O.entity,entityId:O.entityId,details:O.details,ipAddress:O.ipAddress,userAgent:O.userAgent})),w=new Blob([JSON.stringify(h,null,2)],{type:"application/json"}),S=URL.createObjectURL(w),A=document.createElement("a");A.href=S,A.download=`audit-logs-${new Date().toISOString()}.json`,document.body.appendChild(A),A.click(),document.body.removeChild(A),URL.revokeObjectURL(S)};return a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Tapahtumaloki"}),a.jsxs("button",{onClick:g,className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:[a.jsx(By,{className:"h-4 w-4 mr-2"}),"Vie lokitiedot"]})]}),a.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:a.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(zr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",placeholder:"Etsi lokitiedoista...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",value:d.searchQuery,onChange:h=>f({...d,searchQuery:h.target.value})})]}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsxs("select",{value:d.entity,onChange:h=>f({...d,entity:h.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"all",children:"Kaikki tyypit"}),a.jsx("option",{value:"user",children:"Käyttäjät"}),a.jsx("option",{value:"vendor",children:"Yritykset"}),a.jsx("option",{value:"appointment",children:"Varaukset"}),a.jsx("option",{value:"service",children:"Palvelut"}),a.jsx("option",{value:"payment",children:"Maksut"}),a.jsx("option",{value:"support",children:"Tuki"}),a.jsx("option",{value:"system",children:"Järjestelmä"})]}),a.jsxs("select",{value:d.period,onChange:h=>f({...d,period:h.target.value}),className:"px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"24h",children:"24 tuntia"}),a.jsx("option",{value:"7d",children:"7 päivää"}),a.jsx("option",{value:"30d",children:"30 päivää"}),a.jsx("option",{value:"90d",children:"90 päivää"})]})]})]})}),a.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Aikaleima"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Käyttäjä"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tapahtuma"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tyyppi"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Toiminnot"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r&&e.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-6 py-4 text-center",children:a.jsx("div",{className:"flex justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-500"})})})}):i?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-red-500",children:i})}):e.length===0?a.jsx("tr",{children:a.jsx("td",{colSpan:5,className:"px-6 py-4 text-center text-gray-500",children:"Ei lokitapahtumia."})}):a.jsx(a.Fragment,{children:e.map(h=>a.jsxs("tr",{className:"hover:bg-gray-50",children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(De,{className:"h-4 w-4 mr-2 text-gray-400"}),a.jsx("span",{children:h.timestamp.toLocaleString()})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(bt,{className:"h-4 w-4 mr-2 text-gray-400"}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-gray-900",children:h.userName||"Järjestelmä"}),a.jsx("div",{className:"text-xs text-gray-500",children:h.userEmail||h.userId})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[N(h.action),a.jsx("span",{className:"ml-2 text-sm text-gray-900",children:b(h)})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("div",{className:"flex items-center",children:a.jsxs("span",{className:"px-2 py-1 inline-flex items-center text-xs font-medium rounded-full bg-gray-100 text-gray-800",children:[j(h.entity),a.jsxs("span",{className:"ml-1",children:[h.entity==="user"&&"Käyttäjä",h.entity==="vendor"&&"Yritys",h.entity==="appointment"&&"Varaus",h.entity==="service"&&"Palvelu",h.entity==="payment"&&"Maksu",h.entity==="support"&&"Tuki",h.entity==="system"&&"Järjestelmä"]})]})})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("button",{onClick:()=>v(h),className:"text-blue-600 hover:text-blue-900",children:a.jsx(As,{className:"h-5 w-5"})})})]},h.id))})})]})}),c&&a.jsx("div",{className:"px-6 py-4 border-t border-gray-200 flex justify-center",children:a.jsx("button",{onClick:x,className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50",disabled:r,children:r?a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-gray-700 mr-2"}),"Ladataan..."]}):"Lataa lisää"})})]}),m&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-3xl w-full",children:[a.jsxs("div",{className:"flex justify-between items-start mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Tapahtuman tiedot"}),a.jsx("button",{onClick:()=>v(null),className:"text-gray-500 hover:text-gray-700 p-1",children:a.jsx(Me,{className:"h-5 w-5"})})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tapahtuma"}),a.jsx("div",{className:"text-sm text-gray-900 bg-gray-50 p-2 rounded-md",children:b(m)})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Aikaleima"}),a.jsx("div",{className:"text-sm text-gray-900 bg-gray-50 p-2 rounded-md",children:m.timestamp.toLocaleString()})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Käyttäjä"}),a.jsxs("div",{className:"text-sm text-gray-900 bg-gray-50 p-2 rounded-md",children:[m.userName||"Ei tiedossa"," (",m.userEmail||m.userId||"Järjestelmä",")"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"IP-osoite"}),a.jsx("div",{className:"text-sm text-gray-900 bg-gray-50 p-2 rounded-md",children:m.ipAddress||"Ei tiedossa"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Selain/laite"}),a.jsx("div",{className:"text-sm text-gray-900 bg-gray-50 p-2 rounded-md",children:m.userAgent||"Ei tiedossa"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Tiedot"}),a.jsx("pre",{className:"text-sm text-gray-900 bg-gray-50 p-3 rounded-md overflow-x-auto whitespace-pre-wrap",children:JSON.stringify(m.details||{},null,2)})]})]})]})})]})},Xz=()=>{const[e,t]=k.useState("overview"),[r,n]=k.useState(!0),[i,s]=k.useState([]),[o,l]=k.useState([]),[c,u]=k.useState([]),[d,f]=k.useState([]),[m,v]=k.useState(new Date),[y,p]=k.useState(!1);k.useEffect(()=>{(async()=>{try{n(!0);const g=new Date;g.setDate(g.getDate()-1);const h=ye(le(W,"appointments"),me("status","==","pending"),me("date",">=",Ke.fromDate(g)),Xe("date","asc")),S=(await ge(h)).docs.map(_=>({id:_.id,..._.data()}));s(S);const A=ye(le(W,"supportTickets"),me("status","==","open"),Xe("createdAt","desc"),Tt(10)),C=(await ge(A)).docs.map(_=>({id:_.id,..._.data()}));l(C);const T=ye(le(W,"users"),me("createdAt",">=",Ke.fromDate(g)),Xe("createdAt","desc")),M=(await ge(T)).docs.map(_=>({id:_.id,..._.data()}));u(M);const $=ye(le(W,"vendors"),me("createdAt",">=",Ke.fromDate(g)),Xe("createdAt","desc")),F=(await ge($)).docs.map(_=>({id:_.id,..._.data()}));f(F),v(new Date)}catch(g){console.error("Error loading operations data:",g)}finally{n(!1)}})();const N=kc(ye(le(W,"appointments"),me("status","==","pending")),g=>{const h=g.docs.map(w=>({id:w.id,...w.data()}));s(h)}),b=kc(ye(le(W,"supportTickets"),me("status","==","open")),g=>{const h=g.docs.map(w=>({id:w.id,...w.data()}));l(h)});return()=>{N(),b()}},[]);const x=async()=>{p(!0);const j=new Date;j.setDate(j.getDate()-1);try{const N=ye(le(W,"appointments"),me("status","==","pending"),me("date",">=",Ke.fromDate(j)),Xe("date","asc")),g=(await ge(N)).docs.map(h=>({id:h.id,...h.data()}));s(g),v(new Date)}catch(N){console.error("Error refreshing data:",N)}finally{p(!1)}};return a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:a.jsx("div",{className:"border-b border-gray-200",children:a.jsxs("nav",{className:"flex -mb-px",children:[a.jsxs("button",{onClick:()=>t("overview"),className:`py-4 px-6 inline-flex items-center border-b-2 font-medium text-sm
                ${e==="overview"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(lN,{className:"w-5 h-5 mr-2"}),"Yleiskatsaus"]}),a.jsxs("button",{onClick:()=>t("tasks"),className:`py-4 px-6 inline-flex items-center border-b-2 font-medium text-sm
                ${e==="tasks"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(Hr,{className:"w-5 h-5 mr-2"}),"Tehtävät"]}),a.jsxs("button",{onClick:()=>t("notifications"),className:`py-4 px-6 inline-flex items-center border-b-2 font-medium text-sm
                ${e==="notifications"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(Iy,{className:"w-5 h-5 mr-2"}),"Ilmoitukset"]}),a.jsxs("button",{onClick:()=>t("audit"),className:`py-4 px-6 inline-flex items-center border-b-2 font-medium text-sm
                ${e==="audit"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(De,{className:"w-5 h-5 mr-2"}),"Tapahtumaloki"]})]})})}),e==="overview"&&a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Operaatiokeskus"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-sm text-gray-500",children:["Päivitetty: ",m.toLocaleTimeString()]}),a.jsx("button",{onClick:x,className:`p-2 rounded-full hover:bg-gray-100 ${y?"animate-spin":""}`,children:a.jsx(Uy,{className:"w-5 h-5 text-gray-500"})})]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[a.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-full bg-blue-100",children:a.jsx(Fe,{className:"h-6 w-6 text-blue-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:i.length}),a.jsx("p",{className:"text-sm text-gray-500",children:"Odottavat varaukset"})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-full bg-orange-100",children:a.jsx(Or,{className:"h-6 w-6 text-orange-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:o.length}),a.jsx("p",{className:"text-sm text-gray-500",children:"Avoimet tukipyynnöt"})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-full bg-green-100",children:a.jsx(yn,{className:"h-6 w-6 text-green-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:c.length}),a.jsx("p",{className:"text-sm text-gray-500",children:"Uudet käyttäjät (24h)"})]})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow p-4",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"p-3 rounded-full bg-purple-100",children:a.jsx(Ps,{className:"h-6 w-6 text-purple-600"})}),a.jsxs("div",{className:"ml-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:d.length}),a.jsx("p",{className:"text-sm text-gray-500",children:"Uudet yritykset (24h)"})]})]})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-semibold",children:"Odottavat toimenpiteet"})}),r?a.jsx("div",{className:"flex justify-center items-center h-40",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):a.jsx(a.Fragment,{children:i.length===0&&o.length===0?a.jsx("div",{className:"px-6 py-4 text-center text-gray-500",children:"Ei odottavia toimenpiteitä."}):a.jsxs("div",{className:"divide-y divide-gray-200",children:[i.slice(0,5).map(j=>a.jsx("div",{className:"px-6 py-4 hover:bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Fe,{className:"h-5 w-5 text-blue-500 mr-3"}),a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium",children:["Uusi varaus #",j.id.slice(0,6)]}),a.jsxs("div",{className:"text-sm text-gray-500",children:[new Date(j.date.seconds*1e3).toLocaleDateString()," -",j.customerDetails.firstName," ",j.customerDetails.lastName]})]})]}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"p-2 text-green-600 hover:bg-green-50 rounded-full",children:a.jsx(Hr,{className:"h-5 w-5"})}),a.jsx("button",{className:"p-2 text-red-600 hover:bg-red-50 rounded-full",children:a.jsx(gd,{className:"h-5 w-5"})})]})]})},j.id)),o.slice(0,5).map(j=>a.jsx("div",{className:"px-6 py-4 hover:bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(rr,{className:"h-5 w-5 text-orange-500 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:j.subject}),a.jsxs("div",{className:"text-sm text-gray-500",children:[new Date(j.createdAt.seconds*1e3).toLocaleDateString()," -",j.userRole==="customer"?"Asiakas":"Yritys"]})]})]}),a.jsx("div",{className:"flex space-x-2",children:a.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-full",children:a.jsx(Or,{className:"h-5 w-5"})})})]})},j.id))]})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-semibold",children:"Uusimmat käyttäjät"})}),r?a.jsx("div",{className:"flex justify-center items-center h-40",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):a.jsx(a.Fragment,{children:c.length===0?a.jsx("div",{className:"px-6 py-4 text-center text-gray-500",children:"Ei uusia käyttäjiä."}):a.jsx("div",{className:"divide-y divide-gray-200",children:c.slice(0,5).map(j=>a.jsx("div",{className:"px-6 py-4 hover:bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(yn,{className:"h-5 w-5 text-green-500 mr-3"}),a.jsxs("div",{children:[a.jsxs("div",{className:"font-medium",children:[j.firstName," ",j.lastName]}),a.jsx("div",{className:"text-sm text-gray-500",children:j.email})]})]}),a.jsx("div",{className:"text-sm text-gray-500",children:new Date(j.createdAt.seconds*1e3).toLocaleTimeString()})]})},j.id))})})]}),a.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[a.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:a.jsx("h3",{className:"text-lg font-semibold",children:"Uusimmat yritykset"})}),r?a.jsx("div",{className:"flex justify-center items-center h-40",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"})}):a.jsx(a.Fragment,{children:d.length===0?a.jsx("div",{className:"px-6 py-4 text-center text-gray-500",children:"Ei uusia yrityksiä."}):a.jsx("div",{className:"divide-y divide-gray-200",children:d.slice(0,5).map(j=>a.jsx("div",{className:"px-6 py-4 hover:bg-gray-50",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Ps,{className:"h-5 w-5 text-purple-500 mr-3"}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium",children:j.businessName}),a.jsxs("div",{className:"text-sm text-gray-500",children:[j.city," - ",j.businessId]})]})]}),a.jsx("span",{className:`px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${j.verified?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:j.verified?"Vahvistettu":"Odottaa"})]})},j.id))})})]})]})]}),e==="tasks"&&a.jsx(Kz,{}),e==="notifications"&&a.jsx(Yz,{}),e==="audit"&&a.jsx(Gz,{})]})},Qz=()=>{const{currentUser:e}=Ye(),[t,r]=k.useState([]),[n,i]=k.useState([]),[s,o]=k.useState(null),[l,c]=k.useState(null),[u,d]=k.useState(null),[f,m]=k.useState(null),[v,y]=k.useState([]),[p,x]=k.useState(!0),[j,N]=k.useState(null),[b,g]=k.useState("operations"),[h,w]=k.useState(""),[S,A]=k.useState("all"),O=async _=>{try{if(c(_),_.role==="customer"){const R=ye(le(W,"appointments"),me("customerId","==",_.id),Xe("date","desc")),z=(await ge(R)).docs.map(V=>({id:V.id,...V.data()}));y(z)}}catch(R){console.error("Error fetching user appointments:",R),N("Virhe käyttäjän tietojen haussa")}};k.useEffect(()=>{(async()=>{if(e)try{x(!0),N(null);const R=await er(e.uid);if(!R||R.role!=="admin"){N("Ei käyttöoikeutta");return}const L=ye(le(W,"users"),Xe("createdAt","desc")),V=(await ge(L)).docs.map(ee=>({id:ee.id,...ee.data()}));r(V);const q=ye(le(W,"vendors"),Xe("createdAt","desc")),X=(await ge(q)).docs.map(ee=>({id:ee.id,...ee.data()}));i(X)}catch(R){console.error("Error loading admin data:",R),N("Virhe tietojen latauksessa")}finally{x(!1)}})()},[e]);const C=async _=>{try{const R=pe(W,"users",_);await Qe(R,{banned:!0,updatedAt:be()}),r(L=>L.map(z=>z.id===_?{...z,banned:!0}:z)),c(null),o(null)}catch(R){console.error("Error banning user:",R),N("Virhe käyttäjän estämisessä")}},T=async _=>{try{const R=pe(W,"users",_);await Qe(R,{banned:!1,updatedAt:be()}),r(L=>L.map(z=>z.id===_?{...z,banned:!1}:z))}catch(R){console.error("Error unbanning user:",R),N("Virhe käyttäjän eston poistossa")}},E=async _=>{try{x(!0),N(null),await Qf(_),r(R=>R.filter(L=>L.id!==_)),m(null)}catch(R){console.error("Error deleting user:",R),N("Virhe käyttäjän poistossa")}finally{x(!1)}},M=async(_,R)=>{try{x(!0),N(null),await R1(_),await Qf(R),i(L=>L.filter(z=>z.id!==_)),r(L=>L.filter(z=>z.id!==R)),m(null)}catch(L){console.error("Error deleting vendor:",L),N("Virhe yrityksen poistossa")}finally{x(!1)}},$=async _=>{try{const R=pe(W,"vendors",_);N(null),await Qe(R,{verified:!0,updatedAt:be()}),i(L=>L.map(z=>z.id===_?{...z,verified:!0}:z))}catch(R){N("Virhe yrityksen vahvistuksessa. Yritä uudelleen."),console.error("Error verifying vendor:",R),N("Virhe yrityksen vahvistuksessa")}},D=t.filter(_=>{var L,z,V;const R=((L=_.email)==null?void 0:L.toLowerCase().includes(h.toLowerCase()))||((z=_.firstName)==null?void 0:z.toLowerCase().includes(h.toLowerCase()))||((V=_.lastName)==null?void 0:V.toLowerCase().includes(h.toLowerCase()));return S==="all"?R:S==="banned"?R&&_.banned:R&&!_.banned}),F=n.filter(_=>{var L;const R=_.businessName.toLowerCase().includes(h.toLowerCase())||((L=_.email)==null?void 0:L.toLowerCase().includes(h.toLowerCase()));return S==="all"?R:S==="banned"?R&&_.banned:R&&!_.banned});return p?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):j?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-gray-800 mb-2",children:"Virhe!"}),a.jsx("p",{className:"text-gray-600",children:j})]})}):a.jsxs("div",{className:"min-h-screen bg-gray-50",children:[a.jsx("div",{className:"bg-white shadow-sm",children:a.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:a.jsx("div",{className:"py-6",children:a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Ylläpito"})})})}),a.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[a.jsx("div",{className:"bg-white rounded-lg shadow mb-6",children:a.jsx("div",{className:"border-b",children:a.jsxs("nav",{className:"flex -mb-px",children:[a.jsxs("button",{onClick:()=>g("operations"),className:`py-4 px-6 inline-flex items-center border-b-2 font-medium text-sm
                  ${b==="operations"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx($c,{className:"w-5 h-5 mr-2"}),"Operaatiokeskus"]}),a.jsxs("button",{onClick:()=>g("users"),className:`py-4 px-6 inline-flex items-center border-b-2 font-medium text-sm
                  ${b==="users"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(yn,{className:"w-5 h-5 mr-2"}),"Käyttäjät"]}),a.jsxs("button",{onClick:()=>g("vendors"),className:`py-4 px-6 inline-flex items-center border-b-2 font-medium text-sm
                  ${b==="vendors"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(_t,{className:"w-5 h-5 mr-2"}),"Yritykset"]}),a.jsxs("button",{onClick:()=>g("reports"),className:`py-4 px-6 inline-flex items-center border-b-2 font-medium text-sm
                  ${b==="reports"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(iN,{className:"w-5 h-5 mr-2"}),"Raportit"]}),a.jsxs("button",{onClick:()=>g("system"),className:`py-4 px-6 inline-flex items-center border-b-2 font-medium text-sm
                  ${b==="system"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx($c,{className:"w-5 h-5 mr-2"}),"Järjestelmä"]}),a.jsxs("button",{onClick:()=>g("support"),className:`py-4 px-6 inline-flex items-center border-b-2 font-medium text-sm
                  ${b==="support"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[a.jsx(Or,{className:"w-5 h-5 mr-2"}),"Tukipyynnöt"]})]})})}),b==="operations"&&a.jsx(Xz,{}),b==="reports"&&a.jsx(Uz,{}),b==="system"&&a.jsx(Wz,{}),b==="support"&&a.jsx(Hz,{}),(b==="users"||b==="vendors")&&a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-white rounded-lg shadow p-6 mb-6",children:a.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[a.jsxs("div",{className:"relative flex-1",children:[a.jsx(zr,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),a.jsx("input",{type:"text",value:h,onChange:_=>w(_.target.value),placeholder:"Hae...",className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsx("div",{className:"flex items-center space-x-4",children:a.jsx("div",{className:"relative inline-block text-left",children:a.jsxs("button",{className:"px-4 py-2 border border-gray-300 rounded-lg inline-flex items-center text-gray-700 bg-white hover:bg-gray-50",onClick:()=>{A(S==="all"?"active":S==="active"?"banned":"all")},children:[a.jsx(cN,{className:"w-4 h-4 mr-2"}),S==="all"?"Kaikki":S==="banned"?"Estetyt":"Aktiiviset",a.jsx(vn,{className:"w-4 h-4 ml-2"})]})})})]})}),a.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:b==="users"?a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Käyttäjä"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Rooli"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Kolikot"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tila"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Toiminnot"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:D.map(_=>{var R;return a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap cursor-pointer hover:bg-gray-50",onClick:()=>O(_),children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:a.jsx("div",{className:"h-10 w-10 rounded-full bg-gray-200 flex items-center justify-center",children:a.jsx(yn,{className:"h-6 w-6 text-gray-500"})})}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[_.firstName," ",_.lastName]}),a.jsx("div",{className:"text-sm text-gray-500",children:_.email})]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full
                              ${_.role==="admin"?"bg-purple-100 text-purple-800":_.role==="vendor"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:_.role})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:((R=_.wallet)==null?void 0:R.coins)||0}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.banned?a.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800",children:"Estetty"}):a.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Aktiivinen"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsx("div",{className:"flex items-center justify-end space-x-2",children:_.banned?a.jsx("button",{onClick:()=>T(_.id),className:"text-green-600 hover:text-green-900 p-1 hover:bg-green-50 rounded-full",children:a.jsx(Nt,{className:"h-5 w-5"})}):a.jsxs(a.Fragment,{children:[a.jsx("button",{onClick:()=>d(_),className:"text-yellow-600 hover:text-yellow-900 p-1 hover:bg-yellow-50 rounded-full",children:a.jsx(gt,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>C(_.id),className:"text-red-600 hover:text-red-900 p-1 hover:bg-red-50 rounded-full",children:a.jsx(ai,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>m(_.id),className:"text-red-600 hover:text-red-900 p-1 hover:bg-red-50 rounded-full",children:a.jsx(Me,{className:"h-5 w-5"})})]})})})]},_.id)})})]})}):a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[a.jsx("thead",{className:"bg-gray-50",children:a.jsxs("tr",{children:[a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Yritys"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sijainti"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Arvosana"}),a.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tila"}),a.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Toiminnot"})]})}),a.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:F.map(_=>{var R;return a.jsxs("tr",{children:[a.jsx("td",{className:"px-6 py-4 whitespace-nowrap cursor-pointer hover:bg-gray-50",onClick:()=>o(_),children:a.jsxs("div",{className:"flex items-center",children:[a.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:a.jsx("button",{onClick:()=>o(_),className:"h-10 w-10 rounded-full overflow-hidden hover:ring-2 hover:ring-blue-500 transition-all",children:_.logoImage?a.jsx("img",{className:"h-10 w-10 object-cover",src:_.logoImage,alt:_.businessName}):a.jsx("div",{className:"h-10 w-10 bg-gray-200 flex items-center justify-center",children:a.jsx(_t,{className:"h-6 w-6 text-gray-500"})})})}),a.jsxs("div",{className:"ml-4",children:[a.jsxs("div",{className:"text-sm font-medium text-gray-900",children:[_.businessName,a.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",_.businessId,")"]})]}),a.jsx("div",{className:"text-sm text-gray-500",children:_.email})]})]})}),a.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[a.jsx("div",{className:"text-sm text-gray-900",children:_.address}),a.jsxs("div",{className:"text-sm text-gray-500",children:[_.postalCode," ",_.city]})]}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:a.jsxs("div",{className:"flex items-center",children:[a.jsx(mt,{className:"h-5 w-5 text-yellow-400"}),a.jsx("span",{className:"ml-1 text-sm text-gray-900",children:((R=_.rating)==null?void 0:R.toFixed(1))||"-"}),a.jsxs("span",{className:"ml-1 text-sm text-gray-500",children:["(",_.ratingCount||0,")"]})]})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:_.verified?a.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Vahvistettu"}):a.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-yellow-100 text-yellow-800",children:"Odottaa"})}),a.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:a.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[!_.verified&&a.jsx("button",{onClick:()=>$(_.id),className:"text-green-600 hover:text-green-900",children:a.jsx(Hr,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>C(_.userId),className:`text-red-600 hover:text-red-900 ${_.banned?"hidden":""}`,children:a.jsx(ai,{className:"h-5 w-5"})}),a.jsx("button",{onClick:()=>m(_.id),className:"text-red-600 hover:text-red-900",children:a.jsx(kN,{className:"h-5 w-5"})})]})})]},_.id)})})]})})})]})]}),l&&a.jsx(zz,{isOpen:!!l,onClose:()=>{c(null),y([])},user:l,appointments:v}),s&&a.jsx(Vz,{isOpen:!!s,onClose:()=>o(null),vendor:s,onVerify:$,onBan:C}),u&&a.jsx(qz,{isOpen:!!u,onClose:()=>d(null),user:u,onCoinsUpdated:async()=>{const _=await er(u.id);_&&r(R=>R.map(L=>L.id===u.id?_:L))}}),f&&a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50",children:a.jsxs("div",{className:"bg-white rounded-xl p-6 max-w-md w-full",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Vahvista poisto"}),a.jsxs("p",{className:"text-gray-600 mb-6",children:["Oletko varma että haluat poistaa tämän ",n.find(_=>_.id===f)?"yrityksen":"käyttäjän","? Tätä toimintoa ei voi perua."]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>m(null),className:"px-4 py-2 text-gray-700 hover:text-gray-900",children:"Peruuta"}),a.jsx("button",{onClick:()=>{const _=n.find(R=>R.id===f);_?M(_.id,_.userId):E(f)},className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700",children:"Poista"})]})]})})]})},Zz=()=>{const[e,t]=k.useState(""),[r,n]=k.useState(""),[i,s]=k.useState(!1),[o,l]=k.useState(""),[c,u]=k.useState(!1),[d,f]=k.useState(!1),[m,v]=k.useState(""),[y,p]=k.useState(!1),{login:x,resetPassword:j}=Ye(),N=Ut(),b=async h=>{h.preventDefault();try{l(""),u(!0),await x(e,r),N("/")}catch(w){console.error("Login error:",w),w.code==="auth/wrong-password"||w.code==="auth/user-not-found"?l("Virheellinen sähköposti tai salasana"):w.code==="auth/too-many-requests"?l("Liian monta epäonnistunutta yritystä. Yritä myöhemmin uudelleen."):w.code==="auth/invalid-credential"?l("Virheelliset tunnistetiedot. Tarkista sähköposti ja salasana."):w.code==="auth/invalid-email"?l("Virheellinen sähköpostiosoite."):w.code==="auth/user-disabled"?l("Tämä käyttäjätili on poistettu käytöstä."):l(w.message||"Kirjautuminen epäonnistui")}finally{u(!1)}},g=async h=>{if(h.preventDefault(),!m){l("Syötä sähköpostiosoitteesi");return}try{l(""),u(!0),await j(m),f(!0)}catch(w){console.error("Password reset error:",w),w.code==="auth/invalid-email"?l("Virheellinen sähköpostiosoite."):w.code==="auth/user-not-found"?f(!0):l("Salasanan nollaus epäonnistui. Tarkista sähköpostiosoitteesi.")}finally{u(!1)}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-bilo-gray to-white py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-1 py-4 text-center bg-bilo-silver text-bilo-navy font-medium",children:"Kirjaudu sisään"}),a.jsx(qt,{to:"/register",className:"flex-1 py-4 text-center text-bilo-navy hover:text-bilo-navy/80 border-b transition-colors duration-300",children:"Rekisteröidy"})]}),a.jsxs("div",{className:"p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-bilo-gray mb-4",children:a.jsx(bt,{className:"w-10 h-10 text-bilo-navy"})}),a.jsx("h2",{className:"text-2xl font-semibold text-bilo-navy",children:y?"Palauta salasana":"Kirjaudu sisään"})]}),o&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded mb-6 animate-[fadeIn_0.2s_ease-out]",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(tr,{className:"h-5 w-5 text-red-400"})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-700",children:o})})]})}),y?d?a.jsxs("div",{className:"mt-8 space-y-6",children:[a.jsx("div",{className:"rounded-md bg-green-50 p-4",children:a.jsx("div",{className:"flex",children:a.jsx("div",{children:a.jsx("p",{className:"text-sm text-green-700",children:"Salasanan nollauslinkki on lähetetty sähköpostiisi."})})})}),a.jsx("div",{children:a.jsx("button",{onClick:()=>{p(!1),f(!1)},className:`next-step-button w-full flex justify-center py-3 px-4 rounded-xl
                      text-sm font-medium text-bilo-navy relative group
                      disabled:opacity-50 disabled:cursor-not-allowed
                      active:scale-98 focus:outline-none focus:ring-2 focus:ring-bilo-silver`,children:"Takaisin kirjautumiseen"})})]}):a.jsxs("form",{className:"mt-8 space-y-6",onSubmit:g,children:[a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"relative",children:[a.jsx("label",{htmlFor:"reset-email",className:"block text-sm font-medium text-bilo-navy mb-1",children:a.jsxs("span",{className:"flex items-center",children:[a.jsx(rr,{className:"w-4 h-4 mr-2"}),"Sähköposti"]})}),a.jsx("input",{id:"reset-email",name:"email",type:"email",autoComplete:"email",required:!0,className:`mt-1 block w-full rounded-xl py-3 px-4 bg-bilo-gray border-2 border-transparent
                        focus:bg-white focus:ring-2 focus:ring-bilo-silver focus:border-transparent
                        transition-all duration-300 ease-in-out`,placeholder:"Sähköposti",value:m,onChange:h=>v(h.target.value)})]})}),a.jsx("div",{className:"flex items-center justify-between",children:a.jsx("button",{type:"button",className:"text-sm font-medium text-blue-600 hover:text-blue-500",onClick:()=>p(!1),children:"Takaisin kirjautumiseen"})}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:c,className:`next-step-button w-full flex justify-center py-3 px-4 rounded-xl
                      text-sm font-medium text-bilo-navy relative group
                      disabled:opacity-50 disabled:cursor-not-allowed
                      active:scale-98 focus:outline-none focus:ring-2 focus:ring-bilo-silver`,children:c?a.jsxs("div",{className:"flex items-center",children:[a.jsx(Je,{className:"animate-spin h-5 w-5 mr-2"}),a.jsx("span",{children:"Lähetetään..."})]}):a.jsx("span",{children:"Lähetä nollauslinkki"})})})]}):a.jsxs("form",{className:"mt-8 space-y-6",onSubmit:b,children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("label",{htmlFor:"email-address",className:"block text-sm font-medium text-bilo-navy mb-1",children:a.jsxs("span",{className:"flex items-center",children:[a.jsx(rr,{className:"w-4 h-4 mr-2"}),"Sähköposti"]})}),a.jsx("input",{id:"email-address",name:"email",type:"email",autoComplete:"email",required:!0,className:`mt-1 block w-full rounded-xl py-3 px-4 bg-bilo-gray border-2 border-transparent
                      focus:bg-white focus:ring-2 focus:ring-bilo-silver focus:border-transparent
                      transition-all duration-300 ease-in-out`,placeholder:"Sähköposti",value:e,onChange:h=>t(h.target.value)})]}),a.jsxs("div",{className:"relative",children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-bilo-navy mb-1",children:a.jsxs("span",{className:"flex items-center",children:[a.jsx(hN,{className:"w-4 h-4 mr-2"}),"Salasana"]})}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{id:"password",name:"password",type:i?"text":"password",autoComplete:"current-password",required:!0,className:`mt-1 block w-full rounded-xl py-3 px-4 bg-bilo-gray border-2 border-transparent
                        focus:bg-white focus:ring-2 focus:ring-bilo-silver focus:border-transparent
                        transition-all duration-300 ease-in-out`,placeholder:"••••••••",value:r,onChange:h=>n(h.target.value)}),a.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>s(!i),children:i?a.jsx(Fy,{className:"h-5 w-5 text-gray-400"}):a.jsx(As,{className:"h-5 w-5 text-gray-400"})})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),a.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Muista minut"})]}),a.jsx("div",{className:"text-sm",children:a.jsx("button",{type:"button",onClick:()=>{p(!0),v(e)},className:"font-medium text-blue-600 hover:text-blue-500",children:"Unohditko salasanan?"})})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:c,className:`next-step-button w-full flex justify-center py-3 px-4 rounded-xl
                    text-sm font-medium text-bilo-navy relative group
                    disabled:opacity-50 disabled:cursor-not-allowed
                    active:scale-98 focus:outline-none focus:ring-2 focus:ring-bilo-silver`,children:c?a.jsxs("div",{className:"flex items-center",children:[a.jsx(Je,{className:"animate-spin h-5 w-5 mr-2"}),a.jsx("span",{children:"Kirjaudutaan..."})]}):a.jsx("span",{className:"relative z-10 group-hover:translate-x-0.5 transition-transform",children:"Kirjaudu sisään"})})})]})]})]})})},Jz=()=>{const[e,t]=k.useState(""),[r,n]=k.useState(""),[i,s]=k.useState(""),[o,l]=k.useState(!1),[c,u]=k.useState(!0),[d,f]=k.useState(""),[m,v]=k.useState(""),[y,p]=k.useState(""),[x,j]=k.useState(""),[N,b]=k.useState(""),[g,h]=k.useState(""),[w,S]=k.useState(""),[A,O]=k.useState(""),[C,T]=k.useState(!1),[E,M]=k.useState({}),[$,D]=k.useState({score:0,hasMinLength:!1,hasUpperCase:!1,hasLowerCase:!1,hasNumber:!1,hasSpecialChar:!1}),F=Ut(),{signup:_}=Ye(),R=V=>{const q=V.length>=6,J=/[A-Z]/.test(V),X=/[a-z]/.test(V),ee=/[0-9]/.test(V),re=/[!@#$%^&*(),.?":{}|<>]/.test(V);let Pe=0;q&&Pe++,J&&Pe++,X&&Pe++,ee&&Pe++,re&&Pe++,D({score:Pe,hasMinLength:q,hasUpperCase:J,hasLowerCase:X,hasNumber:ee,hasSpecialChar:re})},L=async()=>{const V={};return e?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||(V.email="Virheellinen sähköpostiosoite"):V.email="Sähköposti on pakollinen",r?r.length<6&&(V.password="Salasanan tulee olla vähintään 6 merkkiä"):V.password="Salasana on pakollinen",r!==i&&(V.confirmPassword="Salasanat eivät täsmää"),o&&(d.trim()||(V.businessName="Yrityksen nimi on pakollinen"),w.trim()||(V.contactPerson="Yhteyshenkilö on pakollinen"),m.trim()?/^[0-9]{7}-[0-9]$/.test(m)?await Xf("businessId",m)||(V.businessId="Y-tunnus on jo käytössä"):V.businessId="Virheellinen Y-tunnus (muoto: 1234567-8)":V.businessId="Y-tunnus on pakollinen",y.trim()||(V.address="Osoite on pakollinen"),x.trim()||(V.postalCode="Postinumero on pakollinen"),N.trim()||(V.city="Kaupunki on pakollinen"),g.trim()?await Xf("phone",g)||(V.phone="Puhelinnumero on jo käytössä"):V.phone="Puhelinnumero on pakollinen"),M(V),Object.keys(V).length===0},z=async V=>{V.preventDefault();try{if(O(""),T(!0),!await L()){T(!1);return}const J=await _(e,r,o),X=J.user.uid;o&&J?(await q1({userId:X,businessName:d,contactPerson:w,businessId:m,address:y,postalCode:x,city:N,phone:g,email:e,services:[],operatingHours:{monday:{open:"09:00",close:"17:00"},tuesday:{open:"09:00",close:"17:00"},wednesday:{open:"09:00",close:"17:00"},thursday:{open:"09:00",close:"17:00"},friday:{open:"09:00",close:"17:00"}}}),F("/vendor-dashboard")):F("/customer/profile")}catch(q){console.error("Registration error:",q),O(q.message||"Tilin luonti epäonnistui")}finally{T(!1)}};return a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-bilo-gray to-white py-12 px-4 sm:px-6 lg:px-8",children:a.jsxs("div",{className:"max-w-md w-full bg-white rounded-3xl shadow-xl overflow-hidden",children:[a.jsxs("div",{className:"flex",children:[a.jsx(qt,{to:"/login",className:"flex-1 py-4 text-center text-bilo-navy hover:text-bilo-navy/80 border-b transition-colors duration-300",children:"Kirjaudu sisään"}),a.jsx("div",{className:"flex-1 py-4 text-center bg-bilo-silver text-bilo-navy font-medium",children:"Rekisteröidy"})]}),a.jsxs("div",{className:"p-8",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full bg-bilo-gray mb-4",children:a.jsx(bt,{className:"w-10 h-10 text-bilo-navy"})}),a.jsx("h2",{className:"text-2xl font-semibold text-bilo-navy",children:"Luo tili"})]}),A&&a.jsx("div",{className:"bg-red-50 border-l-4 border-red-400 p-4 rounded animate-[fadeIn_0.2s_ease-out]",children:a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"flex-shrink-0",children:a.jsx(tr,{className:"h-5 w-5 text-red-400"})}),a.jsx("div",{className:"ml-3",children:a.jsx("p",{className:"text-sm text-red-700",children:A})})]})}),a.jsxs("form",{className:"mt-8 space-y-6",onSubmit:z,children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{onClick:()=>l(!1),className:`relative p-4 text-center rounded-xl cursor-pointer transition-all ${o?"bg-bilo-gray text-bilo-navy hover:bg-bilo-gray/80":"bg-bilo-silver text-bilo-navy shadow-lg scale-[1.02]"}`,children:[a.jsx(bt,{className:"w-6 h-6 mx-auto mb-1"}),a.jsx("span",{className:"text-sm font-medium",children:"Asiakas"}),!o&&a.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-bilo-emerald rounded-full flex items-center justify-center",children:a.jsx(Nt,{className:"w-3 h-3 text-white"})})]}),a.jsxs("div",{onClick:()=>l(!0),className:`relative p-4 text-center rounded-xl cursor-pointer transition-all ${o?"bg-bilo-silver text-bilo-navy shadow-lg scale-[1.02]":"bg-bilo-gray text-bilo-navy hover:bg-bilo-gray/80"}`,children:[a.jsx(_t,{className:"w-6 h-6 mx-auto mb-1"}),a.jsx("span",{className:"text-sm font-medium",children:"Yritys"}),o&&a.jsx("div",{className:"absolute -top-1 -right-1 w-5 h-5 bg-bilo-emerald rounded-full flex items-center justify-center",children:a.jsx(Nt,{className:"w-3 h-3 text-white"})})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"relative",children:[a.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-bilo-navy mb-1",children:a.jsxs("span",{className:"flex items-center",children:[a.jsx(rr,{className:"w-4 h-4 mr-2"}),"Sähköposti"]})}),a.jsx("input",{id:"email",type:"email",placeholder:"Sähköposti",value:e,onChange:V=>t(V.target.value),className:`mt-1 block w-full rounded-xl py-3 px-4 bg-bilo-gray border-2 border-transparent
                  focus:bg-white focus:ring-2 focus:ring-bilo-silver focus:border-transparent
                  transition-all duration-300 ease-in-out
                  ${E.email?"border-red-300":"border-bilo-gray"}`,required:!0}),E.email&&a.jsx("p",{className:"mt-1 text-sm text-red-600 animate-[fadeIn_0.2s_ease-out]",children:E.email})]}),o&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"relative",children:[a.jsx("label",{className:"block text-sm font-medium text-bilo-navy mb-1",children:"Yrityksen nimi"}),a.jsx("input",{type:"text",value:d,onChange:V=>f(V.target.value),placeholder:"Syötä yrityksen nimi",className:`modern-input ${E.businessName?"border-red-300":""}`,required:o}),E.businessName&&a.jsx("p",{className:"mt-1 text-sm text-red-600 animate-[fadeIn_0.2s_ease-out]",children:E.businessName})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Yhteyshenkilö"}),a.jsx("input",{type:"text",value:w,onChange:V=>S(V.target.value),placeholder:"Syötä yhteyshenkilön nimi",className:`modern-input ${E.contactPerson?"border-red-300":""}`,required:o}),E.contactPerson&&a.jsx("p",{className:"mt-1 text-sm text-red-600 animate-[fadeIn_0.2s_ease-out]",children:E.contactPerson})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Y-tunnus"}),a.jsx("input",{type:"text",value:m,onChange:V=>v(V.target.value),placeholder:"1234567-8",pattern:"^[0-9]{7}-[0-9]$",className:`modern-input ${E.businessId?"border-red-300":""}`,required:o}),E.businessId&&a.jsx("p",{className:"mt-1 text-sm text-red-600 animate-[fadeIn_0.2s_ease-out]",children:E.businessId}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Syötä Y-tunnus muodossa 1234567-8"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Osoite"}),a.jsx("input",{type:"text",value:y,onChange:V=>p(V.target.value),placeholder:"Syötä katuosoite",className:`modern-input ${E.address?"border-red-300":""}`,required:o}),E.address&&a.jsx("p",{className:"mt-1 text-sm text-red-600 animate-[fadeIn_0.2s_ease-out]",children:E.address})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Postinumero"}),a.jsx("input",{type:"text",value:x,onChange:V=>j(V.target.value.toUpperCase()),placeholder:"Postinumero",maxLength:5,className:`modern-input ${E.postalCode?"border-red-300":""}`,required:o}),E.postalCode&&a.jsx("p",{className:"mt-1 text-sm text-red-600 animate-[fadeIn_0.2s_ease-out]",children:E.postalCode})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Kaupunki"}),a.jsx("input",{type:"text",value:N,onChange:V=>b(V.target.value),placeholder:"Kaupunki",className:`modern-input ${E.city?"border-red-300":""}`,required:o}),E.city&&a.jsx("p",{className:"mt-1 text-sm text-red-600 animate-[fadeIn_0.2s_ease-out]",children:E.city})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Puhelinnumero"}),a.jsx("input",{type:"tel",value:g,onChange:V=>h(V.target.value),placeholder:"Syötä puhelinnumero",className:`modern-input ${E.phone?"border-red-300":""}`,required:o}),E.phone&&a.jsx("p",{className:"mt-1 text-sm text-red-600 animate-[fadeIn_0.2s_ease-out]",children:E.phone})]})]}),a.jsxs("div",{className:"relative",children:[a.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-bilo-navy mb-1",children:"Salasana"}),a.jsx("input",{id:"password",type:"password",value:r,onChange:V=>{n(V.target.value),R(V.target.value)},placeholder:"••••••••",className:`mt-1 block w-full rounded-xl py-3 px-4 bg-bilo-gray border-2 border-transparent
                  focus:bg-white focus:ring-2 focus:ring-bilo-silver focus:border-transparent
                  transition-all duration-300 ease-in-out
                  ${E.password?"border-red-300":"border-bilo-gray"}`,required:!0}),r&&a.jsxs("div",{className:"mt-2 animate-[fadeIn_0.3s_ease-out]",children:[a.jsx("div",{className:"flex space-x-1 mb-1",children:[1,2,3,4,5].map(V=>a.jsx("div",{className:`h-2 w-full rounded-full transition-colors ${$.score>=V?V<=2?"bg-red-500":V<=3?"bg-yellow-500":"bg-bilo-emerald":"bg-gray-200"}`},V))}),a.jsxs("div",{className:"text-xs text-gray-500",children:["Salasanan vahvuus: "," ",a.jsx("span",{className:$.score<=2?"text-red-600 font-medium":$.score<=3?"text-yellow-600 font-medium":"text-bilo-emerald font-medium",children:$.score<=2?"Heikko":$.score<=3?"Kohtalainen":"Vahva"})]}),a.jsxs("ul",{className:"mt-2 space-y-1 text-xs",children:[a.jsxs("li",{className:`flex items-center ${$.hasMinLength?"text-bilo-emerald":"text-gray-500"}`,children:[$.hasMinLength?"✓":"○"," Vähintään 6 merkkiä"]}),a.jsxs("li",{className:`flex items-center ${$.hasUpperCase?"text-bilo-emerald":"text-gray-500"}`,children:[$.hasUpperCase?"✓":"○"," Sisältää ison kirjaimen"]}),a.jsxs("li",{className:`flex items-center ${$.hasLowerCase?"text-bilo-emerald":"text-gray-500"}`,children:[$.hasLowerCase?"✓":"○"," Sisältää pienen kirjaimen"]}),a.jsxs("li",{className:`flex items-center ${$.hasNumber?"text-bilo-emerald":"text-gray-500"}`,children:[$.hasNumber?"✓":"○"," Sisältää numeron"]}),a.jsxs("li",{className:`flex items-center ${$.hasSpecialChar?"text-bilo-emerald":"text-gray-500"}`,children:[$.hasSpecialChar?"✓":"○"," Sisältää erikoismerkin"]})]})]}),E.password&&a.jsx("p",{className:"mt-1 text-sm text-red-600 animate-[fadeIn_0.2s_ease-out]",children:E.password})]}),a.jsxs("div",{className:"relative",children:[a.jsx("label",{htmlFor:"confirm-password",className:"block text-sm font-medium text-bilo-navy mb-1",children:"Vahvista salasana"}),a.jsx("input",{id:"confirm-password",type:"password",value:i,onChange:V=>{const q=V.target.value;s(q),u(q===r||q==="")},placeholder:"••••••••",className:`mt-1 block w-full rounded-xl py-3 px-4 bg-bilo-gray border-2 border-transparent
                  focus:bg-white focus:ring-2 focus:ring-bilo-silver focus:border-transparent
                  transition-all duration-300 ease-in-out
                  ${c?"border-bilo-gray":"border-red-300"}`,required:!0}),!c&&i!==""&&a.jsx("p",{className:"mt-1 text-sm text-red-600 animate-[fadeIn_0.2s_ease-out]",children:"Salasanat eivät täsmää"})]})]}),a.jsx("div",{children:a.jsx("button",{type:"submit",disabled:C,className:`next-step-button w-full flex justify-center items-center py-3 px-4 rounded-xl
                text-sm font-medium text-bilo-navy relative group
                disabled:opacity-50 disabled:cursor-not-allowed
                active:scale-98 focus:outline-none focus:ring-2 focus:ring-bilo-silver`,children:C?a.jsxs(a.Fragment,{children:[a.jsx(Je,{className:"animate-spin -ml-1 mr-2 h-5 w-5"}),a.jsx("span",{className:"animate-pulse relative z-10",children:"Luodaan tiliä..."})]}):a.jsx(a.Fragment,{children:a.jsx("span",{className:"relative z-10 group-hover:translate-x-0.5 transition-transform",children:"Luo tili"})})})})]})]})]})})},eq=()=>{const e=Ut();return k.useEffect(()=>{const t=setTimeout(()=>{e("/")},2e3);return()=>clearTimeout(t)},[e]),a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-bilo-gray to-white",children:a.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-2xl p-8 shadow-xl border border-white/20 text-center max-w-md mx-4",children:[a.jsxs("div",{className:"relative w-20 h-20 mx-auto mb-6",children:[a.jsx("div",{className:"absolute inset-0 bg-green-100 rounded-full blur-xl animate-pulse"}),a.jsx("div",{className:"relative bg-white rounded-full p-4 shadow-lg",children:a.jsx(Nt,{className:"w-12 h-12 text-green-600 animate-[bounce_1s_ease-in-out_infinite]"})})]}),a.jsx("h1",{className:"text-2xl font-bold text-bilo-navy mb-3",children:"Sähköposti vahvistettu!"}),a.jsx("p",{className:"text-gray-600 mb-6",children:"Sinut ohjataan automaattisesti etusivulle..."}),a.jsxs("div",{className:"flex items-center justify-center text-gray-400",children:[a.jsx(Je,{className:"w-5 h-5 animate-spin mr-2"}),a.jsx("span",{className:"text-sm",children:"Ohjataan..."})]})]})})},tq=()=>{const[e]=Db(),t=Ut(),[r,n]=k.useState(!0),[i,s]=k.useState(null),[o,l]=k.useState(!1),[c,u]=k.useState(""),[d,f]=k.useState(""),[m,v]=k.useState(!1),[y,p]=k.useState(null),[x,j]=k.useState(!1);k.useEffect(()=>{(async()=>{const g=e.get("mode"),h=e.get("oobCode"),w=e.get("continueUrl");if(!h){s("Virheellinen toimintokoodi"),n(!1);return}try{if(g==="verifyEmail"||g==="resetPassword"){const A=await Yf(h,g==="verifyEmail"?"emailVerification":"passwordReset");if(A.valid){if(j(!0),g==="verifyEmail"){if(A.userId){await Ss(A.userId,{emailVerified:!0}),await k1(h),p("verifyEmail"),l(!0),setTimeout(()=>{t(w||"/")},3e3);return}}else if(g==="resetPassword"&&A.email){p("resetPassword"),u(A.email),n(!1);return}}}switch(g){case"resetPassword":p("resetPassword");const S=await Jb(Gt,h);u(S),n(!1);break;case"verifyEmail":p("verifyEmail"),await Nc(Gt,h),l(!0),setTimeout(()=>{t(w||"/")},3e3);break;case"recoverEmail":p("recoverEmail"),await Nc(Gt,h),l(!0),setTimeout(()=>{t("/login")},3e3);break;default:s("Tuntematon toiminto"),n(!1)}}catch(S){console.error("Action handling error:",S),s(S.message||"Toiminnon käsittelyssä tapahtui virhe"),n(!1)}})()},[e,t]);const N=async b=>{b.preventDefault();const g=e.get("oobCode");if(g)try{if(n(!0),x){if(!(await Yf(g,"passwordReset")).valid)throw new Error("Token is no longer valid");await Tf(Gt,g,d)}else await Tf(Gt,g,d);l(!0),setTimeout(()=>{t("/login")},3e3)}catch(h){console.error("Password reset error:",h),s(h.message||"Salasanan vaihtaminen epäonnistui"),n(!1)}};return r&&!y?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Je,{className:"w-6 h-6 text-blue-600 animate-spin"}),a.jsx("span",{children:"Käsitellään toimintoa..."})]})}):i?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full mx-4",children:[a.jsx("div",{className:"flex items-center justify-center mb-6",children:a.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-full flex items-center justify-center",children:a.jsx(tr,{className:"w-6 h-6 text-red-600"})})}),a.jsx("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-2",children:"Virhe"}),a.jsx("p",{className:"text-center text-gray-600",children:i}),a.jsx("button",{onClick:()=>t("/login"),className:"mt-6 w-full px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Takaisin kirjautumiseen"})]})}):o?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full mx-4",children:[a.jsx("div",{className:"flex items-center justify-center mb-6",children:a.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-full flex items-center justify-center",children:a.jsx(Nt,{className:"w-6 h-6 text-green-600"})})}),a.jsxs("h2",{className:"text-2xl font-bold text-center text-gray-900 mb-2",children:[y==="resetPassword"&&"Salasana vaihdettu!",y==="verifyEmail"&&"Sähköposti vahvistettu!",y==="recoverEmail"&&"Sähköposti palautettu!"]}),a.jsx("p",{className:"text-center text-gray-600",children:"Sinut ohjataan automaattisesti eteenpäin..."})]})}):y==="resetPassword"?a.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:a.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8 max-w-md w-full mx-4",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-4",children:a.jsx(vN,{className:"w-8 h-8 text-blue-600"})}),a.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Vaihda salasana"}),a.jsxs("p",{className:"mt-2 text-gray-600",children:["Käyttäjälle ",c]})]}),a.jsxs("form",{onSubmit:N,className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Uusi salasana"}),a.jsxs("div",{className:"mt-1 relative",children:[a.jsx("input",{type:m?"text":"password",value:d,onChange:b=>f(b.target.value),className:"block w-full px-4 py-3 rounded-lg border border-gray-300 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0,minLength:6}),a.jsx("button",{type:"button",onClick:()=>v(!m),className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:m?a.jsx(Fy,{className:"w-5 h-5 text-gray-400"}):a.jsx(As,{className:"w-5 h-5 text-gray-400"})})]})]}),a.jsx("button",{type:"submit",disabled:r,className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50",children:r?a.jsxs("div",{className:"flex items-center justify-center",children:[a.jsx(Je,{className:"w-5 h-5 animate-spin mr-2"}),"Vaihdetaan salasanaa..."]}):"Vaihda salasana"})]})]})}):null},rq=()=>{const e=Ut();return k.useEffect(()=>{const t=setTimeout(()=>{e("/")},5e3);return()=>clearTimeout(t)},[e]),a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-bilo-gray to-white flex items-center justify-center px-4",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:`inline-flex items-center justify-center w-24 h-24 mb-8 bg-gradient-to-br from-bilo-silver to-gray-300 
          rounded-2xl shadow-lg group hover:shadow-xl transition-all duration-300`,children:a.jsx(Vr,{className:"w-12 h-12 text-white transform group-hover:rotate-12 transition-all duration-300"})}),a.jsx("h1",{className:"text-6xl font-bold text-bilo-navy mb-4",children:"404"}),a.jsx("h2",{className:"text-2xl font-semibold text-gray-700 mb-6",children:"Sivua ei löytynyt"}),a.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"Valitettavasti etsimääsi sivua ei löytynyt. Sinut ohjataan automaattisesti etusivulle 5 sekunnin kuluttua."}),a.jsxs("button",{onClick:()=>e("/"),className:`inline-flex items-center px-6 py-3 next-step-button
            text-bilo-navy font-medium rounded-xl
            transition-all duration-300 relative group
            hover:scale-[1.02] hover:shadow-xl
            active:scale-98 focus:outline-none focus:ring-2 focus:ring-bilo-silver`,children:[a.jsx(fN,{className:"w-5 h-5 mr-2"}),"Palaa etusivulle"]})]})})},Dr=({children:e})=>{const{currentUser:t,loading:r}=Ye(),[n,i]=k.useState(null),[s,o]=k.useState(!0),l=ga();return k.useEffect(()=>{(async()=>{if(t){const u=await er(t.uid);i(u),o(!1)}})()},[t]),r||s?null:t?(n==null?void 0:n.role)==="vendor"&&l.pathname==="/customer-dashboard"?a.jsx(Bl,{to:"/vendor-dashboard"}):(n==null?void 0:n.role)==="customer"&&l.pathname==="/vendor-dashboard"?a.jsx(Bl,{to:"/customer-dashboard"}):a.jsx(a.Fragment,{children:e}):a.jsx(Bl,{to:"/login"})},nq=({isOpen:e,onClose:t})=>{const[r,n]=k.useState("");return P.useEffect(()=>(e?document.body.classList.add("no-scroll"):document.body.classList.remove("no-scroll"),()=>{document.body.classList.remove("no-scroll")}),[e]),e?a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-start justify-center z-50 animate-[fadeIn_0.2s_ease-out]",children:a.jsx("div",{className:"w-full min-h-[60vh] bg-white/90 backdrop-blur-xl rounded-b-2xl transform transition-all animate-[iosSlideUp_0.3s_cubic-bezier(0.175,0.885,0.32,1.275)] shadow-2xl border border-white/20",children:a.jsxs("div",{className:"p-4",children:[a.jsx("div",{className:"flex justify-end mb-2",children:a.jsx("button",{onClick:t,className:"p-2 hover:bg-white/80 rounded-full transition-all active:scale-90",children:a.jsx(Me,{className:"w-6 h-6 text-gray-500"})})}),a.jsx(bd,{isMobile:!0,onClose:t,selectedCity:r,onCityChange:n})]})})}):null},aq=()=>{const[e,t]=k.useState(!1),[r,n]=k.useState(!1),{currentUser:i,logout:s}=Ye(),[o,l]=k.useState(null),c=Ut(),u=ga(),d=k.useRef(null),[f,m]=k.useState("home");k.useEffect(()=>{(async()=>{if(i){const x=await er(i.uid);l(x)}})()},[u.pathname]),k.useEffect(()=>{const p=u.pathname;p==="/"?m("home"):p.includes("/vendor-calendar")?m("calendar"):p.includes("/vendor-offers")?m("offers"):p.includes("/vendor-dashboard")?m("dashboard"):p.includes("/customer/profile")&&m("profile")},[u.pathname]);const v=async()=>{try{await s(),c("/login")}catch(p){console.error("Logout failed",p)}};k.useEffect(()=>{const p=x=>{d.current&&!d.current.contains(x.target)&&t(!1)};return document.addEventListener("mousedown",p),()=>document.removeEventListener("mousedown",p)},[]);const y=p=>`p-2 transition-all duration-200 ios-btn-active relative flex flex-col items-center ${f===p?"text-bilo-navy scale-110":"text-bilo-silver"}`;return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"fixed bottom-0 left-0 right-0 bg-white/90 backdrop-blur-lg border-t border-bilo-gray py-2 px-6 sm:block md:hidden ios-blur shadow-lg z-[100]",children:a.jsx("div",{className:"flex justify-between items-center max-w-md mx-auto",children:i?(o==null?void 0:o.role)==="vendor"?a.jsxs("div",{className:"flex justify-between items-center w-full",children:[a.jsxs("button",{onClick:()=>{m("calendar"),c("/vendor-calendar")},className:y("calendar"),children:[a.jsx(Fe,{className:"w-6 h-6"}),a.jsx("span",{className:"text-xs mt-1 font-medium",children:"Kalenteri"}),f==="calendar"&&a.jsx("span",{className:"absolute -bottom-2 w-1.5 h-1.5 bg-bilo-navy rounded-full"})]}),a.jsxs("button",{onClick:()=>{m("offers"),c("/vendor-offers")},className:y("offers"),children:[a.jsx(dt,{className:"w-6 h-6"}),a.jsx("span",{className:"text-xs mt-1 font-medium",children:"Tarjoukset"}),f==="offers"&&a.jsx("span",{className:"absolute -bottom-2 w-1.5 h-1.5 bg-bilo-navy rounded-full"})]}),a.jsxs("button",{onClick:()=>{m("dashboard"),c("/vendor-dashboard")},className:y("dashboard"),children:[a.jsx(_t,{className:"w-6 h-6"}),a.jsx("span",{className:"text-xs mt-1 font-medium",children:"Kojelauta"}),f==="dashboard"&&a.jsx("span",{className:"absolute -bottom-2 w-1.5 h-1.5 bg-bilo-navy rounded-full"})]}),a.jsxs("button",{onClick:v,className:y("signout"),children:[a.jsx(ii,{className:"w-6 h-6"}),a.jsx("span",{className:"text-xs mt-1 font-medium",children:"Kirjaudu ulos"}),f==="signout"&&a.jsx("span",{className:"absolute -bottom-2 w-1.5 h-1.5 bg-bilo-navy rounded-full"})]})]}):(o==null?void 0:o.role)==="customer"?a.jsxs("div",{className:"flex justify-between items-center w-full",children:[a.jsxs("button",{onClick:()=>{m("home"),u.pathname==="/"?window.scrollTo({top:0,behavior:"smooth"}):c("/")},className:y("home"),children:[a.jsx(Vr,{className:`w-6 h-6 ${f==="home"?"animate-pulse-quick":""}`}),a.jsx("span",{className:"text-xs mt-1 font-medium",children:"Koti"}),f==="home"&&a.jsx("span",{className:"absolute -bottom-2 w-1.5 h-1.5 bg-bilo-navy rounded-full"})]}),a.jsxs("button",{onClick:()=>{m("search"),n(!0)},className:y("search"),children:[a.jsx(zr,{className:"w-6 h-6"}),a.jsx("span",{className:"text-xs mt-1 font-medium",children:"Haku"}),f==="search"&&a.jsx("span",{className:"absolute -bottom-2 w-1.5 h-1.5 bg-bilo-navy rounded-full"})]}),a.jsxs("button",{onClick:()=>{m("profile"),t(!e)},className:y("profile"),children:[a.jsx(bt,{className:"w-6 h-6"}),a.jsx("span",{className:"text-xs mt-1 font-medium",children:"Profiili"}),f==="profile"&&a.jsx("span",{className:"absolute -bottom-2 w-1.5 h-1.5 bg-bilo-navy rounded-full"})]})]}):null:a.jsxs("div",{className:"flex justify-between items-center w-full",children:[a.jsxs("button",{onClick:()=>{m("home"),c("/")},className:y("home"),children:[a.jsx(Vr,{className:"w-6 h-6"}),a.jsx("span",{className:"text-xs mt-1 font-medium",children:"Koti"}),f==="home"&&a.jsx("span",{className:"absolute -bottom-2 w-1.5 h-1.5 bg-bilo-navy rounded-full"})]}),a.jsxs("button",{onClick:()=>{m("search"),n(!0)},className:y("search"),children:[a.jsx(zr,{className:"w-6 h-6"}),a.jsx("span",{className:"text-xs mt-1 font-medium",children:"Haku"}),f==="search"&&a.jsx("span",{className:"absolute -bottom-2 w-1.5 h-1.5 bg-bilo-navy rounded-full"})]}),a.jsxs("button",{onClick:()=>{m("login"),c("/login")},className:y("login"),children:[a.jsx(vd,{className:"w-6 h-6"}),a.jsx("span",{className:"text-xs mt-1 font-medium",children:"Kirjaudu"}),f==="login"&&a.jsx("span",{className:"absolute -bottom-2 w-1.5 h-1.5 bg-bilo-navy rounded-full"})]})]})})}),e&&a.jsx("div",{className:"fixed inset-0 bg-black/50 z-[101] animate-[fadeIn_0.2s_ease-out] md:hidden",children:a.jsxs("div",{ref:d,className:"absolute bottom-0 left-0 right-0 bg-white rounded-t-2xl p-4 space-y-2 animate-[slideUp_0.3s_ease-out] shadow-xl",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4 pb-2 border-b border-bilo-gray",children:[a.jsxs("div",{className:"flex-1",children:[a.jsx("h3",{className:"text-lg font-semibold text-bilo-navy",children:(o==null?void 0:o.firstName)||"Käyttäjä"}),a.jsx("p",{className:"text-sm text-gray-500",children:i==null?void 0:i.email})]}),a.jsx("button",{onClick:()=>t(!1),className:"p-2 hover:bg-bilo-gray rounded-full transition-colors active:scale-95",children:a.jsx(Me,{className:"w-5 h-5 text-bilo-navy"})})]}),(o==null?void 0:o.role)==="customer"&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{c("/customer/profile"),t(!1)},className:"w-full text-left p-3 hover:bg-bilo-gray rounded-lg flex items-center transition-colors active:scale-98",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-bilo-gray flex items-center justify-center mr-3",children:a.jsx(bt,{className:"w-5 h-5 text-bilo-silver"})}),a.jsx("span",{className:"text-bilo-navy font-medium",children:"Profiili"})]}),a.jsxs("button",{onClick:()=>{c("/customer/coins"),t(!1)},className:"w-full text-left p-3 hover:bg-bilo-gray rounded-lg flex items-center transition-colors active:scale-98",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-bilo-gray flex items-center justify-center mr-3",children:a.jsx(gt,{className:"w-5 h-5 text-bilo-silver"})}),a.jsx("span",{className:"text-bilo-navy font-medium",children:"Kolikot"})]}),a.jsxs("button",{onClick:()=>{c("/customer/appointments"),t(!1)},className:"w-full text-left p-3 hover:bg-bilo-gray rounded-lg flex items-center transition-colors active:scale-98",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-bilo-gray flex items-center justify-center mr-3",children:a.jsx(Fe,{className:"w-5 h-5 text-bilo-silver"})}),a.jsx("span",{className:"text-bilo-navy font-medium",children:"Varaukset"})]})]}),(o==null?void 0:o.role)==="vendor"&&a.jsxs(a.Fragment,{children:[a.jsxs("button",{onClick:()=>{c("/vendor-calendar"),t(!1)},className:"w-full text-left p-3 hover:bg-bilo-gray rounded-lg flex items-center transition-colors active:scale-98",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-bilo-gray flex items-center justify-center mr-3",children:a.jsx(Fe,{className:"w-5 h-5 text-bilo-silver"})}),a.jsx("span",{className:"text-bilo-navy font-medium",children:"Kalenteri"})]}),a.jsxs("button",{onClick:()=>{c("/vendor-offers"),t(!1)},className:"w-full text-left p-3 hover:bg-bilo-gray rounded-lg flex items-center transition-colors active:scale-98",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-bilo-gray flex items-center justify-center mr-3",children:a.jsx(dt,{className:"w-5 h-5 text-bilo-silver"})}),a.jsx("span",{className:"text-bilo-navy font-medium",children:"Tarjoukset"})]})]}),(o==null?void 0:o.role)==="admin"&&a.jsxs("button",{onClick:()=>{c("/admin"),t(!1)},className:"w-full text-left p-3 hover:bg-bilo-gray rounded-lg flex items-center transition-colors active:scale-98",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-bilo-gray flex items-center justify-center mr-3",children:a.jsx(dn,{className:"w-5 h-5 text-bilo-silver"})}),a.jsx("span",{className:"text-bilo-navy font-medium",children:"Hallintapaneeli"})]}),i&&a.jsxs("button",{onClick:()=>{v(),t(!1)},className:"w-full text-left p-3 hover:bg-red-50 rounded-lg flex items-center text-red-500 transition-colors mt-4 active:scale-98",children:[a.jsx("div",{className:"w-8 h-8 rounded-full bg-red-50 flex items-center justify-center mr-3",children:a.jsx(ii,{className:"w-5 h-5 text-red-500"})}),a.jsx("span",{className:"font-medium",children:"Kirjaudu ulos"})]})]})}),a.jsx(nq,{isOpen:r,onClose:()=>{n(!1),m("home")}})]})},iq=({isOpen:e,onClose:t,userRole:r})=>{const{currentUser:n}=Ye(),{defaultSubject:i}=hd(),[s,o]=k.useState(i||""),[l,c]=k.useState(""),[u,d]=k.useState(!1),[f,m]=k.useState(null),[v,y]=k.useState(!1);if(k.useEffect(()=>{o(i||"")},[i]),!e)return null;const p=async x=>{if(x.preventDefault(),!!n)try{d(!0),m(null),await X1({userId:n.uid,userRole:r,subject:s,message:l,responses:[]}),y(!0),setTimeout(()=>{t(),y(!1),o(""),c("")},2e3)}catch(j){console.error("Error creating support ticket:",j),m("Virhe tukipyynnön lähetyksessä")}finally{d(!1)}};return a.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center p-4 z-50 animate-[fadeIn_0.2s_ease-out]",onClick:x=>x.target===x.currentTarget&&t(),children:a.jsx("div",{className:"bg-white/90 backdrop-blur-xl rounded-2xl w-full max-w-lg transform transition-all animate-[iosScale_0.3s_cubic-bezier(0.175,0.885,0.32,1.275)] shadow-2xl border border-white/20",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Or,{className:"w-6 h-6 text-blue-600 mr-2"}),a.jsx("h2",{className:"text-xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600",children:"Ota yhteyttä tukeen"})]}),a.jsx("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 p-2 hover:bg-white/80 rounded-full transition-all active:scale-90",children:a.jsx(Me,{className:"w-6 h-6"})})]}),v?a.jsxs("div",{className:"text-center py-8",children:[a.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-green-400 to-green-500 rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg animate-[bounce_1s_ease-in-out_infinite] text-white",children:a.jsx(_s,{className:"w-6 h-6 text-green-600"})}),a.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Tukipyyntö lähetetty!"}),a.jsx("p",{className:"text-gray-600 mt-2",children:"Vastaamme sinulle mahdollisimman pian."})]}):a.jsxs("form",{onSubmit:p,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Aihe"}),a.jsx("input",{type:"text",value:s,onChange:x=>o(x.target.value),className:`mt-1 block w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 bg-gray-50/50 focus:bg-white transition-all ${i?"bg-gray-100":""} placeholder-gray-400`,readOnly:!!i,required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Viesti"}),a.jsx("textarea",{value:l,onChange:x=>c(x.target.value),rows:4,className:"mt-1 block w-full rounded-xl border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 bg-gray-50/50 focus:bg-white transition-all resize-none placeholder-gray-400",required:!0,placeholder:"Kerro, miten voimme auttaa..."})]}),f&&a.jsx("div",{className:"bg-red-50 rounded-xl border border-red-100 p-4 animate-[fadeIn_0.2s_ease-out]",children:a.jsx("p",{className:"text-sm text-red-700",children:f})}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-xl transition-all active:scale-95",children:"Peruuta"}),a.jsx("button",{type:"submit",disabled:u,className:"px-6 py-2.5 bg-gradient-to-r from-blue-600 to-indigo-600 text-white rounded-xl hover:opacity-90 disabled:opacity-50 flex items-center transform transition-all active:scale-95 shadow-lg font-medium",children:u?a.jsxs(a.Fragment,{children:[a.jsx(Je,{className:"animate-spin h-5 w-5 mr-2"}),"Lähetetään..."]}):a.jsxs(a.Fragment,{children:[a.jsx(_s,{className:"h-5 w-5 mr-2"}),"Lähetä"]})})]})]})]})})})},sq=()=>{const{currentUser:e}=Ye(),{showSupportDialog:t,setShowSupportDialog:r}=hd(),n=ga(),[i,s]=P.useState(null),[o,l]=P.useState("forward"),c=P.useRef(n.pathname);return P.useEffect(()=>{const u=n.pathname.length>c.current.length;l(u?"forward":"backward"),c.current=n.pathname},[n.pathname]),P.useEffect(()=>{(async()=>{if(e){const d=await er(e.uid);s((d==null?void 0:d.role)||null)}})()},[e]),P.useEffect(()=>{r(!1)},[n.pathname]),a.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20 md:pb-0",children:[a.jsx("div",{className:"hidden md:block",children:a.jsx(ON,{})}),a.jsx(SN,{}),a.jsx("div",{className:`page-transition ${o}`,children:a.jsxs(Ib,{location:n,children:[a.jsx(ct,{path:"/",element:a.jsx($N,{})}),a.jsx(ct,{path:"/search",element:a.jsx(CN,{})}),a.jsx(ct,{path:"/login",element:a.jsx(Zz,{})}),a.jsx(ct,{path:"/email-verified",element:a.jsx(eq,{})}),a.jsx(ct,{path:"/register",element:a.jsx(Jz,{})}),a.jsx(ct,{path:"/auth/action",element:a.jsx(tq,{})}),a.jsx(ct,{path:"/vendor/:id",element:a.jsx(o2,{})}),a.jsx(ct,{path:"/admin",element:a.jsx(Dr,{children:a.jsx(Qz,{})})}),a.jsx(ct,{path:"/customer/profile",element:a.jsx(Dr,{children:a.jsx(MN,{})})}),a.jsx(ct,{path:"/customer/coins",element:a.jsx(Dr,{children:a.jsx(LN,{})})}),a.jsx(ct,{path:"/customer/appointments",element:a.jsx(Dr,{children:a.jsx(FN,{})})}),a.jsx(ct,{path:"/vendor-dashboard",element:a.jsx(Dr,{children:a.jsx(a2,{})})}),a.jsx(ct,{path:"/vendor-offers",element:a.jsx(Dr,{children:a.jsx(d2,{})})}),a.jsx(ct,{path:"/vendor-calendar",element:a.jsx(Dr,{children:a.jsx(h2,{})})}),a.jsx(ct,{path:"/vendor-settings",element:a.jsx(Dr,{children:a.jsx(c2,{})})}),a.jsx(ct,{path:"*",element:a.jsx(rq,{})})]})}),a.jsx(aq,{}),t&&i&&a.jsx(iq,{isOpen:t,onClose:()=>r(!1),userRole:i})]})};function oq(){return a.jsx(xy,{children:a.jsx(J1,{children:a.jsx(eN,{children:a.jsx(Rb,{children:a.jsx(sq,{})})})})})}dy(document.getElementById("root")).render(a.jsx(k.StrictMode,{children:a.jsx(oq,{})}));
